@page "/userspage"
@using SimpleBank.AcctManage.UI.Blazor.Server.Services
@using SimpleBank.AcctManage.UI.Blazor.Server.Services.Requests

@inject AuthService authService
@inject UserService userService


<h3>UsersPage</h3>

<div class="container-md rounded">

    <h4>Login</h4>
    <EditForm Model="@loginUserRequest" OnSubmit="CallAPIToLogin">
        <DataAnnotationsValidator />
        <div class="form-group">
            <InputText class="form-control" id="inputUsername1"  placeholder="Username" @bind-Value="loginUserRequest.Username" />
            <ValidationMessage For="@(() => loginUserRequest.Username)"></ValidationMessage>
        </div>
        <div class="form-group">
            <InputText type="password" class="form-control" id="inputPassword1" placeholder="Password" @bind-Value="loginUserRequest.Password" />
            <ValidationMessage For="@(() => loginUserRequest.Password)"></ValidationMessage>
        </div>
        <button type="submit" class="btn btn-dark">Login</button>
        <button class="btn-sm btn-outline-dark float-right" @onclick="@AutoFill">AutoFill</button>
    </EditForm>

</div>


@code {
    private LoginUserRequest loginUserRequest = new();
    private void AutoFill() => loginUserRequest = new LoginUserRequest() { Username = "Dummytester2", Password = "123456789" };

    private async Task CallAPIToLogin()
    {
        var userLogged = await authService.Login(loginUserRequest);
    }




}
