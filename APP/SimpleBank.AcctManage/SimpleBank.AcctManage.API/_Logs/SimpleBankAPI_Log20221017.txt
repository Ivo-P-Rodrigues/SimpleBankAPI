2022-10-17 16:53:42.146 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 16:53:42.287 +01:00 [DBG] Hosting starting
2022-10-17 16:53:42.354 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 16:53:42.360 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 16:53:42.375 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 16:53:42.377 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 16:53:42.385 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 16:53:42.393 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 16:53:42.394 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 16:53:42.402 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 16:53:42.405 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 16:53:42.409 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 16:53:42.411 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 16:53:42.416 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 16:53:42.418 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 16:53:42.424 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 16:53:42.425 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 16:53:42.834 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 16:53:42.980 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 16:53:42.986 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 16:53:42.988 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 16:53:42.990 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 16:53:42.994 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 16:53:42.996 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 16:53:42.997 +01:00 [INF] Hosting environment: Development
2022-10-17 16:53:43.008 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 16:53:43.012 +01:00 [DBG] Hosting started
2022-10-17 16:53:43.429 +01:00 [DBG] Connection id "0HMLGAV2ACEJB" accepted.
2022-10-17 16:53:43.434 +01:00 [DBG] Connection id "0HMLGAV2ACEJC" accepted.
2022-10-17 16:53:43.440 +01:00 [DBG] Connection id "0HMLGAV2ACEJB" started.
2022-10-17 16:53:43.445 +01:00 [DBG] Connection id "0HMLGAV2ACEJC" started.
2022-10-17 16:53:46.050 +01:00 [DBG] Connection id "0HMLGAV2ACEJD" accepted.
2022-10-17 16:53:46.055 +01:00 [DBG] Connection id "0HMLGAV2ACEJD" started.
2022-10-17 16:53:46.153 +01:00 [DBG] Connection 0HMLGAV2ACEJD established using the following protocol: "Tls13"
2022-10-17 16:53:46.261 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger - -
2022-10-17 16:53:46.365 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 16:53:47.038 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger - - - 301 0 - 780.5874ms
2022-10-17 16:53:47.062 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-17 16:53:47.170 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 16:53:47.447 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 16:53:47.450 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 387.9505ms
2022-10-17 16:53:47.536 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 16:53:47.536 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/swagger-ui-standalone-preset.js - -
2022-10-17 16:53:47.536 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 16:53:47.537 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/swagger-ui-bundle.js - -
2022-10-17 16:53:47.537 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/swagger-ui.css - -
2022-10-17 16:53:47.558 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 22.0605ms
2022-10-17 16:53:47.615 +01:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-10-17 16:53:47.615 +01:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-10-17 16:53:47.719 +01:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-10-17 16:53:47.722 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 185.1860ms
2022-10-17 16:53:47.728 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 191.4920ms
2022-10-17 16:53:47.728 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/swagger-ui.css - - - 200 143632 text/css 191.0984ms
2022-10-17 16:53:47.843 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 306.5729ms
2022-10-17 16:53:48.002 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/favicon-16x16.png - -
2022-10-17 16:53:48.033 +01:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2022-10-17 16:53:48.042 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/favicon-16x16.png - - - 200 665 image/png 40.0682ms
2022-10-17 16:53:48.085 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 16:53:48.371 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 285.8391ms
2022-10-17 16:53:53.498 +01:00 [DBG] Authentication of the HTTPS connection timed out.
2022-10-17 16:53:53.498 +01:00 [DBG] Authentication of the HTTPS connection timed out.
2022-10-17 16:53:53.503 +01:00 [DBG] Connection id "0HMLGAV2ACEJB" stopped.
2022-10-17 16:53:53.503 +01:00 [DBG] Connection id "0HMLGAV2ACEJC" stopped.
2022-10-17 16:53:53.505 +01:00 [DBG] Connection id "0HMLGAV2ACEJB" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 16:53:53.506 +01:00 [DBG] Connection id "0HMLGAV2ACEJC" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 16:55:27.943 +01:00 [DBG] Connection id "0HMLGAV2ACEJE" received FIN.
2022-10-17 16:55:27.946 +01:00 [DBG] Connection id "0HMLGAV2ACEJE" accepted.
2022-10-17 16:55:27.947 +01:00 [DBG] Connection id "0HMLGAV2ACEJE" started.
2022-10-17 16:55:27.954 +01:00 [DBG] Connection id "0HMLGAV2ACEJF" accepted.
2022-10-17 16:55:27.957 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 16:55:27.957 +01:00 [DBG] Connection id "0HMLGAV2ACEJF" started.
2022-10-17 16:55:28.026 +01:00 [DBG] Connection id "0HMLGAV2ACEJE" stopped.
2022-10-17 16:55:28.029 +01:00 [DBG] Connection id "0HMLGAV2ACEJE" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 16:55:28.041 +01:00 [DBG] Connection 0HMLGAV2ACEJF established using the following protocol: "Tls13"
2022-10-17 16:55:28.053 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/ application/json 137
2022-10-17 16:55:28.055 +01:00 [DBG] POST requests are not supported
2022-10-17 16:55:28.084 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/'
2022-10-17 16:55:28.091 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)' with route pattern 'api/Users' is valid for the request path '/api/users/'
2022-10-17 16:55:28.094 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 16:55:28.195 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 16:55:28.200 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 16:55:28.206 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 16:55:28.243 +01:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] Create(SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 16:55:28.247 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 16:55:28.248 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 16:55:28.250 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 16:55:28.254 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 16:55:28.258 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 16:55:28.260 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 16:55:28.515 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 16:55:28.548 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 16:55:28.567 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' ...
2022-10-17 16:55:28.574 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' using the name '' in request data ...
2022-10-17 16:55:28.577 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 16:55:28.587 +01:00 [DBG] Connection id "0HMLGAV2ACEJF", Request id "0HMLGAV2ACEJF:00000002": started reading request body.
2022-10-17 16:55:28.590 +01:00 [DBG] Connection id "0HMLGAV2ACEJF", Request id "0HMLGAV2ACEJF:00000002": done reading request body.
2022-10-17 16:55:28.598 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'
2022-10-17 16:55:28.599 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 16:55:28.603 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 16:55:28.605 +01:00 [DBG] Attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' ...
2022-10-17 16:55:28.614 +01:00 [DBG] Done attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 16:55:29.818 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 16:55:29.865 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 16:55:29.952 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 16:55:29.964 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 16:55:29.978 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 16:55:29.999 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 16:55:30.151 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 16:55:30.433 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:55:30.442 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 16:55:30.458 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 16:55:30.533 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 16:55:30.544 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2022-10-17 16:55:30.566 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?', @p3='?', @p4='?' (DbType = Binary), @p5='?' (DbType = Binary), @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (user_id, created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING password_changed_at;
2022-10-17 16:55:30.690 +01:00 [INF] Executed DbCommand (130ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?', @p3='?', @p4='?' (DbType = Binary), @p5='?' (DbType = Binary), @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (user_id, created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING password_changed_at;
2022-10-17 16:55:30.742 +01:00 [DBG] A data reader was disposed.
2022-10-17 16:55:30.760 +01:00 [DBG] Committing transaction.
2022-10-17 16:55:30.781 +01:00 [DBG] Committed transaction.
2022-10-17 16:55:30.790 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:55:30.799 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 16:55:30.807 +01:00 [DBG] Disposing transaction.
2022-10-17 16:55:30.823 +01:00 [DBG] An entity of type 'User' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 16:55:30.829 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 16:55:30.849 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 16:55:30.853 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 16:55:30.856 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 16:55:30.857 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 16:55:30.858 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 16:55:30.860 +01:00 [INF] Executing CreatedResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-17 16:55:30.877 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API) in 2611.0112ms
2022-10-17 16:55:30.881 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 16:55:30.884 +01:00 [DBG] Connection id "0HMLGAV2ACEJF" completed keep alive response.
2022-10-17 16:55:30.888 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 16:55:30.894 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/ application/json 137 - 201 - application/json;+charset=utf-8 2841.3285ms
2022-10-17 16:55:50.818 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 16:55:50.819 +01:00 [DBG] POST requests are not supported
2022-10-17 16:55:50.821 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 16:55:50.822 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 16:55:50.824 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 16:55:50.827 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 16:55:50.828 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 16:55:50.829 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 16:55:50.833 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 16:55:50.835 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 16:55:50.837 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 16:55:50.838 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 16:55:50.840 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 16:55:50.842 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 16:55:50.844 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 16:55:50.846 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 16:55:50.863 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 16:55:50.865 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 16:55:50.867 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 16:55:50.868 +01:00 [DBG] Connection id "0HMLGAV2ACEJF", Request id "0HMLGAV2ACEJF:00000003": started reading request body.
2022-10-17 16:55:50.869 +01:00 [DBG] Connection id "0HMLGAV2ACEJF", Request id "0HMLGAV2ACEJF:00000003": done reading request body.
2022-10-17 16:55:50.871 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 16:55:50.872 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 16:55:50.875 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 16:55:50.877 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 16:55:50.879 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 16:55:50.935 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 16:55:50.999 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-17 16:55:51.406 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 16:55:51.456 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 16:55:51.459 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 16:55:51.463 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 16:55:51.465 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:55:51.467 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 16:55:51.477 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 16:55:51.492 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 16:55:51.502 +01:00 [DBG] A data reader was disposed.
2022-10-17 16:55:51.505 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:55:51.507 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 16:55:51.513 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-17 16:55:51.518 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 16:55:51.520 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 16:55:51.521 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 16:55:51.523 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 16:55:51.524 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:55:51.527 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 16:55:51.542 +01:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 16:55:51.547 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:55:51.548 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 16:55:51.563 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Npgsql.PostgresException (0x80004005): 42P01: relation "SB-auth.UserTokens" does not exist

POSITION: 143
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|215_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "SB-auth.UserTokens" does not exist
    Position: 143
    File: parse_relation.c
    Line: 1159
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: relation "SB-auth.UserTokens" does not exist

POSITION: 143
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|215_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "SB-auth.UserTokens" does not exist
    Position: 143
    File: parse_relation.c
    Line: 1159
    Routine: parserOpenTable
2022-10-17 16:55:51.770 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 926.5282ms
2022-10-17 16:55:51.775 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 16:55:51.781 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Npgsql.PostgresException (0x80004005): 42P01: relation "SB-auth.UserTokens" does not exist

POSITION: 143
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|215_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method105(Closure , QueryContext )
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at SimpleBank.AcctManage.Infrastructure.Persistence.Repositories.Common.CommonRepository`1.FirstOrDefault(Expression`1 predicate) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Infrastructure.Persistence\Repositories\Common\CommonRepository.cs:line 93
   at SimpleBank.AcctManage.Infrastructure.Auth.AuthenthicationProvider.ProcessLoginAsync(Guid userId) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Infrastructure.Auth\AuthenticationProvider.cs:line 29
   at SimpleBank.AcctManage.API.Controllers.UsersController.Login(LoginUserRequest loginUserRequest) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\Controllers\UsersController.cs:line 79
   at lambda_method97(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "SB-auth.UserTokens" does not exist
    Position: 143
    File: parse_relation.c
    Line: 1159
    Routine: parserOpenTable
2022-10-17 16:55:51.863 +01:00 [DBG] Connection id "0HMLGAV2ACEJF" completed keep alive response.
2022-10-17 16:55:51.865 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 16:55:51.866 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 500 - text/plain;+charset=utf-8 1047.9952ms
2022-10-17 16:58:58.901 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 16:58:59.148 +01:00 [DBG] Hosting starting
2022-10-17 16:58:59.255 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 16:58:59.263 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 16:58:59.281 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 16:58:59.283 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 16:58:59.295 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 16:58:59.304 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 16:58:59.306 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 16:58:59.325 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 16:58:59.335 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 16:58:59.340 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 16:58:59.342 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 16:58:59.350 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 16:58:59.354 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 16:58:59.359 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 16:58:59.360 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 16:58:59.633 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 16:58:59.741 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 16:58:59.755 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 16:58:59.757 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 16:58:59.758 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 16:58:59.760 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 16:58:59.762 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 16:58:59.764 +01:00 [INF] Hosting environment: Development
2022-10-17 16:58:59.765 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 16:58:59.767 +01:00 [DBG] Hosting started
2022-10-17 16:59:00.198 +01:00 [DBG] Connection id "0HMLGB20NBFDM" accepted.
2022-10-17 16:59:00.198 +01:00 [DBG] Connection id "0HMLGB20NBFDN" accepted.
2022-10-17 16:59:00.202 +01:00 [DBG] Connection id "0HMLGB20NBFDM" started.
2022-10-17 16:59:00.202 +01:00 [DBG] Connection id "0HMLGB20NBFDN" started.
2022-10-17 16:59:00.226 +01:00 [DBG] Connection id "0HMLGB20NBFDN" received FIN.
2022-10-17 16:59:00.226 +01:00 [DBG] Connection id "0HMLGB20NBFDM" received FIN.
2022-10-17 16:59:00.237 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 16:59:00.237 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 16:59:00.344 +01:00 [DBG] Connection id "0HMLGB20NBFDN" stopped.
2022-10-17 16:59:00.347 +01:00 [DBG] Connection id "0HMLGB20NBFDM" stopped.
2022-10-17 16:59:00.352 +01:00 [DBG] Connection id "0HMLGB20NBFDM" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 16:59:00.352 +01:00 [DBG] Connection id "0HMLGB20NBFDN" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 16:59:00.774 +01:00 [DBG] Connection id "0HMLGB20NBFDO" accepted.
2022-10-17 16:59:00.776 +01:00 [DBG] Connection id "0HMLGB20NBFDO" started.
2022-10-17 16:59:00.837 +01:00 [ERR] BackgroundService failed
Confluent.Kafka.ConsumeException: Subscribed topic not available: transfer: Broker: Unknown topic or partition
   at Confluent.Kafka.Consumer`2.Consume(Int32 millisecondsTimeout)
   at Confluent.Kafka.Consumer`2.Consume(CancellationToken cancellationToken)
   at SimpleBank.AcctManage.Infrastructure.Providers.Notification.ConsumerService.TransferNotificationConsumerThread`1.ExecuteAsync(CancellationToken cancellationToken) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Infrastructure.Providers\TransferMailNotification\ConsumerService\TransferNotificationConsumerThread.cs:line 31
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2022-10-17 16:59:00.901 +01:00 [DBG] Connection 0HMLGB20NBFDO established using the following protocol: "Tls13"
2022-10-17 16:59:00.909 +01:00 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted.
Confluent.Kafka.ConsumeException: Subscribed topic not available: transfer: Broker: Unknown topic or partition
   at Confluent.Kafka.Consumer`2.Consume(Int32 millisecondsTimeout)
   at Confluent.Kafka.Consumer`2.Consume(CancellationToken cancellationToken)
   at SimpleBank.AcctManage.Infrastructure.Providers.Notification.ConsumerService.TransferNotificationConsumerThread`1.ExecuteAsync(CancellationToken cancellationToken) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Infrastructure.Providers\TransferMailNotification\ConsumerService\TransferNotificationConsumerThread.cs:line 31
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2022-10-17 16:59:00.913 +01:00 [INF] Application is shutting down...
2022-10-17 16:59:00.916 +01:00 [DBG] Hosting stopping
2022-10-17 16:59:00.940 +01:00 [DBG] Connection id "0HMLGB20NBFDO" is closing.
2022-10-17 16:59:00.946 +01:00 [DBG] Connection id "0HMLGB20NBFDO" is closed. The last processed stream ID was 0.
2022-10-17 16:59:00.950 +01:00 [DBG] Connection id "0HMLGB20NBFDO" received FIN.
2022-10-17 16:59:00.951 +01:00 [DBG] Connection id "0HMLGB20NBFDO" sending FIN because: "The client closed the connection."
2022-10-17 16:59:00.954 +01:00 [DBG] Connection id "0HMLGB20NBFDO" stopped.
2022-10-17 16:59:00.960 +01:00 [DBG] Hosting stopped
2022-10-17 16:59:36.640 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 16:59:36.757 +01:00 [DBG] Hosting starting
2022-10-17 16:59:36.797 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 16:59:36.801 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 16:59:36.806 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 16:59:36.807 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 16:59:36.814 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 16:59:36.820 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 16:59:36.822 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 16:59:36.831 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 16:59:36.835 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 16:59:36.838 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 16:59:36.840 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 16:59:36.845 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 16:59:36.848 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 16:59:36.852 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 16:59:36.853 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 16:59:36.996 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 16:59:37.044 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 16:59:37.046 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 16:59:37.047 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 16:59:37.048 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 16:59:37.049 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 16:59:37.050 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 16:59:37.051 +01:00 [INF] Hosting environment: Development
2022-10-17 16:59:37.052 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 16:59:37.053 +01:00 [DBG] Hosting started
2022-10-17 16:59:37.336 +01:00 [DBG] Connection id "0HMLGB2BPIGN7" received FIN.
2022-10-17 16:59:37.338 +01:00 [DBG] Connection id "0HMLGB2BPIGN8" received FIN.
2022-10-17 16:59:37.348 +01:00 [DBG] Connection id "0HMLGB2BPIGN8" accepted.
2022-10-17 16:59:37.348 +01:00 [DBG] Connection id "0HMLGB2BPIGN7" accepted.
2022-10-17 16:59:37.365 +01:00 [DBG] Connection id "0HMLGB2BPIGN7" started.
2022-10-17 16:59:37.365 +01:00 [DBG] Connection id "0HMLGB2BPIGN8" started.
2022-10-17 16:59:37.389 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 16:59:37.389 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 16:59:37.438 +01:00 [DBG] Connection id "0HMLGB2BPIGN8" stopped.
2022-10-17 16:59:37.439 +01:00 [DBG] Connection id "0HMLGB2BPIGN7" stopped.
2022-10-17 16:59:37.448 +01:00 [DBG] Connection id "0HMLGB2BPIGN7" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 16:59:37.448 +01:00 [DBG] Connection id "0HMLGB2BPIGN8" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 16:59:37.655 +01:00 [DBG] Connection id "0HMLGB2BPIGN9" accepted.
2022-10-17 16:59:37.656 +01:00 [DBG] Connection id "0HMLGB2BPIGN9" started.
2022-10-17 16:59:37.707 +01:00 [DBG] Connection 0HMLGB2BPIGN9 established using the following protocol: "Tls13"
2022-10-17 16:59:37.754 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 16:59:37.798 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 16:59:37.944 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 16:59:38.090 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 16:59:38.094 +01:00 [DBG] Connection id "0HMLGB2BPIGN9" completed keep alive response.
2022-10-17 16:59:38.098 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 346.5713ms
2022-10-17 16:59:38.136 +01:00 [DBG] Connection id "0HMLGB2BPIGNA" accepted.
2022-10-17 16:59:38.138 +01:00 [DBG] Connection id "0HMLGB2BPIGNA" started.
2022-10-17 16:59:38.139 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 16:59:38.148 +01:00 [DBG] Connection 0HMLGB2BPIGNA established using the following protocol: "Tls13"
2022-10-17 16:59:38.152 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 16:59:38.160 +01:00 [DBG] Connection id "0HMLGB2BPIGNA" completed keep alive response.
2022-10-17 16:59:38.163 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 10.9817ms
2022-10-17 16:59:38.189 +01:00 [DBG] Connection id "0HMLGB2BPIGN9" completed keep alive response.
2022-10-17 16:59:38.191 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 51.1783ms
2022-10-17 16:59:38.371 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 16:59:38.577 +01:00 [DBG] Connection id "0HMLGB2BPIGN9" completed keep alive response.
2022-10-17 16:59:38.579 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 207.5789ms
2022-10-17 16:59:45.001 +01:00 [DBG] Connection id "0HMLGB2BPIGNB" received FIN.
2022-10-17 16:59:45.006 +01:00 [DBG] Connection id "0HMLGB2BPIGNB" accepted.
2022-10-17 16:59:45.008 +01:00 [DBG] Connection id "0HMLGB2BPIGNB" started.
2022-10-17 16:59:45.009 +01:00 [DBG] Connection id "0HMLGB2BPIGNC" accepted.
2022-10-17 16:59:45.011 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 16:59:45.012 +01:00 [DBG] Connection id "0HMLGB2BPIGNC" started.
2022-10-17 16:59:45.014 +01:00 [DBG] Connection id "0HMLGB2BPIGNB" stopped.
2022-10-17 16:59:45.016 +01:00 [DBG] Connection id "0HMLGB2BPIGNB" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 16:59:45.025 +01:00 [DBG] Connection 0HMLGB2BPIGNC established using the following protocol: "Tls13"
2022-10-17 16:59:45.029 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/ application/json 137
2022-10-17 16:59:45.031 +01:00 [DBG] POST requests are not supported
2022-10-17 16:59:45.067 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/'
2022-10-17 16:59:45.072 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)' with route pattern 'api/Users' is valid for the request path '/api/users/'
2022-10-17 16:59:45.078 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 16:59:45.222 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 16:59:45.232 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 16:59:45.234 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 16:59:45.271 +01:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] Create(SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 16:59:45.274 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 16:59:45.277 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 16:59:45.279 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 16:59:45.281 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 16:59:45.282 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 16:59:45.285 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 16:59:45.550 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 16:59:45.589 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 16:59:45.599 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' ...
2022-10-17 16:59:45.603 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' using the name '' in request data ...
2022-10-17 16:59:45.605 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 16:59:45.614 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000002": started reading request body.
2022-10-17 16:59:45.616 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000002": done reading request body.
2022-10-17 16:59:45.623 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'
2022-10-17 16:59:45.626 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 16:59:45.628 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 16:59:45.629 +01:00 [DBG] Attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' ...
2022-10-17 16:59:45.638 +01:00 [DBG] Done attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 16:59:46.872 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 16:59:46.918 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 16:59:47.005 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 16:59:47.016 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 16:59:47.023 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 16:59:47.048 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 16:59:47.166 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 16:59:47.404 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:59:47.413 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 16:59:47.427 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 16:59:47.508 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 16:59:47.520 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2022-10-17 16:59:47.541 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?', @p3='?', @p4='?' (DbType = Binary), @p5='?' (DbType = Binary), @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (user_id, created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING password_changed_at;
2022-10-17 16:59:47.666 +01:00 [INF] Executed DbCommand (129ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?', @p3='?', @p4='?' (DbType = Binary), @p5='?' (DbType = Binary), @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (user_id, created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING password_changed_at;
2022-10-17 16:59:47.719 +01:00 [DBG] A data reader was disposed.
2022-10-17 16:59:47.735 +01:00 [DBG] Committing transaction.
2022-10-17 16:59:47.751 +01:00 [DBG] Committed transaction.
2022-10-17 16:59:47.760 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:59:47.771 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 16:59:47.777 +01:00 [DBG] Disposing transaction.
2022-10-17 16:59:47.794 +01:00 [DBG] An entity of type 'User' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 16:59:47.802 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 16:59:47.824 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 16:59:47.831 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 16:59:47.833 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 16:59:47.834 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 16:59:47.835 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 16:59:47.837 +01:00 [INF] Executing CreatedResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-17 16:59:47.853 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API) in 2564.4922ms
2022-10-17 16:59:47.856 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 16:59:47.859 +01:00 [DBG] Connection id "0HMLGB2BPIGNC" completed keep alive response.
2022-10-17 16:59:47.867 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 16:59:47.874 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/ application/json 137 - 201 - application/json;+charset=utf-8 2845.0278ms
2022-10-17 16:59:52.022 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 16:59:52.025 +01:00 [DBG] POST requests are not supported
2022-10-17 16:59:52.027 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 16:59:52.029 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 16:59:52.030 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 16:59:52.036 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 16:59:52.038 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 16:59:52.038 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 16:59:52.042 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 16:59:52.044 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 16:59:52.045 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 16:59:52.047 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 16:59:52.050 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 16:59:52.052 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 16:59:52.053 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 16:59:52.055 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 16:59:52.061 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 16:59:52.062 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 16:59:52.063 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 16:59:52.067 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000003": started reading request body.
2022-10-17 16:59:52.068 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000003": done reading request body.
2022-10-17 16:59:52.070 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 16:59:52.071 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 16:59:52.072 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 16:59:52.074 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 16:59:52.075 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 16:59:52.131 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 16:59:52.193 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-17 16:59:52.577 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 16:59:52.621 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 16:59:52.623 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 16:59:52.626 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 16:59:52.628 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:59:52.630 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 16:59:52.639 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 16:59:52.654 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 16:59:52.663 +01:00 [DBG] A data reader was disposed.
2022-10-17 16:59:52.668 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:59:52.672 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 16:59:52.676 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-17 16:59:52.681 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 16:59:52.687 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 16:59:52.687 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 16:59:52.689 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 16:59:52.690 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:59:52.691 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 16:59:52.696 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 16:59:52.699 +01:00 [DBG] A data reader was disposed.
2022-10-17 16:59:52.701 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:59:52.704 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 16:59:52.898 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 16:59:52.903 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 16:59:52.904 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 16:59:52.910 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 16:59:52.912 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 16:59:52.913 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:59:52.915 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 16:59:52.917 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 16:59:52.919 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 16:59:52.920 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 16:59:52.922 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 16:59:52.930 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 16:59:52.938 +01:00 [DBG] A data reader was disposed.
2022-10-17 16:59:52.939 +01:00 [DBG] Committing transaction.
2022-10-17 16:59:52.942 +01:00 [DBG] Committed transaction.
2022-10-17 16:59:52.943 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 16:59:52.944 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 16:59:52.945 +01:00 [DBG] Disposing transaction.
2022-10-17 16:59:52.947 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 16:59:52.950 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 16:59:52.955 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 16:59:52.958 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 16:59:52.959 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 16:59:52.960 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 16:59:52.961 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 16:59:52.963 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-17 16:59:52.967 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 913.6113ms
2022-10-17 16:59:52.970 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 16:59:52.971 +01:00 [DBG] Connection id "0HMLGB2BPIGNC" completed keep alive response.
2022-10-17 16:59:52.972 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 16:59:52.974 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 200 - application/json;+charset=utf-8 951.0872ms
2022-10-17 17:00:18.182 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts - -
2022-10-17 17:00:18.184 +01:00 [DBG] The request path  does not match the path filter
2022-10-17 17:00:18.185 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts'
2022-10-17 17:00:18.186 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts'
2022-10-17 17:00:18.188 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 17:00:18.279 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:00:18.282 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:00:18.283 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 17:00:18.286 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 17:00:18.289 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:00:18.290 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:00:18.293 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:00:18.295 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:00:18.296 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:00:18.298 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 17:00:18.300 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 17:00:18.312 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:00:18.318 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(account => account.UserId == __userId_0)'
2022-10-17 17:00:18.321 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
        SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
        FROM SB-operational.Accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-17 17:00:18.324 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:00:18.326 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:00:18.327 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:00:18.329 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:00:18.330 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 17:00:18.334 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 17:00:18.337 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:00:18.337 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:00:18.339 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:00:18.342 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:00:18.346 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:00:18.347 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-10-17 17:00:18.350 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-10-17 17:00:18.352 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-10-17 17:00:18.354 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 56.312ms
2022-10-17 17:00:18.356 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 17:00:18.357 +01:00 [DBG] Connection id "0HMLGB2BPIGNC" completed keep alive response.
2022-10-17 17:00:18.360 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:00:18.362 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts - - - 404 - application/problem+json;+charset=utf-8 179.2694ms
2022-10-17 17:00:22.880 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/Accounts/ application/json 45
2022-10-17 17:00:22.885 +01:00 [DBG] POST requests are not supported
2022-10-17 17:00:22.885 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/'
2022-10-17 17:00:22.887 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/Accounts/'
2022-10-17 17:00:22.889 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 17:00:22.890 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:00:22.891 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:00:22.891 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 17:00:22.895 +01:00 [INF] Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]] CreateAccount(SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 17:00:22.899 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:00:22.901 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:00:22.902 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:00:22.904 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:00:22.905 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:00:22.907 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 17:00:22.908 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 17:00:22.910 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' ...
2022-10-17 17:00:22.911 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' using the name '' in request data ...
2022-10-17 17:00:22.915 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:00:22.918 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000005": started reading request body.
2022-10-17 17:00:22.919 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000005": done reading request body.
2022-10-17 17:00:22.924 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'
2022-10-17 17:00:22.925 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 17:00:22.926 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 17:00:22.928 +01:00 [DBG] Attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' ...
2022-10-17 17:00:22.932 +01:00 [DBG] Done attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 17:00:22.936 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:00:22.939 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:00:22.956 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:00:22.958 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:00:22.960 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:00:22.967 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:00:22.969 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:00:22.970 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:00:22.971 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:00:22.972 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:00:22.974 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:00:22.975 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:00:22.977 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (account_id, balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-10-17 17:00:22.995 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (account_id, balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-10-17 17:00:22.998 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:00:22.998 +01:00 [DBG] Committing transaction.
2022-10-17 17:00:23.001 +01:00 [DBG] Committed transaction.
2022-10-17 17:00:23.002 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:00:23.003 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:00:23.004 +01:00 [DBG] Disposing transaction.
2022-10-17 17:00:23.006 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:00:23.007 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 17:00:23.010 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:00:23.013 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:00:23.014 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:00:23.015 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:00:23.016 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 17:00:23.017 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse'.
2022-10-17 17:00:23.036 +01:00 [DBG] Found the endpoints ["SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2022-10-17 17:00:23.046 +01:00 [DBG] Successfully processed template api/Accounts/{accountId} for SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) resulting in /api/Accounts/429d84ce-790c-4db8-b48b-b1433ffc6be9 and 
2022-10-17 17:00:23.050 +01:00 [DBG] Link generation succeeded for endpoints ["SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] with result /api/Accounts/429d84ce-790c-4db8-b48b-b1433ffc6be9
2022-10-17 17:00:23.057 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API) in 150.1543ms
2022-10-17 17:00:23.059 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 17:00:23.061 +01:00 [DBG] Connection id "0HMLGB2BPIGNC" completed keep alive response.
2022-10-17 17:00:23.062 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:00:23.064 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/Accounts/ application/json 45 - 201 - application/json;+charset=utf-8 183.9626ms
2022-10-17 17:00:25.152 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/Accounts/ application/json 45
2022-10-17 17:00:25.155 +01:00 [DBG] POST requests are not supported
2022-10-17 17:00:25.156 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/'
2022-10-17 17:00:25.157 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/Accounts/'
2022-10-17 17:00:25.158 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 17:00:25.159 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:00:25.160 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:00:25.161 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 17:00:25.163 +01:00 [INF] Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]] CreateAccount(SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 17:00:25.165 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:00:25.168 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:00:25.170 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:00:25.171 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:00:25.173 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:00:25.174 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 17:00:25.180 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 17:00:25.183 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' ...
2022-10-17 17:00:25.186 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' using the name '' in request data ...
2022-10-17 17:00:25.188 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:00:25.190 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000006": started reading request body.
2022-10-17 17:00:25.191 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000006": done reading request body.
2022-10-17 17:00:25.192 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'
2022-10-17 17:00:25.193 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 17:00:25.195 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 17:00:25.196 +01:00 [DBG] Attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' ...
2022-10-17 17:00:25.199 +01:00 [DBG] Done attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 17:00:25.202 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:00:25.204 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:00:25.205 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:00:25.206 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:00:25.207 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:00:25.208 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:00:25.209 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:00:25.211 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:00:25.212 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:00:25.213 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:00:25.214 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:00:25.217 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 17:00:25.219 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (account_id, balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-10-17 17:00:25.225 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (account_id, balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-10-17 17:00:25.229 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:00:25.229 +01:00 [DBG] Committing transaction.
2022-10-17 17:00:25.236 +01:00 [DBG] Committed transaction.
2022-10-17 17:00:25.237 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:00:25.239 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:00:25.241 +01:00 [DBG] Disposing transaction.
2022-10-17 17:00:25.242 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:00:25.244 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 17:00:25.246 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:00:25.251 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:00:25.252 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:00:25.253 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:00:25.254 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 17:00:25.256 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse'.
2022-10-17 17:00:25.258 +01:00 [DBG] Found the endpoints ["SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2022-10-17 17:00:25.260 +01:00 [DBG] Successfully processed template api/Accounts/{accountId} for SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) resulting in /api/Accounts/57304071-dff4-4635-b734-6835fd812025 and 
2022-10-17 17:00:25.261 +01:00 [DBG] Link generation succeeded for endpoints ["SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] with result /api/Accounts/57304071-dff4-4635-b734-6835fd812025
2022-10-17 17:00:25.263 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API) in 88.5096ms
2022-10-17 17:00:25.265 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 17:00:25.268 +01:00 [DBG] Connection id "0HMLGB2BPIGNC" completed keep alive response.
2022-10-17 17:00:25.270 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:00:25.271 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/Accounts/ application/json 45 - 201 - application/json;+charset=utf-8 118.8373ms
2022-10-17 17:01:03.915 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139
2022-10-17 17:01:03.928 +01:00 [DBG] POST requests are not supported
2022-10-17 17:01:03.929 +01:00 [DBG] 1 candidate(s) found for the request path '/api/transfers'
2022-10-17 17:01:03.930 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)' with route pattern 'api/Transfers' is valid for the request path '/api/transfers'
2022-10-17 17:01:03.931 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:01:03.933 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:01:03.933 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:01:03.935 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:01:03.944 +01:00 [DBG] Authorization was successful.
2022-10-17 17:01:03.946 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:01:03.949 +01:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transfers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.TransferResponse]] MakeTransfer(SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest) on controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API).
2022-10-17 17:01:03.956 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:01:03.958 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:01:03.959 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:01:03.961 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:01:03.963 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:01:03.965 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:01:03.966 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:01:03.968 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:01:03.969 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' using the name '' in request data ...
2022-10-17 17:01:03.972 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:01:03.974 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000007": started reading request body.
2022-10-17 17:01:03.975 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000007": done reading request body.
2022-10-17 17:01:03.978 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'
2022-10-17 17:01:03.979 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:01:03.981 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:01:03.982 +01:00 [DBG] Attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:01:03.986 +01:00 [DBG] Done attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:01:03.993 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:01:04.008 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-17 17:01:04.091 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Account>(
    asyncEnumerable: new SingleQueryingEnumerable<Account>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.account_id, a.balance, a.created_at, a.currency, a.user_id
            FROM SB-operational.Accounts AS a
            WHERE a.account_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-17 17:01:04.113 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:01:04.114 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:01:04.115 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:01:04.116 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:01:04.118 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:01:04.129 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:01:04.146 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.150 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:01:04.151 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:01:04.152 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:01:04.160 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:01:04.162 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:01:04.163 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:01:04.164 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:01:04.165 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:01:04.169 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:01:04.173 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.175 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:01:04.175 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:01:04.177 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:01:04.185 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.197 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.201 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.226 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.229 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.230 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.232 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.234 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.236 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:01:04.238 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:01:04.243 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:01:04.245 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:01:04.249 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:01:04.253 +01:00 [DBG] Enlisted in an ambient transaction with isolation level 'Serializable'.
2022-10-17 17:01:04.266 +01:00 [DBG] Executing 5 update commands as a batch.
2022-10-17 17:01:04.272 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:01:04.274 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:01:04.276 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime2), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Guid), @p19='?' (DbType = Decimal), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p10, @p11, @p12, @p13);
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p14, @p15, @p16, @p17);
INSERT INTO "SB-historic"."Transfers" (transfer_id, amount, created_at, from_account_id, to_account_id)
VALUES (@p18, @p19, @p20, @p21, @p22);
2022-10-17 17:01:04.282 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime2), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Guid), @p19='?' (DbType = Decimal), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p10, @p11, @p12, @p13);
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p14, @p15, @p16, @p17);
INSERT INTO "SB-historic"."Transfers" (transfer_id, amount, created_at, from_account_id, to_account_id)
VALUES (@p18, @p19, @p20, @p21, @p22);
2022-10-17 17:01:04.285 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:01:04.286 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:01:04.289 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:01:04.291 +01:00 [DBG] An entity of type 'Transfer' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.293 +01:00 [DBG] An entity of type 'Movement' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.295 +01:00 [DBG] An entity of type 'Movement' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.296 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.299 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.302 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 5 entities written to the database.
2022-10-17 17:01:04.316 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-17 17:01:04.324 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.user_id == @__get_Item_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 17:01:04.328 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:01:04.329 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:01:04.331 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:01:04.332 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:01:04.333 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-17 17:01:04.337 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-17 17:01:04.340 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:01:04.346 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:01:04.347 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:01:04.348 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:01:05.530 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:01:05.534 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:01:05.535 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:01:05.536 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:01:05.537 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 17:01:05.539 +01:00 [INF] Executing CreatedResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.TransferResponse'.
2022-10-17 17:01:05.542 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API) in 1577.24ms
2022-10-17 17:01:05.543 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:01:05.546 +01:00 [DBG] Connection id "0HMLGB2BPIGNC" completed keep alive response.
2022-10-17 17:01:05.547 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:01:05.548 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139 - 201 - application/json;+charset=utf-8 1633.1332ms
2022-10-17 17:01:07.443 +01:00 [INF] Email Sent
2022-10-17 17:01:07.446 +01:00 [INF] - KEY:   | VALUE: {"FromUser":"Dummytester","ToUser":"Dummytester","ToAccountId":"429d84ce-790c-4db8-b48b-b1433ffc6be9","ToEmail":"wsMakerSynergy@gmail.com","Amount":"300"} - 
2022-10-17 17:01:33.196 +01:00 [DBG] Connection id "0HMLGB2BPIGNA" received FIN.
2022-10-17 17:01:33.215 +01:00 [DBG] Connection id "0HMLGB2BPIGNA" disconnecting.
2022-10-17 17:01:33.216 +01:00 [DBG] Connection id "0HMLGB2BPIGNA" sending FIN because: "The client closed the connection."
2022-10-17 17:01:33.226 +01:00 [DBG] Connection id "0HMLGB2BPIGNA" stopped.
2022-10-17 17:01:34.200 +01:00 [DBG] Connection id "0HMLGB2BPIGN9" received FIN.
2022-10-17 17:01:34.200 +01:00 [DBG] Connection id "0HMLGB2BPIGN9" disconnecting.
2022-10-17 17:01:34.203 +01:00 [DBG] Connection id "0HMLGB2BPIGN9" sending FIN because: "The client closed the connection."
2022-10-17 17:01:34.217 +01:00 [DBG] Connection id "0HMLGB2BPIGN9" stopped.
2022-10-17 17:02:01.068 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61
2022-10-17 17:02:01.072 +01:00 [DBG] POST requests are not supported
2022-10-17 17:02:01.073 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/logout'
2022-10-17 17:02:01.074 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Logout' is valid for the request path '/api/users/logout'
2022-10-17 17:02:01.076 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 17:02:01.079 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:02:01.081 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:02:01.082 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:02:01.083 +01:00 [DBG] Authorization was successful.
2022-10-17 17:02:01.084 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 17:02:01.087 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 17:02:01.089 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:02:01.090 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:02:01.092 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:02:01.095 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:02:01.097 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:02:01.099 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:02:01.101 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:02:01.102 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 17:02:01.103 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-17 17:02:01.105 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:02:01.106 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000008": started reading request body.
2022-10-17 17:02:01.107 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000008": done reading request body.
2022-10-17 17:02:01.109 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'
2022-10-17 17:02:01.111 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:02:01.114 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:02:01.115 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 17:02:01.117 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:02:01.121 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:02:01.124 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.Id == __userTokenId_0)'
2022-10-17 17:02:01.130 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_token_id == @__userTokenId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 17:02:01.133 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:02:01.134 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:02:01.135 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:02:01.137 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:02:01.138 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 17:02:01.143 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 17:02:01.148 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:02:01.150 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:02:01.150 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:02:01.152 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:02:01.155 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:02:01.158 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:02:01.159 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:02:01.160 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:02:01.163 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:02:01.165 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:02:01.167 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:02:01.168 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:02:01.169 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:02:01.170 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 17:02:01.171 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 17:02:01.176 +01:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 17:02:01.204 +01:00 [DBG] Disposing transaction.
2022-10-17 17:02:01.205 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:02:01.207 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:02:01.223 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 17:02:01.351 +01:00 [ERR] Error on updating entity.
2022-10-17 17:02:01.356 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:02:01.358 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:02:01.359 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:02:01.360 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:02:01.364 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 17:02:01.366 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 17:02:01.367 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API) in 268.8105ms
2022-10-17 17:02:01.369 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 17:02:01.370 +01:00 [DBG] Connection id "0HMLGB2BPIGNC" completed keep alive response.
2022-10-17 17:02:01.371 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:02:01.372 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61 - 500 - text/plain;+charset=utf-8 304.1644ms
2022-10-17 17:03:31.094 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61
2022-10-17 17:03:31.099 +01:00 [DBG] POST requests are not supported
2022-10-17 17:03:31.100 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/logout'
2022-10-17 17:03:31.104 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Logout' is valid for the request path '/api/users/logout'
2022-10-17 17:03:31.107 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 17:03:31.108 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:03:31.109 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:03:31.110 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:03:31.111 +01:00 [DBG] Authorization was successful.
2022-10-17 17:03:31.112 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 17:03:31.113 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 17:03:31.115 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:03:31.116 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:03:31.120 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:03:31.123 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:03:31.124 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:03:31.126 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:03:31.128 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:03:31.129 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 17:03:31.130 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-17 17:03:31.132 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:03:31.133 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000009": started reading request body.
2022-10-17 17:03:31.136 +01:00 [DBG] Connection id "0HMLGB2BPIGNC", Request id "0HMLGB2BPIGNC:00000009": done reading request body.
2022-10-17 17:03:31.137 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'
2022-10-17 17:03:31.139 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:03:31.141 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:03:31.142 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 17:03:31.144 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:03:37.438 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:03:37.444 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:03:37.446 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 17:03:37.447 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:03:37.448 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:03:37.450 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 17:03:37.454 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 17:03:37.457 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:03:37.460 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:03:37.462 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:03:37.463 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:03:56.441 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:04:09.201 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:04:09.202 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:04:09.203 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:04:09.205 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:04:09.208 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:04:09.209 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:04:09.210 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:04:09.211 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:04:09.213 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:04:09.215 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 17:04:09.219 +01:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 17:04:09.262 +01:00 [DBG] Disposing transaction.
2022-10-17 17:04:09.263 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:04:09.265 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:04:09.268 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 17:06:42.290 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 17:06:42.402 +01:00 [DBG] Hosting starting
2022-10-17 17:06:42.452 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 17:06:42.457 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 17:06:42.472 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 17:06:42.475 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 17:06:42.486 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 17:06:42.495 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 17:06:42.497 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 17:06:42.506 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 17:06:42.510 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:06:42.514 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 17:06:42.516 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:06:42.520 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 17:06:42.523 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 17:06:42.528 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 17:06:42.531 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 17:06:42.738 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 17:06:42.794 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 17:06:42.795 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 17:06:42.796 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 17:06:42.797 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 17:06:42.798 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 17:06:42.800 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 17:06:42.800 +01:00 [INF] Hosting environment: Development
2022-10-17 17:06:42.801 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 17:06:42.802 +01:00 [DBG] Hosting started
2022-10-17 17:06:42.810 +01:00 [DBG] Connection id "0HMLGB6AJ65A6" accepted.
2022-10-17 17:06:42.810 +01:00 [DBG] Connection id "0HMLGB6AJ65A7" accepted.
2022-10-17 17:06:42.813 +01:00 [DBG] Connection id "0HMLGB6AJ65A6" started.
2022-10-17 17:06:42.813 +01:00 [DBG] Connection id "0HMLGB6AJ65A7" started.
2022-10-17 17:06:42.839 +01:00 [DBG] Connection id "0HMLGB6AJ65A7" received FIN.
2022-10-17 17:06:42.839 +01:00 [DBG] Connection id "0HMLGB6AJ65A6" received FIN.
2022-10-17 17:06:42.847 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:06:42.847 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:06:42.925 +01:00 [DBG] Connection id "0HMLGB6AJ65A6" stopped.
2022-10-17 17:06:42.925 +01:00 [DBG] Connection id "0HMLGB6AJ65A7" stopped.
2022-10-17 17:06:42.933 +01:00 [DBG] Connection id "0HMLGB6AJ65A6" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:06:42.933 +01:00 [DBG] Connection id "0HMLGB6AJ65A7" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:06:43.283 +01:00 [DBG] Connection id "0HMLGB6AJ65A8" accepted.
2022-10-17 17:06:43.284 +01:00 [DBG] Connection id "0HMLGB6AJ65A8" started.
2022-10-17 17:06:43.333 +01:00 [DBG] Connection 0HMLGB6AJ65A8 established using the following protocol: "Tls13"
2022-10-17 17:06:43.380 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 17:06:43.421 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 17:06:43.612 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 17:06:43.759 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 17:06:43.765 +01:00 [DBG] Connection id "0HMLGB6AJ65A8" completed keep alive response.
2022-10-17 17:06:43.799 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 421.4751ms
2022-10-17 17:06:43.922 +01:00 [DBG] Connection id "0HMLGB6AJ65A9" accepted.
2022-10-17 17:06:43.924 +01:00 [DBG] Connection id "0HMLGB6AJ65A9" started.
2022-10-17 17:06:43.926 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 17:06:43.954 +01:00 [DBG] Connection 0HMLGB6AJ65A9 established using the following protocol: "Tls13"
2022-10-17 17:06:43.956 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 17:06:43.997 +01:00 [DBG] Connection id "0HMLGB6AJ65A9" completed keep alive response.
2022-10-17 17:06:44.002 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 45.9667ms
2022-10-17 17:06:44.051 +01:00 [DBG] Connection id "0HMLGB6AJ65A8" completed keep alive response.
2022-10-17 17:06:44.054 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 128.5236ms
2022-10-17 17:06:44.168 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 17:06:44.369 +01:00 [DBG] Connection id "0HMLGB6AJ65A8" completed keep alive response.
2022-10-17 17:06:44.384 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 215.5821ms
2022-10-17 17:06:45.824 +01:00 [DBG] Connection id "0HMLGB6AJ65AA" accepted.
2022-10-17 17:06:45.825 +01:00 [DBG] Connection id "0HMLGB6AJ65AA" received FIN.
2022-10-17 17:06:45.826 +01:00 [DBG] Connection id "0HMLGB6AJ65AA" started.
2022-10-17 17:06:45.827 +01:00 [DBG] Connection id "0HMLGB6AJ65AB" accepted.
2022-10-17 17:06:45.831 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:06:45.831 +01:00 [DBG] Connection id "0HMLGB6AJ65AB" started.
2022-10-17 17:06:45.834 +01:00 [DBG] Connection id "0HMLGB6AJ65AA" stopped.
2022-10-17 17:06:45.836 +01:00 [DBG] Connection id "0HMLGB6AJ65AA" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:06:45.839 +01:00 [DBG] Connection 0HMLGB6AJ65AB established using the following protocol: "Tls13"
2022-10-17 17:06:45.841 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61
2022-10-17 17:06:45.844 +01:00 [DBG] POST requests are not supported
2022-10-17 17:06:45.876 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/logout'
2022-10-17 17:06:45.884 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Logout' is valid for the request path '/api/users/logout'
2022-10-17 17:06:45.888 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 17:06:46.327 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:06:46.332 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:06:46.337 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:06:46.343 +01:00 [DBG] Authorization was successful.
2022-10-17 17:06:46.345 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 17:06:46.383 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 17:06:46.386 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:06:46.389 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:06:46.390 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:06:46.393 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:06:46.395 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:06:46.401 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:06:46.653 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 17:06:46.686 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:06:46.693 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 17:06:46.698 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-17 17:06:46.701 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:06:46.709 +01:00 [DBG] Connection id "0HMLGB6AJ65AB", Request id "0HMLGB6AJ65AB:00000002": started reading request body.
2022-10-17 17:06:46.711 +01:00 [DBG] Connection id "0HMLGB6AJ65AB", Request id "0HMLGB6AJ65AB:00000002": done reading request body.
2022-10-17 17:06:46.722 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'
2022-10-17 17:06:46.724 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:06:46.725 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:06:46.727 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 17:06:46.739 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:06:52.108 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:06:52.179 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.Id == __userTokenId_0)'
2022-10-17 17:06:52.622 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_token_id == @__userTokenId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 17:06:52.683 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:06:52.794 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (102ms).
2022-10-17 17:06:52.807 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:06:53.076 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:06:53.095 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 17:06:53.217 +01:00 [INF] Executed DbCommand (129ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 17:06:53.266 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:06:53.318 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:06:53.327 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:06:53.336 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:07:04.243 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:07:04.743 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:07:04.749 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:07:04.772 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:07:04.809 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:07:04.814 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:07:04.823 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:07:04.839 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:07:04.921 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:07:04.923 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 17:07:04.926 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 17:07:04.954 +01:00 [ERR] Failed executing DbCommand (22ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 17:07:05.024 +01:00 [DBG] Disposing transaction.
2022-10-17 17:07:05.075 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:07:05.079 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:07:05.109 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 17:12:32.160 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 17:12:32.275 +01:00 [DBG] Hosting starting
2022-10-17 17:12:32.342 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 17:12:32.348 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 17:12:32.363 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 17:12:32.366 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 17:12:32.374 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 17:12:32.382 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 17:12:32.383 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 17:12:32.392 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 17:12:32.395 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:12:32.398 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 17:12:32.400 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:12:32.404 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 17:12:32.408 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 17:12:32.411 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 17:12:32.412 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 17:12:32.597 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 17:12:32.694 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 17:12:32.697 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 17:12:32.698 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 17:12:32.700 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 17:12:32.701 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 17:12:32.702 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 17:12:32.703 +01:00 [INF] Hosting environment: Development
2022-10-17 17:12:32.704 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 17:12:32.705 +01:00 [DBG] Hosting started
2022-10-17 17:12:33.105 +01:00 [DBG] Connection id "0HMLGB9IVRDE0" accepted.
2022-10-17 17:12:33.111 +01:00 [DBG] Connection id "0HMLGB9IVRDE1" received FIN.
2022-10-17 17:12:33.112 +01:00 [DBG] Connection id "0HMLGB9IVRDE0" started.
2022-10-17 17:12:33.113 +01:00 [DBG] Connection id "0HMLGB9IVRDE0" received FIN.
2022-10-17 17:12:33.113 +01:00 [DBG] Connection id "0HMLGB9IVRDE1" accepted.
2022-10-17 17:12:33.117 +01:00 [DBG] Connection id "0HMLGB9IVRDE1" started.
2022-10-17 17:12:33.133 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:12:33.133 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:12:33.247 +01:00 [DBG] Connection id "0HMLGB9IVRDE1" stopped.
2022-10-17 17:12:33.247 +01:00 [DBG] Connection id "0HMLGB9IVRDE0" stopped.
2022-10-17 17:12:33.251 +01:00 [DBG] Connection id "0HMLGB9IVRDE1" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:12:33.251 +01:00 [DBG] Connection id "0HMLGB9IVRDE0" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:12:33.592 +01:00 [DBG] Connection id "0HMLGB9IVRDE2" accepted.
2022-10-17 17:12:33.596 +01:00 [DBG] Connection id "0HMLGB9IVRDE2" started.
2022-10-17 17:12:33.687 +01:00 [DBG] Connection 0HMLGB9IVRDE2 established using the following protocol: "Tls13"
2022-10-17 17:12:33.748 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 17:12:33.831 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 17:12:34.044 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 17:12:34.197 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 17:12:34.200 +01:00 [DBG] Connection id "0HMLGB9IVRDE2" completed keep alive response.
2022-10-17 17:12:34.205 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 461.2493ms
2022-10-17 17:12:34.235 +01:00 [DBG] Connection id "0HMLGB9IVRDE3" accepted.
2022-10-17 17:12:34.238 +01:00 [DBG] Connection id "0HMLGB9IVRDE3" started.
2022-10-17 17:12:34.241 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 17:12:34.252 +01:00 [DBG] Connection 0HMLGB9IVRDE3 established using the following protocol: "Tls13"
2022-10-17 17:12:34.255 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 17:12:34.260 +01:00 [DBG] Connection id "0HMLGB9IVRDE3" completed keep alive response.
2022-10-17 17:12:34.268 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 12.1777ms
2022-10-17 17:12:34.365 +01:00 [DBG] Connection id "0HMLGB9IVRDE2" completed keep alive response.
2022-10-17 17:12:34.368 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 127.1560ms
2022-10-17 17:12:34.520 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 17:12:34.730 +01:00 [DBG] Connection id "0HMLGB9IVRDE2" completed keep alive response.
2022-10-17 17:12:34.732 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 211.4811ms
2022-10-17 17:12:36.478 +01:00 [DBG] Connection id "0HMLGB9IVRDE4" accepted.
2022-10-17 17:12:36.479 +01:00 [DBG] Connection id "0HMLGB9IVRDE4" received FIN.
2022-10-17 17:12:36.482 +01:00 [DBG] Connection id "0HMLGB9IVRDE4" started.
2022-10-17 17:12:36.483 +01:00 [DBG] Connection id "0HMLGB9IVRDE5" accepted.
2022-10-17 17:12:36.486 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:12:36.486 +01:00 [DBG] Connection id "0HMLGB9IVRDE5" started.
2022-10-17 17:12:36.489 +01:00 [DBG] Connection id "0HMLGB9IVRDE4" stopped.
2022-10-17 17:12:36.491 +01:00 [DBG] Connection id "0HMLGB9IVRDE4" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:12:36.494 +01:00 [DBG] Connection 0HMLGB9IVRDE5 established using the following protocol: "Tls13"
2022-10-17 17:12:36.496 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61
2022-10-17 17:12:36.500 +01:00 [DBG] POST requests are not supported
2022-10-17 17:12:36.527 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/logout'
2022-10-17 17:12:36.534 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Logout' is valid for the request path '/api/users/logout'
2022-10-17 17:12:36.537 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 17:12:36.944 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:12:36.949 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:12:36.954 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:12:36.959 +01:00 [DBG] Authorization was successful.
2022-10-17 17:12:36.962 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 17:12:36.998 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 17:12:37.001 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:12:37.003 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:12:37.004 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:12:37.006 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:12:37.008 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:12:37.010 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:12:37.251 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 17:12:37.287 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:12:37.294 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 17:12:37.301 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-17 17:12:37.303 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:12:37.310 +01:00 [DBG] Connection id "0HMLGB9IVRDE5", Request id "0HMLGB9IVRDE5:00000002": started reading request body.
2022-10-17 17:12:37.312 +01:00 [DBG] Connection id "0HMLGB9IVRDE5", Request id "0HMLGB9IVRDE5:00000002": done reading request body.
2022-10-17 17:12:37.322 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'
2022-10-17 17:12:37.325 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:12:37.327 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:12:37.328 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 17:12:37.339 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:12:54.073 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:12:54.139 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.Id == __userTokenId_0)'
2022-10-17 17:12:54.551 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_token_id == @__userTokenId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 17:12:54.605 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:12:54.707 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (94ms).
2022-10-17 17:12:54.719 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:12:54.970 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:12:54.991 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 17:12:55.116 +01:00 [INF] Executed DbCommand (131ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 17:12:55.177 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:12:55.226 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:12:55.231 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:12:55.241 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:12:58.888 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:13:00.106 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:13:00.110 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:13:00.125 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:13:00.163 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:13:00.166 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:13:00.170 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:13:00.182 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:13:00.244 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:13:00.246 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:13:00.249 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 17:13:00.261 +01:00 [ERR] Failed executing DbCommand (14ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 17:13:00.301 +01:00 [DBG] Disposing transaction.
2022-10-17 17:13:00.349 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:13:00.354 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:13:00.374 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 17:29:33.985 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 17:29:34.146 +01:00 [DBG] Hosting starting
2022-10-17 17:29:34.246 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 17:29:34.252 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 17:29:34.267 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 17:29:34.268 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 17:29:34.277 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 17:29:34.287 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 17:29:34.288 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 17:29:34.298 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 17:29:34.301 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:29:34.305 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 17:29:34.307 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:29:34.313 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 17:29:34.316 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 17:29:34.320 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 17:29:34.322 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 17:29:34.551 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 17:29:34.634 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 17:29:34.635 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 17:29:34.637 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 17:29:34.638 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 17:29:34.639 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 17:29:34.640 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 17:29:34.641 +01:00 [INF] Hosting environment: Development
2022-10-17 17:29:34.642 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 17:29:34.643 +01:00 [DBG] Hosting started
2022-10-17 17:29:34.917 +01:00 [DBG] Connection id "0HMLGBJ3GKIOT" received FIN.
2022-10-17 17:29:34.921 +01:00 [DBG] Connection id "0HMLGBJ3GKIOS" received FIN.
2022-10-17 17:29:34.921 +01:00 [DBG] Connection id "0HMLGBJ3GKIOT" accepted.
2022-10-17 17:29:34.921 +01:00 [DBG] Connection id "0HMLGBJ3GKIOS" accepted.
2022-10-17 17:29:34.953 +01:00 [DBG] Connection id "0HMLGBJ3GKIOT" started.
2022-10-17 17:29:34.953 +01:00 [DBG] Connection id "0HMLGBJ3GKIOS" started.
2022-10-17 17:29:34.988 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:29:34.988 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:29:35.159 +01:00 [DBG] Connection id "0HMLGBJ3GKIOT" stopped.
2022-10-17 17:29:35.160 +01:00 [DBG] Connection id "0HMLGBJ3GKIOS" stopped.
2022-10-17 17:29:35.164 +01:00 [DBG] Connection id "0HMLGBJ3GKIOS" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:29:35.164 +01:00 [DBG] Connection id "0HMLGBJ3GKIOT" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:29:35.501 +01:00 [DBG] Connection id "0HMLGBJ3GKIOU" accepted.
2022-10-17 17:29:35.506 +01:00 [DBG] Connection id "0HMLGBJ3GKIOU" started.
2022-10-17 17:29:35.556 +01:00 [DBG] Connection 0HMLGBJ3GKIOU established using the following protocol: "Tls13"
2022-10-17 17:29:35.616 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 17:29:35.666 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 17:29:35.858 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 17:29:35.985 +01:00 [ERR] BackgroundService failed
Confluent.Kafka.ConsumeException: Subscribed topic not available: transfer: Broker: Unknown topic or partition
   at Confluent.Kafka.Consumer`2.Consume(Int32 millisecondsTimeout)
   at Confluent.Kafka.Consumer`2.Consume(CancellationToken cancellationToken)
   at SimpleBank.AcctManage.Infrastructure.Providers.Notification.ConsumerService.TransferNotificationConsumerThread`1.ExecuteAsync(CancellationToken cancellationToken) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Infrastructure.Providers\TransferMailNotification\ConsumerService\TransferNotificationConsumerThread.cs:line 31
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2022-10-17 17:29:36.032 +01:00 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted.
Confluent.Kafka.ConsumeException: Subscribed topic not available: transfer: Broker: Unknown topic or partition
   at Confluent.Kafka.Consumer`2.Consume(Int32 millisecondsTimeout)
   at Confluent.Kafka.Consumer`2.Consume(CancellationToken cancellationToken)
   at SimpleBank.AcctManage.Infrastructure.Providers.Notification.ConsumerService.TransferNotificationConsumerThread`1.ExecuteAsync(CancellationToken cancellationToken) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Infrastructure.Providers\TransferMailNotification\ConsumerService\TransferNotificationConsumerThread.cs:line 31
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2022-10-17 17:29:36.035 +01:00 [INF] Application is shutting down...
2022-10-17 17:29:36.037 +01:00 [DBG] Hosting stopping
2022-10-17 17:29:36.089 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 17:29:36.094 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 481.7353ms
2022-10-17 17:29:36.122 +01:00 [DBG] Connection id "0HMLGBJ3GKIOU" disconnecting.
2022-10-17 17:29:36.126 +01:00 [DBG] Connection id "0HMLGBJ3GKIOU" stopped.
2022-10-17 17:29:36.127 +01:00 [DBG] Connection id "0HMLGBJ3GKIOU" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:29:36.146 +01:00 [DBG] Hosting stopped
2022-10-17 17:30:03.304 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 17:30:03.414 +01:00 [DBG] Hosting starting
2022-10-17 17:30:03.471 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 17:30:03.479 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 17:30:03.493 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 17:30:03.494 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 17:30:03.502 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 17:30:03.513 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 17:30:03.515 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 17:30:03.524 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 17:30:03.527 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:30:03.531 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 17:30:03.533 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:30:03.537 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 17:30:03.540 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 17:30:03.543 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 17:30:03.545 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 17:30:03.713 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 17:30:03.773 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 17:30:03.775 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 17:30:03.777 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 17:30:03.778 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 17:30:03.780 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 17:30:03.782 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 17:30:03.783 +01:00 [INF] Hosting environment: Development
2022-10-17 17:30:03.784 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 17:30:03.785 +01:00 [DBG] Hosting started
2022-10-17 17:30:03.925 +01:00 [DBG] Connection id "0HMLGBJC57SGS" accepted.
2022-10-17 17:30:03.925 +01:00 [DBG] Connection id "0HMLGBJC57SGT" accepted.
2022-10-17 17:30:03.929 +01:00 [DBG] Connection id "0HMLGBJC57SGS" started.
2022-10-17 17:30:03.930 +01:00 [DBG] Connection id "0HMLGBJC57SGT" started.
2022-10-17 17:30:03.948 +01:00 [DBG] Connection id "0HMLGBJC57SGT" received FIN.
2022-10-17 17:30:03.948 +01:00 [DBG] Connection id "0HMLGBJC57SGS" received FIN.
2022-10-17 17:30:03.971 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:30:03.971 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:30:04.135 +01:00 [DBG] Connection id "0HMLGBJC57SGS" stopped.
2022-10-17 17:30:04.135 +01:00 [DBG] Connection id "0HMLGBJC57SGT" stopped.
2022-10-17 17:30:04.148 +01:00 [DBG] Connection id "0HMLGBJC57SGT" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:30:04.149 +01:00 [DBG] Connection id "0HMLGBJC57SGS" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:30:04.335 +01:00 [DBG] Connection id "0HMLGBJC57SGU" accepted.
2022-10-17 17:30:04.337 +01:00 [DBG] Connection id "0HMLGBJC57SGU" started.
2022-10-17 17:30:04.403 +01:00 [DBG] Connection 0HMLGBJC57SGU established using the following protocol: "Tls13"
2022-10-17 17:30:04.453 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 17:30:04.492 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 17:30:04.650 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 17:30:04.808 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 17:30:04.811 +01:00 [DBG] Connection id "0HMLGBJC57SGU" completed keep alive response.
2022-10-17 17:30:04.815 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 365.1431ms
2022-10-17 17:30:04.853 +01:00 [DBG] Connection id "0HMLGBJC57SGV" accepted.
2022-10-17 17:30:04.855 +01:00 [DBG] Connection id "0HMLGBJC57SGV" started.
2022-10-17 17:30:04.879 +01:00 [DBG] Connection 0HMLGBJC57SGV established using the following protocol: "Tls13"
2022-10-17 17:30:04.882 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 17:30:04.882 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 17:30:04.887 +01:00 [DBG] Connection id "0HMLGBJC57SGV" completed keep alive response.
2022-10-17 17:30:04.889 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 6.9641ms
2022-10-17 17:30:04.926 +01:00 [DBG] Connection id "0HMLGBJC57SGU" completed keep alive response.
2022-10-17 17:30:04.930 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 47.5188ms
2022-10-17 17:30:05.113 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 17:30:05.340 +01:00 [DBG] Connection id "0HMLGBJC57SGU" completed keep alive response.
2022-10-17 17:30:05.341 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 228.1863ms
2022-10-17 17:30:08.551 +01:00 [DBG] Connection id "0HMLGBJC57SH0" accepted.
2022-10-17 17:30:08.551 +01:00 [DBG] Connection id "0HMLGBJC57SH0" received FIN.
2022-10-17 17:30:08.553 +01:00 [DBG] Connection id "0HMLGBJC57SH0" started.
2022-10-17 17:30:08.553 +01:00 [DBG] Connection id "0HMLGBJC57SH1" accepted.
2022-10-17 17:30:08.555 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:30:08.556 +01:00 [DBG] Connection id "0HMLGBJC57SH1" started.
2022-10-17 17:30:08.559 +01:00 [DBG] Connection id "0HMLGBJC57SH0" stopped.
2022-10-17 17:30:08.561 +01:00 [DBG] Connection id "0HMLGBJC57SH0" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:30:08.567 +01:00 [DBG] Connection 0HMLGBJC57SH1 established using the following protocol: "Tls13"
2022-10-17 17:30:08.569 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61
2022-10-17 17:30:08.571 +01:00 [DBG] POST requests are not supported
2022-10-17 17:30:08.600 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/logout'
2022-10-17 17:30:08.605 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Logout' is valid for the request path '/api/users/logout'
2022-10-17 17:30:08.608 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 17:30:09.072 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:30:09.074 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:30:09.078 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:30:09.087 +01:00 [DBG] Authorization was successful.
2022-10-17 17:30:09.090 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 17:30:09.129 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 17:30:09.133 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:30:09.135 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:30:09.137 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:30:09.138 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:30:09.140 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:30:09.144 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:30:09.368 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 17:30:09.400 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:30:09.407 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 17:30:09.412 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-17 17:30:09.415 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:30:09.424 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000002": started reading request body.
2022-10-17 17:30:09.427 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000002": done reading request body.
2022-10-17 17:30:09.435 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'
2022-10-17 17:30:09.438 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:30:09.440 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:30:09.441 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 17:30:09.452 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 17:30:10.611 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:30:10.676 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.Id == __userTokenId_0)'
2022-10-17 17:30:11.055 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_token_id == @__userTokenId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 17:30:11.110 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:30:11.197 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (84ms).
2022-10-17 17:30:11.209 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:11.441 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:11.459 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 17:30:11.574 +01:00 [INF] Executed DbCommand (120ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 17:30:11.594 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:30:11.599 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:11.610 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:11.614 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:30:11.621 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:30:11.622 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:30:11.623 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:30:11.625 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 17:30:11.626 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 17:30:11.633 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API) in 2485.4669ms
2022-10-17 17:30:11.638 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 17:30:11.640 +01:00 [DBG] Connection id "0HMLGBJC57SH1" completed keep alive response.
2022-10-17 17:30:11.644 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:30:11.649 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61 - 400 - text/plain;+charset=utf-8 3080.4099ms
2022-10-17 17:30:16.384 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/ application/json 137
2022-10-17 17:30:16.385 +01:00 [DBG] POST requests are not supported
2022-10-17 17:30:16.387 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/'
2022-10-17 17:30:16.390 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)' with route pattern 'api/Users' is valid for the request path '/api/users/'
2022-10-17 17:30:16.391 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 17:30:16.394 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 17:30:16.395 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 17:30:16.396 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 17:30:16.399 +01:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] Create(SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 17:30:16.401 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:30:16.403 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:30:16.406 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:30:16.409 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:30:16.410 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:30:16.411 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:30:16.413 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:30:16.420 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' ...
2022-10-17 17:30:16.425 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' using the name '' in request data ...
2022-10-17 17:30:16.427 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:30:16.430 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000003": started reading request body.
2022-10-17 17:30:16.431 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000003": done reading request body.
2022-10-17 17:30:16.435 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'
2022-10-17 17:30:16.437 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 17:30:16.441 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 17:30:16.443 +01:00 [DBG] Attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' ...
2022-10-17 17:30:16.446 +01:00 [DBG] Done attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 17:30:16.494 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:30:16.531 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:16.613 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:16.625 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:30:16.629 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:30:16.647 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:30:16.685 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:16.691 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:16.695 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:30:16.708 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:30:16.774 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:30:16.776 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 17:30:16.779 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?', @p3='?', @p4='?' (DbType = Binary), @p5='?' (DbType = Binary), @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (user_id, created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING password_changed_at;
2022-10-17 17:30:16.819 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?', @p3='?', @p4='?' (DbType = Binary), @p5='?' (DbType = Binary), @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (user_id, created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING password_changed_at;
2022-10-17 17:30:16.864 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:30:16.885 +01:00 [DBG] Committing transaction.
2022-10-17 17:30:16.903 +01:00 [DBG] Committed transaction.
2022-10-17 17:30:16.913 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:16.916 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:16.923 +01:00 [DBG] Disposing transaction.
2022-10-17 17:30:16.943 +01:00 [DBG] An entity of type 'User' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:16.949 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 17:30:16.969 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:30:16.976 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:30:16.977 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:30:16.978 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:30:16.979 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 17:30:16.980 +01:00 [INF] Executing CreatedResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-17 17:30:16.988 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API) in 576.8855ms
2022-10-17 17:30:16.993 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 17:30:16.997 +01:00 [DBG] Connection id "0HMLGBJC57SH1" completed keep alive response.
2022-10-17 17:30:16.998 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:30:17.000 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/ application/json 137 - 201 - application/json;+charset=utf-8 616.0702ms
2022-10-17 17:30:22.175 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 17:30:22.179 +01:00 [DBG] POST requests are not supported
2022-10-17 17:30:22.183 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 17:30:22.185 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 17:30:22.187 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 17:30:22.200 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 17:30:22.202 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 17:30:22.203 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 17:30:22.207 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 17:30:22.210 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:30:22.213 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:30:22.215 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:30:22.217 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:30:22.218 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:30:22.220 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:30:22.226 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:30:22.230 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 17:30:22.231 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 17:30:22.233 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:30:22.234 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000004": started reading request body.
2022-10-17 17:30:22.235 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000004": done reading request body.
2022-10-17 17:30:22.237 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 17:30:22.238 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 17:30:22.239 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 17:30:22.241 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 17:30:22.242 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 17:30:22.255 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:30:22.259 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-17 17:30:22.267 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 17:30:22.270 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:30:22.271 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 17:30:22.272 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:22.273 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:22.274 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 17:30:22.281 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 17:30:22.296 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:22.303 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:30:22.303 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:22.304 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:22.308 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-17 17:30:22.314 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 17:30:22.316 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:30:22.318 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:30:22.319 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:22.320 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:22.321 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 17:30:22.325 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 17:30:22.328 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:30:22.330 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:22.331 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:22.362 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:22.364 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:30:22.366 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:30:22.372 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:30:22.373 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:22.375 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:22.377 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:30:22.379 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:30:22.382 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:30:22.383 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 17:30:22.384 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 17:30:22.388 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 17:30:22.392 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:30:22.393 +01:00 [DBG] Committing transaction.
2022-10-17 17:30:22.400 +01:00 [DBG] Committed transaction.
2022-10-17 17:30:22.402 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:22.403 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:22.405 +01:00 [DBG] Disposing transaction.
2022-10-17 17:30:22.407 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:22.409 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 17:30:22.415 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:30:22.419 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:30:22.420 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:30:22.422 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:30:22.422 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 17:30:22.424 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-17 17:30:22.426 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 206.6345ms
2022-10-17 17:30:22.431 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 17:30:22.434 +01:00 [DBG] Connection id "0HMLGBJC57SH1" completed keep alive response.
2022-10-17 17:30:22.435 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:30:22.437 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 200 - application/json;+charset=utf-8 261.4058ms
2022-10-17 17:30:35.431 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/Accounts/ application/json 45
2022-10-17 17:30:35.433 +01:00 [DBG] POST requests are not supported
2022-10-17 17:30:35.434 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/'
2022-10-17 17:30:35.435 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/Accounts/'
2022-10-17 17:30:35.437 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 17:30:35.439 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:30:35.440 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:30:35.442 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 17:30:35.446 +01:00 [INF] Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]] CreateAccount(SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 17:30:35.448 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:30:35.450 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:30:35.451 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:30:35.453 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:30:35.455 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:30:35.456 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 17:30:35.459 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 17:30:35.461 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' ...
2022-10-17 17:30:35.463 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' using the name '' in request data ...
2022-10-17 17:30:35.464 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:30:35.468 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000005": started reading request body.
2022-10-17 17:30:35.469 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000005": done reading request body.
2022-10-17 17:30:35.475 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'
2022-10-17 17:30:35.478 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 17:30:35.479 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 17:30:35.481 +01:00 [DBG] Attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' ...
2022-10-17 17:30:35.483 +01:00 [DBG] Done attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 17:30:35.487 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:30:35.493 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:35.519 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:35.522 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:30:35.526 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:30:35.534 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:30:35.548 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:35.550 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:35.551 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:30:35.552 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:30:35.554 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:30:35.555 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 17:30:35.560 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (account_id, balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-10-17 17:30:35.583 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (account_id, balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-10-17 17:30:35.585 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:30:35.586 +01:00 [DBG] Committing transaction.
2022-10-17 17:30:35.589 +01:00 [DBG] Committed transaction.
2022-10-17 17:30:35.590 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:35.592 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:35.595 +01:00 [DBG] Disposing transaction.
2022-10-17 17:30:35.597 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:35.600 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 17:30:35.603 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:30:35.606 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:30:35.609 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:30:35.611 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:30:35.612 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 17:30:35.614 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse'.
2022-10-17 17:30:35.638 +01:00 [DBG] Found the endpoints ["SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2022-10-17 17:30:35.649 +01:00 [DBG] Successfully processed template api/Accounts/{accountId} for SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) resulting in /api/Accounts/618ab1b1-38fd-4580-b8d8-18288f799d78 and 
2022-10-17 17:30:35.651 +01:00 [DBG] Link generation succeeded for endpoints ["SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] with result /api/Accounts/618ab1b1-38fd-4580-b8d8-18288f799d78
2022-10-17 17:30:35.661 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API) in 205.1845ms
2022-10-17 17:30:35.663 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 17:30:35.664 +01:00 [DBG] Connection id "0HMLGBJC57SH1" completed keep alive response.
2022-10-17 17:30:35.665 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:30:35.666 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/Accounts/ application/json 45 - 201 - application/json;+charset=utf-8 234.1968ms
2022-10-17 17:30:43.843 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/Accounts/ application/json 45
2022-10-17 17:30:43.846 +01:00 [DBG] POST requests are not supported
2022-10-17 17:30:43.848 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/'
2022-10-17 17:30:43.850 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/Accounts/'
2022-10-17 17:30:43.870 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 17:30:43.871 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:30:43.872 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:30:43.873 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 17:30:43.876 +01:00 [INF] Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]] CreateAccount(SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 17:30:43.879 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:30:43.881 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:30:43.882 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:30:43.887 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:30:43.888 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:30:43.890 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 17:30:43.891 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 17:30:43.892 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' ...
2022-10-17 17:30:43.895 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' using the name '' in request data ...
2022-10-17 17:30:43.896 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:30:43.898 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000006": started reading request body.
2022-10-17 17:30:43.900 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000006": done reading request body.
2022-10-17 17:30:43.902 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'
2022-10-17 17:30:43.904 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 17:30:43.905 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 17:30:43.907 +01:00 [DBG] Attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' ...
2022-10-17 17:30:43.908 +01:00 [DBG] Done attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 17:30:43.912 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:30:43.927 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:43.930 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:43.932 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:30:43.939 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:30:43.941 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:30:43.943 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:43.944 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:43.946 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:30:43.948 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:30:43.953 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:30:43.954 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:30:43.955 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (account_id, balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-10-17 17:30:43.963 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (account_id, balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-10-17 17:30:43.970 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:30:43.972 +01:00 [DBG] Committing transaction.
2022-10-17 17:30:43.975 +01:00 [DBG] Committed transaction.
2022-10-17 17:30:43.976 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:43.977 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:43.978 +01:00 [DBG] Disposing transaction.
2022-10-17 17:30:43.979 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:43.981 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 17:30:43.987 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:30:43.990 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:30:43.991 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:30:43.992 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:30:43.992 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 17:30:43.995 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse'.
2022-10-17 17:30:43.997 +01:00 [DBG] Found the endpoints ["SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2022-10-17 17:30:43.999 +01:00 [DBG] Successfully processed template api/Accounts/{accountId} for SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) resulting in /api/Accounts/1cf46219-61ab-443f-aa23-9d3a75561b9c and 
2022-10-17 17:30:44.004 +01:00 [DBG] Link generation succeeded for endpoints ["SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] with result /api/Accounts/1cf46219-61ab-443f-aa23-9d3a75561b9c
2022-10-17 17:30:44.006 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API) in 116.1464ms
2022-10-17 17:30:44.007 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 17:30:44.009 +01:00 [DBG] Connection id "0HMLGBJC57SH1" completed keep alive response.
2022-10-17 17:30:44.010 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:30:44.011 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/Accounts/ application/json 45 - 201 - application/json;+charset=utf-8 167.6941ms
2022-10-17 17:30:56.852 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139
2022-10-17 17:30:56.853 +01:00 [DBG] POST requests are not supported
2022-10-17 17:30:56.854 +01:00 [DBG] 1 candidate(s) found for the request path '/api/transfers'
2022-10-17 17:30:56.856 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)' with route pattern 'api/Transfers' is valid for the request path '/api/transfers'
2022-10-17 17:30:56.857 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:30:56.859 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:30:56.859 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:30:56.860 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:30:56.863 +01:00 [DBG] Authorization was successful.
2022-10-17 17:30:56.864 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:30:56.868 +01:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transfers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.TransferResponse]] MakeTransfer(SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest) on controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API).
2022-10-17 17:30:56.870 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:30:56.871 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:30:56.873 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:30:56.875 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:30:56.876 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:30:56.878 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:30:56.881 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:30:56.882 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:30:56.883 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' using the name '' in request data ...
2022-10-17 17:30:56.885 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:30:56.887 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000007": started reading request body.
2022-10-17 17:30:56.888 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000007": done reading request body.
2022-10-17 17:30:56.890 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'
2022-10-17 17:30:56.891 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:30:56.892 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:30:56.893 +01:00 [DBG] Attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:30:56.897 +01:00 [DBG] Done attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:30:56.903 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:30:56.917 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-17 17:30:57.005 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Account>(
    asyncEnumerable: new SingleQueryingEnumerable<Account>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.account_id, a.balance, a.created_at, a.currency, a.user_id
            FROM SB-operational.Accounts AS a
            WHERE a.account_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-17 17:30:57.024 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:30:57.032 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2022-10-17 17:30:57.035 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:57.038 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:57.041 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:30:57.052 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:30:57.071 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:57.075 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:30:57.076 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:57.078 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:57.085 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:30:57.087 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 17:30:57.088 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:57.090 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:57.091 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:30:57.094 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:30:57.098 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:57.099 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:30:57.100 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:57.101 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:57.109 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:57.122 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:57.127 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:57.150 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:57.154 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:57.157 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:57.159 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:57.161 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:30:57.167 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:30:57.169 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:30:57.173 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:30:57.175 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:57.182 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:57.187 +01:00 [DBG] Enlisted in an ambient transaction with isolation level 'Serializable'.
2022-10-17 17:30:57.200 +01:00 [DBG] Executing 5 update commands as a batch.
2022-10-17 17:30:57.205 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:30:57.206 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:30:57.208 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime2), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Guid), @p19='?' (DbType = Decimal), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p10, @p11, @p12, @p13);
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p14, @p15, @p16, @p17);
INSERT INTO "SB-historic"."Transfers" (transfer_id, amount, created_at, from_account_id, to_account_id)
VALUES (@p18, @p19, @p20, @p21, @p22);
2022-10-17 17:30:57.215 +01:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime2), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Guid), @p19='?' (DbType = Decimal), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p10, @p11, @p12, @p13);
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p14, @p15, @p16, @p17);
INSERT INTO "SB-historic"."Transfers" (transfer_id, amount, created_at, from_account_id, to_account_id)
VALUES (@p18, @p19, @p20, @p21, @p22);
2022-10-17 17:30:57.224 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:30:57.226 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:30:57.235 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 17:30:57.475 +01:00 [ERR] Critical error on transfer processing.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SimpleBank.AcctManage.Infrastructure.Persistence.UnitOfWork.SaveChangesAsync() in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Infrastructure.Persistence\UnitOfWork.cs:line 37
   at SimpleBank.AcctManage.Core.Application.Business.TransferBusiness.ProcressTransferAsync(Transfer transfer, Account accountFrom, Account accountTo) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Core.Application\Business\TransferBusiness.cs:line 79
   at SimpleBank.AcctManage.Core.Application.Business.TransferBusiness.MakeTransfer(Transfer transfer, Guid userId) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Core.Application\Business\TransferBusiness.cs:line 43
2022-10-17 17:30:57.674 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:30:57.677 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:30:57.678 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:30:57.680 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:30:57.682 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 17:30:57.684 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2022-10-17 17:30:57.685 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API) in 807.7648ms
2022-10-17 17:30:57.687 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:30:57.690 +01:00 [DBG] Connection id "0HMLGBJC57SH1" completed keep alive response.
2022-10-17 17:30:57.692 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:30:57.694 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139 - 401 - text/plain;+charset=utf-8 841.8378ms
2022-10-17 17:31:38.596 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139
2022-10-17 17:31:38.603 +01:00 [DBG] POST requests are not supported
2022-10-17 17:31:38.605 +01:00 [DBG] 1 candidate(s) found for the request path '/api/transfers'
2022-10-17 17:31:38.607 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)' with route pattern 'api/Transfers' is valid for the request path '/api/transfers'
2022-10-17 17:31:38.609 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:31:38.610 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:31:38.611 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:31:38.612 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:31:38.613 +01:00 [DBG] Authorization was successful.
2022-10-17 17:31:38.614 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:31:38.615 +01:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transfers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.TransferResponse]] MakeTransfer(SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest) on controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API).
2022-10-17 17:31:38.617 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:31:38.619 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:31:38.622 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:31:38.624 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:31:38.625 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:31:38.627 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:31:38.629 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:31:38.630 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:31:38.631 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' using the name '' in request data ...
2022-10-17 17:31:38.633 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:31:38.634 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000008": started reading request body.
2022-10-17 17:31:38.635 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000008": done reading request body.
2022-10-17 17:31:38.638 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'
2022-10-17 17:31:38.640 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:31:38.641 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:31:38.642 +01:00 [DBG] Attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:31:38.644 +01:00 [DBG] Done attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:31:38.646 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:31:38.648 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:31:38.649 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:31:38.651 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:31:38.652 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:31:38.653 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:31:38.658 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:31:38.661 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:31:38.662 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:31:38.663 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:31:38.664 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:31:38.666 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:31:38.667 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 17:31:38.668 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:31:38.670 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:31:38.672 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:31:38.679 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:31:38.681 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:31:38.682 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:31:38.683 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:31:38.684 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:31:38.686 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:31:38.689 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:31:38.691 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:31:38.692 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:31:38.694 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:31:38.695 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:31:38.697 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:31:38.698 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:31:38.700 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:31:38.701 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:31:38.702 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:31:38.703 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:31:38.706 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:31:38.708 +01:00 [DBG] Enlisted in an ambient transaction with isolation level 'Serializable'.
2022-10-17 17:31:38.709 +01:00 [DBG] Executing 5 update commands as a batch.
2022-10-17 17:31:38.710 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:31:38.711 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 17:31:38.712 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime2), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Guid), @p19='?' (DbType = Decimal), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p10, @p11, @p12, @p13);
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p14, @p15, @p16, @p17);
INSERT INTO "SB-historic"."Transfers" (transfer_id, amount, created_at, from_account_id, to_account_id)
VALUES (@p18, @p19, @p20, @p21, @p22);
2022-10-17 17:31:38.715 +01:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime2), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Guid), @p19='?' (DbType = Decimal), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p10, @p11, @p12, @p13);
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p14, @p15, @p16, @p17);
INSERT INTO "SB-historic"."Transfers" (transfer_id, amount, created_at, from_account_id, to_account_id)
VALUES (@p18, @p19, @p20, @p21, @p22);
2022-10-17 17:31:38.719 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:31:38.721 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:31:38.725 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 17:31:38.910 +01:00 [ERR] Critical error on transfer processing.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SimpleBank.AcctManage.Infrastructure.Persistence.UnitOfWork.SaveChangesAsync() in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Infrastructure.Persistence\UnitOfWork.cs:line 37
   at SimpleBank.AcctManage.Core.Application.Business.TransferBusiness.ProcressTransferAsync(Transfer transfer, Account accountFrom, Account accountTo) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Core.Application\Business\TransferBusiness.cs:line 79
   at SimpleBank.AcctManage.Core.Application.Business.TransferBusiness.MakeTransfer(Transfer transfer, Guid userId) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Core.Application\Business\TransferBusiness.cs:line 43
2022-10-17 17:31:38.929 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:31:38.931 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:31:38.932 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:31:38.933 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:31:38.933 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 17:31:38.936 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2022-10-17 17:31:38.940 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API) in 312.2676ms
2022-10-17 17:31:38.942 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:31:38.944 +01:00 [DBG] Connection id "0HMLGBJC57SH1" completed keep alive response.
2022-10-17 17:31:38.945 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:31:38.946 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139 - 401 - text/plain;+charset=utf-8 350.7420ms
2022-10-17 17:31:59.999 +01:00 [DBG] Connection id "0HMLGBJC57SGV" received FIN.
2022-10-17 17:32:00.016 +01:00 [DBG] Connection id "0HMLGBJC57SGV" disconnecting.
2022-10-17 17:32:00.018 +01:00 [DBG] Connection id "0HMLGBJC57SGV" sending FIN because: "The client closed the connection."
2022-10-17 17:32:00.022 +01:00 [DBG] Connection id "0HMLGBJC57SGV" stopped.
2022-10-17 17:32:01.005 +01:00 [DBG] Connection id "0HMLGBJC57SGU" received FIN.
2022-10-17 17:32:01.005 +01:00 [DBG] Connection id "0HMLGBJC57SGU" disconnecting.
2022-10-17 17:32:01.009 +01:00 [DBG] Connection id "0HMLGBJC57SGU" sending FIN because: "The client closed the connection."
2022-10-17 17:32:01.019 +01:00 [DBG] Connection id "0HMLGBJC57SGU" stopped.
2022-10-17 17:32:19.818 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139
2022-10-17 17:32:19.819 +01:00 [DBG] POST requests are not supported
2022-10-17 17:32:19.820 +01:00 [DBG] 1 candidate(s) found for the request path '/api/transfers'
2022-10-17 17:32:19.821 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)' with route pattern 'api/Transfers' is valid for the request path '/api/transfers'
2022-10-17 17:32:19.823 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:32:19.824 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:32:19.825 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:32:19.826 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:32:19.828 +01:00 [DBG] Authorization was successful.
2022-10-17 17:32:19.830 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:32:19.831 +01:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transfers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.TransferResponse]] MakeTransfer(SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest) on controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API).
2022-10-17 17:32:19.833 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:32:19.834 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:32:19.836 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:32:19.838 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:32:19.839 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:32:19.841 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:32:19.842 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:32:19.844 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:32:19.847 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' using the name '' in request data ...
2022-10-17 17:32:19.848 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:32:19.850 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000009": started reading request body.
2022-10-17 17:32:19.851 +01:00 [DBG] Connection id "0HMLGBJC57SH1", Request id "0HMLGBJC57SH1:00000009": done reading request body.
2022-10-17 17:32:19.852 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'
2022-10-17 17:32:19.853 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:32:19.855 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:32:19.856 +01:00 [DBG] Attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:32:19.858 +01:00 [DBG] Done attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:32:28.132 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:32:28.135 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:32:28.138 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 17:32:28.139 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:32:28.141 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:32:28.143 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:32:28.177 +01:00 [INF] Executed DbCommand (34ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:32:28.180 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:32:28.182 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:32:28.183 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:32:28.184 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:32:28.186 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:32:28.190 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2022-10-17 17:32:28.193 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:32:28.194 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:32:28.195 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:32:28.199 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:32:28.201 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:32:28.203 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:32:28.206 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:32:28.208 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:32:28.209 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:32:28.211 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:32:28.212 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:32:28.214 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:32:28.215 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:32:28.217 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:32:28.218 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:32:28.222 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:32:28.224 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:32:28.225 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:32:28.226 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:32:28.227 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:32:28.228 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:32:28.229 +01:00 [DBG] Enlisted in an ambient transaction with isolation level 'Serializable'.
2022-10-17 17:32:28.230 +01:00 [DBG] Executing 5 update commands as a batch.
2022-10-17 17:32:28.231 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:32:28.232 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 17:32:28.234 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime2), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Guid), @p19='?' (DbType = Decimal), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p10, @p11, @p12, @p13);
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p14, @p15, @p16, @p17);
INSERT INTO "SB-historic"."Transfers" (transfer_id, amount, created_at, from_account_id, to_account_id)
VALUES (@p18, @p19, @p20, @p21, @p22);
2022-10-17 17:32:28.239 +01:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime2), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Guid), @p19='?' (DbType = Decimal), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p10, @p11, @p12, @p13);
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p14, @p15, @p16, @p17);
INSERT INTO "SB-historic"."Transfers" (transfer_id, amount, created_at, from_account_id, to_account_id)
VALUES (@p18, @p19, @p20, @p21, @p22);
2022-10-17 17:32:28.242 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:32:28.243 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:32:28.246 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 17:32:28.395 +01:00 [ERR] Critical error on transfer processing.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SimpleBank.AcctManage.Infrastructure.Persistence.UnitOfWork.SaveChangesAsync() in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Infrastructure.Persistence\UnitOfWork.cs:line 37
   at SimpleBank.AcctManage.Core.Application.Business.TransferBusiness.ProcressTransferAsync(Transfer transfer, Account accountFrom, Account accountTo) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Core.Application\Business\TransferBusiness.cs:line 79
   at SimpleBank.AcctManage.Core.Application.Business.TransferBusiness.MakeTransfer(Transfer transfer, Guid userId) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Core.Application\Business\TransferBusiness.cs:line 43
2022-10-17 17:33:58.334 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 17:33:58.439 +01:00 [DBG] Hosting starting
2022-10-17 17:33:58.477 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 17:33:58.481 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 17:33:58.487 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 17:33:58.489 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 17:33:58.494 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 17:33:58.500 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 17:33:58.502 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 17:33:58.510 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 17:33:58.512 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:33:58.516 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 17:33:58.518 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:33:58.522 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 17:33:58.525 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 17:33:58.528 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 17:33:58.530 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 17:33:58.672 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 17:33:58.718 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 17:33:58.719 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 17:33:58.720 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 17:33:58.721 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 17:33:58.722 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 17:33:58.723 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 17:33:58.724 +01:00 [INF] Hosting environment: Development
2022-10-17 17:33:58.725 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 17:33:58.725 +01:00 [DBG] Hosting started
2022-10-17 17:33:59.024 +01:00 [DBG] Connection id "0HMLGBLI7BR1J" received FIN.
2022-10-17 17:33:59.038 +01:00 [DBG] Connection id "0HMLGBLI7BR1J" accepted.
2022-10-17 17:33:59.040 +01:00 [DBG] Connection id "0HMLGBLI7BR1J" started.
2022-10-17 17:33:59.070 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:33:59.189 +01:00 [DBG] Connection id "0HMLGBLI7BR1J" stopped.
2022-10-17 17:33:59.198 +01:00 [DBG] Connection id "0HMLGBLI7BR1J" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:33:59.387 +01:00 [DBG] Connection id "0HMLGBLI7BR1K" accepted.
2022-10-17 17:33:59.388 +01:00 [DBG] Connection id "0HMLGBLI7BR1K" started.
2022-10-17 17:33:59.434 +01:00 [DBG] Connection 0HMLGBLI7BR1K established using the following protocol: "Tls13"
2022-10-17 17:33:59.476 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 17:33:59.519 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 17:33:59.666 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 17:33:59.800 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 17:33:59.802 +01:00 [DBG] Connection id "0HMLGBLI7BR1K" completed keep alive response.
2022-10-17 17:33:59.807 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 332.9030ms
2022-10-17 17:33:59.846 +01:00 [DBG] Connection id "0HMLGBLI7BR1L" accepted.
2022-10-17 17:33:59.856 +01:00 [DBG] Connection id "0HMLGBLI7BR1L" started.
2022-10-17 17:33:59.859 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 17:33:59.871 +01:00 [DBG] Connection 0HMLGBLI7BR1L established using the following protocol: "Tls13"
2022-10-17 17:33:59.873 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 17:33:59.883 +01:00 [DBG] Connection id "0HMLGBLI7BR1L" completed keep alive response.
2022-10-17 17:33:59.885 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 11.5165ms
2022-10-17 17:33:59.890 +01:00 [DBG] Connection id "0HMLGBLI7BR1K" completed keep alive response.
2022-10-17 17:33:59.891 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 32.3762ms
2022-10-17 17:34:00.165 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 17:34:00.426 +01:00 [DBG] Connection id "0HMLGBLI7BR1K" completed keep alive response.
2022-10-17 17:34:00.428 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 263.3970ms
2022-10-17 17:34:13.106 +01:00 [DBG] Connection id "0HMLGBLI7BR1M" accepted.
2022-10-17 17:34:13.106 +01:00 [DBG] Connection id "0HMLGBLI7BR1M" received FIN.
2022-10-17 17:34:13.109 +01:00 [DBG] Connection id "0HMLGBLI7BR1M" started.
2022-10-17 17:34:13.110 +01:00 [DBG] Connection id "0HMLGBLI7BR1N" accepted.
2022-10-17 17:34:13.115 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:34:13.116 +01:00 [DBG] Connection id "0HMLGBLI7BR1N" started.
2022-10-17 17:34:13.118 +01:00 [DBG] Connection id "0HMLGBLI7BR1M" stopped.
2022-10-17 17:34:13.120 +01:00 [DBG] Connection id "0HMLGBLI7BR1M" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:34:13.122 +01:00 [DBG] Connection 0HMLGBLI7BR1N established using the following protocol: "Tls13"
2022-10-17 17:34:13.123 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts - -
2022-10-17 17:34:13.129 +01:00 [DBG] The request path  does not match the path filter
2022-10-17 17:34:13.157 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts'
2022-10-17 17:34:13.164 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts'
2022-10-17 17:34:13.166 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 17:34:13.561 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:34:13.563 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:34:13.567 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 17:34:13.588 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 17:34:13.591 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:34:13.594 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:34:13.595 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:34:13.597 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:34:13.599 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:34:13.602 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 17:34:13.851 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 17:34:13.889 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 17:34:15.116 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:34:15.185 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(account => account.UserId == __userId_0)'
2022-10-17 17:34:15.654 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
        SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
        FROM SB-operational.Accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-17 17:34:15.719 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:34:15.809 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (86ms).
2022-10-17 17:34:15.821 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:34:16.056 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:34:16.076 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 17:34:16.205 +01:00 [INF] Executed DbCommand (138ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 17:34:16.265 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:34:16.307 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:34:16.330 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:34:16.337 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:34:16.350 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:34:16.355 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:34:16.357 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:34:16.358 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:34:16.360 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:34:16.363 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 17:34:16.367 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 17:34:16.369 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:34:16.370 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:34:16.371 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:34:16.374 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:34:16.381 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:34:16.382 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:34:16.383 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:34:16.385 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 17:34:16.387 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-17 17:34:16.407 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 2801.6461ms
2022-10-17 17:34:16.410 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 17:34:16.413 +01:00 [DBG] Connection id "0HMLGBLI7BR1N" completed keep alive response.
2022-10-17 17:34:16.417 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:34:16.422 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts - - - 200 - application/json;+charset=utf-8 3298.4032ms
2022-10-17 17:34:28.892 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139
2022-10-17 17:34:28.894 +01:00 [DBG] POST requests are not supported
2022-10-17 17:34:28.896 +01:00 [DBG] 1 candidate(s) found for the request path '/api/transfers'
2022-10-17 17:34:28.897 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)' with route pattern 'api/Transfers' is valid for the request path '/api/transfers'
2022-10-17 17:34:28.899 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:34:28.900 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:34:28.901 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:34:28.904 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:34:28.914 +01:00 [DBG] Authorization was successful.
2022-10-17 17:34:28.916 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:34:28.933 +01:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transfers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.TransferResponse]] MakeTransfer(SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest) on controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API).
2022-10-17 17:34:28.937 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:34:28.938 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:34:28.940 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:34:28.943 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:34:28.945 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:34:28.947 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:34:28.949 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:34:28.955 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:34:28.962 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' using the name '' in request data ...
2022-10-17 17:34:28.965 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:34:28.972 +01:00 [DBG] Connection id "0HMLGBLI7BR1N", Request id "0HMLGBLI7BR1N:00000003": started reading request body.
2022-10-17 17:34:28.973 +01:00 [DBG] Connection id "0HMLGBLI7BR1N", Request id "0HMLGBLI7BR1N:00000003": done reading request body.
2022-10-17 17:34:28.987 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'
2022-10-17 17:34:28.988 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:34:28.990 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:34:28.992 +01:00 [DBG] Attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:34:29.002 +01:00 [DBG] Done attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:34:36.664 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:34:36.678 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-17 17:34:36.766 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Account>(
    asyncEnumerable: new SingleQueryingEnumerable<Account>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.account_id, a.balance, a.created_at, a.currency, a.user_id
            FROM SB-operational.Accounts AS a
            WHERE a.account_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-17 17:34:36.792 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:34:36.794 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:34:36.804 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:34:36.807 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:34:36.809 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:34:36.831 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:34:36.870 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:34:36.880 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:34:36.893 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:34:36.896 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:34:37.916 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:34:37.920 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2022-10-17 17:34:37.922 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:34:37.924 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:34:37.925 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:34:37.931 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:34:37.956 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:34:37.958 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:34:37.959 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:34:37.960 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:36:02.490 +01:00 [DBG] Connection id "0HMLGBLI7BR1L" received FIN.
2022-10-17 17:36:07.845 +01:00 [DBG] Connection id "0HMLGBLI7BR1K" received FIN.
2022-10-17 17:36:07.862 +01:00 [DBG] Connection id "0HMLGBLI7BR1L" disconnecting.
2022-10-17 17:36:07.862 +01:00 [DBG] Connection id "0HMLGBLI7BR1K" disconnecting.
2022-10-17 17:36:07.865 +01:00 [DBG] Connection id "0HMLGBLI7BR1L" sending FIN because: "The client closed the connection."
2022-10-17 17:36:07.866 +01:00 [DBG] Connection id "0HMLGBLI7BR1K" sending FIN because: "The client closed the connection."
2022-10-17 17:36:07.877 +01:00 [DBG] Connection id "0HMLGBLI7BR1K" stopped.
2022-10-17 17:36:07.877 +01:00 [DBG] Connection id "0HMLGBLI7BR1L" stopped.
2022-10-17 17:36:07.907 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:36:07.929 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:36:07.935 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:36:07.959 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:36:07.962 +01:00 [DBG] 'SimpleBankDbContext' generated a value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:36:07.963 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:36:07.972 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:36:07.975 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:36:07.984 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:36:07.989 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:36:08.009 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:36:08.027 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:36:08.038 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:36:08.042 +01:00 [DBG] Enlisted in an ambient transaction with isolation level 'Serializable'.
2022-10-17 17:36:08.095 +01:00 [DBG] Executing 5 update commands as a batch.
2022-10-17 17:36:08.113 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:36:08.115 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:36:08.117 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime2), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Guid), @p19='?' (DbType = Decimal), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p10, @p11, @p12, @p13);
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p14, @p15, @p16, @p17);
INSERT INTO "SB-historic"."Transfers" (transfer_id, amount, created_at, from_account_id, to_account_id)
VALUES (@p18, @p19, @p20, @p21, @p22);
2022-10-17 17:36:08.126 +01:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime2), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = Decimal), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Guid), @p15='?' (DbType = Guid), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Guid), @p19='?' (DbType = Decimal), @p20='?' (DbType = DateTime2), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p10, @p11, @p12, @p13);
INSERT INTO "SB-operational"."Movements" (movement_id, account_id, amount, created_at)
VALUES (@p14, @p15, @p16, @p17);
INSERT INTO "SB-historic"."Transfers" (transfer_id, amount, created_at, from_account_id, to_account_id)
VALUES (@p18, @p19, @p20, @p21, @p22);
2022-10-17 17:36:08.135 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:36:08.137 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:36:08.147 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 17:42:15.577 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 17:42:15.691 +01:00 [DBG] Hosting starting
2022-10-17 17:42:15.741 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 17:42:15.746 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 17:42:15.760 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 17:42:15.762 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 17:42:15.769 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 17:42:15.778 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 17:42:15.780 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 17:42:15.788 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 17:42:15.791 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:42:15.794 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 17:42:15.795 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:42:15.800 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 17:42:15.803 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 17:42:15.807 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 17:42:15.808 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 17:42:15.988 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 17:42:16.050 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 17:42:16.052 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 17:42:16.054 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 17:42:16.056 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 17:42:16.058 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 17:42:16.059 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 17:42:16.060 +01:00 [INF] Hosting environment: Development
2022-10-17 17:42:16.061 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 17:42:16.062 +01:00 [DBG] Hosting started
2022-10-17 17:42:16.464 +01:00 [DBG] Connection id "0HMLGBQ6F98A4" accepted.
2022-10-17 17:42:16.464 +01:00 [DBG] Connection id "0HMLGBQ6F98A3" accepted.
2022-10-17 17:42:16.469 +01:00 [DBG] Connection id "0HMLGBQ6F98A4" started.
2022-10-17 17:42:16.469 +01:00 [DBG] Connection id "0HMLGBQ6F98A3" started.
2022-10-17 17:42:16.481 +01:00 [DBG] Connection id "0HMLGBQ6F98A4" received FIN.
2022-10-17 17:42:16.481 +01:00 [DBG] Connection id "0HMLGBQ6F98A3" received FIN.
2022-10-17 17:42:16.494 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:42:16.494 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:42:16.649 +01:00 [DBG] Connection id "0HMLGBQ6F98A4" stopped.
2022-10-17 17:42:16.649 +01:00 [DBG] Connection id "0HMLGBQ6F98A3" stopped.
2022-10-17 17:42:16.655 +01:00 [DBG] Connection id "0HMLGBQ6F98A4" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:42:16.655 +01:00 [DBG] Connection id "0HMLGBQ6F98A3" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:42:16.912 +01:00 [DBG] Connection id "0HMLGBQ6F98A5" accepted.
2022-10-17 17:42:16.915 +01:00 [DBG] Connection id "0HMLGBQ6F98A5" started.
2022-10-17 17:42:16.968 +01:00 [DBG] Connection 0HMLGBQ6F98A5 established using the following protocol: "Tls13"
2022-10-17 17:42:17.018 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 17:42:17.065 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 17:42:17.334 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 17:42:17.475 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 17:42:17.478 +01:00 [DBG] Connection id "0HMLGBQ6F98A5" completed keep alive response.
2022-10-17 17:42:17.481 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 466.2610ms
2022-10-17 17:42:17.522 +01:00 [DBG] Connection id "0HMLGBQ6F98A6" accepted.
2022-10-17 17:42:17.525 +01:00 [DBG] Connection id "0HMLGBQ6F98A6" started.
2022-10-17 17:42:17.531 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 17:42:17.546 +01:00 [DBG] Connection 0HMLGBQ6F98A6 established using the following protocol: "Tls13"
2022-10-17 17:42:17.556 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 17:42:17.562 +01:00 [DBG] Connection id "0HMLGBQ6F98A6" completed keep alive response.
2022-10-17 17:42:17.569 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 12.9621ms
2022-10-17 17:42:17.603 +01:00 [DBG] Connection id "0HMLGBQ6F98A5" completed keep alive response.
2022-10-17 17:42:17.604 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 73.2275ms
2022-10-17 17:42:17.772 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 17:42:17.983 +01:00 [DBG] Connection id "0HMLGBQ6F98A5" completed keep alive response.
2022-10-17 17:42:17.985 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 212.1115ms
2022-10-17 17:42:22.796 +01:00 [DBG] Connection id "0HMLGBQ6F98A7" accepted.
2022-10-17 17:42:22.796 +01:00 [DBG] Connection id "0HMLGBQ6F98A7" received FIN.
2022-10-17 17:42:22.799 +01:00 [DBG] Connection id "0HMLGBQ6F98A7" started.
2022-10-17 17:42:22.800 +01:00 [DBG] Connection id "0HMLGBQ6F98A8" accepted.
2022-10-17 17:42:22.802 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:42:22.803 +01:00 [DBG] Connection id "0HMLGBQ6F98A8" started.
2022-10-17 17:42:22.806 +01:00 [DBG] Connection id "0HMLGBQ6F98A7" stopped.
2022-10-17 17:42:22.807 +01:00 [DBG] Connection id "0HMLGBQ6F98A7" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:42:22.809 +01:00 [DBG] Connection 0HMLGBQ6F98A8 established using the following protocol: "Tls13"
2022-10-17 17:42:22.811 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139
2022-10-17 17:42:22.814 +01:00 [DBG] POST requests are not supported
2022-10-17 17:42:22.844 +01:00 [DBG] 1 candidate(s) found for the request path '/api/transfers'
2022-10-17 17:42:22.851 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)' with route pattern 'api/Transfers' is valid for the request path '/api/transfers'
2022-10-17 17:42:22.854 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:42:23.237 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:42:23.240 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:42:23.244 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:42:23.250 +01:00 [DBG] Authorization was successful.
2022-10-17 17:42:23.254 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:42:23.290 +01:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transfers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.TransferResponse]] MakeTransfer(SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest) on controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API).
2022-10-17 17:42:23.293 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:42:23.295 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:42:23.296 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:42:23.300 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:42:23.303 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:42:23.306 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:42:23.531 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 17:42:23.569 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:42:23.577 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:42:23.582 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' using the name '' in request data ...
2022-10-17 17:42:23.587 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:42:23.597 +01:00 [DBG] Connection id "0HMLGBQ6F98A8", Request id "0HMLGBQ6F98A8:00000002": started reading request body.
2022-10-17 17:42:23.601 +01:00 [DBG] Connection id "0HMLGBQ6F98A8", Request id "0HMLGBQ6F98A8:00000002": done reading request body.
2022-10-17 17:42:23.612 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'
2022-10-17 17:42:23.614 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:42:23.618 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:42:23.619 +01:00 [DBG] Attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:42:23.629 +01:00 [DBG] Done attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:42:29.623 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:42:29.735 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-17 17:42:30.192 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Account>(
    asyncEnumerable: new SingleQueryingEnumerable<Account>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.account_id, a.balance, a.created_at, a.currency, a.user_id
            FROM SB-operational.Accounts AS a
            WHERE a.account_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-17 17:42:30.262 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:42:30.356 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (89ms).
2022-10-17 17:42:30.382 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:42:30.682 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:42:30.702 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:42:30.817 +01:00 [INF] Executed DbCommand (122ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:42:30.881 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:42:30.942 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:42:30.953 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:42:30.964 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:42:32.766 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:42:32.767 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:42:32.769 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:42:32.770 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:42:32.772 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:42:32.817 +01:00 [INF] Executed DbCommand (46ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:42:32.820 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:42:32.822 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:42:32.822 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:42:32.824 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:42:37.527 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:42:37.551 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:42:37.556 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:42:37.585 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:42:37.589 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:42:37.590 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:42:37.600 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:42:37.603 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:42:37.615 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:42:37.619 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:42:37.640 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:42:37.668 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:42:37.681 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:42:37.686 +01:00 [DBG] Enlisted in an ambient transaction with isolation level 'Serializable'.
2022-10-17 17:42:37.739 +01:00 [DBG] Executing 5 update commands as a batch.
2022-10-17 17:42:37.760 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:42:37.762 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:42:37.766 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Guid), @p14='?' (DbType = Decimal), @p15='?' (DbType = DateTime), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p10, @p11, @p12)
RETURNING movement_id;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p13, @p14, @p15)
RETURNING movement_id;
INSERT INTO "SB-historic"."Transfers" (amount, created_at, from_account_id, to_account_id)
VALUES (@p16, @p17, @p18, @p19)
RETURNING transfer_id;
2022-10-17 17:42:37.777 +01:00 [ERR] Failed executing DbCommand (15ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Guid), @p14='?' (DbType = Decimal), @p15='?' (DbType = DateTime), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p10, @p11, @p12)
RETURNING movement_id;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p13, @p14, @p15)
RETURNING movement_id;
INSERT INTO "SB-historic"."Transfers" (amount, created_at, from_account_id, to_account_id)
VALUES (@p16, @p17, @p18, @p19)
RETURNING transfer_id;
2022-10-17 17:42:37.789 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:42:37.791 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:42:37.801 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 17:43:33.590 +01:00 [ERR] Critical error on transfer processing.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SimpleBank.AcctManage.Infrastructure.Persistence.UnitOfWork.SaveChangesAsync() in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Infrastructure.Persistence\UnitOfWork.cs:line 37
   at SimpleBank.AcctManage.Core.Application.Business.TransferBusiness.ProcressTransferAsync(Transfer transfer, Account accountFrom, Account accountTo) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Core.Application\Business\TransferBusiness.cs:line 79
   at SimpleBank.AcctManage.Core.Application.Business.TransferBusiness.MakeTransfer(Transfer transfer, Guid userId) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Core.Application\Business\TransferBusiness.cs:line 43
2022-10-17 17:43:33.684 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:43:33.691 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:43:33.692 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:43:33.693 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:43:33.694 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 17:43:33.696 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2022-10-17 17:43:33.704 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API) in 70394.293ms
2022-10-17 17:43:33.708 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:43:33.711 +01:00 [DBG] Connection id "0HMLGBQ6F98A8" completed keep alive response.
2022-10-17 17:43:33.715 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:43:33.723 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139 - 401 - text/plain;+charset=utf-8 70911.5225ms
2022-10-17 17:44:12.837 +01:00 [DBG] Connection id "0HMLGBQ6F98A6" received FIN.
2022-10-17 17:44:12.845 +01:00 [DBG] Connection id "0HMLGBQ6F98A6" disconnecting.
2022-10-17 17:44:12.849 +01:00 [DBG] Connection id "0HMLGBQ6F98A6" sending FIN because: "The client closed the connection."
2022-10-17 17:44:12.860 +01:00 [DBG] Connection id "0HMLGBQ6F98A6" stopped.
2022-10-17 17:44:13.845 +01:00 [DBG] Connection id "0HMLGBQ6F98A5" received FIN.
2022-10-17 17:44:13.845 +01:00 [DBG] Connection id "0HMLGBQ6F98A5" disconnecting.
2022-10-17 17:44:13.849 +01:00 [DBG] Connection id "0HMLGBQ6F98A5" sending FIN because: "The client closed the connection."
2022-10-17 17:44:13.854 +01:00 [DBG] Connection id "0HMLGBQ6F98A5" stopped.
2022-10-17 17:50:56.406 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 17:50:56.514 +01:00 [DBG] Hosting starting
2022-10-17 17:50:56.568 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 17:50:56.573 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 17:50:56.586 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 17:50:56.588 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 17:50:56.595 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 17:50:56.604 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 17:50:56.605 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 17:50:56.613 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 17:50:56.616 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:50:56.620 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 17:50:56.622 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:50:56.626 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 17:50:56.630 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 17:50:56.633 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 17:50:56.635 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 17:50:56.901 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 17:50:56.950 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 17:50:56.962 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 17:50:56.965 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 17:50:56.966 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 17:50:56.968 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 17:50:56.969 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 17:50:56.970 +01:00 [INF] Hosting environment: Development
2022-10-17 17:50:56.970 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 17:50:56.971 +01:00 [DBG] Hosting started
2022-10-17 17:50:56.975 +01:00 [DBG] Connection id "0HMLGBV1J9UPH" received FIN.
2022-10-17 17:50:56.988 +01:00 [DBG] Connection id "0HMLGBV1J9UPH" accepted.
2022-10-17 17:50:56.992 +01:00 [DBG] Connection id "0HMLGBV1J9UPH" started.
2022-10-17 17:50:57.015 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:50:57.150 +01:00 [DBG] Connection id "0HMLGBV1J9UPH" stopped.
2022-10-17 17:50:57.158 +01:00 [DBG] Connection id "0HMLGBV1J9UPH" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:50:57.328 +01:00 [DBG] Connection id "0HMLGBV1J9UPI" accepted.
2022-10-17 17:50:57.334 +01:00 [DBG] Connection id "0HMLGBV1J9UPI" started.
2022-10-17 17:50:57.405 +01:00 [DBG] Connection 0HMLGBV1J9UPI established using the following protocol: "Tls13"
2022-10-17 17:50:57.453 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 17:50:57.491 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 17:50:57.649 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 17:50:57.805 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 17:50:57.819 +01:00 [DBG] Connection id "0HMLGBV1J9UPI" completed keep alive response.
2022-10-17 17:50:57.822 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 372.5972ms
2022-10-17 17:50:57.854 +01:00 [DBG] Connection id "0HMLGBV1J9UPJ" accepted.
2022-10-17 17:50:57.862 +01:00 [DBG] Connection id "0HMLGBV1J9UPJ" started.
2022-10-17 17:50:57.882 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 17:50:57.882 +01:00 [DBG] Connection 0HMLGBV1J9UPJ established using the following protocol: "Tls13"
2022-10-17 17:50:57.884 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 17:50:57.890 +01:00 [DBG] Connection id "0HMLGBV1J9UPJ" completed keep alive response.
2022-10-17 17:50:57.892 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 7.4029ms
2022-10-17 17:50:57.925 +01:00 [DBG] Connection id "0HMLGBV1J9UPI" completed keep alive response.
2022-10-17 17:50:57.926 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 43.9998ms
2022-10-17 17:50:58.098 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 17:50:58.284 +01:00 [DBG] Connection id "0HMLGBV1J9UPI" completed keep alive response.
2022-10-17 17:50:58.285 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 186.5591ms
2022-10-17 17:51:57.363 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 17:51:57.490 +01:00 [DBG] Hosting starting
2022-10-17 17:51:57.546 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 17:51:57.552 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 17:51:57.565 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 17:51:57.568 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 17:51:57.576 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 17:51:57.584 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 17:51:57.585 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 17:51:57.594 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 17:51:57.597 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:51:57.601 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 17:51:57.603 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:51:57.608 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 17:51:57.611 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 17:51:57.614 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 17:51:57.616 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 17:51:57.663 +01:00 [ERR] BackgroundService failed
Confluent.Kafka.ConsumeException: Subscribed topic not available: transfer: Broker: Unknown topic or partition
   at Confluent.Kafka.Consumer`2.Consume(Int32 millisecondsTimeout)
   at Confluent.Kafka.Consumer`2.Consume(CancellationToken cancellationToken)
   at SimpleBank.AcctManage.Infrastructure.Providers.Notification.ConsumerService.TransferNotificationConsumerThread`1.ExecuteAsync(CancellationToken cancellationToken) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Infrastructure.Providers\TransferMailNotification\ConsumerService\TransferNotificationConsumerThread.cs:line 31
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2022-10-17 17:51:57.744 +01:00 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted.
Confluent.Kafka.ConsumeException: Subscribed topic not available: transfer: Broker: Unknown topic or partition
   at Confluent.Kafka.Consumer`2.Consume(Int32 millisecondsTimeout)
   at Confluent.Kafka.Consumer`2.Consume(CancellationToken cancellationToken)
   at SimpleBank.AcctManage.Infrastructure.Providers.Notification.ConsumerService.TransferNotificationConsumerThread`1.ExecuteAsync(CancellationToken cancellationToken) in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.Infrastructure.Providers\TransferMailNotification\ConsumerService\TransferNotificationConsumerThread.cs:line 31
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2022-10-17 17:51:57.747 +01:00 [INF] Application is shutting down...
2022-10-17 17:52:29.681 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 17:52:29.795 +01:00 [DBG] Hosting starting
2022-10-17 17:52:29.847 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 17:52:29.852 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 17:52:29.865 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 17:52:29.867 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 17:52:29.875 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 17:52:29.883 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 17:52:29.884 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 17:52:29.892 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 17:52:29.896 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:52:29.899 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 17:52:29.901 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 17:52:29.906 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 17:52:29.909 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 17:52:29.912 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 17:52:29.913 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 17:52:30.094 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 17:52:30.148 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 17:52:30.150 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 17:52:30.151 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 17:52:30.153 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 17:52:30.154 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 17:52:30.156 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 17:52:30.157 +01:00 [INF] Hosting environment: Development
2022-10-17 17:52:30.158 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 17:52:30.159 +01:00 [DBG] Hosting started
2022-10-17 17:52:30.554 +01:00 [DBG] Connection id "0HMLGBVTFMS9O" accepted.
2022-10-17 17:52:30.557 +01:00 [DBG] Connection id "0HMLGBVTFMS9O" started.
2022-10-17 17:52:30.585 +01:00 [DBG] Connection id "0HMLGBVTFMS9P" received FIN.
2022-10-17 17:52:30.587 +01:00 [DBG] Connection id "0HMLGBVTFMS9O" received FIN.
2022-10-17 17:52:30.589 +01:00 [DBG] Connection id "0HMLGBVTFMS9P" accepted.
2022-10-17 17:52:30.592 +01:00 [DBG] Connection id "0HMLGBVTFMS9P" started.
2022-10-17 17:52:30.603 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:52:30.603 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:52:30.751 +01:00 [DBG] Connection id "0HMLGBVTFMS9P" stopped.
2022-10-17 17:52:30.799 +01:00 [DBG] Connection id "0HMLGBVTFMS9O" stopped.
2022-10-17 17:52:30.802 +01:00 [DBG] Connection id "0HMLGBVTFMS9P" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:52:30.813 +01:00 [DBG] Connection id "0HMLGBVTFMS9O" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:52:30.993 +01:00 [DBG] Connection id "0HMLGBVTFMS9Q" accepted.
2022-10-17 17:52:30.994 +01:00 [DBG] Connection id "0HMLGBVTFMS9Q" started.
2022-10-17 17:52:31.036 +01:00 [DBG] Connection 0HMLGBVTFMS9Q established using the following protocol: "Tls13"
2022-10-17 17:52:31.084 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 17:52:31.124 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 17:52:31.292 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 17:52:31.443 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 17:52:31.447 +01:00 [DBG] Connection id "0HMLGBVTFMS9Q" completed keep alive response.
2022-10-17 17:52:31.452 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 369.6071ms
2022-10-17 17:52:31.499 +01:00 [DBG] Connection id "0HMLGBVTFMS9R" accepted.
2022-10-17 17:52:31.503 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 17:52:31.513 +01:00 [DBG] Connection id "0HMLGBVTFMS9R" started.
2022-10-17 17:52:31.535 +01:00 [DBG] Connection 0HMLGBVTFMS9R established using the following protocol: "Tls13"
2022-10-17 17:52:31.538 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 17:52:31.551 +01:00 [DBG] Connection id "0HMLGBVTFMS9R" completed keep alive response.
2022-10-17 17:52:31.553 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 15.4580ms
2022-10-17 17:52:31.566 +01:00 [DBG] Connection id "0HMLGBVTFMS9Q" completed keep alive response.
2022-10-17 17:52:31.567 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 63.8670ms
2022-10-17 17:52:31.758 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 17:52:31.976 +01:00 [DBG] Connection id "0HMLGBVTFMS9Q" completed keep alive response.
2022-10-17 17:52:31.977 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 219.0759ms
2022-10-17 17:52:47.502 +01:00 [DBG] Connection id "0HMLGBVTFMS9S" accepted.
2022-10-17 17:52:47.510 +01:00 [DBG] Connection id "0HMLGBVTFMS9S" received FIN.
2022-10-17 17:52:47.511 +01:00 [DBG] Connection id "0HMLGBVTFMS9S" started.
2022-10-17 17:52:47.512 +01:00 [DBG] Connection id "0HMLGBVTFMS9T" accepted.
2022-10-17 17:52:47.514 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 17:52:47.515 +01:00 [DBG] Connection id "0HMLGBVTFMS9T" started.
2022-10-17 17:52:47.519 +01:00 [DBG] Connection id "0HMLGBVTFMS9S" stopped.
2022-10-17 17:52:47.521 +01:00 [DBG] Connection id "0HMLGBVTFMS9S" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 17:52:47.534 +01:00 [DBG] Connection 0HMLGBVTFMS9T established using the following protocol: "Tls13"
2022-10-17 17:52:47.537 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139
2022-10-17 17:52:47.543 +01:00 [DBG] POST requests are not supported
2022-10-17 17:52:47.586 +01:00 [DBG] 1 candidate(s) found for the request path '/api/transfers'
2022-10-17 17:52:47.596 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)' with route pattern 'api/Transfers' is valid for the request path '/api/transfers'
2022-10-17 17:52:47.600 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:52:48.083 +01:00 [DBG] Successfully validated the token.
2022-10-17 17:52:48.084 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:52:48.088 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 17:52:48.097 +01:00 [DBG] Authorization was successful.
2022-10-17 17:52:48.100 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:52:48.141 +01:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transfers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.TransferResponse]] MakeTransfer(SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest) on controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API).
2022-10-17 17:52:48.147 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:52:48.149 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:52:48.151 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:52:48.153 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:52:48.154 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:52:48.160 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:52:48.430 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 17:52:48.469 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 17:52:48.480 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:52:48.484 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' using the name '' in request data ...
2022-10-17 17:52:48.488 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:52:48.502 +01:00 [DBG] Connection id "0HMLGBVTFMS9T", Request id "0HMLGBVTFMS9T:00000002": started reading request body.
2022-10-17 17:52:48.504 +01:00 [DBG] Connection id "0HMLGBVTFMS9T", Request id "0HMLGBVTFMS9T:00000002": done reading request body.
2022-10-17 17:52:48.518 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'
2022-10-17 17:52:48.520 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:52:48.521 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:52:48.525 +01:00 [DBG] Attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 17:52:48.536 +01:00 [DBG] Done attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 17:52:49.964 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:52:50.098 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-17 17:52:50.652 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Account>(
    asyncEnumerable: new SingleQueryingEnumerable<Account>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.account_id, a.balance, a.created_at, a.currency, a.user_id
            FROM SB-operational.Accounts AS a
            WHERE a.account_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-17 17:52:50.747 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:52:50.870 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (121ms).
2022-10-17 17:52:50.890 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:52:51.149 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:52:51.170 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:52:51.283 +01:00 [INF] Executed DbCommand (121ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:52:51.313 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:52:51.325 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:52:51.338 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:52:51.348 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:52:51.350 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:52:51.351 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:52:51.352 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:52:51.353 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:52:51.365 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 17:52:51.368 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:52:51.369 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:52:51.370 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:52:51.380 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:52:51.386 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:52:51.387 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:52:51.388 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:52:51.389 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 17:52:51.390 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-17 17:52:51.401 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API) in 3240.3381ms
2022-10-17 17:52:51.405 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 17:52:51.410 +01:00 [DBG] Connection id "0HMLGBVTFMS9T" completed keep alive response.
2022-10-17 17:52:51.416 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:52:51.421 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139 - 400 - text/plain;+charset=utf-8 3883.8452ms
2022-10-17 17:52:59.734 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/ application/json 137
2022-10-17 17:52:59.740 +01:00 [DBG] POST requests are not supported
2022-10-17 17:52:59.743 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/'
2022-10-17 17:52:59.750 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)' with route pattern 'api/Users' is valid for the request path '/api/users/'
2022-10-17 17:52:59.760 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 17:52:59.764 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 17:52:59.770 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 17:52:59.773 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 17:52:59.778 +01:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] Create(SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 17:52:59.780 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:52:59.781 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:52:59.782 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:52:59.788 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:52:59.791 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:52:59.792 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:52:59.794 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:52:59.796 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' ...
2022-10-17 17:52:59.797 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' using the name '' in request data ...
2022-10-17 17:52:59.799 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:52:59.804 +01:00 [DBG] Connection id "0HMLGBVTFMS9T", Request id "0HMLGBVTFMS9T:00000003": started reading request body.
2022-10-17 17:52:59.805 +01:00 [DBG] Connection id "0HMLGBVTFMS9T", Request id "0HMLGBVTFMS9T:00000003": done reading request body.
2022-10-17 17:52:59.808 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'
2022-10-17 17:52:59.809 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 17:52:59.810 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 17:52:59.811 +01:00 [DBG] Attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' ...
2022-10-17 17:52:59.813 +01:00 [DBG] Done attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 17:52:59.860 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:52:59.899 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:53:00.050 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:53:00.063 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:53:00.068 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:53:00.092 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:53:00.125 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:53:00.126 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:53:00.130 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:53:00.146 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:53:00.219 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:53:00.221 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 17:53:00.224 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?', @p2='?', @p3='?' (DbType = Binary), @p4='?' (DbType = Binary), @p5='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_id, password_changed_at;
2022-10-17 17:53:00.257 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?', @p2='?', @p3='?' (DbType = Binary), @p4='?' (DbType = Binary), @p5='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_id, password_changed_at;
2022-10-17 17:53:00.294 +01:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-17 17:53:00.305 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:53:00.313 +01:00 [DBG] Committing transaction.
2022-10-17 17:53:00.329 +01:00 [DBG] Committed transaction.
2022-10-17 17:53:00.337 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:53:00.341 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:53:00.346 +01:00 [DBG] Disposing transaction.
2022-10-17 17:53:00.372 +01:00 [DBG] An entity of type 'User' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:53:00.380 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 17:53:00.399 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:53:00.405 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:53:00.406 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:53:00.408 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:53:00.409 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 17:53:00.410 +01:00 [INF] Executing CreatedResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-17 17:53:00.416 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API) in 623.4363ms
2022-10-17 17:53:00.422 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 17:53:00.425 +01:00 [DBG] Connection id "0HMLGBVTFMS9T" completed keep alive response.
2022-10-17 17:53:00.426 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:53:00.427 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/ application/json 137 - 201 - application/json;+charset=utf-8 693.2248ms
2022-10-17 17:53:03.944 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 17:53:03.949 +01:00 [DBG] POST requests are not supported
2022-10-17 17:53:03.950 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 17:53:03.951 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 17:53:03.953 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 17:53:03.955 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 17:53:03.960 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 17:53:03.961 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 17:53:03.965 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 17:53:03.967 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:53:03.968 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:53:03.970 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:53:03.977 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:53:03.979 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:53:03.980 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:53:03.983 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:53:03.985 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 17:53:03.986 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 17:53:03.988 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:53:03.993 +01:00 [DBG] Connection id "0HMLGBVTFMS9T", Request id "0HMLGBVTFMS9T:00000004": started reading request body.
2022-10-17 17:53:03.994 +01:00 [DBG] Connection id "0HMLGBVTFMS9T", Request id "0HMLGBVTFMS9T:00000004": done reading request body.
2022-10-17 17:53:03.996 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 17:53:03.997 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 17:53:03.998 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 17:53:04.000 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 17:53:04.009 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 17:53:04.020 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:53:04.029 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-17 17:53:04.056 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 17:53:04.066 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:53:04.067 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:53:04.069 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:53:04.071 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:53:04.075 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 17:53:04.081 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 17:53:04.095 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:53:04.101 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:53:04.103 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:53:04.106 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:53:04.112 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-17 17:53:04.116 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 17:53:04.118 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:53:04.119 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 17:53:04.121 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:53:04.123 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:53:04.125 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 17:53:04.130 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 17:53:04.132 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:53:04.133 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:53:04.134 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:53:04.169 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:53:04.170 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:53:04.173 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:53:04.181 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:53:04.182 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:53:04.183 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:53:04.184 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:53:04.185 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:53:04.187 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:53:04.190 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 17:53:04.191 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 17:53:04.199 +01:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 17:53:04.221 +01:00 [DBG] Disposing transaction.
2022-10-17 17:53:04.224 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:53:04.227 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:53:04.236 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 17:53:04.359 +01:00 [ERR] Error on creating new entity.
2022-10-17 17:53:04.363 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 17:53:04.365 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 17:53:04.367 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 17:53:04.368 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 17:53:04.369 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 17:53:04.370 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 17:53:04.372 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 391.0723ms
2022-10-17 17:53:04.374 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 17:53:04.375 +01:00 [DBG] Connection id "0HMLGBVTFMS9T" completed keep alive response.
2022-10-17 17:53:04.376 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 17:53:04.378 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 500 - text/plain;+charset=utf-8 433.4109ms
2022-10-17 17:53:57.170 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 17:53:57.181 +01:00 [DBG] POST requests are not supported
2022-10-17 17:53:57.185 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 17:53:57.187 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 17:53:57.189 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 17:53:57.190 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 17:53:57.195 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 17:53:57.198 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 17:53:57.200 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 17:53:57.203 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 17:53:57.204 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 17:53:57.205 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 17:53:57.207 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 17:53:57.210 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 17:53:57.212 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:53:57.217 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 17:53:57.219 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 17:53:57.220 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 17:53:57.223 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 17:53:57.224 +01:00 [DBG] Connection id "0HMLGBVTFMS9T", Request id "0HMLGBVTFMS9T:00000005": started reading request body.
2022-10-17 17:53:57.227 +01:00 [DBG] Connection id "0HMLGBVTFMS9T", Request id "0HMLGBVTFMS9T:00000005": done reading request body.
2022-10-17 17:53:57.229 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 17:53:57.231 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 17:53:57.232 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 17:53:57.233 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 17:53:57.235 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 17:53:57.237 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 17:53:57.239 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:53:57.240 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:53:57.243 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:53:57.244 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:53:57.247 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 17:53:57.250 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 17:53:57.255 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:53:57.257 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:53:57.258 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:53:57.261 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:54:03.831 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:54:03.836 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2022-10-17 17:54:03.839 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:54:03.840 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:54:03.842 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 17:54:03.856 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 17:54:03.859 +01:00 [DBG] A data reader was disposed.
2022-10-17 17:54:03.860 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:54:03.861 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:54:13.088 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 17:54:13.455 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:54:13.457 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 17:54:13.460 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 17:54:13.463 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 17:54:13.464 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:54:13.465 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 17:54:13.466 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 17:54:13.467 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 17:54:13.468 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 17:54:13.470 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 17:54:13.473 +01:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 17:54:13.485 +01:00 [DBG] Disposing transaction.
2022-10-17 17:54:13.520 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 17:54:13.521 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 17:54:13.524 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 18:15:02.324 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 18:15:02.472 +01:00 [DBG] Hosting starting
2022-10-17 18:15:02.521 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 18:15:02.525 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 18:15:02.539 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 18:15:02.541 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 18:15:02.549 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 18:15:02.557 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 18:15:02.559 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 18:15:02.568 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 18:15:02.572 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:15:02.577 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 18:15:02.579 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:15:02.585 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 18:15:02.588 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 18:15:02.592 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 18:15:02.595 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 18:15:02.811 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 18:15:02.874 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 18:15:02.875 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 18:15:02.876 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 18:15:02.877 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 18:15:02.879 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 18:15:02.880 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 18:15:02.880 +01:00 [INF] Hosting environment: Development
2022-10-17 18:15:02.881 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 18:15:02.882 +01:00 [DBG] Hosting started
2022-10-17 18:15:02.935 +01:00 [DBG] Connection id "0HMLGCCGH1NVC" received FIN.
2022-10-17 18:15:02.935 +01:00 [DBG] Connection id "0HMLGCCGH1NVD" received FIN.
2022-10-17 18:15:02.937 +01:00 [DBG] Connection id "0HMLGCCGH1NVC" accepted.
2022-10-17 18:15:02.937 +01:00 [DBG] Connection id "0HMLGCCGH1NVD" accepted.
2022-10-17 18:15:02.940 +01:00 [DBG] Connection id "0HMLGCCGH1NVC" started.
2022-10-17 18:15:02.940 +01:00 [DBG] Connection id "0HMLGCCGH1NVD" started.
2022-10-17 18:15:02.960 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:15:02.960 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:15:03.019 +01:00 [DBG] Connection id "0HMLGCCGH1NVC" stopped.
2022-10-17 18:15:03.019 +01:00 [DBG] Connection id "0HMLGCCGH1NVD" stopped.
2022-10-17 18:15:03.023 +01:00 [DBG] Connection id "0HMLGCCGH1NVD" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:15:03.023 +01:00 [DBG] Connection id "0HMLGCCGH1NVC" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:15:03.715 +01:00 [DBG] Connection id "0HMLGCCGH1NVE" accepted.
2022-10-17 18:15:03.717 +01:00 [DBG] Connection id "0HMLGCCGH1NVE" started.
2022-10-17 18:15:03.764 +01:00 [DBG] Connection 0HMLGCCGH1NVE established using the following protocol: "Tls13"
2022-10-17 18:15:03.821 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 18:15:04.055 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 18:15:04.216 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 18:15:04.359 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 18:15:04.363 +01:00 [DBG] Connection id "0HMLGCCGH1NVE" completed keep alive response.
2022-10-17 18:15:04.367 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 548.4946ms
2022-10-17 18:15:04.428 +01:00 [DBG] Connection id "0HMLGCCGH1NVF" accepted.
2022-10-17 18:15:04.430 +01:00 [DBG] Connection id "0HMLGCCGH1NVF" started.
2022-10-17 18:15:04.433 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 18:15:04.439 +01:00 [DBG] Connection 0HMLGCCGH1NVF established using the following protocol: "Tls13"
2022-10-17 18:15:04.449 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 18:15:04.462 +01:00 [DBG] Connection id "0HMLGCCGH1NVF" completed keep alive response.
2022-10-17 18:15:04.469 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 19.8795ms
2022-10-17 18:15:04.495 +01:00 [DBG] Connection id "0HMLGCCGH1NVE" completed keep alive response.
2022-10-17 18:15:04.510 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 76.3549ms
2022-10-17 18:15:04.698 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 18:15:04.893 +01:00 [DBG] Connection id "0HMLGCCGH1NVE" completed keep alive response.
2022-10-17 18:15:04.895 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 197.0443ms
2022-10-17 18:16:59.476 +01:00 [DBG] Connection id "0HMLGCCGH1NVF" received FIN.
2022-10-17 18:16:59.486 +01:00 [DBG] Connection id "0HMLGCCGH1NVF" disconnecting.
2022-10-17 18:16:59.488 +01:00 [DBG] Connection id "0HMLGCCGH1NVF" sending FIN because: "The client closed the connection."
2022-10-17 18:16:59.495 +01:00 [DBG] Connection id "0HMLGCCGH1NVF" stopped.
2022-10-17 18:17:00.467 +01:00 [DBG] Connection id "0HMLGCCGH1NVE" received FIN.
2022-10-17 18:17:00.467 +01:00 [DBG] Connection id "0HMLGCCGH1NVE" disconnecting.
2022-10-17 18:17:00.479 +01:00 [DBG] Connection id "0HMLGCCGH1NVE" sending FIN because: "The client closed the connection."
2022-10-17 18:17:00.490 +01:00 [DBG] Connection id "0HMLGCCGH1NVE" stopped.
2022-10-17 18:17:11.724 +01:00 [DBG] Connection id "0HMLGCCGH1NVG" accepted.
2022-10-17 18:17:11.729 +01:00 [DBG] Connection id "0HMLGCCGH1NVG" received FIN.
2022-10-17 18:17:11.730 +01:00 [DBG] Connection id "0HMLGCCGH1NVG" started.
2022-10-17 18:17:11.733 +01:00 [DBG] Connection id "0HMLGCCGH1NVH" accepted.
2022-10-17 18:17:11.737 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:17:11.739 +01:00 [DBG] Connection id "0HMLGCCGH1NVH" started.
2022-10-17 18:17:11.742 +01:00 [DBG] Connection id "0HMLGCCGH1NVG" stopped.
2022-10-17 18:17:11.744 +01:00 [DBG] Connection id "0HMLGCCGH1NVG" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:17:11.758 +01:00 [DBG] Connection 0HMLGCCGH1NVH established using the following protocol: "Tls13"
2022-10-17 18:17:11.761 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/ application/json 137
2022-10-17 18:17:11.765 +01:00 [DBG] POST requests are not supported
2022-10-17 18:17:11.807 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/'
2022-10-17 18:17:11.812 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)' with route pattern 'api/Users' is valid for the request path '/api/users/'
2022-10-17 18:17:11.815 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 18:17:11.928 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:17:11.932 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:17:11.934 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 18:17:11.977 +01:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] Create(SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:17:11.980 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:17:11.982 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:17:11.983 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:17:11.987 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:17:11.989 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:17:11.992 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:17:12.247 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 18:17:12.281 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:17:12.291 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' ...
2022-10-17 18:17:12.294 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' using the name '' in request data ...
2022-10-17 18:17:12.296 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:17:12.306 +01:00 [DBG] Connection id "0HMLGCCGH1NVH", Request id "0HMLGCCGH1NVH:00000002": started reading request body.
2022-10-17 18:17:12.309 +01:00 [DBG] Connection id "0HMLGCCGH1NVH", Request id "0HMLGCCGH1NVH:00000002": done reading request body.
2022-10-17 18:17:12.316 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'
2022-10-17 18:17:12.318 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 18:17:12.321 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 18:17:12.323 +01:00 [DBG] Attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' ...
2022-10-17 18:17:12.332 +01:00 [DBG] Done attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 18:17:13.538 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:17:13.583 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:17:13.676 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:17:13.693 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:17:13.701 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:17:13.727 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:17:13.886 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:17:14.240 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:17:14.248 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:17:14.264 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:17:14.349 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:17:14.360 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2022-10-17 18:17:14.382 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?', @p2='?', @p3='?' (DbType = Binary), @p4='?' (DbType = Binary), @p5='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_id, password_changed_at;
2022-10-17 18:17:14.534 +01:00 [INF] Executed DbCommand (159ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?', @p2='?', @p3='?' (DbType = Binary), @p4='?' (DbType = Binary), @p5='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_id, password_changed_at;
2022-10-17 18:17:14.575 +01:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-17 18:17:14.599 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:17:14.616 +01:00 [DBG] Committing transaction.
2022-10-17 18:17:14.632 +01:00 [DBG] Committed transaction.
2022-10-17 18:17:14.643 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:17:14.653 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:17:14.664 +01:00 [DBG] Disposing transaction.
2022-10-17 18:17:14.685 +01:00 [DBG] An entity of type 'User' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:17:14.695 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 18:17:14.727 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:17:14.732 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:17:14.732 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:17:14.733 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:17:14.735 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 18:17:14.736 +01:00 [INF] Executing CreatedResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-17 18:17:14.755 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API) in 2759.3142ms
2022-10-17 18:17:14.761 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 18:17:14.764 +01:00 [DBG] Connection id "0HMLGCCGH1NVH" completed keep alive response.
2022-10-17 18:17:14.768 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:17:14.778 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/ application/json 137 - 201 - application/json;+charset=utf-8 3016.6095ms
2022-10-17 18:17:19.234 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:17:19.236 +01:00 [DBG] POST requests are not supported
2022-10-17 18:17:19.239 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:17:19.241 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:17:19.247 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:17:19.251 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:17:19.254 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:17:19.255 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:17:19.264 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:17:19.270 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:17:19.271 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:17:19.273 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:17:19.274 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:17:19.277 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:17:19.280 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:17:19.282 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:17:19.295 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:17:19.298 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:17:19.300 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:17:19.301 +01:00 [DBG] Connection id "0HMLGCCGH1NVH", Request id "0HMLGCCGH1NVH:00000003": started reading request body.
2022-10-17 18:17:19.302 +01:00 [DBG] Connection id "0HMLGCCGH1NVH", Request id "0HMLGCCGH1NVH:00000003": done reading request body.
2022-10-17 18:17:19.304 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:17:19.305 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:17:19.306 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:17:19.308 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:17:19.311 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:17:19.363 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:17:19.424 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-17 18:17:19.815 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:17:19.865 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:17:19.867 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 18:17:19.870 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:17:19.873 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:17:19.876 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:17:19.886 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:17:19.901 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:17:19.909 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:17:19.914 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:17:19.916 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:17:23.942 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-17 18:17:23.949 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:17:23.955 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:17:23.956 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:17:23.958 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:17:23.959 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:17:23.961 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:17:23.977 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:17:23.979 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:17:23.980 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:17:23.985 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:17:24.205 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:17:24.206 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:17:24.207 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:17:24.213 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:17:24.214 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:17:24.215 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:17:24.216 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:17:24.217 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:17:24.219 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:17:24.220 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:17:24.221 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 18:17:24.229 +01:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 18:17:24.255 +01:00 [DBG] Disposing transaction.
2022-10-17 18:17:24.256 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:17:24.259 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:17:24.269 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 18:17:24.368 +01:00 [ERR] Error on creating new entity.
2022-10-17 18:17:24.372 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:17:24.375 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:17:24.375 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:17:24.376 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:17:24.378 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:17:24.379 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:17:24.382 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 5102.0982ms
2022-10-17 18:17:24.386 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:17:24.388 +01:00 [DBG] Connection id "0HMLGCCGH1NVH" completed keep alive response.
2022-10-17 18:17:24.389 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:17:24.391 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 500 - text/plain;+charset=utf-8 5156.2614ms
2022-10-17 18:18:20.401 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:18:20.409 +01:00 [DBG] POST requests are not supported
2022-10-17 18:18:20.411 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:18:20.412 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:18:20.414 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:18:20.415 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:18:20.416 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:18:20.418 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:18:20.419 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:18:20.422 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:18:20.424 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:18:20.425 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:18:20.428 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:18:20.429 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:18:20.431 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:18:20.437 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:18:20.440 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:18:20.442 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:18:20.444 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:18:20.445 +01:00 [DBG] Connection id "0HMLGCCGH1NVH", Request id "0HMLGCCGH1NVH:00000004": started reading request body.
2022-10-17 18:18:20.446 +01:00 [DBG] Connection id "0HMLGCCGH1NVH", Request id "0HMLGCCGH1NVH:00000004": done reading request body.
2022-10-17 18:18:20.448 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:18:20.449 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:18:20.450 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:18:20.452 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:18:20.455 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:18:20.467 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:18:20.477 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:18:20.479 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 18:18:20.481 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:18:20.482 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:18:20.483 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:18:20.487 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:18:20.494 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:18:20.495 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:18:20.496 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:18:20.497 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:18:20.499 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:18:20.500 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:18:20.501 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:18:20.502 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:18:20.505 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:18:20.509 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:18:20.512 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:18:20.512 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:18:20.514 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:18:30.013 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:18:30.527 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:18:30.528 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:18:30.530 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:18:30.531 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:18:30.533 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:18:30.535 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:18:30.536 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:18:30.537 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:18:30.538 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:18:30.539 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 18:18:30.542 +01:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 18:18:30.577 +01:00 [DBG] Disposing transaction.
2022-10-17 18:18:30.609 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:18:30.611 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:18:30.614 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 18:19:23.936 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 18:19:24.050 +01:00 [DBG] Hosting starting
2022-10-17 18:19:24.087 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 18:19:24.091 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 18:19:24.097 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 18:19:24.099 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 18:19:24.105 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 18:19:24.110 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 18:19:24.111 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 18:19:24.120 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 18:19:24.123 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:19:24.126 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 18:19:24.128 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:19:24.133 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 18:19:24.136 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 18:19:24.140 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 18:19:24.142 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 18:19:24.276 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 18:19:24.330 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 18:19:24.332 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 18:19:24.333 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 18:19:24.334 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 18:19:24.334 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 18:19:24.336 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 18:19:24.336 +01:00 [INF] Hosting environment: Development
2022-10-17 18:19:24.337 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 18:19:24.338 +01:00 [DBG] Hosting started
2022-10-17 18:19:24.759 +01:00 [DBG] Connection id "0HMLGCEUHV9LR" received FIN.
2022-10-17 18:19:24.761 +01:00 [DBG] Connection id "0HMLGCEUHV9LR" accepted.
2022-10-17 18:19:24.762 +01:00 [DBG] Connection id "0HMLGCEUHV9LS" accepted.
2022-10-17 18:19:24.764 +01:00 [DBG] Connection id "0HMLGCEUHV9LS" received FIN.
2022-10-17 18:19:24.772 +01:00 [DBG] Connection id "0HMLGCEUHV9LR" started.
2022-10-17 18:19:24.772 +01:00 [DBG] Connection id "0HMLGCEUHV9LS" started.
2022-10-17 18:19:24.793 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:19:24.793 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:19:25.185 +01:00 [DBG] Connection id "0HMLGCEUHV9LS" stopped.
2022-10-17 18:19:25.194 +01:00 [DBG] Connection id "0HMLGCEUHV9LR" stopped.
2022-10-17 18:19:25.239 +01:00 [DBG] Connection id "0HMLGCEUHV9LS" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:19:25.244 +01:00 [DBG] Connection id "0HMLGCEUHV9LR" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:19:25.442 +01:00 [DBG] Connection id "0HMLGCEUHV9LT" accepted.
2022-10-17 18:19:25.760 +01:00 [DBG] Connection id "0HMLGCEUHV9LT" started.
2022-10-17 18:19:25.833 +01:00 [DBG] Connection 0HMLGCEUHV9LT established using the following protocol: "Tls13"
2022-10-17 18:19:25.906 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 18:19:25.946 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 18:19:26.075 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 18:19:26.295 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 18:19:26.297 +01:00 [DBG] Connection id "0HMLGCEUHV9LT" completed keep alive response.
2022-10-17 18:19:26.301 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 397.9377ms
2022-10-17 18:19:26.414 +01:00 [DBG] Connection id "0HMLGCEUHV9LU" accepted.
2022-10-17 18:19:26.418 +01:00 [DBG] Connection id "0HMLGCEUHV9LU" started.
2022-10-17 18:19:26.420 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 18:19:26.434 +01:00 [DBG] Connection 0HMLGCEUHV9LU established using the following protocol: "Tls13"
2022-10-17 18:19:26.449 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 18:19:26.457 +01:00 [DBG] Connection id "0HMLGCEUHV9LU" completed keep alive response.
2022-10-17 18:19:26.470 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 17.0134ms
2022-10-17 18:19:26.498 +01:00 [DBG] Connection id "0HMLGCEUHV9LT" completed keep alive response.
2022-10-17 18:19:26.501 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 81.1960ms
2022-10-17 18:19:26.780 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 18:19:27.032 +01:00 [DBG] Connection id "0HMLGCEUHV9LT" completed keep alive response.
2022-10-17 18:19:27.035 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 254.9806ms
2022-10-17 18:19:28.522 +01:00 [DBG] Connection id "0HMLGCEUHV9LV" accepted.
2022-10-17 18:19:28.523 +01:00 [DBG] Connection id "0HMLGCEUHV9LV" received FIN.
2022-10-17 18:19:28.525 +01:00 [DBG] Connection id "0HMLGCEUHV9LV" started.
2022-10-17 18:19:28.526 +01:00 [DBG] Connection id "0HMLGCEUHV9M0" accepted.
2022-10-17 18:19:28.529 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:19:28.529 +01:00 [DBG] Connection id "0HMLGCEUHV9M0" started.
2022-10-17 18:19:28.533 +01:00 [DBG] Connection id "0HMLGCEUHV9LV" stopped.
2022-10-17 18:19:28.535 +01:00 [DBG] Connection id "0HMLGCEUHV9LV" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:19:28.537 +01:00 [DBG] Connection 0HMLGCEUHV9M0 established using the following protocol: "Tls13"
2022-10-17 18:19:28.541 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/ application/json 137
2022-10-17 18:19:28.544 +01:00 [DBG] POST requests are not supported
2022-10-17 18:19:28.570 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/'
2022-10-17 18:19:28.577 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)' with route pattern 'api/Users' is valid for the request path '/api/users/'
2022-10-17 18:19:28.580 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 18:19:28.668 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:19:28.674 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:19:28.676 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 18:19:28.706 +01:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] Create(SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:19:28.712 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:19:28.715 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:19:28.717 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:19:28.719 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:19:28.720 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:19:28.726 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:19:28.988 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 18:19:29.020 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:19:29.030 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' ...
2022-10-17 18:19:29.033 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' using the name '' in request data ...
2022-10-17 18:19:29.036 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:19:29.046 +01:00 [DBG] Connection id "0HMLGCEUHV9M0", Request id "0HMLGCEUHV9M0:00000002": started reading request body.
2022-10-17 18:19:29.047 +01:00 [DBG] Connection id "0HMLGCEUHV9M0", Request id "0HMLGCEUHV9M0:00000002": done reading request body.
2022-10-17 18:19:29.055 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'
2022-10-17 18:19:29.060 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 18:19:29.061 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 18:19:29.062 +01:00 [DBG] Attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest' ...
2022-10-17 18:19:29.071 +01:00 [DBG] Done attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateUserRequest'.
2022-10-17 18:19:30.272 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:19:30.313 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:19:30.396 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:19:30.412 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:19:30.422 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:19:30.439 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:19:30.553 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:19:30.790 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:19:30.801 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:19:30.817 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:19:30.900 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:19:30.911 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2022-10-17 18:19:30.933 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?', @p2='?', @p3='?' (DbType = Binary), @p4='?' (DbType = Binary), @p5='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_id, password_changed_at;
2022-10-17 18:19:31.084 +01:00 [ERR] Failed executing DbCommand (177ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?', @p2='?', @p3='?' (DbType = Binary), @p4='?' (DbType = Binary), @p5='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_id, password_changed_at;
2022-10-17 18:19:31.123 +01:00 [DBG] Disposing transaction.
2022-10-17 18:19:31.134 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:19:31.145 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:19:31.167 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "unique_users_email"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|215_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "unique_users_email"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: SB-operational
    TableName: Users
    ConstraintName: unique_users_email
    File: nbtinsert.c
    Line: 535
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "unique_users_email"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|215_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "unique_users_email"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: SB-operational
    TableName: Users
    ConstraintName: unique_users_email
    File: nbtinsert.c
    Line: 535
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 18:19:31.305 +01:00 [ERR] Error on creating new entity.
2022-10-17 18:19:31.313 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:19:31.317 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:19:31.318 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:19:31.319 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:19:31.320 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:19:31.322 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-17 18:19:31.331 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API) in 2599.8146ms
2022-10-17 18:19:31.334 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-17 18:19:31.336 +01:00 [DBG] Connection id "0HMLGCEUHV9M0" completed keep alive response.
2022-10-17 18:19:31.340 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:19:31.350 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/ application/json 137 - 400 - text/plain;+charset=utf-8 2808.4472ms
2022-10-17 18:21:59.723 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 18:21:59.833 +01:00 [DBG] Hosting starting
2022-10-17 18:21:59.872 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 18:21:59.875 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 18:21:59.881 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 18:21:59.882 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 18:21:59.889 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 18:21:59.895 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 18:21:59.896 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 18:21:59.904 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 18:21:59.907 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:21:59.910 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 18:21:59.912 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:21:59.917 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 18:21:59.920 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 18:21:59.923 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 18:21:59.925 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 18:22:00.057 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 18:22:00.119 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 18:22:00.121 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 18:22:00.123 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 18:22:00.124 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 18:22:00.125 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 18:22:00.126 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 18:22:00.127 +01:00 [INF] Hosting environment: Development
2022-10-17 18:22:00.128 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 18:22:00.129 +01:00 [DBG] Hosting started
2022-10-17 18:22:00.297 +01:00 [DBG] Connection id "0HMLGCGCTAIV1" received FIN.
2022-10-17 18:22:00.297 +01:00 [DBG] Connection id "0HMLGCGCTAIV0" received FIN.
2022-10-17 18:22:00.308 +01:00 [DBG] Connection id "0HMLGCGCTAIV1" accepted.
2022-10-17 18:22:00.308 +01:00 [DBG] Connection id "0HMLGCGCTAIV0" accepted.
2022-10-17 18:22:00.310 +01:00 [DBG] Connection id "0HMLGCGCTAIV1" started.
2022-10-17 18:22:00.311 +01:00 [DBG] Connection id "0HMLGCGCTAIV0" started.
2022-10-17 18:22:00.326 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:22:00.326 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:22:00.377 +01:00 [DBG] Connection id "0HMLGCGCTAIV1" stopped.
2022-10-17 18:22:00.377 +01:00 [DBG] Connection id "0HMLGCGCTAIV0" stopped.
2022-10-17 18:22:00.382 +01:00 [DBG] Connection id "0HMLGCGCTAIV0" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:22:00.382 +01:00 [DBG] Connection id "0HMLGCGCTAIV1" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:22:00.977 +01:00 [DBG] Connection id "0HMLGCGCTAIV2" accepted.
2022-10-17 18:22:00.999 +01:00 [DBG] Connection id "0HMLGCGCTAIV2" started.
2022-10-17 18:22:01.122 +01:00 [DBG] Connection 0HMLGCGCTAIV2 established using the following protocol: "Tls13"
2022-10-17 18:22:01.216 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 18:22:01.296 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 18:22:01.422 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 18:22:01.545 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 18:22:01.548 +01:00 [DBG] Connection id "0HMLGCGCTAIV2" completed keep alive response.
2022-10-17 18:22:01.553 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 346.6094ms
2022-10-17 18:22:01.589 +01:00 [DBG] Connection id "0HMLGCGCTAIV3" accepted.
2022-10-17 18:22:01.596 +01:00 [DBG] Connection id "0HMLGCGCTAIV3" started.
2022-10-17 18:22:01.604 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 18:22:01.621 +01:00 [DBG] Connection 0HMLGCGCTAIV3 established using the following protocol: "Tls13"
2022-10-17 18:22:01.630 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 18:22:01.669 +01:00 [DBG] Connection id "0HMLGCGCTAIV3" completed keep alive response.
2022-10-17 18:22:01.671 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 40.9403ms
2022-10-17 18:22:01.690 +01:00 [DBG] Connection id "0HMLGCGCTAIV2" completed keep alive response.
2022-10-17 18:22:01.691 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 87.5733ms
2022-10-17 18:22:01.842 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 18:22:02.006 +01:00 [DBG] Connection id "0HMLGCGCTAIV2" completed keep alive response.
2022-10-17 18:22:02.008 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 166.6134ms
2022-10-17 18:22:38.905 +01:00 [DBG] Connection id "0HMLGCGCTAIV4" accepted.
2022-10-17 18:22:38.924 +01:00 [DBG] Connection id "0HMLGCGCTAIV5" accepted.
2022-10-17 18:22:38.925 +01:00 [DBG] Connection id "0HMLGCGCTAIV4" started.
2022-10-17 18:22:38.941 +01:00 [DBG] Connection id "0HMLGCGCTAIV4" received FIN.
2022-10-17 18:22:38.941 +01:00 [DBG] Connection id "0HMLGCGCTAIV5" started.
2022-10-17 18:22:38.958 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:22:38.968 +01:00 [DBG] Connection 0HMLGCGCTAIV5 established using the following protocol: "Tls13"
2022-10-17 18:22:38.969 +01:00 [DBG] Connection id "0HMLGCGCTAIV4" stopped.
2022-10-17 18:22:38.971 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:22:38.971 +01:00 [DBG] Connection id "0HMLGCGCTAIV4" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:22:38.974 +01:00 [DBG] POST requests are not supported
2022-10-17 18:22:39.004 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:22:39.009 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:22:39.013 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:22:39.101 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:22:39.105 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:22:39.107 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:22:39.138 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:22:39.141 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:22:39.142 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:22:39.143 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:22:39.146 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:22:39.149 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:22:39.151 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:22:39.349 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 18:22:39.377 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:22:39.386 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:22:39.390 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:22:39.392 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:22:39.398 +01:00 [DBG] Connection id "0HMLGCGCTAIV5", Request id "0HMLGCGCTAIV5:00000002": started reading request body.
2022-10-17 18:22:39.400 +01:00 [DBG] Connection id "0HMLGCGCTAIV5", Request id "0HMLGCGCTAIV5:00000002": done reading request body.
2022-10-17 18:22:39.407 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:22:39.409 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:22:39.411 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:22:39.413 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:22:39.421 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:22:40.571 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:22:40.635 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-17 18:22:41.043 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:22:41.093 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:22:41.188 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (89ms).
2022-10-17 18:22:41.197 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:22:41.397 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:22:41.415 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:22:41.518 +01:00 [INF] Executed DbCommand (108ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:22:41.580 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:22:41.646 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:22:41.654 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:22:41.663 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:22:41.671 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-17 18:22:41.676 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:22:41.681 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:22:41.682 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:22:41.684 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:22:41.685 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:22:41.687 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:22:41.696 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:22:41.701 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:22:41.702 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:22:41.703 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:22:53.297 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:22:53.307 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:22:53.314 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:22:53.340 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:22:53.376 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:22:53.383 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:22:53.386 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:22:53.400 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:22:53.460 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:22:53.464 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-10-17 18:22:53.467 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 18:22:53.482 +01:00 [ERR] Failed executing DbCommand (17ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 18:22:53.527 +01:00 [DBG] Disposing transaction.
2022-10-17 18:22:53.569 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:22:53.573 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:22:53.588 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampTzHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 18:22:53.688 +01:00 [ERR] Error on creating new entity.
2022-10-17 18:23:06.315 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:23:06.320 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:23:06.320 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:23:06.321 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:23:06.326 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:23:06.329 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:23:06.337 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 27181.5563ms
2022-10-17 18:23:06.342 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:23:06.346 +01:00 [DBG] Connection id "0HMLGCGCTAIV5" completed keep alive response.
2022-10-17 18:23:30.024 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 18:23:30.169 +01:00 [DBG] Hosting starting
2022-10-17 18:23:30.285 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 18:23:30.296 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 18:23:30.325 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 18:23:30.328 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 18:23:30.340 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 18:23:30.356 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 18:23:30.359 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 18:23:30.373 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 18:23:30.380 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:23:30.386 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 18:23:30.390 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:23:30.407 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 18:23:30.424 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 18:23:30.428 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 18:23:30.431 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 18:23:30.614 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 18:23:30.671 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 18:23:30.672 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 18:23:30.673 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 18:23:30.674 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 18:23:30.675 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 18:23:30.676 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 18:23:30.677 +01:00 [INF] Hosting environment: Development
2022-10-17 18:23:30.678 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 18:23:30.679 +01:00 [DBG] Hosting started
2022-10-17 18:23:30.737 +01:00 [DBG] Connection id "0HMLGCH7ROVMB" accepted.
2022-10-17 18:23:30.737 +01:00 [DBG] Connection id "0HMLGCH7ROVMA" accepted.
2022-10-17 18:23:30.746 +01:00 [DBG] Connection id "0HMLGCH7ROVMB" started.
2022-10-17 18:23:30.751 +01:00 [DBG] Connection id "0HMLGCH7ROVMA" started.
2022-10-17 18:23:30.754 +01:00 [DBG] Connection id "0HMLGCH7ROVMB" received FIN.
2022-10-17 18:23:30.754 +01:00 [DBG] Connection id "0HMLGCH7ROVMA" received FIN.
2022-10-17 18:23:30.781 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:23:30.781 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:23:30.989 +01:00 [DBG] Connection id "0HMLGCH7ROVMB" stopped.
2022-10-17 18:23:30.989 +01:00 [DBG] Connection id "0HMLGCH7ROVMA" stopped.
2022-10-17 18:23:31.003 +01:00 [DBG] Connection id "0HMLGCH7ROVMB" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:23:31.003 +01:00 [DBG] Connection id "0HMLGCH7ROVMA" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:23:31.295 +01:00 [DBG] Connection id "0HMLGCH7ROVMC" accepted.
2022-10-17 18:23:31.296 +01:00 [DBG] Connection id "0HMLGCH7ROVMC" started.
2022-10-17 18:23:31.369 +01:00 [DBG] Connection 0HMLGCH7ROVMC established using the following protocol: "Tls13"
2022-10-17 18:23:31.440 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 18:23:31.498 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 18:23:31.644 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 18:23:31.787 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 18:23:31.794 +01:00 [DBG] Connection id "0HMLGCH7ROVMC" completed keep alive response.
2022-10-17 18:23:31.800 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 365.6554ms
2022-10-17 18:23:31.857 +01:00 [DBG] Connection id "0HMLGCH7ROVMD" accepted.
2022-10-17 18:23:31.871 +01:00 [DBG] Connection id "0HMLGCH7ROVMD" started.
2022-10-17 18:23:31.879 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 18:23:31.886 +01:00 [DBG] Connection 0HMLGCH7ROVMD established using the following protocol: "Tls13"
2022-10-17 18:23:31.901 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 18:23:31.909 +01:00 [DBG] Connection id "0HMLGCH7ROVMD" completed keep alive response.
2022-10-17 18:23:31.911 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 10.0087ms
2022-10-17 18:23:31.930 +01:00 [DBG] Connection id "0HMLGCH7ROVMC" completed keep alive response.
2022-10-17 18:23:31.934 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 54.4315ms
2022-10-17 18:23:32.094 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 18:23:32.294 +01:00 [DBG] Connection id "0HMLGCH7ROVMC" completed keep alive response.
2022-10-17 18:23:32.296 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 202.1244ms
2022-10-17 18:23:41.453 +01:00 [DBG] Connection id "0HMLGCH7ROVME" accepted.
2022-10-17 18:23:41.453 +01:00 [DBG] Connection id "0HMLGCH7ROVME" received FIN.
2022-10-17 18:23:41.455 +01:00 [DBG] Connection id "0HMLGCH7ROVME" started.
2022-10-17 18:23:41.455 +01:00 [DBG] Connection id "0HMLGCH7ROVMF" accepted.
2022-10-17 18:23:41.462 +01:00 [DBG] Connection id "0HMLGCH7ROVMF" started.
2022-10-17 18:23:41.462 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:23:41.468 +01:00 [DBG] Connection 0HMLGCH7ROVMF established using the following protocol: "Tls13"
2022-10-17 18:23:41.469 +01:00 [DBG] Connection id "0HMLGCH7ROVME" stopped.
2022-10-17 18:23:41.471 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:23:41.472 +01:00 [DBG] Connection id "0HMLGCH7ROVME" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:23:41.477 +01:00 [DBG] POST requests are not supported
2022-10-17 18:23:41.517 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:23:41.523 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:23:41.527 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:23:41.635 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:23:41.639 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:23:41.644 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:23:41.679 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:23:41.685 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:23:41.687 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:23:41.688 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:23:41.691 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:23:41.695 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:23:41.700 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:23:41.953 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 18:23:41.987 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:23:41.996 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:23:42.001 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:23:42.003 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:23:42.011 +01:00 [DBG] Connection id "0HMLGCH7ROVMF", Request id "0HMLGCH7ROVMF:00000002": started reading request body.
2022-10-17 18:23:42.014 +01:00 [DBG] Connection id "0HMLGCH7ROVMF", Request id "0HMLGCH7ROVMF:00000002": done reading request body.
2022-10-17 18:23:42.020 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:23:42.022 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:23:42.024 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:23:42.027 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:23:42.036 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:23:43.223 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:23:43.290 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-17 18:23:43.692 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:23:43.748 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:23:43.883 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (131ms).
2022-10-17 18:23:43.893 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:23:44.139 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:23:44.157 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:23:44.270 +01:00 [INF] Executed DbCommand (118ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:23:44.332 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:23:44.394 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:23:44.402 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:23:44.412 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:23:44.418 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-17 18:23:44.422 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:23:44.426 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:23:44.431 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2022-10-17 18:23:44.434 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:23:44.436 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:23:44.437 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:23:44.450 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:23:44.453 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:23:44.454 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:23:44.455 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:23:51.927 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:23:51.940 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:23:51.944 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:23:51.976 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:23:52.015 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:23:52.025 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:23:52.030 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:23:52.046 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:23:52.133 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:23:52.134 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:23:52.140 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 18:23:52.176 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?', @p5='?' (DbType = DateTime2), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (user_token_id, access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2022-10-17 18:23:52.190 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:23:52.208 +01:00 [DBG] Committing transaction.
2022-10-17 18:23:52.230 +01:00 [DBG] Committed transaction.
2022-10-17 18:23:52.239 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:23:52.242 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:23:52.247 +01:00 [DBG] Disposing transaction.
2022-10-17 18:23:52.263 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:23:52.273 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 18:23:52.298 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:23:52.303 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:23:52.304 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:23:52.306 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:23:52.307 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 18:23:52.309 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-17 18:23:52.326 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 10620.8445ms
2022-10-17 18:23:52.330 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:23:52.333 +01:00 [DBG] Connection id "0HMLGCH7ROVMF" completed keep alive response.
2022-10-17 18:23:52.337 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:23:52.344 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 200 - application/json;+charset=utf-8 10872.5964ms
2022-10-17 18:23:52.884 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 18:23:52.888 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 18:23:52.896 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 18:23:52.898 +01:00 [DBG] Connection id "0HMLGCH7ROVMC" completed keep alive response.
2022-10-17 18:23:52.900 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 16.4497ms
2022-10-17 18:23:52.961 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 18:23:52.961 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 18:23:52.979 +01:00 [DBG] Connection id "0HMLGCH7ROVMD" completed keep alive response.
2022-10-17 18:23:52.986 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 25.0171ms
2022-10-17 18:23:53.005 +01:00 [DBG] Connection id "0HMLGCH7ROVMC" completed keep alive response.
2022-10-17 18:23:53.006 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 45.4154ms
2022-10-17 18:23:53.273 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 18:23:53.283 +01:00 [DBG] Connection id "0HMLGCH7ROVMC" completed keep alive response.
2022-10-17 18:23:53.285 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 11.5195ms
2022-10-17 18:24:08.087 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts - -
2022-10-17 18:24:08.090 +01:00 [DBG] The request path  does not match the path filter
2022-10-17 18:24:08.092 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts'
2022-10-17 18:24:08.093 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts'
2022-10-17 18:24:08.095 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:24:08.181 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:24:08.183 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:24:08.186 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:24:08.191 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 18:24:08.194 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:24:08.195 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:24:08.197 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:24:08.199 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:24:08.200 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:24:08.204 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:24:08.206 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:24:08.248 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:24:08.254 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(account => account.UserId == __userId_0)'
2022-10-17 18:24:08.259 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
        SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
        FROM SB-operational.Accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-17 18:24:08.261 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:24:08.262 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:24:08.265 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:08.266 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:08.267 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:24:08.274 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:24:08.276 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:24:08.277 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:08.279 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:08.282 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:24:08.284 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:24:08.287 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-10-17 18:24:08.290 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-10-17 18:24:08.291 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-10-17 18:24:08.294 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 89.6545ms
2022-10-17 18:24:08.295 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:24:08.297 +01:00 [DBG] Connection id "0HMLGCH7ROVMF" completed keep alive response.
2022-10-17 18:24:08.298 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:24:08.301 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts - - - 404 - application/problem+json;+charset=utf-8 214.2134ms
2022-10-17 18:24:11.639 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/Accounts/ application/json 45
2022-10-17 18:24:11.642 +01:00 [DBG] POST requests are not supported
2022-10-17 18:24:11.644 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/'
2022-10-17 18:24:11.645 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/Accounts/'
2022-10-17 18:24:11.646 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 18:24:11.648 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:24:11.649 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:24:11.650 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 18:24:11.653 +01:00 [INF] Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]] CreateAccount(SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 18:24:11.657 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:24:11.660 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:24:11.661 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:24:11.663 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:24:11.665 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:24:11.666 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:24:11.669 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:24:11.670 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' ...
2022-10-17 18:24:11.672 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' using the name '' in request data ...
2022-10-17 18:24:11.674 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:24:11.679 +01:00 [DBG] Connection id "0HMLGCH7ROVMF", Request id "0HMLGCH7ROVMF:00000004": started reading request body.
2022-10-17 18:24:11.681 +01:00 [DBG] Connection id "0HMLGCH7ROVMF", Request id "0HMLGCH7ROVMF:00000004": done reading request body.
2022-10-17 18:24:11.686 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'
2022-10-17 18:24:11.687 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 18:24:11.693 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 18:24:11.696 +01:00 [DBG] Attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' ...
2022-10-17 18:24:11.699 +01:00 [DBG] Done attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 18:24:11.711 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:24:11.722 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:11.748 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:11.750 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:24:11.752 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:24:11.760 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:24:11.762 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:11.763 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:11.764 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:24:11.765 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:24:11.771 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:24:11.773 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 18:24:11.775 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-17 18:24:11.801 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-17 18:24:11.821 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-17 18:24:11.832 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:24:11.833 +01:00 [DBG] Committing transaction.
2022-10-17 18:24:11.836 +01:00 [DBG] Committed transaction.
2022-10-17 18:24:11.837 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:11.839 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:11.841 +01:00 [DBG] Disposing transaction.
2022-10-17 18:24:11.846 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:11.849 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 18:24:11.852 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:24:11.855 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:24:11.856 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:24:11.857 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:24:11.858 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 18:24:11.860 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse'.
2022-10-17 18:24:11.879 +01:00 [DBG] Found the endpoints ["SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2022-10-17 18:24:11.887 +01:00 [DBG] Successfully processed template api/Accounts/{accountId} for SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) resulting in /api/Accounts/df189511-9306-4763-b820-c3ac9e57c78f and 
2022-10-17 18:24:11.892 +01:00 [DBG] Link generation succeeded for endpoints ["SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] with result /api/Accounts/df189511-9306-4763-b820-c3ac9e57c78f
2022-10-17 18:24:11.903 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API) in 237.0855ms
2022-10-17 18:24:11.911 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 18:24:11.913 +01:00 [DBG] Connection id "0HMLGCH7ROVMF" completed keep alive response.
2022-10-17 18:24:11.914 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:24:11.915 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/Accounts/ application/json 45 - 201 - application/json;+charset=utf-8 275.9947ms
2022-10-17 18:24:13.247 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/Accounts/ application/json 45
2022-10-17 18:24:13.249 +01:00 [DBG] POST requests are not supported
2022-10-17 18:24:13.250 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/'
2022-10-17 18:24:13.251 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/Accounts/'
2022-10-17 18:24:13.252 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 18:24:13.253 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:24:13.254 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:24:13.255 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 18:24:13.258 +01:00 [INF] Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]] CreateAccount(SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 18:24:13.261 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:24:13.262 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:24:13.263 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:24:13.265 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:24:13.267 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:24:13.269 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:24:13.275 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:24:13.277 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' ...
2022-10-17 18:24:13.278 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' using the name '' in request data ...
2022-10-17 18:24:13.280 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:24:13.281 +01:00 [DBG] Connection id "0HMLGCH7ROVMF", Request id "0HMLGCH7ROVMF:00000005": started reading request body.
2022-10-17 18:24:13.282 +01:00 [DBG] Connection id "0HMLGCH7ROVMF", Request id "0HMLGCH7ROVMF:00000005": done reading request body.
2022-10-17 18:24:13.284 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'
2022-10-17 18:24:13.285 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 18:24:13.286 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 18:24:13.290 +01:00 [DBG] Attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest' ...
2022-10-17 18:24:13.292 +01:00 [DBG] Done attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.CreateAccountRequest'.
2022-10-17 18:24:13.294 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:24:13.296 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:13.297 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:13.299 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:24:13.300 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:24:13.301 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:24:13.302 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:13.303 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:13.305 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:24:13.306 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:24:13.308 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:24:13.310 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:24:13.311 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-17 18:24:13.315 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-17 18:24:13.319 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-17 18:24:13.320 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:24:13.321 +01:00 [DBG] Committing transaction.
2022-10-17 18:24:13.326 +01:00 [DBG] Committed transaction.
2022-10-17 18:24:13.327 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:13.328 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:13.329 +01:00 [DBG] Disposing transaction.
2022-10-17 18:24:13.330 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:13.332 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 18:24:13.333 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:24:13.337 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:24:13.337 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:24:13.338 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:24:13.339 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 18:24:13.341 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse'.
2022-10-17 18:24:13.343 +01:00 [DBG] Found the endpoints ["SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2022-10-17 18:24:13.345 +01:00 [DBG] Successfully processed template api/Accounts/{accountId} for SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) resulting in /api/Accounts/185dbc7b-ec5a-4188-a748-fcb1ee8ea23e and 
2022-10-17 18:24:13.346 +01:00 [DBG] Link generation succeeded for endpoints ["SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] with result /api/Accounts/185dbc7b-ec5a-4188-a748-fcb1ee8ea23e
2022-10-17 18:24:13.348 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API) in 79.7103ms
2022-10-17 18:24:13.351 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-17 18:24:13.352 +01:00 [DBG] Connection id "0HMLGCH7ROVMF" completed keep alive response.
2022-10-17 18:24:13.353 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:24:13.354 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/Accounts/ application/json 45 - 201 - application/json;+charset=utf-8 107.3172ms
2022-10-17 18:24:33.549 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139
2022-10-17 18:24:33.554 +01:00 [DBG] POST requests are not supported
2022-10-17 18:24:33.556 +01:00 [DBG] 1 candidate(s) found for the request path '/api/transfers'
2022-10-17 18:24:33.557 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)' with route pattern 'api/Transfers' is valid for the request path '/api/transfers'
2022-10-17 18:24:33.558 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 18:24:33.560 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:24:33.561 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:24:33.563 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:24:33.568 +01:00 [DBG] Authorization was successful.
2022-10-17 18:24:33.570 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 18:24:33.573 +01:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transfers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.TransferResponse]] MakeTransfer(SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest) on controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API).
2022-10-17 18:24:33.576 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:24:33.578 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:24:33.580 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:24:33.582 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:24:33.583 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:24:33.584 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 18:24:33.586 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.TransfersController (SimpleBank.AcctManage.API)
2022-10-17 18:24:33.588 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 18:24:33.589 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' using the name '' in request data ...
2022-10-17 18:24:33.590 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:24:33.592 +01:00 [DBG] Connection id "0HMLGCH7ROVMF", Request id "0HMLGCH7ROVMF:00000006": started reading request body.
2022-10-17 18:24:33.594 +01:00 [DBG] Connection id "0HMLGCH7ROVMF", Request id "0HMLGCH7ROVMF:00000006": done reading request body.
2022-10-17 18:24:33.598 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'
2022-10-17 18:24:33.599 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 18:24:33.600 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 18:24:33.601 +01:00 [DBG] Attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest' ...
2022-10-17 18:24:33.604 +01:00 [DBG] Done attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.TransferRequest'.
2022-10-17 18:24:33.609 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:24:33.624 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-17 18:24:33.709 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Account>(
    asyncEnumerable: new SingleQueryingEnumerable<Account>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.account_id, a.balance, a.created_at, a.currency, a.user_id
            FROM SB-operational.Accounts AS a
            WHERE a.account_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-17 18:24:33.732 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:24:33.734 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:24:33.735 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:33.736 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:33.737 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 18:24:33.746 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 18:24:33.767 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.771 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:24:33.772 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:33.774 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:33.783 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:24:33.785 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:24:33.787 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:33.789 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:33.790 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 18:24:33.800 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 18:24:33.804 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.806 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:24:33.807 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:33.809 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:33.821 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.837 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.841 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.881 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.885 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.886 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.888 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.890 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.893 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:24:33.896 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:24:33.903 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:24:33.905 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:33.911 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:33.917 +01:00 [DBG] Enlisted in an ambient transaction with isolation level 'Serializable'.
2022-10-17 18:24:33.935 +01:00 [DBG] Executing 5 update commands as a batch.
2022-10-17 18:24:33.941 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:24:33.942 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:24:33.944 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime2), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Guid), @p14='?' (DbType = Decimal), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p10, @p11, @p12)
RETURNING movement_id;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p13, @p14, @p15)
RETURNING movement_id;
INSERT INTO "SB-historic"."Transfers" (amount, created_at, from_account_id, to_account_id)
VALUES (@p16, @p17, @p18, @p19)
RETURNING transfer_id;
2022-10-17 18:24:33.964 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime2), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Guid), @p14='?' (DbType = Decimal), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime2), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p10, @p11, @p12)
RETURNING movement_id;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p13, @p14, @p15)
RETURNING movement_id;
INSERT INTO "SB-historic"."Transfers" (amount, created_at, from_account_id, to_account_id)
VALUES (@p16, @p17, @p18, @p19)
RETURNING transfer_id;
2022-10-17 18:24:33.969 +01:00 [DBG] The foreign key property 'Movement.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-17 18:24:33.972 +01:00 [DBG] The foreign key property 'Movement.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-17 18:24:33.974 +01:00 [DBG] The foreign key property 'Transfer.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-17 18:24:33.975 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:24:33.976 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:33.980 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:33.984 +01:00 [DBG] An entity of type 'Transfer' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.986 +01:00 [DBG] An entity of type 'Movement' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.988 +01:00 [DBG] An entity of type 'Movement' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.990 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.991 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:33.993 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 5 entities written to the database.
2022-10-17 18:24:34.007 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-17 18:24:34.013 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.user_id == @__get_Item_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:24:34.016 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:24:34.017 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:24:34.018 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:34.019 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:34.020 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-17 18:24:34.023 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-17 18:24:34.025 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:24:34.034 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:24:34.035 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:24:34.036 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:24:35.401 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:24:35.407 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:24:35.408 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:24:35.409 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:24:35.410 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 18:24:35.412 +01:00 [INF] Executing CreatedResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.TransferResponse'.
2022-10-17 18:24:35.416 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API) in 1831.4268ms
2022-10-17 18:24:35.417 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-17 18:24:35.420 +01:00 [DBG] Connection id "0HMLGCH7ROVMF" completed keep alive response.
2022-10-17 18:24:35.421 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:24:35.423 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/transfers application/json 139 - 201 - application/json;+charset=utf-8 1874.0821ms
2022-10-17 18:24:37.368 +01:00 [INF] Email Sent
2022-10-17 18:24:37.371 +01:00 [INF] - KEY:   | VALUE: {"FromUser":"Dummytester","ToUser":"Dummytester","ToAccountId":"df189511-9306-4763-b820-c3ac9e57c78f","ToEmail":"wsMakerSynergy@gmail.com","Amount":"300"} - 
2022-10-17 18:25:17.809 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61
2022-10-17 18:25:17.815 +01:00 [DBG] POST requests are not supported
2022-10-17 18:25:17.816 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/logout'
2022-10-17 18:25:17.817 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Logout' is valid for the request path '/api/users/logout'
2022-10-17 18:25:17.819 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 18:25:17.820 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:25:17.822 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:25:17.825 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:25:17.826 +01:00 [DBG] Authorization was successful.
2022-10-17 18:25:17.827 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 18:25:17.831 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:25:17.832 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:25:17.834 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:25:17.835 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:25:17.837 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:25:17.840 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:25:17.842 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:25:17.843 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:25:17.853 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 18:25:17.855 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-17 18:25:17.859 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:25:17.861 +01:00 [DBG] Connection id "0HMLGCH7ROVMF", Request id "0HMLGCH7ROVMF:00000007": started reading request body.
2022-10-17 18:25:17.862 +01:00 [DBG] Connection id "0HMLGCH7ROVMF", Request id "0HMLGCH7ROVMF:00000007": done reading request body.
2022-10-17 18:25:17.864 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'
2022-10-17 18:25:17.865 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 18:25:17.866 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 18:25:17.868 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 18:25:17.869 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 18:25:17.877 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:25:17.879 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.Id == __userTokenId_0)'
2022-10-17 18:25:17.883 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_token_id == @__userTokenId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:25:17.885 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:25:17.886 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:25:17.888 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:25:17.890 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:25:17.892 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 18:25:17.896 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 18:25:17.898 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:25:17.899 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:25:17.900 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:25:17.901 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:25:17.904 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:25:17.908 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:25:17.910 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:25:17.911 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:25:17.912 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:25:17.913 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:25:17.914 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:25:17.915 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:25:17.916 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:25:17.917 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:25:17.918 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:25:17.926 +01:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:25:17.956 +01:00 [DBG] Disposing transaction.
2022-10-17 18:25:17.960 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:25:17.962 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:25:17.974 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 18:25:18.056 +01:00 [ERR] Error on updating entity.
2022-10-17 18:25:18.062 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:25:18.065 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:25:18.066 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:25:18.067 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:25:18.067 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:25:18.069 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:25:18.070 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API) in 228.7753ms
2022-10-17 18:25:18.073 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 18:25:18.075 +01:00 [DBG] Connection id "0HMLGCH7ROVMF" completed keep alive response.
2022-10-17 18:25:18.076 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:25:18.078 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61 - 500 - text/plain;+charset=utf-8 268.9182ms
2022-10-17 18:25:41.602 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61
2022-10-17 18:25:41.620 +01:00 [DBG] POST requests are not supported
2022-10-17 18:25:41.622 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/logout'
2022-10-17 18:25:41.623 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Logout' is valid for the request path '/api/users/logout'
2022-10-17 18:25:41.625 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 18:25:41.626 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:25:41.628 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:25:41.630 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:25:41.632 +01:00 [DBG] Authorization was successful.
2022-10-17 18:25:41.633 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 18:25:41.634 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:25:41.636 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:25:41.638 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:25:41.640 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:25:41.641 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:25:41.643 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:25:41.645 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:25:41.648 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:25:41.650 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 18:25:41.651 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-17 18:25:41.652 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:25:41.653 +01:00 [DBG] Connection id "0HMLGCH7ROVMF", Request id "0HMLGCH7ROVMF:00000008": started reading request body.
2022-10-17 18:25:41.655 +01:00 [DBG] Connection id "0HMLGCH7ROVMF", Request id "0HMLGCH7ROVMF:00000008": done reading request body.
2022-10-17 18:25:41.656 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'
2022-10-17 18:25:41.657 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 18:25:41.659 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 18:25:41.660 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 18:25:41.663 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 18:25:41.665 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:25:41.667 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:25:41.668 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:25:41.669 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:25:41.671 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:25:41.672 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 18:25:41.676 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 18:25:41.678 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:25:41.679 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:25:41.680 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:25:41.682 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:25:41.683 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:25:41.685 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:25:41.686 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:25:41.687 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:25:41.688 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:25:41.690 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:25:41.691 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:25:41.692 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:25:41.693 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:25:41.694 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:25:41.695 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:25:41.699 +01:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:25:41.704 +01:00 [DBG] Disposing transaction.
2022-10-17 18:25:41.705 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:25:41.706 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:25:41.709 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.InvalidCastException: Cannot write DateTime with Kind=UTC to PostgreSQL type 'timestamp without time zone', consider using 'timestamp with time zone'. Note that it's not possible to mix DateTimes with different Kinds in an array/range. See the Npgsql.EnableLegacyTimestampBehavior AppContext switch to enable legacy behavior.
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateAndGetLength(DateTime value, NpgsqlParameter parameter)
   at Npgsql.Internal.TypeHandlers.DateTimeHandlers.TimestampHandler.ValidateObjectAndGetLength(Object value, NpgsqlLengthCache& lengthCache, NpgsqlParameter parameter)
   at Npgsql.NpgsqlParameter.ValidateAndGetLength()
   at Npgsql.NpgsqlParameterCollection.ValidateAndBind(ConnectorTypeMapper typeMapper)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 18:25:41.789 +01:00 [ERR] Error on updating entity.
2022-10-17 18:25:41.790 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:25:41.793 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:25:41.793 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:25:41.796 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:25:41.798 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:25:41.799 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:25:41.800 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API) in 155.3033ms
2022-10-17 18:25:41.802 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 18:25:41.803 +01:00 [DBG] Connection id "0HMLGCH7ROVMF" completed keep alive response.
2022-10-17 18:25:41.804 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:25:41.805 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61 - 500 - text/plain;+charset=utf-8 202.9680ms
2022-10-17 18:25:49.432 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 18:25:49.535 +01:00 [DBG] Hosting starting
2022-10-17 18:25:49.573 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 18:25:49.577 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 18:25:49.584 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 18:25:49.586 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 18:25:49.591 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 18:25:49.597 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 18:25:49.599 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 18:25:49.606 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 18:25:49.610 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:25:49.614 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 18:25:49.617 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:25:49.624 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 18:25:49.629 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 18:25:49.634 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 18:25:49.635 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 18:25:49.840 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 18:25:49.892 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 18:25:49.893 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 18:25:49.894 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 18:25:49.895 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 18:25:49.896 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 18:25:49.897 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 18:25:49.898 +01:00 [INF] Hosting environment: Development
2022-10-17 18:25:49.899 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 18:25:49.900 +01:00 [DBG] Hosting started
2022-10-17 18:25:49.926 +01:00 [DBG] Connection id "0HMLGCIHB6QJ3" accepted.
2022-10-17 18:25:49.926 +01:00 [DBG] Connection id "0HMLGCIHB6QJ2" accepted.
2022-10-17 18:25:49.928 +01:00 [DBG] Connection id "0HMLGCIHB6QJ3" started.
2022-10-17 18:25:49.929 +01:00 [DBG] Connection id "0HMLGCIHB6QJ2" started.
2022-10-17 18:25:49.945 +01:00 [DBG] Connection id "0HMLGCIHB6QJ3" received FIN.
2022-10-17 18:25:49.945 +01:00 [DBG] Connection id "0HMLGCIHB6QJ2" received FIN.
2022-10-17 18:25:49.958 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:25:49.959 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:25:50.087 +01:00 [DBG] Connection id "0HMLGCIHB6QJ2" stopped.
2022-10-17 18:25:50.087 +01:00 [DBG] Connection id "0HMLGCIHB6QJ3" stopped.
2022-10-17 18:25:50.094 +01:00 [DBG] Connection id "0HMLGCIHB6QJ2" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:25:50.120 +01:00 [DBG] Connection id "0HMLGCIHB6QJ3" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:25:50.525 +01:00 [DBG] Connection id "0HMLGCIHB6QJ4" accepted.
2022-10-17 18:25:50.528 +01:00 [DBG] Connection id "0HMLGCIHB6QJ4" started.
2022-10-17 18:25:50.581 +01:00 [DBG] Connection 0HMLGCIHB6QJ4 established using the following protocol: "Tls13"
2022-10-17 18:25:50.630 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 18:25:50.670 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 18:25:50.824 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 18:25:50.961 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 18:25:50.965 +01:00 [DBG] Connection id "0HMLGCIHB6QJ4" completed keep alive response.
2022-10-17 18:25:50.970 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 340.8220ms
2022-10-17 18:25:51.002 +01:00 [DBG] Connection id "0HMLGCIHB6QJ5" accepted.
2022-10-17 18:25:51.006 +01:00 [DBG] Connection id "0HMLGCIHB6QJ5" started.
2022-10-17 18:25:51.015 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 18:25:51.019 +01:00 [DBG] Connection 0HMLGCIHB6QJ5 established using the following protocol: "Tls13"
2022-10-17 18:25:51.032 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 18:25:51.065 +01:00 [DBG] Connection id "0HMLGCIHB6QJ5" completed keep alive response.
2022-10-17 18:25:51.074 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 41.9760ms
2022-10-17 18:25:51.077 +01:00 [DBG] Connection id "0HMLGCIHB6QJ4" completed keep alive response.
2022-10-17 18:25:51.078 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 63.0654ms
2022-10-17 18:25:51.249 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 18:25:51.446 +01:00 [DBG] Connection id "0HMLGCIHB6QJ4" completed keep alive response.
2022-10-17 18:25:51.448 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 199.1764ms
2022-10-17 18:25:55.390 +01:00 [DBG] Connection id "0HMLGCIHB6QJ6" accepted.
2022-10-17 18:25:55.392 +01:00 [DBG] Connection id "0HMLGCIHB6QJ6" received FIN.
2022-10-17 18:25:55.394 +01:00 [DBG] Connection id "0HMLGCIHB6QJ6" started.
2022-10-17 18:25:55.395 +01:00 [DBG] Connection id "0HMLGCIHB6QJ7" accepted.
2022-10-17 18:25:55.397 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:25:55.398 +01:00 [DBG] Connection id "0HMLGCIHB6QJ7" started.
2022-10-17 18:25:55.401 +01:00 [DBG] Connection id "0HMLGCIHB6QJ6" stopped.
2022-10-17 18:25:55.403 +01:00 [DBG] Connection id "0HMLGCIHB6QJ6" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:25:55.404 +01:00 [DBG] Connection 0HMLGCIHB6QJ7 established using the following protocol: "Tls13"
2022-10-17 18:25:55.406 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61
2022-10-17 18:25:55.409 +01:00 [DBG] POST requests are not supported
2022-10-17 18:25:55.437 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/logout'
2022-10-17 18:25:55.444 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Logout' is valid for the request path '/api/users/logout'
2022-10-17 18:25:55.447 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 18:25:55.841 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:25:55.846 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:25:55.850 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:25:55.854 +01:00 [DBG] Authorization was successful.
2022-10-17 18:25:55.857 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 18:25:55.892 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:25:55.897 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:25:55.899 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:25:55.900 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:25:55.903 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:25:55.905 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:25:55.907 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:25:56.136 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 18:25:56.169 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:25:56.175 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 18:25:56.181 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-17 18:25:56.184 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:25:56.191 +01:00 [DBG] Connection id "0HMLGCIHB6QJ7", Request id "0HMLGCIHB6QJ7:00000002": started reading request body.
2022-10-17 18:25:56.195 +01:00 [DBG] Connection id "0HMLGCIHB6QJ7", Request id "0HMLGCIHB6QJ7:00000002": done reading request body.
2022-10-17 18:25:56.203 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'
2022-10-17 18:25:56.205 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 18:25:56.206 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 18:25:56.208 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 18:25:56.220 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 18:25:57.443 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:25:57.509 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.Id == __userTokenId_0)'
2022-10-17 18:25:57.940 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_token_id == @__userTokenId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:25:57.993 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:25:58.096 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (99ms).
2022-10-17 18:25:58.107 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:25:58.344 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:25:58.365 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 18:25:58.483 +01:00 [INF] Executed DbCommand (125ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 18:25:58.539 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:25:58.592 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:25:58.602 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:25:58.619 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:25:58.639 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:25:58.652 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:25:58.657 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:25:58.672 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:25:58.707 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:25:58.711 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:25:58.716 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:25:58.730 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:25:58.804 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:25:58.807 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 18:25:58.811 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:25:58.849 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:25:58.872 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:25:58.888 +01:00 [DBG] Committing transaction.
2022-10-17 18:25:58.905 +01:00 [DBG] Committed transaction.
2022-10-17 18:25:58.913 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:25:58.916 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:25:58.922 +01:00 [DBG] Disposing transaction.
2022-10-17 18:25:58.928 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:25:58.934 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 18:25:58.943 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:25:58.949 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:25:58.950 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:25:58.951 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:25:58.952 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:25:58.953 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2022-10-17 18:25:58.960 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API) in 3049.2206ms
2022-10-17 18:25:58.965 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 18:25:58.969 +01:00 [DBG] Connection id "0HMLGCIHB6QJ7" completed keep alive response.
2022-10-17 18:25:58.972 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:25:58.977 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61 - 200 - text/plain;+charset=utf-8 3570.3281ms
2022-10-17 18:26:02.626 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61
2022-10-17 18:26:02.628 +01:00 [DBG] POST requests are not supported
2022-10-17 18:26:02.631 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/logout'
2022-10-17 18:26:02.638 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Logout' is valid for the request path '/api/users/logout'
2022-10-17 18:26:02.641 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 18:26:02.643 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:26:02.644 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:26:02.645 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:26:02.647 +01:00 [DBG] Authorization was successful.
2022-10-17 18:26:02.648 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 18:26:02.651 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:26:02.655 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:26:02.656 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:26:02.658 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:26:02.660 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:26:02.661 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:26:02.663 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:26:02.665 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:26:02.669 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 18:26:02.671 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-17 18:26:02.673 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:26:02.674 +01:00 [DBG] Connection id "0HMLGCIHB6QJ7", Request id "0HMLGCIHB6QJ7:00000003": started reading request body.
2022-10-17 18:26:02.675 +01:00 [DBG] Connection id "0HMLGCIHB6QJ7", Request id "0HMLGCIHB6QJ7:00000003": done reading request body.
2022-10-17 18:26:02.677 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'
2022-10-17 18:26:02.678 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 18:26:02.679 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 18:26:02.681 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-17 18:26:02.684 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-17 18:26:02.729 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:26:02.737 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:26:02.738 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:26:02.739 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:26:02.740 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:26:02.742 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 18:26:02.745 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-17 18:26:02.748 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:26:02.751 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:26:02.752 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:26:02.754 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:26:02.755 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:26:02.757 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:26:02.758 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:26:02.759 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:26:02.760 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:26:02.762 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:26:02.764 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API) in 100.2784ms
2022-10-17 18:26:02.766 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-17 18:26:02.770 +01:00 [DBG] Connection id "0HMLGCIHB6QJ7" completed keep alive response.
2022-10-17 18:26:02.771 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:26:02.773 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/logout application/json 61 - 400 - text/plain;+charset=utf-8 146.5371ms
2022-10-17 18:27:44.190 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 18:27:44.342 +01:00 [DBG] Hosting starting
2022-10-17 18:27:44.423 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 18:27:44.440 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 18:27:44.462 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 18:27:44.464 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 18:27:44.471 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 18:27:44.484 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 18:27:44.490 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 18:27:44.511 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 18:27:44.514 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:27:44.521 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 18:27:44.523 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:27:44.531 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 18:27:44.538 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 18:27:44.543 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 18:27:44.547 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 18:27:44.721 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 18:27:44.778 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 18:27:44.780 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 18:27:44.782 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 18:27:44.782 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 18:27:44.783 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 18:27:44.785 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 18:27:44.785 +01:00 [INF] Hosting environment: Development
2022-10-17 18:27:44.786 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 18:27:44.787 +01:00 [DBG] Hosting started
2022-10-17 18:27:45.057 +01:00 [DBG] Connection id "0HMLGCJJL70JU" received FIN.
2022-10-17 18:27:45.057 +01:00 [DBG] Connection id "0HMLGCJJL70JV" received FIN.
2022-10-17 18:27:45.061 +01:00 [DBG] Connection id "0HMLGCJJL70JV" accepted.
2022-10-17 18:27:45.061 +01:00 [DBG] Connection id "0HMLGCJJL70JU" accepted.
2022-10-17 18:27:45.064 +01:00 [DBG] Connection id "0HMLGCJJL70JV" started.
2022-10-17 18:27:45.064 +01:00 [DBG] Connection id "0HMLGCJJL70JU" started.
2022-10-17 18:27:45.081 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:27:45.081 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:27:45.129 +01:00 [DBG] Connection id "0HMLGCJJL70JV" stopped.
2022-10-17 18:27:45.129 +01:00 [DBG] Connection id "0HMLGCJJL70JU" stopped.
2022-10-17 18:27:45.133 +01:00 [DBG] Connection id "0HMLGCJJL70JV" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:27:45.133 +01:00 [DBG] Connection id "0HMLGCJJL70JU" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:27:45.470 +01:00 [DBG] Connection id "0HMLGCJJL70K0" accepted.
2022-10-17 18:27:45.472 +01:00 [DBG] Connection id "0HMLGCJJL70K0" started.
2022-10-17 18:27:45.512 +01:00 [DBG] Connection 0HMLGCJJL70K0 established using the following protocol: "Tls13"
2022-10-17 18:27:45.556 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 18:27:45.595 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 18:27:45.742 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 18:27:45.918 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 18:27:45.921 +01:00 [DBG] Connection id "0HMLGCJJL70K0" completed keep alive response.
2022-10-17 18:27:45.924 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 370.3309ms
2022-10-17 18:27:45.975 +01:00 [DBG] Connection id "0HMLGCJJL70K1" accepted.
2022-10-17 18:27:45.978 +01:00 [DBG] Connection id "0HMLGCJJL70K1" started.
2022-10-17 18:27:46.004 +01:00 [DBG] Connection 0HMLGCJJL70K1 established using the following protocol: "Tls13"
2022-10-17 18:27:46.004 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 18:27:46.005 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 18:27:46.023 +01:00 [DBG] Connection id "0HMLGCJJL70K1" completed keep alive response.
2022-10-17 18:27:46.029 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 18.7572ms
2022-10-17 18:27:46.065 +01:00 [DBG] Connection id "0HMLGCJJL70K0" completed keep alive response.
2022-10-17 18:27:46.066 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 62.8573ms
2022-10-17 18:27:46.223 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 18:27:46.424 +01:00 [DBG] Connection id "0HMLGCJJL70K0" completed keep alive response.
2022-10-17 18:27:46.426 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 202.1349ms
2022-10-17 18:27:50.134 +01:00 [DBG] Connection id "0HMLGCJJL70K2" accepted.
2022-10-17 18:27:50.136 +01:00 [DBG] Connection id "0HMLGCJJL70K2" received FIN.
2022-10-17 18:27:50.136 +01:00 [DBG] Connection id "0HMLGCJJL70K2" started.
2022-10-17 18:27:50.137 +01:00 [DBG] Connection id "0HMLGCJJL70K3" accepted.
2022-10-17 18:27:50.139 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:27:50.142 +01:00 [DBG] Connection id "0HMLGCJJL70K3" started.
2022-10-17 18:27:50.149 +01:00 [DBG] Connection id "0HMLGCJJL70K2" stopped.
2022-10-17 18:27:50.160 +01:00 [DBG] Connection 0HMLGCJJL70K3 established using the following protocol: "Tls13"
2022-10-17 18:27:50.164 +01:00 [DBG] Connection id "0HMLGCJJL70K2" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:27:50.167 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:27:50.174 +01:00 [DBG] POST requests are not supported
2022-10-17 18:27:50.237 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:27:50.245 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:27:50.248 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:27:50.382 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:27:50.387 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:27:50.393 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:27:50.431 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:27:50.434 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:27:50.436 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:27:50.437 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:27:50.442 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:27:50.444 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:27:50.447 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:27:50.720 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 18:27:50.755 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:27:50.765 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:27:50.768 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:27:50.770 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:27:50.782 +01:00 [DBG] Connection id "0HMLGCJJL70K3", Request id "0HMLGCJJL70K3:00000002": started reading request body.
2022-10-17 18:27:50.785 +01:00 [DBG] Connection id "0HMLGCJJL70K3", Request id "0HMLGCJJL70K3:00000002": done reading request body.
2022-10-17 18:27:50.797 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:27:50.800 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:27:50.803 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:27:50.804 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:27:50.817 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:27:52.686 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:27:52.752 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-17 18:27:53.166 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:27:53.219 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:27:53.322 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (100ms).
2022-10-17 18:27:53.335 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:27:53.563 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:27:53.582 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:27:53.701 +01:00 [INF] Executed DbCommand (122ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:27:53.766 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:27:53.836 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:27:53.841 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:27:53.855 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:27:53.860 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-17 18:27:53.868 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:27:53.871 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:27:53.872 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:27:53.874 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:27:53.875 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:27:53.877 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:27:53.888 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:27:53.900 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:27:53.917 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:27:53.920 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:27:53.922 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:27:54.124 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:27:54.139 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:27:54.143 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:27:54.172 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:27:54.206 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:27:54.208 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:27:54.213 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:27:54.224 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:27:54.284 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:27:54.285 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:27:54.289 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:27:54.318 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:27:54.342 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:27:54.375 +01:00 [DBG] Disposing transaction.
2022-10-17 18:27:54.384 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:27:54.387 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:27:54.399 +01:00 [DBG] Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 18:27:54.500 +01:00 [ERR] Error on updating entity.
2022-10-17 18:27:54.509 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:27:54.517 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:27:54.518 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:27:54.520 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:27:54.522 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:27:54.524 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:27:54.535 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 4081.2469ms
2022-10-17 18:27:54.539 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:27:54.542 +01:00 [DBG] Connection id "0HMLGCJJL70K3" completed keep alive response.
2022-10-17 18:27:54.549 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:27:54.555 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 500 - text/plain;+charset=utf-8 4387.5522ms
2022-10-17 18:27:59.692 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:27:59.694 +01:00 [DBG] POST requests are not supported
2022-10-17 18:27:59.697 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:27:59.698 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:27:59.701 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:27:59.704 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:27:59.705 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:27:59.706 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:27:59.707 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:27:59.709 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:27:59.710 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:27:59.712 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:27:59.714 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:27:59.716 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:27:59.718 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:27:59.720 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:27:59.721 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:27:59.723 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:27:59.724 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:27:59.726 +01:00 [DBG] Connection id "0HMLGCJJL70K3", Request id "0HMLGCJJL70K3:00000003": started reading request body.
2022-10-17 18:27:59.727 +01:00 [DBG] Connection id "0HMLGCJJL70K3", Request id "0HMLGCJJL70K3:00000003": done reading request body.
2022-10-17 18:27:59.728 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:27:59.730 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:27:59.731 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:27:59.733 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:27:59.735 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:27:59.775 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:27:59.781 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:27:59.782 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:27:59.784 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:27:59.785 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:27:59.787 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:27:59.792 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:27:59.794 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:27:59.795 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:27:59.796 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:27:59.797 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:27:59.799 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:27:59.800 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:27:59.802 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:27:59.803 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:27:59.804 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:27:59.807 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:27:59.810 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:27:59.811 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:27:59.812 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:27:59.813 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:27:59.814 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:27:59.815 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:27:59.818 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:27:59.819 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:27:59.820 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:27:59.821 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:27:59.823 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:27:59.824 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:27:59.825 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:27:59.826 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:27:59.828 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:27:59.832 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:27:59.836 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:27:59.839 +01:00 [DBG] Disposing transaction.
2022-10-17 18:27:59.840 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:27:59.841 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:27:59.843 +01:00 [DBG] Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 18:27:59.904 +01:00 [ERR] Error on updating entity.
2022-10-17 18:27:59.906 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:27:59.909 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:27:59.910 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:27:59.911 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:27:59.912 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:27:59.913 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:27:59.914 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 196.2623ms
2022-10-17 18:27:59.920 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:27:59.922 +01:00 [DBG] Connection id "0HMLGCJJL70K3" completed keep alive response.
2022-10-17 18:27:59.923 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:27:59.925 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 500 - text/plain;+charset=utf-8 232.2313ms
2022-10-17 18:28:28.755 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:28:28.763 +01:00 [DBG] POST requests are not supported
2022-10-17 18:28:28.767 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:28:28.769 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:28:28.770 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:28:28.772 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:28:28.774 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:28:28.775 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:28:28.776 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:28:28.779 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:28:28.783 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:28:28.785 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:28:28.786 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:28:28.788 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:28:28.791 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:28:28.801 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:28:28.804 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:28:28.805 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:28:28.807 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:28:28.808 +01:00 [DBG] Connection id "0HMLGCJJL70K3", Request id "0HMLGCJJL70K3:00000004": started reading request body.
2022-10-17 18:28:28.811 +01:00 [DBG] Connection id "0HMLGCJJL70K3", Request id "0HMLGCJJL70K3:00000004": done reading request body.
2022-10-17 18:28:28.816 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:28:28.817 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:28:28.819 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:28:28.820 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:28:28.821 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:28:28.836 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:28:28.839 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:28:28.841 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:28:28.842 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:28:28.844 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:28:28.845 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:28:28.854 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:28:28.857 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:28:28.859 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:28:28.860 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:28:28.861 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:28:28.864 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:28:28.866 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:28:28.867 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:28:28.868 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:28:28.870 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:28:28.873 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:28:28.876 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:28:28.878 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:28:28.880 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:28:28.883 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:28:39.333 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:28:39.848 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:28:39.850 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:28:39.851 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:28:39.853 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:28:39.854 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:28:39.855 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:28:39.857 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:28:39.859 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:28:39.860 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:28:39.861 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:28:39.869 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:28:39.905 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:28:39.914 +01:00 [DBG] Disposing transaction.
2022-10-17 18:28:39.915 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:28:39.916 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:28:39.919 +01:00 [DBG] Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-10-17 18:34:41.966 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 18:34:42.083 +01:00 [DBG] Hosting starting
2022-10-17 18:34:42.137 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 18:34:42.142 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 18:34:42.155 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 18:34:42.157 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 18:34:42.165 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 18:34:42.174 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 18:34:42.176 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 18:34:42.185 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 18:34:42.189 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:34:42.195 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 18:34:42.198 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:34:42.214 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 18:34:42.219 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 18:34:42.223 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 18:34:42.224 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 18:34:42.410 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 18:34:42.576 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 18:34:42.586 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 18:34:42.587 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 18:34:42.589 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 18:34:42.590 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 18:34:42.591 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 18:34:42.592 +01:00 [INF] Hosting environment: Development
2022-10-17 18:34:42.593 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 18:34:42.594 +01:00 [DBG] Hosting started
2022-10-17 18:34:42.855 +01:00 [DBG] Connection id "0HMLGCNG5JG1U" accepted.
2022-10-17 18:34:42.855 +01:00 [DBG] Connection id "0HMLGCNG5JG1V" accepted.
2022-10-17 18:34:42.859 +01:00 [DBG] Connection id "0HMLGCNG5JG1U" started.
2022-10-17 18:34:42.859 +01:00 [DBG] Connection id "0HMLGCNG5JG1V" started.
2022-10-17 18:34:42.874 +01:00 [DBG] Connection id "0HMLGCNG5JG1U" received FIN.
2022-10-17 18:34:42.874 +01:00 [DBG] Connection id "0HMLGCNG5JG1V" received FIN.
2022-10-17 18:34:42.895 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:34:42.895 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:34:43.220 +01:00 [DBG] Connection id "0HMLGCNG5JG1U" stopped.
2022-10-17 18:34:43.220 +01:00 [DBG] Connection id "0HMLGCNG5JG1V" stopped.
2022-10-17 18:34:43.244 +01:00 [DBG] Connection id "0HMLGCNG5JG1U" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:34:43.244 +01:00 [DBG] Connection id "0HMLGCNG5JG1V" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:34:44.486 +01:00 [DBG] Connection id "0HMLGCNG5JG20" accepted.
2022-10-17 18:34:44.491 +01:00 [DBG] Connection id "0HMLGCNG5JG20" started.
2022-10-17 18:34:44.541 +01:00 [DBG] Connection 0HMLGCNG5JG20 established using the following protocol: "Tls13"
2022-10-17 18:34:44.594 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 18:34:44.637 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 18:34:44.794 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 18:34:44.940 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 18:34:44.943 +01:00 [DBG] Connection id "0HMLGCNG5JG20" completed keep alive response.
2022-10-17 18:34:44.947 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 355.9786ms
2022-10-17 18:34:45.007 +01:00 [DBG] Connection id "0HMLGCNG5JG21" accepted.
2022-10-17 18:34:45.013 +01:00 [DBG] Connection id "0HMLGCNG5JG21" started.
2022-10-17 18:34:45.034 +01:00 [DBG] Connection 0HMLGCNG5JG21 established using the following protocol: "Tls13"
2022-10-17 18:34:45.036 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 18:34:45.050 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 18:34:45.071 +01:00 [DBG] Connection id "0HMLGCNG5JG21" completed keep alive response.
2022-10-17 18:34:45.086 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 35.9620ms
2022-10-17 18:34:45.104 +01:00 [DBG] Connection id "0HMLGCNG5JG20" completed keep alive response.
2022-10-17 18:34:45.109 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 72.4443ms
2022-10-17 18:34:45.299 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 18:34:45.469 +01:00 [DBG] Connection id "0HMLGCNG5JG20" completed keep alive response.
2022-10-17 18:34:45.471 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 172.2621ms
2022-10-17 18:35:54.652 +01:00 [DBG] Connection id "0HMLGCNG5JG22" accepted.
2022-10-17 18:35:54.671 +01:00 [DBG] Connection id "0HMLGCNG5JG22" received FIN.
2022-10-17 18:35:54.687 +01:00 [DBG] Connection id "0HMLGCNG5JG23" accepted.
2022-10-17 18:35:54.687 +01:00 [DBG] Connection id "0HMLGCNG5JG22" started.
2022-10-17 18:35:54.695 +01:00 [DBG] Connection id "0HMLGCNG5JG23" started.
2022-10-17 18:35:54.696 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:35:54.700 +01:00 [DBG] Connection id "0HMLGCNG5JG22" stopped.
2022-10-17 18:35:54.701 +01:00 [DBG] Connection id "0HMLGCNG5JG22" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:35:54.703 +01:00 [DBG] Connection 0HMLGCNG5JG23 established using the following protocol: "Tls13"
2022-10-17 18:35:54.705 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/Users/Renew application/json 357
2022-10-17 18:35:54.708 +01:00 [DBG] POST requests are not supported
2022-10-17 18:35:54.739 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Renew'
2022-10-17 18:35:54.747 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/Users/Renew'
2022-10-17 18:35:54.751 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-17 18:35:55.178 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:35:55.181 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:35:55.186 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:35:55.189 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-17 18:35:55.230 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:35:55.234 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:35:55.235 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:35:55.236 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:35:55.239 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:35:55.240 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:35:55.246 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:35:55.489 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 18:35:55.525 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:35:55.534 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-17 18:35:55.537 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-17 18:35:55.540 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:35:55.548 +01:00 [DBG] Connection id "0HMLGCNG5JG23", Request id "0HMLGCNG5JG23:00000002": started reading request body.
2022-10-17 18:35:55.551 +01:00 [DBG] Connection id "0HMLGCNG5JG23", Request id "0HMLGCNG5JG23:00000002": done reading request body.
2022-10-17 18:35:55.557 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-17 18:35:55.561 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-17 18:35:55.563 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-17 18:35:55.565 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-17 18:35:55.574 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-17 18:35:56.748 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:35:56.819 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-17 18:35:57.217 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:35:57.272 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:35:57.357 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (82ms).
2022-10-17 18:35:57.368 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:35:57.632 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:35:57.650 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-17 18:35:57.756 +01:00 [INF] Executed DbCommand (114ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-17 18:35:57.808 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:35:57.861 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:35:57.868 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:35:57.877 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:35:57.882 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:35:57.887 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:35:57.887 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:35:57.889 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:35:57.890 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:35:57.891 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:35:57.900 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 2649.1609ms
2022-10-17 18:35:57.904 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-17 18:35:57.905 +01:00 [DBG] Connection id "0HMLGCNG5JG23" completed keep alive response.
2022-10-17 18:35:57.908 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:35:57.917 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/Users/Renew application/json 357 - 400 - text/plain;+charset=utf-8 3211.9936ms
2022-10-17 18:36:01.877 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:36:01.878 +01:00 [DBG] POST requests are not supported
2022-10-17 18:36:01.883 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:36:01.886 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:36:01.889 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:36:01.893 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:36:01.895 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:36:01.896 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:36:01.904 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:36:01.907 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:36:01.908 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:36:01.910 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:36:01.911 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:36:01.913 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:36:01.915 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:36:01.917 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:36:01.924 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:36:01.925 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:36:01.926 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:36:01.928 +01:00 [DBG] Connection id "0HMLGCNG5JG23", Request id "0HMLGCNG5JG23:00000003": started reading request body.
2022-10-17 18:36:01.929 +01:00 [DBG] Connection id "0HMLGCNG5JG23", Request id "0HMLGCNG5JG23:00000003": done reading request body.
2022-10-17 18:36:01.931 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:36:01.933 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:36:01.935 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:36:01.938 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:36:01.940 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:36:01.988 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:36:01.991 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-17 18:36:01.997 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:36:02.005 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:36:02.006 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:36:02.007 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:02.008 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:02.010 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:36:02.018 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:36:02.031 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:36:02.053 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:36:02.055 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:02.056 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:02.059 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-17 18:36:02.063 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:36:02.066 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:36:02.068 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:36:02.069 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:02.070 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:02.072 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:36:02.079 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:36:02.083 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:36:02.085 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:36:02.085 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:02.087 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:02.270 +01:00 [ERR] Error on updating entity.
2022-10-17 18:36:02.273 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:36:02.275 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:36:02.276 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:36:02.277 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:36:02.277 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:36:02.279 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:36:02.281 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 366.0776ms
2022-10-17 18:36:02.284 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:36:02.286 +01:00 [DBG] Connection id "0HMLGCNG5JG23" completed keep alive response.
2022-10-17 18:36:02.287 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:36:02.289 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 500 - text/plain;+charset=utf-8 412.4508ms
2022-10-17 18:36:20.462 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 18:36:20.641 +01:00 [DBG] Hosting starting
2022-10-17 18:36:20.679 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 18:36:20.683 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 18:36:20.689 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 18:36:20.691 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 18:36:20.698 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 18:36:20.708 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 18:36:20.711 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 18:36:20.730 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 18:36:20.742 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:36:20.749 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 18:36:20.752 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:36:20.759 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 18:36:20.764 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 18:36:20.769 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 18:36:20.771 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 18:36:21.024 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 18:36:21.089 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 18:36:21.091 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 18:36:21.092 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 18:36:21.093 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 18:36:21.094 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 18:36:21.095 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 18:36:21.096 +01:00 [INF] Hosting environment: Development
2022-10-17 18:36:21.097 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 18:36:21.098 +01:00 [DBG] Hosting started
2022-10-17 18:36:21.144 +01:00 [DBG] Connection id "0HMLGCODEVCGR" accepted.
2022-10-17 18:36:21.144 +01:00 [DBG] Connection id "0HMLGCODEVCGS" accepted.
2022-10-17 18:36:21.146 +01:00 [DBG] Connection id "0HMLGCODEVCGR" started.
2022-10-17 18:36:21.146 +01:00 [DBG] Connection id "0HMLGCODEVCGS" started.
2022-10-17 18:36:21.165 +01:00 [DBG] Connection id "0HMLGCODEVCGR" received FIN.
2022-10-17 18:36:21.166 +01:00 [DBG] Connection id "0HMLGCODEVCGS" received FIN.
2022-10-17 18:36:21.203 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:36:21.202 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:36:21.368 +01:00 [DBG] Connection id "0HMLGCODEVCGS" stopped.
2022-10-17 18:36:21.369 +01:00 [DBG] Connection id "0HMLGCODEVCGR" stopped.
2022-10-17 18:36:21.373 +01:00 [DBG] Connection id "0HMLGCODEVCGR" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:36:21.373 +01:00 [DBG] Connection id "0HMLGCODEVCGS" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:36:21.682 +01:00 [DBG] Connection id "0HMLGCODEVCGT" accepted.
2022-10-17 18:36:21.686 +01:00 [DBG] Connection id "0HMLGCODEVCGT" started.
2022-10-17 18:36:21.788 +01:00 [DBG] Connection 0HMLGCODEVCGT established using the following protocol: "Tls13"
2022-10-17 18:36:21.881 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 18:36:21.942 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 18:36:22.062 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 18:36:22.198 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 18:36:22.201 +01:00 [DBG] Connection id "0HMLGCODEVCGT" completed keep alive response.
2022-10-17 18:36:22.204 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 328.2070ms
2022-10-17 18:36:22.241 +01:00 [DBG] Connection id "0HMLGCODEVCGU" accepted.
2022-10-17 18:36:22.245 +01:00 [DBG] Connection id "0HMLGCODEVCGU" started.
2022-10-17 18:36:22.257 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 18:36:22.258 +01:00 [DBG] Connection 0HMLGCODEVCGU established using the following protocol: "Tls13"
2022-10-17 18:36:22.260 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 18:36:22.273 +01:00 [DBG] Connection id "0HMLGCODEVCGU" completed keep alive response.
2022-10-17 18:36:22.275 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 15.1134ms
2022-10-17 18:36:22.284 +01:00 [DBG] Connection id "0HMLGCODEVCGT" completed keep alive response.
2022-10-17 18:36:22.285 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 28.3877ms
2022-10-17 18:36:22.473 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 18:36:22.707 +01:00 [DBG] Connection id "0HMLGCODEVCGT" completed keep alive response.
2022-10-17 18:36:22.708 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 235.5387ms
2022-10-17 18:36:23.982 +01:00 [DBG] Connection id "0HMLGCODEVCGV" accepted.
2022-10-17 18:36:23.982 +01:00 [DBG] Connection id "0HMLGCODEVCGV" received FIN.
2022-10-17 18:36:23.983 +01:00 [DBG] Connection id "0HMLGCODEVCGV" started.
2022-10-17 18:36:23.983 +01:00 [DBG] Connection id "0HMLGCODEVCH0" accepted.
2022-10-17 18:36:23.986 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:36:23.987 +01:00 [DBG] Connection id "0HMLGCODEVCH0" started.
2022-10-17 18:36:23.994 +01:00 [DBG] Connection id "0HMLGCODEVCGV" stopped.
2022-10-17 18:36:23.996 +01:00 [DBG] Connection id "0HMLGCODEVCGV" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:36:23.998 +01:00 [DBG] Connection 0HMLGCODEVCH0 established using the following protocol: "Tls13"
2022-10-17 18:36:23.999 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:36:24.002 +01:00 [DBG] POST requests are not supported
2022-10-17 18:36:24.033 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:36:24.040 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:36:24.042 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:36:24.142 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:36:24.147 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:36:24.149 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:36:24.186 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:36:24.193 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:36:24.195 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:36:24.197 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:36:24.199 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:36:24.201 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:36:24.204 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:36:24.477 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 18:36:24.513 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:36:24.519 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:36:24.526 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:36:24.529 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:36:24.534 +01:00 [DBG] Connection id "0HMLGCODEVCH0", Request id "0HMLGCODEVCH0:00000002": started reading request body.
2022-10-17 18:36:24.536 +01:00 [DBG] Connection id "0HMLGCODEVCH0", Request id "0HMLGCODEVCH0:00000002": done reading request body.
2022-10-17 18:36:24.545 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:36:24.548 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:36:24.550 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:36:24.552 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:36:24.563 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:36:25.837 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:36:25.909 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-17 18:36:26.331 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:36:26.384 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:36:26.478 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (87ms).
2022-10-17 18:36:26.493 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:26.722 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:26.741 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:36:26.846 +01:00 [INF] Executed DbCommand (109ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:36:26.913 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:36:26.970 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:36:26.978 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:26.987 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:26.995 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-17 18:36:27.002 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:36:27.005 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:36:27.007 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:36:27.010 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:27.011 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:27.013 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:36:27.023 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:36:27.030 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:36:27.039 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:36:27.042 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:27.044 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:27.407 +01:00 [ERR] Error on updating entity.
2022-10-17 18:36:27.413 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:36:27.418 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:36:27.419 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:36:27.420 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:36:27.421 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:36:27.423 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:36:27.432 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 3224.6574ms
2022-10-17 18:36:27.435 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:36:27.436 +01:00 [DBG] Connection id "0HMLGCODEVCH0" completed keep alive response.
2022-10-17 18:36:27.439 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:36:27.448 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 500 - text/plain;+charset=utf-8 3447.9865ms
2022-10-17 18:36:36.327 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:36:36.330 +01:00 [DBG] POST requests are not supported
2022-10-17 18:36:36.332 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:36:36.333 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:36:36.335 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:36:36.338 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:36:36.340 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:36:36.342 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:36:36.344 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:36:36.347 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:36:36.348 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:36:36.350 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:36:36.354 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:36:36.355 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:36:36.357 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:36:36.360 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:36:36.367 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:36:36.370 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:36:36.372 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:36:36.373 +01:00 [DBG] Connection id "0HMLGCODEVCH0", Request id "0HMLGCODEVCH0:00000003": started reading request body.
2022-10-17 18:36:36.375 +01:00 [DBG] Connection id "0HMLGCODEVCH0", Request id "0HMLGCODEVCH0:00000003": done reading request body.
2022-10-17 18:36:36.376 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:36:36.377 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:36:36.379 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:36:36.380 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:36:36.381 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:36:36.424 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:36:36.430 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:36:36.431 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:36:36.433 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:36.435 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:36.436 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:36:36.441 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:36:36.443 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:36:36.445 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:36:36.446 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:36.447 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:36.449 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:36:36.451 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:36:36.453 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:36.457 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:36.459 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:36:36.462 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:36:36.465 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:36:36.467 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:36:36.469 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:36.470 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:51.839 +01:00 [ERR] Error on updating entity.
2022-10-17 18:36:53.356 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:36:53.361 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:36:53.362 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:36:53.363 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:36:53.364 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:36:53.365 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:36:53.370 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 17012.5093ms
2022-10-17 18:36:53.372 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:36:53.373 +01:00 [DBG] Connection id "0HMLGCODEVCH0" completed keep alive response.
2022-10-17 18:36:53.374 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:36:53.375 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 500 - text/plain;+charset=utf-8 17048.1307ms
2022-10-17 18:36:54.915 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:36:54.916 +01:00 [DBG] POST requests are not supported
2022-10-17 18:36:54.917 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:36:54.920 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:36:54.922 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:36:54.923 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:36:54.924 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:36:54.925 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:36:54.926 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:36:54.928 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:36:54.930 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:36:54.931 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:36:54.933 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:36:54.936 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:36:54.939 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:36:54.947 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:36:54.949 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:36:54.951 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:36:54.955 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:36:54.957 +01:00 [DBG] Connection id "0HMLGCODEVCH0", Request id "0HMLGCODEVCH0:00000004": started reading request body.
2022-10-17 18:36:54.958 +01:00 [DBG] Connection id "0HMLGCODEVCH0", Request id "0HMLGCODEVCH0:00000004": done reading request body.
2022-10-17 18:36:54.959 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:36:54.960 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:36:54.962 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:36:54.964 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:36:54.965 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:36:54.977 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:36:54.981 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:36:54.982 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:36:54.983 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:54.986 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:54.989 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:36:54.992 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:36:54.995 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:36:54.996 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:36:54.997 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:54.998 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:55.000 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:36:55.003 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 18:36:55.006 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:36:55.008 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:55.009 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:36:55.013 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:36:55.016 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:36:55.017 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:36:55.018 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:36:55.021 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:37:00.139 +01:00 [ERR] Error on updating entity.
2022-10-17 18:37:03.973 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:37:03.979 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:37:03.981 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:37:03.983 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:37:03.984 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:37:03.985 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:37:03.986 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 9047.3103ms
2022-10-17 18:37:03.988 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:37:03.989 +01:00 [DBG] Connection id "0HMLGCODEVCH0" completed keep alive response.
2022-10-17 18:37:03.990 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:37:03.991 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 500 - text/plain;+charset=utf-8 9076.9003ms
2022-10-17 18:37:05.554 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:37:05.573 +01:00 [DBG] POST requests are not supported
2022-10-17 18:37:05.574 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:37:05.576 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:37:05.577 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:37:05.579 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:37:05.581 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:37:05.592 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:37:05.594 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:37:05.596 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:37:05.598 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:37:05.600 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:37:05.602 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:37:05.603 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:37:05.604 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:37:05.606 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:37:05.608 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:37:05.609 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:37:05.611 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:37:05.613 +01:00 [DBG] Connection id "0HMLGCODEVCH0", Request id "0HMLGCODEVCH0:00000005": started reading request body.
2022-10-17 18:37:05.615 +01:00 [DBG] Connection id "0HMLGCODEVCH0", Request id "0HMLGCODEVCH0:00000005": done reading request body.
2022-10-17 18:37:05.616 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:37:05.617 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:37:05.618 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:37:05.619 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:37:05.621 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:37:05.623 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:37:05.625 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:37:05.626 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:37:05.627 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:37:05.628 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:37:05.630 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:37:05.634 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:37:05.636 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:37:05.638 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:37:05.639 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:37:05.641 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:37:05.642 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:37:05.643 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:37:05.645 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:37:05.647 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:37:05.650 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:37:05.653 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:37:05.656 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:37:05.657 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:37:05.658 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:37:05.659 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:45:27.014 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 18:45:27.140 +01:00 [DBG] Hosting starting
2022-10-17 18:45:27.195 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 18:45:27.201 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 18:45:27.216 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 18:45:27.218 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 18:45:27.226 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 18:45:27.235 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 18:45:27.237 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 18:45:27.245 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 18:45:27.249 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:45:27.252 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 18:45:27.254 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:45:27.259 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 18:45:27.263 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 18:45:27.266 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 18:45:27.268 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 18:45:27.501 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 18:45:27.596 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 18:45:27.609 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 18:45:27.610 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 18:45:27.611 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 18:45:27.612 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 18:45:27.615 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 18:45:27.616 +01:00 [INF] Hosting environment: Development
2022-10-17 18:45:27.617 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 18:45:27.618 +01:00 [DBG] Hosting started
2022-10-17 18:45:27.847 +01:00 [DBG] Connection id "0HMLGCTGCOOB1" received FIN.
2022-10-17 18:45:27.847 +01:00 [DBG] Connection id "0HMLGCTGCOOB2" received FIN.
2022-10-17 18:45:27.859 +01:00 [DBG] Connection id "0HMLGCTGCOOB2" accepted.
2022-10-17 18:45:27.860 +01:00 [DBG] Connection id "0HMLGCTGCOOB1" accepted.
2022-10-17 18:45:27.876 +01:00 [DBG] Connection id "0HMLGCTGCOOB1" started.
2022-10-17 18:45:27.876 +01:00 [DBG] Connection id "0HMLGCTGCOOB2" started.
2022-10-17 18:45:27.911 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:45:27.911 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:45:28.065 +01:00 [DBG] Connection id "0HMLGCTGCOOB1" stopped.
2022-10-17 18:45:28.065 +01:00 [DBG] Connection id "0HMLGCTGCOOB2" stopped.
2022-10-17 18:45:28.071 +01:00 [DBG] Connection id "0HMLGCTGCOOB2" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:45:28.071 +01:00 [DBG] Connection id "0HMLGCTGCOOB1" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:45:28.318 +01:00 [DBG] Connection id "0HMLGCTGCOOB3" accepted.
2022-10-17 18:45:28.319 +01:00 [DBG] Connection id "0HMLGCTGCOOB3" started.
2022-10-17 18:45:28.361 +01:00 [DBG] Connection 0HMLGCTGCOOB3 established using the following protocol: "Tls13"
2022-10-17 18:45:28.410 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 18:45:28.460 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 18:45:29.189 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 18:45:29.321 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 18:45:29.324 +01:00 [DBG] Connection id "0HMLGCTGCOOB3" completed keep alive response.
2022-10-17 18:45:29.328 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 920.5513ms
2022-10-17 18:45:29.372 +01:00 [DBG] Connection id "0HMLGCTGCOOB4" accepted.
2022-10-17 18:45:29.374 +01:00 [DBG] Connection id "0HMLGCTGCOOB4" started.
2022-10-17 18:45:29.376 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 18:45:29.386 +01:00 [DBG] Connection 0HMLGCTGCOOB4 established using the following protocol: "Tls13"
2022-10-17 18:45:29.403 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 18:45:29.408 +01:00 [DBG] Connection id "0HMLGCTGCOOB4" completed keep alive response.
2022-10-17 18:45:29.409 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 6.4170ms
2022-10-17 18:45:29.441 +01:00 [DBG] Connection id "0HMLGCTGCOOB3" completed keep alive response.
2022-10-17 18:45:29.442 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 66.0483ms
2022-10-17 18:45:29.639 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 18:45:29.805 +01:00 [DBG] Connection id "0HMLGCTGCOOB3" completed keep alive response.
2022-10-17 18:45:29.806 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 167.6229ms
2022-10-17 18:45:36.946 +01:00 [DBG] Connection id "0HMLGCTGCOOB5" accepted.
2022-10-17 18:45:36.947 +01:00 [DBG] Connection id "0HMLGCTGCOOB5" received FIN.
2022-10-17 18:45:36.948 +01:00 [DBG] Connection id "0HMLGCTGCOOB5" started.
2022-10-17 18:45:36.950 +01:00 [DBG] Connection id "0HMLGCTGCOOB6" accepted.
2022-10-17 18:45:36.953 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:45:36.954 +01:00 [DBG] Connection id "0HMLGCTGCOOB6" started.
2022-10-17 18:45:36.959 +01:00 [DBG] Connection id "0HMLGCTGCOOB5" stopped.
2022-10-17 18:45:36.962 +01:00 [DBG] Connection id "0HMLGCTGCOOB5" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:45:36.966 +01:00 [DBG] Connection 0HMLGCTGCOOB6 established using the following protocol: "Tls13"
2022-10-17 18:45:36.969 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:45:36.972 +01:00 [DBG] POST requests are not supported
2022-10-17 18:45:37.004 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:45:37.012 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:45:37.015 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:45:37.133 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:45:37.139 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:45:37.144 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:45:37.192 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:45:37.196 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:45:37.197 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:45:37.198 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:45:37.200 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:45:37.202 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:45:37.204 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:45:37.464 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 18:45:37.497 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:45:37.504 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:45:37.511 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:45:37.514 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:45:37.521 +01:00 [DBG] Connection id "0HMLGCTGCOOB6", Request id "0HMLGCTGCOOB6:00000002": started reading request body.
2022-10-17 18:45:37.524 +01:00 [DBG] Connection id "0HMLGCTGCOOB6", Request id "0HMLGCTGCOOB6:00000002": done reading request body.
2022-10-17 18:45:37.533 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:45:37.536 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:45:37.538 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:45:37.539 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:45:37.552 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:45:38.758 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:45:38.850 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-17 18:45:39.297 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:45:39.349 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:45:39.445 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (91ms).
2022-10-17 18:45:39.455 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:45:39.774 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:45:39.793 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:45:39.920 +01:00 [INF] Executed DbCommand (127ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:45:39.981 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:45:40.064 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:45:40.071 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:45:40.087 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:45:40.094 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-17 18:45:40.102 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:45:40.104 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:45:40.105 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:45:40.107 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:45:40.108 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:45:40.111 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:45:40.121 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:45:40.129 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:45:40.139 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:45:40.140 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:45:40.142 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:45:40.355 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:45:40.372 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:45:40.382 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:45:40.386 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:45:40.401 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:45:40.437 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:45:40.440 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:45:40.450 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:45:40.468 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:45:40.530 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:45:40.531 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:45:40.535 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:45:40.561 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-17 18:45:40.576 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:45:40.593 +01:00 [DBG] Committing transaction.
2022-10-17 18:45:40.610 +01:00 [DBG] Committed transaction.
2022-10-17 18:45:40.619 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:45:40.622 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:45:40.628 +01:00 [DBG] Disposing transaction.
2022-10-17 18:45:40.635 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:45:40.641 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 18:45:40.671 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:45:40.675 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:45:40.677 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:45:40.681 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:45:40.682 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 18:45:40.684 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-17 18:45:40.701 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 3490.0802ms
2022-10-17 18:45:40.705 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:45:40.708 +01:00 [DBG] Connection id "0HMLGCTGCOOB6" completed keep alive response.
2022-10-17 18:45:40.714 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:45:40.720 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 200 - application/json;+charset=utf-8 3751.5588ms
2022-10-17 18:46:17.821 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/Users/Renew application/json 289
2022-10-17 18:46:17.826 +01:00 [DBG] POST requests are not supported
2022-10-17 18:46:17.829 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Renew'
2022-10-17 18:46:17.832 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/Users/Renew'
2022-10-17 18:46:17.834 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-17 18:46:17.921 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:46:17.923 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:46:17.925 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:46:17.926 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-17 18:46:17.930 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:46:17.934 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:46:17.935 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:46:17.937 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:46:17.939 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:46:17.940 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:46:17.941 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:46:17.943 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:46:17.993 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-17 18:46:18.000 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-17 18:46:18.003 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:46:18.006 +01:00 [DBG] Connection id "0HMLGCTGCOOB6", Request id "0HMLGCTGCOOB6:00000003": started reading request body.
2022-10-17 18:46:18.007 +01:00 [DBG] Connection id "0HMLGCTGCOOB6", Request id "0HMLGCTGCOOB6:00000003": done reading request body.
2022-10-17 18:46:18.008 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-17 18:46:18.010 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-17 18:46:18.011 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-17 18:46:18.013 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-17 18:46:18.016 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-17 18:46:18.058 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:46:18.060 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-17 18:46:18.065 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:46:18.068 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:46:18.069 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:46:18.070 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:18.072 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:18.074 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-17 18:46:18.078 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-17 18:46:18.081 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:46:18.084 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:46:18.085 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:18.086 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:18.088 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:46:18.091 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:46:18.092 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:46:18.092 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:46:18.093 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:46:18.095 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:46:18.097 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 155.1216ms
2022-10-17 18:46:18.101 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-17 18:46:18.103 +01:00 [DBG] Connection id "0HMLGCTGCOOB6" completed keep alive response.
2022-10-17 18:46:18.104 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:46:18.106 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/Users/Renew application/json 289 - 400 - text/plain;+charset=utf-8 284.3641ms
2022-10-17 18:46:23.193 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:46:23.195 +01:00 [DBG] POST requests are not supported
2022-10-17 18:46:23.196 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:46:23.197 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:46:23.199 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:46:23.200 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:46:23.203 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:46:23.205 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:46:23.206 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:46:23.209 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:46:23.210 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:46:23.211 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:46:23.213 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:46:23.214 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:46:23.216 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:46:23.224 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:46:23.226 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:46:23.227 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:46:23.228 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:46:23.230 +01:00 [DBG] Connection id "0HMLGCTGCOOB6", Request id "0HMLGCTGCOOB6:00000004": started reading request body.
2022-10-17 18:46:23.231 +01:00 [DBG] Connection id "0HMLGCTGCOOB6", Request id "0HMLGCTGCOOB6:00000004": done reading request body.
2022-10-17 18:46:23.232 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:46:23.233 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:46:23.234 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:46:23.237 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:46:23.240 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:46:23.248 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:46:23.256 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:46:23.258 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:46:23.259 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:23.261 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:23.262 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:46:23.265 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:46:23.267 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:46:23.268 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:46:23.271 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:23.272 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:23.274 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:46:23.275 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:46:23.276 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:23.277 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:23.278 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:46:23.282 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:46:23.284 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:46:23.287 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:46:23.289 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:23.290 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:23.291 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:46:23.293 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:46:23.294 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:46:23.295 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:46:23.296 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:46:23.297 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:46:23.299 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 82.8668ms
2022-10-17 18:46:23.300 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:46:23.301 +01:00 [DBG] Connection id "0HMLGCTGCOOB6" completed keep alive response.
2022-10-17 18:46:23.305 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:46:23.306 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 400 - text/plain;+charset=utf-8 112.9125ms
2022-10-17 18:46:27.434 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts - -
2022-10-17 18:46:27.437 +01:00 [DBG] The request path  does not match the path filter
2022-10-17 18:46:27.438 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts'
2022-10-17 18:46:27.440 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts'
2022-10-17 18:46:27.442 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:46:27.443 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:46:27.444 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:46:27.445 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:46:27.448 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 18:46:27.450 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:46:27.452 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:46:27.454 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:46:27.456 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:46:27.458 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:46:27.460 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:46:27.461 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:46:27.465 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:46:27.469 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(account => account.UserId == __userId_0)'
2022-10-17 18:46:27.472 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
        SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
        FROM SB-operational.Accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-17 18:46:27.475 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:46:27.476 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:46:27.478 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:27.479 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:27.480 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:46:27.486 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:46:27.504 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:46:27.519 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:46:27.522 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:46:27.523 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:27.525 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:27.527 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:46:27.528 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:46:27.530 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:27.531 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:27.532 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:46:27.536 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:46:27.538 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:46:27.539 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:27.540 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:27.543 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:46:27.545 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:46:27.546 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:46:27.547 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:46:27.548 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 18:46:27.550 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-17 18:46:27.560 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 99.8967ms
2022-10-17 18:46:27.562 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:46:27.563 +01:00 [DBG] Connection id "0HMLGCTGCOOB6" completed keep alive response.
2022-10-17 18:46:27.565 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:46:27.566 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts - - - 200 - application/json;+charset=utf-8 132.4117ms
2022-10-17 18:46:37.348 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/Accounts/185dbc7b-ec5a-4188-a748-fcb1ee8ea23e - -
2022-10-17 18:46:37.352 +01:00 [DBG] The request path  does not match the path filter
2022-10-17 18:46:37.355 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Accounts/185dbc7b-ec5a-4188-a748-fcb1ee8ea23e'
2022-10-17 18:46:37.356 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts/{accountId}' is valid for the request path '/api/Accounts/185dbc7b-ec5a-4188-a748-fcb1ee8ea23e'
2022-10-17 18:46:37.357 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-17 18:46:37.358 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:46:37.359 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:46:37.360 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-17 18:46:37.364 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 18:46:37.367 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:46:37.371 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:46:37.372 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:46:37.374 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:46:37.375 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:46:37.377 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:46:37.378 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:46:37.380 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-17 18:46:37.381 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-17 18:46:37.386 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-17 18:46:37.387 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-17 18:46:37.389 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-17 18:46:37.390 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-17 18:46:37.395 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:46:37.411 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-17 18:46:37.515 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Account>(
    asyncEnumerable: new SingleQueryingEnumerable<Account>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.account_id, a.balance, a.created_at, a.currency, a.user_id
            FROM SB-operational.Accounts AS a
            WHERE a.account_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-17 18:46:37.531 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:46:37.534 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-17 18:46:37.536 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:37.537 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:37.538 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 18:46:37.557 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-17 18:46:37.566 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:46:37.572 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:46:37.573 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:37.575 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:37.579 +01:00 [DBG] Compiling query expression: 
'DbSet<Movement>()
    .Where(movement => movement.AccountId == __accountId_0)'
2022-10-17 18:46:37.586 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Movement>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Movement.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Movement.AccountId (Guid) Required FK Index, 1], [Property: Movement.Amount (decimal) Required, 2], [Property: Movement.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3] }
        SELECT m.movement_id, m.account_id, m.amount, m.created_at
        FROM SB-operational.Movements AS m
        WHERE m.account_id == @__accountId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movement>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-17 18:46:37.590 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:46:37.590 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:46:37.592 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:37.593 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:37.594 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-17 18:46:37.599 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-17 18:46:37.606 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:46:37.632 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:46:37.638 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:46:37.639 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:46:37.641 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:46:37.644 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:46:37.644 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:46:37.645 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:46:37.646 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 18:46:37.647 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims'.
2022-10-17 18:46:37.653 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 276.7807ms
2022-10-17 18:46:37.655 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-17 18:46:37.656 +01:00 [DBG] Connection id "0HMLGCTGCOOB6" completed keep alive response.
2022-10-17 18:46:37.657 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:46:37.658 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/Accounts/185dbc7b-ec5a-4188-a748-fcb1ee8ea23e - - - 200 - application/json;+charset=utf-8 310.0545ms
2022-10-17 18:46:44.418 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts - -
2022-10-17 18:46:44.420 +01:00 [DBG] The request path  does not match the path filter
2022-10-17 18:46:44.422 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts'
2022-10-17 18:46:44.423 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts'
2022-10-17 18:46:44.427 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:46:44.430 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-17 18:46:44.437 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-10-17 18:46:44.438 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:46:44.440 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 18:46:44.444 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:46:44.446 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:46:44.448 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:46:44.450 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:46:44.451 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:46:44.453 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:46:44.455 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:46:44.578 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 124.8679ms
2022-10-17 18:46:44.581 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:46:44.583 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'input')
   at System.Guid.Parse(String input)
   at SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts() in C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\Controllers\AccountsController.cs:line 45
   at lambda_method164(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-17 18:46:44.663 +01:00 [DBG] Connection id "0HMLGCTGCOOB6" completed keep alive response.
2022-10-17 18:46:44.664 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts - - - 500 - text/plain;+charset=utf-8 245.8289ms
2022-10-17 18:47:06.853 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:47:06.857 +01:00 [DBG] POST requests are not supported
2022-10-17 18:47:06.857 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:47:06.859 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:47:06.860 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:47:06.861 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:47:06.863 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:47:06.864 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:47:06.866 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:47:06.868 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:47:06.869 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:47:06.871 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:47:06.872 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:47:06.874 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:47:06.876 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:47:06.877 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:47:06.879 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:47:06.881 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:47:06.883 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:47:06.884 +01:00 [DBG] Connection id "0HMLGCTGCOOB6", Request id "0HMLGCTGCOOB6:00000008": started reading request body.
2022-10-17 18:47:06.885 +01:00 [DBG] Connection id "0HMLGCTGCOOB6", Request id "0HMLGCTGCOOB6:00000008": done reading request body.
2022-10-17 18:47:06.887 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:47:06.888 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:47:06.890 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:47:06.892 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:47:06.893 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:47:06.895 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:47:06.898 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:47:06.899 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:47:06.900 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:47:06.901 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:47:06.902 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:47:06.906 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:47:06.908 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:47:06.910 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:47:06.910 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:47:06.912 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:47:06.914 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:47:06.915 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:47:06.916 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:47:06.917 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:47:06.919 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:47:06.923 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:47:06.926 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:47:06.927 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:47:06.928 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:47:06.930 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:47:06.931 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:47:06.934 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:47:06.934 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:47:06.936 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:47:06.937 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:47:06.938 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:47:06.940 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 63.8565ms
2022-10-17 18:47:06.941 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:47:06.942 +01:00 [DBG] Connection id "0HMLGCTGCOOB6" completed keep alive response.
2022-10-17 18:47:06.944 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:47:06.945 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 400 - text/plain;+charset=utf-8 92.1563ms
2022-10-17 18:47:10.037 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/Users/Renew application/json 289
2022-10-17 18:47:10.040 +01:00 [DBG] POST requests are not supported
2022-10-17 18:47:10.042 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Renew'
2022-10-17 18:47:10.043 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/Users/Renew'
2022-10-17 18:47:10.045 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-17 18:47:10.048 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-17 18:47:10.052 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-10-17 18:47:10.054 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-10-17 18:47:10.055 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-17 18:47:10.056 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:47:10.058 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:47:10.060 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:47:10.061 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:47:10.063 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:47:10.064 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:47:10.067 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:47:10.071 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:47:10.073 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-17 18:47:10.075 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-17 18:47:10.077 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:47:10.078 +01:00 [DBG] Connection id "0HMLGCTGCOOB6", Request id "0HMLGCTGCOOB6:00000009": started reading request body.
2022-10-17 18:47:10.080 +01:00 [DBG] Connection id "0HMLGCTGCOOB6", Request id "0HMLGCTGCOOB6:00000009": done reading request body.
2022-10-17 18:47:10.082 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-17 18:47:10.085 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-17 18:47:10.089 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-17 18:47:10.090 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-17 18:47:10.091 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-17 18:47:10.093 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:47:10.095 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:47:10.095 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:47:10.097 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:47:10.098 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:47:10.100 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-17 18:47:10.104 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-17 18:47:10.106 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:47:10.108 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:47:10.108 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:47:10.110 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:47:10.121 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:47:10.127 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:47:10.128 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:47:10.129 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:47:10.131 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:47:10.132 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:47:10.135 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:47:10.136 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:47:10.137 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:47:10.146 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:47:10.147 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:47:10.148 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-17 18:47:10.175 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-17 18:47:10.195 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-17 18:47:10.203 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:47:10.204 +01:00 [DBG] Committing transaction.
2022-10-17 18:47:10.207 +01:00 [DBG] Committed transaction.
2022-10-17 18:47:10.208 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:47:10.210 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:47:10.211 +01:00 [DBG] Disposing transaction.
2022-10-17 18:47:10.215 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:47:10.218 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 18:47:10.219 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:47:10.222 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:47:10.222 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:47:10.223 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:47:10.225 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 18:47:10.226 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-17 18:47:10.227 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 160.2861ms
2022-10-17 18:47:10.229 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-17 18:47:10.230 +01:00 [DBG] Connection id "0HMLGCTGCOOB6" completed keep alive response.
2022-10-17 18:47:10.232 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:47:10.234 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/Users/Renew application/json 289 - 200 - application/json;+charset=utf-8 196.9667ms
2022-10-17 18:47:24.886 +01:00 [DBG] Connection id "0HMLGCTGCOOB4" received FIN.
2022-10-17 18:47:24.910 +01:00 [DBG] Connection id "0HMLGCTGCOOB3" disconnecting.
2022-10-17 18:47:24.888 +01:00 [DBG] Connection id "0HMLGCTGCOOB3" received FIN.
2022-10-17 18:47:24.910 +01:00 [DBG] Connection id "0HMLGCTGCOOB4" disconnecting.
2022-10-17 18:47:24.919 +01:00 [DBG] Connection id "0HMLGCTGCOOB3" sending FIN because: "The client closed the connection."
2022-10-17 18:47:24.922 +01:00 [DBG] Connection id "0HMLGCTGCOOB4" sending FIN because: "The client closed the connection."
2022-10-17 18:47:24.937 +01:00 [DBG] Connection id "0HMLGCTGCOOB4" stopped.
2022-10-17 18:47:24.937 +01:00 [DBG] Connection id "0HMLGCTGCOOB3" stopped.
2022-10-17 18:49:20.082 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-17 18:49:20.209 +01:00 [DBG] Hosting starting
2022-10-17 18:49:20.255 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-17 18:49:20.258 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-17 18:49:20.272 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-17 18:49:20.273 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-17 18:49:20.282 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-17 18:49:20.289 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-17 18:49:20.290 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-17 18:49:20.298 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-17 18:49:20.301 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:49:20.305 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-17 18:49:20.306 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-17 18:49:20.311 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-17 18:49:20.313 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-17 18:49:20.317 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-17 18:49:20.319 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-17 18:49:20.472 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-17 18:49:20.522 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-17 18:49:20.523 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-17 18:49:20.524 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-17 18:49:20.524 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-17 18:49:20.526 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-17 18:49:20.527 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-17 18:49:20.528 +01:00 [INF] Hosting environment: Development
2022-10-17 18:49:20.529 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-17 18:49:20.530 +01:00 [DBG] Hosting started
2022-10-17 18:49:20.988 +01:00 [DBG] Connection id "0HMLGCVLS5LUU" received FIN.
2022-10-17 18:49:20.989 +01:00 [DBG] Connection id "0HMLGCVLS5LUV" received FIN.
2022-10-17 18:49:21.005 +01:00 [DBG] Connection id "0HMLGCVLS5LUU" accepted.
2022-10-17 18:49:21.005 +01:00 [DBG] Connection id "0HMLGCVLS5LUV" accepted.
2022-10-17 18:49:21.008 +01:00 [DBG] Connection id "0HMLGCVLS5LUU" started.
2022-10-17 18:49:21.008 +01:00 [DBG] Connection id "0HMLGCVLS5LUV" started.
2022-10-17 18:49:21.045 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:49:21.045 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:49:21.299 +01:00 [DBG] Connection id "0HMLGCVLS5LUU" stopped.
2022-10-17 18:49:21.333 +01:00 [DBG] Connection id "0HMLGCVLS5LUV" stopped.
2022-10-17 18:49:21.346 +01:00 [DBG] Connection id "0HMLGCVLS5LUU" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:49:21.353 +01:00 [DBG] Connection id "0HMLGCVLS5LUV" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:49:21.487 +01:00 [DBG] Connection id "0HMLGCVLS5LV0" accepted.
2022-10-17 18:49:21.494 +01:00 [DBG] Connection id "0HMLGCVLS5LV0" started.
2022-10-17 18:49:21.561 +01:00 [DBG] Connection 0HMLGCVLS5LV0 established using the following protocol: "Tls13"
2022-10-17 18:49:21.623 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/index.html - -
2022-10-17 18:49:21.679 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-17 18:49:21.902 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-17 18:49:22.167 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-17 18:49:22.173 +01:00 [DBG] Connection id "0HMLGCVLS5LV0" completed keep alive response.
2022-10-17 18:49:22.177 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 557.8241ms
2022-10-17 18:49:22.346 +01:00 [DBG] Connection id "0HMLGCVLS5LV1" accepted.
2022-10-17 18:49:22.355 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_vs/browserLink - -
2022-10-17 18:49:22.367 +01:00 [DBG] Connection id "0HMLGCVLS5LV1" started.
2022-10-17 18:49:22.467 +01:00 [DBG] Connection 0HMLGCVLS5LV1 established using the following protocol: "Tls13"
2022-10-17 18:49:22.476 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-17 18:49:22.535 +01:00 [DBG] Connection id "0HMLGCVLS5LV0" completed keep alive response.
2022-10-17 18:49:22.535 +01:00 [DBG] Connection id "0HMLGCVLS5LV1" completed keep alive response.
2022-10-17 18:49:22.537 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 181.7816ms
2022-10-17 18:49:22.539 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 63.1739ms
2022-10-17 18:49:22.644 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-17 18:49:22.907 +01:00 [DBG] Connection id "0HMLGCVLS5LV0" completed keep alive response.
2022-10-17 18:49:22.908 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 264.6698ms
2022-10-17 18:49:25.282 +01:00 [DBG] Connection id "0HMLGCVLS5LV2" accepted.
2022-10-17 18:49:25.283 +01:00 [DBG] Connection id "0HMLGCVLS5LV2" received FIN.
2022-10-17 18:49:25.284 +01:00 [DBG] Connection id "0HMLGCVLS5LV2" started.
2022-10-17 18:49:25.286 +01:00 [DBG] Connection id "0HMLGCVLS5LV3" accepted.
2022-10-17 18:49:25.288 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-17 18:49:25.289 +01:00 [DBG] Connection id "0HMLGCVLS5LV3" started.
2022-10-17 18:49:25.291 +01:00 [DBG] Connection id "0HMLGCVLS5LV2" stopped.
2022-10-17 18:49:25.293 +01:00 [DBG] Connection id "0HMLGCVLS5LV2" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-17 18:49:25.299 +01:00 [DBG] Connection 0HMLGCVLS5LV3 established using the following protocol: "Tls13"
2022-10-17 18:49:25.305 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts - -
2022-10-17 18:49:25.308 +01:00 [DBG] The request path  does not match the path filter
2022-10-17 18:49:25.345 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts'
2022-10-17 18:49:25.350 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts'
2022-10-17 18:49:25.354 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:49:25.680 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-17 18:49:25.687 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-10-17 18:49:25.692 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-10-17 18:49:25.697 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-17 18:49:25.709 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-17 18:49:25.711 +01:00 [DBG] Connection id "0HMLGCVLS5LV3" completed keep alive response.
2022-10-17 18:49:25.712 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts - - - 401 0 - 407.0588ms
2022-10-17 18:49:30.236 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61
2022-10-17 18:49:30.237 +01:00 [DBG] POST requests are not supported
2022-10-17 18:49:30.240 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-17 18:49:30.242 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-17 18:49:30.243 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:49:30.245 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:49:30.246 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-17 18:49:30.248 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:49:30.283 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:49:30.286 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:49:30.288 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:49:30.291 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:49:30.294 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:49:30.295 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:49:30.299 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:49:30.552 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-17 18:49:30.594 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:49:30.603 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:49:30.608 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-17 18:49:30.612 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:49:30.619 +01:00 [DBG] Connection id "0HMLGCVLS5LV3", Request id "0HMLGCVLS5LV3:00000003": started reading request body.
2022-10-17 18:49:30.621 +01:00 [DBG] Connection id "0HMLGCVLS5LV3", Request id "0HMLGCVLS5LV3:00000003": done reading request body.
2022-10-17 18:49:30.630 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-17 18:49:30.633 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:49:30.634 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:49:30.635 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-17 18:49:30.647 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-17 18:49:31.810 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:49:31.870 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-17 18:49:32.266 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:49:32.318 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:49:32.404 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (83ms).
2022-10-17 18:49:32.415 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:49:32.664 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:49:32.682 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:49:32.784 +01:00 [INF] Executed DbCommand (106ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-17 18:49:32.849 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:49:32.905 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:49:32.911 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:49:32.919 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:49:32.924 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-17 18:49:32.930 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:49:32.934 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:49:32.934 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:49:32.936 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:49:32.937 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:49:32.938 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:49:32.948 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-17 18:49:32.954 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:49:32.965 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:49:32.966 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:49:32.967 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:49:32.970 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:49:32.974 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:49:32.974 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:49:32.976 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:49:32.977 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-17 18:49:32.980 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-17 18:49:32.986 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 2684.8881ms
2022-10-17 18:49:32.989 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-17 18:49:32.990 +01:00 [DBG] Connection id "0HMLGCVLS5LV3" completed keep alive response.
2022-10-17 18:49:32.995 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:49:33.000 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json 61 - 400 - text/plain;+charset=utf-8 2763.7279ms
2022-10-17 18:49:38.760 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/Users/Renew application/json 289
2022-10-17 18:49:38.762 +01:00 [DBG] POST requests are not supported
2022-10-17 18:49:38.764 +01:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Renew'
2022-10-17 18:49:38.767 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/Users/Renew'
2022-10-17 18:49:38.769 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-17 18:49:38.771 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-17 18:49:38.774 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-10-17 18:49:38.776 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-10-17 18:49:38.777 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-17 18:49:38.786 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-17 18:49:38.790 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:49:38.792 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:49:38.793 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:49:38.795 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:49:38.796 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:49:38.806 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:49:38.810 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-17 18:49:38.812 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-17 18:49:38.819 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-17 18:49:38.824 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-10-17 18:49:38.827 +01:00 [DBG] Connection id "0HMLGCVLS5LV3", Request id "0HMLGCVLS5LV3:00000004": started reading request body.
2022-10-17 18:49:38.831 +01:00 [DBG] Connection id "0HMLGCVLS5LV3", Request id "0HMLGCVLS5LV3:00000004": done reading request body.
2022-10-17 18:49:38.835 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-17 18:49:38.836 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-17 18:49:38.838 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-17 18:49:38.839 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-17 18:49:38.842 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-17 18:49:38.895 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:49:38.897 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-17 18:49:38.902 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-17 18:49:38.909 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:49:38.910 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:49:38.911 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:49:38.912 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:49:38.913 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-17 18:49:38.920 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-17 18:49:38.923 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:49:38.925 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:49:38.926 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:49:38.927 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:49:38.995 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:49:39.011 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:49:39.025 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:49:39.029 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-17 18:49:39.049 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-17 18:49:39.087 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:49:39.090 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:49:39.094 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-17 18:49:39.105 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-17 18:49:39.170 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:49:39.171 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-17 18:49:39.174 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-17 18:49:39.201 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-17 18:49:39.231 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-17 18:49:39.245 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:49:39.260 +01:00 [DBG] Committing transaction.
2022-10-17 18:49:39.276 +01:00 [DBG] Committed transaction.
2022-10-17 18:49:39.283 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:49:39.286 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:49:39.291 +01:00 [DBG] Disposing transaction.
2022-10-17 18:49:39.307 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:49:39.314 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-17 18:49:39.336 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:49:39.338 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:49:39.339 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:49:39.340 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:49:39.341 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 18:49:39.343 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-17 18:49:39.352 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 545.6618ms
2022-10-17 18:49:39.355 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-17 18:49:39.357 +01:00 [DBG] Connection id "0HMLGCVLS5LV3" completed keep alive response.
2022-10-17 18:49:39.359 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:49:39.360 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/Users/Renew application/json 289 - 200 - application/json;+charset=utf-8 599.3325ms
2022-10-17 18:49:58.970 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts - -
2022-10-17 18:49:58.972 +01:00 [DBG] The request path  does not match the path filter
2022-10-17 18:49:58.973 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts'
2022-10-17 18:49:58.974 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts'
2022-10-17 18:49:58.975 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:49:58.994 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:49:58.995 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:49:58.997 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:49:58.998 +01:00 [DBG] Authorization was successful.
2022-10-17 18:49:58.999 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:49:59.003 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 18:49:59.006 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:49:59.008 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:49:59.009 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:49:59.012 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:49:59.013 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:49:59.015 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:49:59.018 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:49:59.031 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:49:59.036 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(account => account.UserId == __userId_0)'
2022-10-17 18:49:59.041 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
        SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
        FROM SB-operational.Accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-17 18:49:59.043 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:49:59.044 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:49:59.045 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:49:59.046 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:49:59.048 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:49:59.054 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:49:59.071 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:49:59.082 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:49:59.083 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:49:59.084 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:49:59.086 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:49:59.091 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:49:59.092 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:49:59.094 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:49:59.095 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:49:59.097 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:49:59.102 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:49:59.105 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:49:59.106 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:49:59.108 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:49:59.110 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:49:59.114 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:49:59.115 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:49:59.116 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:49:59.117 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 18:49:59.120 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-17 18:49:59.129 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 114.4188ms
2022-10-17 18:49:59.131 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:49:59.133 +01:00 [DBG] Connection id "0HMLGCVLS5LV3" completed keep alive response.
2022-10-17 18:49:59.134 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:49:59.136 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts - - - 200 - application/json;+charset=utf-8 165.6996ms
2022-10-17 18:50:26.625 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts - -
2022-10-17 18:50:26.627 +01:00 [DBG] The request path  does not match the path filter
2022-10-17 18:50:26.628 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts'
2022-10-17 18:50:26.630 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts'
2022-10-17 18:50:26.632 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:50:26.633 +01:00 [DBG] Successfully validated the token.
2022-10-17 18:50:26.634 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:50:26.635 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-17 18:50:26.636 +01:00 [DBG] Authorization was successful.
2022-10-17 18:50:26.637 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:50:26.638 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-17 18:50:26.640 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-17 18:50:26.641 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-17 18:50:26.643 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-17 18:50:26.647 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-17 18:50:26.648 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-17 18:50:26.650 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:50:26.651 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-17 18:50:26.653 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-17 18:50:26.655 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:50:26.656 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:50:26.657 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:50:26.658 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:50:26.660 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:50:26.665 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:50:26.668 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:50:26.669 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-17 18:50:26.670 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:50:26.671 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:50:26.672 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:50:26.674 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-17 18:50:26.674 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-17 18:50:26.676 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-17 18:50:26.677 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:50:26.678 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:50:26.683 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-17 18:50:26.685 +01:00 [DBG] A data reader was disposed.
2022-10-17 18:50:26.686 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-17 18:50:26.687 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-17 18:50:26.688 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-17 18:50:26.691 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-17 18:50:26.692 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-17 18:50:26.693 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-17 18:50:26.694 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-17 18:50:26.695 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-17 18:50:26.698 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 48.1832ms
2022-10-17 18:50:26.700 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:50:26.701 +01:00 [DBG] Connection id "0HMLGCVLS5LV3" completed keep alive response.
2022-10-17 18:50:26.702 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-17 18:50:26.703 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts - - - 200 - application/json;+charset=utf-8 77.5891ms
2022-10-17 18:50:43.383 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts - -
2022-10-17 18:50:43.385 +01:00 [DBG] The request path  does not match the path filter
2022-10-17 18:50:43.386 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts'
2022-10-17 18:50:43.387 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts'
2022-10-17 18:50:43.389 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-17 18:50:43.391 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-17 18:50:43.394 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-10-17 18:50:43.396 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-10-17 18:50:43.398 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-17 18:50:43.399 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-17 18:50:43.400 +01:00 [DBG] Connection id "0HMLGCVLS5LV3" completed keep alive response.
2022-10-17 18:50:43.401 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts - - - 401 0 - 18.0436ms
