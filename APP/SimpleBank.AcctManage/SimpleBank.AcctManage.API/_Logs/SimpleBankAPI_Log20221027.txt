2022-10-27 00:00:14.614 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:00:14.770 +01:00 [DBG] Hosting starting
2022-10-27 00:00:14.847 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:00:14.852 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:00:14.862 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:00:14.864 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:00:14.870 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:00:14.876 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:00:14.878 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:00:14.889 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:00:14.891 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:00:14.898 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:00:14.900 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:00:14.906 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:00:14.910 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:00:14.914 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:00:14.916 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:00:15.065 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:00:15.112 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:00:15.113 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:00:15.114 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:00:15.115 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:00:15.116 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:00:15.117 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:00:15.118 +01:00 [INF] Hosting environment: Development
2022-10-27 00:00:15.119 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:00:15.119 +01:00 [DBG] Hosting started
2022-10-27 00:00:15.267 +01:00 [DBG] Connection id "0HMLNKNC4MLFQ" accepted.
2022-10-27 00:00:15.269 +01:00 [DBG] Connection id "0HMLNKNC4MLFR" accepted.
2022-10-27 00:00:15.271 +01:00 [DBG] Connection id "0HMLNKNC4MLFQ" started.
2022-10-27 00:00:15.274 +01:00 [DBG] Connection id "0HMLNKNC4MLFR" started.
2022-10-27 00:00:15.318 +01:00 [DBG] Connection id "0HMLNKNC4MLFQ" received FIN.
2022-10-27 00:00:15.318 +01:00 [DBG] Connection id "0HMLNKNC4MLFR" received FIN.
2022-10-27 00:00:15.344 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:00:15.355 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:00:15.688 +01:00 [DBG] Connection id "0HMLNKNC4MLFR" stopped.
2022-10-27 00:00:15.688 +01:00 [DBG] Connection id "0HMLNKNC4MLFQ" stopped.
2022-10-27 00:00:15.723 +01:00 [DBG] Connection id "0HMLNKNC4MLFS" accepted.
2022-10-27 00:00:15.745 +01:00 [DBG] Connection id "0HMLNKNC4MLFQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:00:15.745 +01:00 [DBG] Connection id "0HMLNKNC4MLFR" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:00:15.745 +01:00 [DBG] Connection id "0HMLNKNC4MLFS" started.
2022-10-27 00:00:15.831 +01:00 [DBG] Connection 0HMLNKNC4MLFS established using the following protocol: "Tls13"
2022-10-27 00:00:15.939 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:00:15.994 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:00:16.159 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:00:16.517 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:00:16.517 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:00:16.520 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:00:16.532 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 596.5198ms
2022-10-27 00:00:16.533 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 15.7857ms
2022-10-27 00:00:16.878 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 360.7919ms
2022-10-27 00:00:17.138 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:00:17.635 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 496.9455ms
2022-10-27 00:00:23.434 +01:00 [DBG] Connection id "0HMLNKNC4MLFT" accepted.
2022-10-27 00:00:23.436 +01:00 [DBG] Connection id "0HMLNKNC4MLFT" started.
2022-10-27 00:00:23.445 +01:00 [DBG] Connection 0HMLNKNC4MLFT established using the following protocol: "Tls13"
2022-10-27 00:00:23.466 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:00:23.469 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:00:23.492 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:00:23.497 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:00:23.500 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:00:23.850 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:00:23.852 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:00:23.857 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:00:23.863 +01:00 [DBG] Authorization was successful.
2022-10-27 00:00:23.865 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:00:23.883 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:00:23.887 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:00:23.889 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:00:23.890 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:00:23.893 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:00:23.895 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:00:23.897 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:00:24.104 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:00:24.134 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:00:25.173 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:00:25.280 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-27 00:00:25.677 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
            SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
            FROM SB-operational.Users AS u
            WHERE u.user_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-27 00:00:25.744 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:00:25.819 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (72ms).
2022-10-27 00:00:25.834 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:00:26.032 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:00:26.050 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:00:26.147 +01:00 [INF] Executed DbCommand (102ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:00:26.206 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:00:26.266 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:00:26.277 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:00:26.287 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:00:26.304 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:00:26.309 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:00:26.309 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:00:26.310 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:00:26.312 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:00:26.315 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:00:26.338 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 2437.046ms
2022-10-27 00:00:26.341 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:00:26.345 +01:00 [DBG] Connection id "0HMLNKNC4MLFT" completed keep alive response.
2022-10-27 00:00:26.350 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:00:26.355 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 2889.0877ms
2022-10-27 00:01:02.918 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:01:03.082 +01:00 [DBG] Hosting starting
2022-10-27 00:01:03.121 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:01:03.125 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:01:03.133 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:01:03.135 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:01:03.140 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:01:03.147 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:01:03.148 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:01:03.156 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:01:03.159 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:01:03.162 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:01:03.165 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:01:03.172 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:01:03.179 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:01:03.185 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:01:03.187 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:01:03.344 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:01:03.411 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:01:03.412 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:01:03.414 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:01:03.415 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:01:03.417 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:01:03.419 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:01:03.419 +01:00 [INF] Hosting environment: Development
2022-10-27 00:01:03.420 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:01:03.421 +01:00 [DBG] Hosting started
2022-10-27 00:01:03.748 +01:00 [DBG] Connection id "0HMLNKNQJ2FL7" received FIN.
2022-10-27 00:01:03.777 +01:00 [DBG] Connection id "0HMLNKNQJ2FL7" accepted.
2022-10-27 00:01:03.782 +01:00 [DBG] Connection id "0HMLNKNQJ2FL7" started.
2022-10-27 00:01:03.818 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:01:03.890 +01:00 [DBG] Connection id "0HMLNKNQJ2FL7" stopped.
2022-10-27 00:01:03.894 +01:00 [DBG] Connection id "0HMLNKNQJ2FL7" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:01:08.124 +01:00 [DBG] Connection id "0HMLNKNQJ2FL8" accepted.
2022-10-27 00:01:08.126 +01:00 [DBG] Connection id "0HMLNKNQJ2FL8" started.
2022-10-27 00:01:08.161 +01:00 [DBG] Connection 0HMLNKNQJ2FL8 established using the following protocol: "Tls13"
2022-10-27 00:01:08.199 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 -
2022-10-27 00:01:08.219 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:01:08.273 +01:00 [DBG] POST requests are not supported
2022-10-27 00:01:08.301 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/renew'
2022-10-27 00:01:08.305 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/users/renew'
2022-10-27 00:01:08.308 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:01:08.385 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:01:08.389 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:01:08.391 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:01:08.418 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:01:08.422 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:01:08.424 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:01:08.426 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:01:08.428 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:01:08.430 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:01:08.432 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:01:08.657 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:01:08.692 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:01:08.707 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:01:08.711 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-27 00:01:08.713 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:01:08.730 +01:00 [DBG] Connection id "0HMLNKNQJ2FL8", Request id "0HMLNKNQJ2FL8:00000002": started reading request body.
2022-10-27 00:01:08.736 +01:00 [DBG] Connection id "0HMLNKNQJ2FL8", Request id "0HMLNKNQJ2FL8:00000002": done reading request body.
2022-10-27 00:01:08.742 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-27 00:01:08.744 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:01:08.745 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:01:08.746 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:01:08.756 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:01:09.169 +01:00 [DBG] Connection id "0HMLNKNQJ2FL9" accepted.
2022-10-27 00:01:09.197 +01:00 [DBG] Connection id "0HMLNKNQJ2FL9" started.
2022-10-27 00:01:09.209 +01:00 [DBG] Connection 0HMLNKNQJ2FL9 established using the following protocol: "Tls13"
2022-10-27 00:01:09.239 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:01:09.342 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:01:09.461 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:01:09.469 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 227.7544ms
2022-10-27 00:01:09.521 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:01:09.528 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:01:09.539 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 11.8820ms
2022-10-27 00:01:09.576 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 53.5678ms
2022-10-27 00:01:09.801 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:01:09.969 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 168.6495ms
2022-10-27 00:01:10.146 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:01:10.206 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-27 00:01:10.560 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:01:10.610 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:01:10.683 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (70ms).
2022-10-27 00:01:10.692 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:01:10.866 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:01:10.882 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:01:10.972 +01:00 [INF] Executed DbCommand (94ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:01:11.017 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:01:11.060 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:01:11.066 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:01:11.074 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:01:11.294 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:01:11.308 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:01:11.317 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:01:11.320 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:01:11.338 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:01:11.368 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:01:11.371 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:01:11.374 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:01:11.384 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:01:11.445 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:01:11.447 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:01:11.450 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:01:11.474 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:01:11.500 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-27 00:01:11.512 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:01:11.527 +01:00 [DBG] Committing transaction.
2022-10-27 00:01:11.540 +01:00 [DBG] Committed transaction.
2022-10-27 00:01:11.548 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:01:11.551 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:01:11.557 +01:00 [DBG] Disposing transaction.
2022-10-27 00:01:11.573 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:01:11.583 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:01:11.602 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:01:11.607 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:01:11.611 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:01:11.613 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:01:11.615 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:01:11.617 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:01:11.636 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 3201.3013ms
2022-10-27 00:01:11.640 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:01:11.645 +01:00 [DBG] Connection id "0HMLNKNQJ2FL8" completed keep alive response.
2022-10-27 00:01:11.649 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:01:11.653 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3458.4811ms
2022-10-27 00:01:11.677 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:01:11.678 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:01:11.681 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:01:11.682 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:01:11.683 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:01:11.686 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:01:11.687 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:01:11.691 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-27 00:01:11.700 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-27 00:01:11.701 +01:00 [DBG] Connection id "0HMLNKNQJ2FL8" completed keep alive response.
2022-10-27 00:01:11.702 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 401 0 - 25.2208ms
2022-10-27 00:01:24.349 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:01:24.494 +01:00 [DBG] Hosting starting
2022-10-27 00:01:24.562 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:01:24.573 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:01:24.581 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:01:24.583 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:01:24.594 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:01:24.601 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:01:24.602 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:01:24.613 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:01:24.616 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:01:24.620 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:01:24.624 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:01:24.630 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:01:24.633 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:01:24.636 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:01:24.640 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:01:24.788 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:01:24.840 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:01:24.841 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:01:24.842 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:01:24.843 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:01:24.844 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:01:24.845 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:01:24.846 +01:00 [INF] Hosting environment: Development
2022-10-27 00:01:24.847 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:01:24.848 +01:00 [DBG] Hosting started
2022-10-27 00:01:25.164 +01:00 [DBG] Connection id "0HMLNKO0VA9EJ" received FIN.
2022-10-27 00:01:25.176 +01:00 [DBG] Connection id "0HMLNKO0VA9EJ" accepted.
2022-10-27 00:01:25.176 +01:00 [DBG] Connection id "0HMLNKO0VA9EK" accepted.
2022-10-27 00:01:25.180 +01:00 [DBG] Connection id "0HMLNKO0VA9EK" received FIN.
2022-10-27 00:01:25.181 +01:00 [DBG] Connection id "0HMLNKO0VA9EK" started.
2022-10-27 00:01:25.181 +01:00 [DBG] Connection id "0HMLNKO0VA9EJ" started.
2022-10-27 00:01:25.200 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:01:25.200 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:01:25.252 +01:00 [DBG] Connection id "0HMLNKO0VA9EJ" stopped.
2022-10-27 00:01:25.252 +01:00 [DBG] Connection id "0HMLNKO0VA9EK" stopped.
2022-10-27 00:01:25.261 +01:00 [DBG] Connection id "0HMLNKO0VA9EK" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:01:25.262 +01:00 [DBG] Connection id "0HMLNKO0VA9EJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:01:28.734 +01:00 [DBG] Connection id "0HMLNKO0VA9EL" accepted.
2022-10-27 00:01:28.736 +01:00 [DBG] Connection id "0HMLNKO0VA9EL" started.
2022-10-27 00:01:28.781 +01:00 [DBG] Connection 0HMLNKO0VA9EL established using the following protocol: "Tls13"
2022-10-27 00:01:28.822 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:01:28.842 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:01:28.898 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:01:28.926 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:01:28.932 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:01:28.935 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:01:29.238 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:01:29.241 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:01:29.248 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:01:29.253 +01:00 [DBG] Authorization was successful.
2022-10-27 00:01:29.257 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:01:29.276 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:01:29.281 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:01:29.282 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:01:29.284 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:01:29.287 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:01:29.289 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:01:29.291 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:01:29.470 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:01:29.502 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:01:30.572 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:01:30.688 +01:00 [DBG] Connection id "0HMLNKO0VA9EM" accepted.
2022-10-27 00:01:30.689 +01:00 [DBG] Connection id "0HMLNKO0VA9EM" started.
2022-10-27 00:01:30.708 +01:00 [DBG] Connection 0HMLNKO0VA9EM established using the following protocol: "Tls13"
2022-10-27 00:01:30.772 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:01:30.780 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-27 00:01:30.856 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:01:31.036 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:01:31.042 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 269.2026ms
2022-10-27 00:01:31.099 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:01:31.101 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:01:31.116 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 17.6263ms
2022-10-27 00:01:31.134 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 32.9294ms
2022-10-27 00:01:31.323 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
            SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
            FROM SB-operational.Users AS u
            WHERE u.user_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-27 00:01:31.357 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:01:31.427 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:01:31.522 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (92ms).
2022-10-27 00:01:31.546 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:01:31.560 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 203.7633ms
2022-10-27 00:01:31.815 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:01:31.834 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:01:31.931 +01:00 [INF] Executed DbCommand (104ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:01:31.987 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:01:32.054 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:01:32.064 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:01:32.072 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:01:32.083 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:01:32.088 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:01:32.089 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:01:32.090 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:01:32.091 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:01:32.093 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:01:32.113 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 2818.3933ms
2022-10-27 00:01:32.116 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:01:32.120 +01:00 [DBG] Connection id "0HMLNKO0VA9EL" completed keep alive response.
2022-10-27 00:01:32.124 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:01:32.127 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 3310.2987ms
2022-10-27 00:02:01.213 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:02:01.484 +01:00 [DBG] Hosting starting
2022-10-27 00:02:01.541 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:02:01.548 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:02:01.561 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:02:01.564 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:02:01.573 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:02:01.585 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:02:01.587 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:02:01.601 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:02:01.605 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:02:01.610 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:02:01.613 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:02:01.620 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:02:01.623 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:02:01.629 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:02:01.633 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:02:01.801 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:02:01.851 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:02:01.852 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:02:01.853 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:02:01.854 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:02:01.855 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:02:01.856 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:02:01.857 +01:00 [INF] Hosting environment: Development
2022-10-27 00:02:01.858 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:02:01.859 +01:00 [DBG] Hosting started
2022-10-27 00:02:02.034 +01:00 [DBG] Connection id "0HMLNKOBURS0N" accepted.
2022-10-27 00:02:02.034 +01:00 [DBG] Connection id "0HMLNKOBURS0M" accepted.
2022-10-27 00:02:02.038 +01:00 [DBG] Connection id "0HMLNKOBURS0N" started.
2022-10-27 00:02:02.041 +01:00 [DBG] Connection id "0HMLNKOBURS0M" started.
2022-10-27 00:02:02.073 +01:00 [DBG] Connection id "0HMLNKOBURS0M" received FIN.
2022-10-27 00:02:02.073 +01:00 [DBG] Connection id "0HMLNKOBURS0N" received FIN.
2022-10-27 00:02:02.089 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:02:02.090 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:02:02.167 +01:00 [DBG] Connection id "0HMLNKOBURS0M" stopped.
2022-10-27 00:02:02.167 +01:00 [DBG] Connection id "0HMLNKOBURS0N" stopped.
2022-10-27 00:02:02.175 +01:00 [DBG] Connection id "0HMLNKOBURS0N" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:02:02.175 +01:00 [DBG] Connection id "0HMLNKOBURS0M" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:02:02.481 +01:00 [DBG] Connection id "0HMLNKOBURS0O" accepted.
2022-10-27 00:02:02.482 +01:00 [DBG] Connection id "0HMLNKOBURS0O" started.
2022-10-27 00:02:02.525 +01:00 [DBG] Connection 0HMLNKOBURS0O established using the following protocol: "Tls13"
2022-10-27 00:02:02.601 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:02:02.644 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:02:02.759 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:02:02.942 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:02:02.949 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 351.2347ms
2022-10-27 00:02:03.005 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:02:03.006 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:02:03.084 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 78.7568ms
2022-10-27 00:02:03.142 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 136.6202ms
2022-10-27 00:02:03.353 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:02:03.585 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 231.6807ms
2022-10-27 00:02:15.199 +01:00 [DBG] Connection id "0HMLNKOBURS0P" accepted.
2022-10-27 00:02:15.200 +01:00 [DBG] Connection id "0HMLNKOBURS0P" started.
2022-10-27 00:02:15.209 +01:00 [DBG] Connection 0HMLNKOBURS0P established using the following protocol: "Tls13"
2022-10-27 00:02:15.233 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 -
2022-10-27 00:02:15.237 +01:00 [DBG] POST requests are not supported
2022-10-27 00:02:15.260 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/renew'
2022-10-27 00:02:15.265 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/users/renew'
2022-10-27 00:02:15.267 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:02:15.337 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:02:15.343 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:02:15.346 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:02:15.373 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:02:15.377 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:02:15.378 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:02:15.380 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:02:15.382 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:02:15.383 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:02:15.385 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:02:15.561 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:02:15.590 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:02:15.603 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:02:15.609 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-27 00:02:15.611 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:02:15.617 +01:00 [DBG] Connection id "0HMLNKOBURS0P", Request id "0HMLNKOBURS0P:00000002": started reading request body.
2022-10-27 00:02:15.621 +01:00 [DBG] Connection id "0HMLNKOBURS0P", Request id "0HMLNKOBURS0P:00000002": done reading request body.
2022-10-27 00:02:15.627 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-27 00:02:15.629 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:02:15.631 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:02:15.632 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:02:15.640 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:02:16.664 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:02:16.724 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-27 00:02:17.072 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:02:17.118 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:02:17.190 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (68ms).
2022-10-27 00:02:17.201 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:02:17.386 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:02:17.402 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:02:17.499 +01:00 [INF] Executed DbCommand (102ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:02:17.540 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:02:17.587 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:02:17.594 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:02:17.602 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:02:17.783 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:02:17.797 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:02:17.807 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:02:17.812 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:02:17.834 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:02:17.868 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:02:17.871 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:02:17.875 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:02:17.886 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:02:17.945 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:02:17.946 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:02:17.950 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:02:17.976 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:02:18.004 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-27 00:02:18.017 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:02:18.031 +01:00 [DBG] Committing transaction.
2022-10-27 00:02:18.046 +01:00 [DBG] Committed transaction.
2022-10-27 00:02:18.054 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:02:18.058 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:02:18.064 +01:00 [DBG] Disposing transaction.
2022-10-27 00:02:18.079 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:02:18.085 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:02:18.100 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:02:18.104 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:02:18.105 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:02:18.106 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:02:18.107 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:02:18.109 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:02:18.122 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 2732.4932ms
2022-10-27 00:02:18.125 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:02:18.129 +01:00 [DBG] Connection id "0HMLNKOBURS0P" completed keep alive response.
2022-10-27 00:02:18.133 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:02:18.137 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 2903.6059ms
2022-10-27 00:02:18.152 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:02:18.153 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:02:18.156 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:02:18.157 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:02:18.158 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:02:18.161 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:02:18.162 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:02:18.167 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-27 00:02:18.175 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-27 00:02:18.177 +01:00 [DBG] Connection id "0HMLNKOBURS0P" completed keep alive response.
2022-10-27 00:02:18.178 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 401 0 - 25.8047ms
2022-10-27 00:02:42.790 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:02:42.948 +01:00 [DBG] Hosting starting
2022-10-27 00:02:43.000 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:02:43.008 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:02:43.017 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:02:43.020 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:02:43.027 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:02:43.035 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:02:43.037 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:02:43.049 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:02:43.054 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:02:43.059 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:02:43.061 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:02:43.065 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:02:43.068 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:02:43.074 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:02:43.076 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:02:43.225 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:02:43.274 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:02:43.276 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:02:43.277 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:02:43.278 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:02:43.279 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:02:43.281 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:02:43.281 +01:00 [INF] Hosting environment: Development
2022-10-27 00:02:43.282 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:02:43.283 +01:00 [DBG] Hosting started
2022-10-27 00:02:43.574 +01:00 [DBG] Connection id "0HMLNKOOB338C" received FIN.
2022-10-27 00:02:43.594 +01:00 [DBG] Connection id "0HMLNKOOB338C" accepted.
2022-10-27 00:02:43.597 +01:00 [DBG] Connection id "0HMLNKOOB338C" started.
2022-10-27 00:02:43.627 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:02:43.676 +01:00 [DBG] Connection id "0HMLNKOOB338C" stopped.
2022-10-27 00:02:43.686 +01:00 [DBG] Connection id "0HMLNKOOB338C" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:02:43.865 +01:00 [DBG] Connection id "0HMLNKOOB338D" accepted.
2022-10-27 00:02:43.871 +01:00 [DBG] Connection id "0HMLNKOOB338D" started.
2022-10-27 00:02:43.912 +01:00 [DBG] Connection 0HMLNKOOB338D established using the following protocol: "Tls13"
2022-10-27 00:02:43.964 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:02:44.000 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:02:44.120 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:02:44.240 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:02:44.247 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 286.4209ms
2022-10-27 00:02:44.310 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:02:44.311 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:02:44.323 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 13.0324ms
2022-10-27 00:02:44.378 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 66.9050ms
2022-10-27 00:02:44.576 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:02:44.849 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 273.2111ms
2022-10-27 00:02:53.559 +01:00 [DBG] Connection id "0HMLNKOOB338E" accepted.
2022-10-27 00:02:53.561 +01:00 [DBG] Connection id "0HMLNKOOB338E" started.
2022-10-27 00:02:53.569 +01:00 [DBG] Connection 0HMLNKOOB338E established using the following protocol: "Tls13"
2022-10-27 00:02:53.594 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:02:53.597 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:02:53.621 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:02:53.627 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:02:53.630 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:02:53.902 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:02:53.905 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:02:53.908 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:02:53.914 +01:00 [DBG] Authorization was successful.
2022-10-27 00:02:53.916 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:02:53.933 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:02:53.936 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:02:53.937 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:02:53.939 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:02:53.942 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:02:53.943 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:02:53.946 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:02:54.113 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:02:54.140 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:02:55.111 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:02:55.205 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-27 00:02:55.579 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
            SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
            FROM SB-operational.Users AS u
            WHERE u.user_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-27 00:02:55.645 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:02:55.736 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (86ms).
2022-10-27 00:02:55.750 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:02:55.952 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:02:55.969 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:02:56.069 +01:00 [INF] Executed DbCommand (105ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:02:56.124 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:02:56.182 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:02:56.192 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:02:56.201 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:02:56.213 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:02:56.218 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:02:56.219 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:02:56.220 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:02:56.222 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:02:56.223 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:02:56.243 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 2294.3553ms
2022-10-27 00:02:56.247 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:02:56.250 +01:00 [DBG] Connection id "0HMLNKOOB338E" completed keep alive response.
2022-10-27 00:02:56.254 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:02:56.259 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 2664.5147ms
2022-10-27 00:03:11.572 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:03:11.933 +01:00 [DBG] Hosting starting
2022-10-27 00:03:11.980 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:03:11.983 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:03:11.989 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:03:11.990 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:03:11.997 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:03:12.004 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:03:12.005 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:03:12.014 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:03:12.019 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:03:12.023 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:03:12.026 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:03:12.033 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:03:12.036 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:03:12.040 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:03:12.042 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:03:12.207 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:03:12.258 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:03:12.259 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:03:12.260 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:03:12.261 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:03:12.262 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:03:12.263 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:03:12.264 +01:00 [INF] Hosting environment: Development
2022-10-27 00:03:12.265 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:03:12.265 +01:00 [DBG] Hosting started
2022-10-27 00:03:12.461 +01:00 [DBG] Connection id "0HMLNKP0UIJE0" received FIN.
2022-10-27 00:03:12.509 +01:00 [DBG] Connection id "0HMLNKP0UIJE0" accepted.
2022-10-27 00:03:12.518 +01:00 [DBG] Connection id "0HMLNKP0UIJE0" started.
2022-10-27 00:03:12.553 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:03:12.619 +01:00 [DBG] Connection id "0HMLNKP0UIJE0" stopped.
2022-10-27 00:03:12.625 +01:00 [DBG] Connection id "0HMLNKP0UIJE0" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:03:12.914 +01:00 [DBG] Connection id "0HMLNKP0UIJE1" accepted.
2022-10-27 00:03:12.916 +01:00 [DBG] Connection id "0HMLNKP0UIJE1" started.
2022-10-27 00:03:12.994 +01:00 [DBG] Connection 0HMLNKP0UIJE1 established using the following protocol: "Tls13"
2022-10-27 00:03:13.086 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:03:13.133 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:03:13.274 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:03:13.407 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:03:13.412 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 329.4139ms
2022-10-27 00:03:13.487 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:03:13.487 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:03:13.496 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 9.1749ms
2022-10-27 00:03:13.576 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 89.3299ms
2022-10-27 00:03:13.859 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:03:14.146 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 286.5179ms
2022-10-27 00:03:16.906 +01:00 [DBG] Connection id "0HMLNKP0UIJE2" accepted.
2022-10-27 00:03:16.909 +01:00 [DBG] Connection id "0HMLNKP0UIJE2" started.
2022-10-27 00:03:16.917 +01:00 [DBG] Connection 0HMLNKP0UIJE2 established using the following protocol: "Tls13"
2022-10-27 00:03:16.939 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:03:16.943 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:03:16.967 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:03:16.972 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:03:16.975 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:03:17.217 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-27 00:03:17.222 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-10-27 00:03:17.227 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2022-10-27 00:03:17.233 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-27 00:03:17.244 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-27 00:03:17.255 +01:00 [DBG] Connection id "0HMLNKP0UIJE2" completed keep alive response.
2022-10-27 00:03:17.256 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 401 0 - 317.7757ms
2022-10-27 00:03:34.895 +01:00 [DBG] Connection id "0HMLNKP0UIJE2" received FIN.
2022-10-27 00:03:34.898 +01:00 [DBG] Connection id "0HMLNKP0UIJE2" disconnecting.
2022-10-27 00:03:34.900 +01:00 [DBG] Connection id "0HMLNKP0UIJE2" sending FIN because: "The client closed the connection."
2022-10-27 00:03:34.906 +01:00 [DBG] Connection id "0HMLNKP0UIJE2" stopped.
2022-10-27 00:05:18.474 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:05:18.594 +01:00 [DBG] Hosting starting
2022-10-27 00:05:18.633 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:05:18.637 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:05:18.642 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:05:18.644 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:05:18.649 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:05:18.654 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:05:18.655 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:05:18.663 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:05:18.665 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:05:18.669 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:05:18.671 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:05:18.676 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:05:18.679 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:05:18.683 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:05:18.685 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:05:18.842 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:05:18.902 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:05:18.903 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:05:18.905 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:05:18.906 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:05:18.908 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:05:18.909 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:05:18.910 +01:00 [INF] Hosting environment: Development
2022-10-27 00:05:18.911 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:05:18.913 +01:00 [DBG] Hosting started
2022-10-27 00:05:19.038 +01:00 [DBG] Connection id "0HMLNKQ6LMRHG" received FIN.
2022-10-27 00:05:19.038 +01:00 [DBG] Connection id "0HMLNKQ6LMRHH" received FIN.
2022-10-27 00:05:19.067 +01:00 [DBG] Connection id "0HMLNKQ6LMRHG" accepted.
2022-10-27 00:05:19.067 +01:00 [DBG] Connection id "0HMLNKQ6LMRHH" accepted.
2022-10-27 00:05:19.075 +01:00 [DBG] Connection id "0HMLNKQ6LMRHG" started.
2022-10-27 00:05:19.076 +01:00 [DBG] Connection id "0HMLNKQ6LMRHH" started.
2022-10-27 00:05:19.110 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:05:20.695 +01:00 [DBG] Connection id "0HMLNKQ6LMRHI" accepted.
2022-10-27 00:05:19.110 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:05:20.728 +01:00 [DBG] Connection id "0HMLNKQ6LMRHI" started.
2022-10-27 00:05:20.734 +01:00 [DBG] Connection id "0HMLNKQ6LMRHH" stopped.
2022-10-27 00:05:20.734 +01:00 [DBG] Connection id "0HMLNKQ6LMRHG" stopped.
2022-10-27 00:05:20.739 +01:00 [DBG] Connection id "0HMLNKQ6LMRHH" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:05:20.739 +01:00 [DBG] Connection id "0HMLNKQ6LMRHG" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:05:20.774 +01:00 [DBG] Connection 0HMLNKQ6LMRHI established using the following protocol: "Tls13"
2022-10-27 00:05:20.828 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:05:20.868 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:05:21.016 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:05:21.151 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:05:21.164 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 333.2925ms
2022-10-27 00:05:21.283 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:05:21.283 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:05:21.289 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 6.6800ms
2022-10-27 00:05:21.458 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 175.1639ms
2022-10-27 00:05:21.580 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:05:21.825 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 245.1973ms
2022-10-27 00:05:30.290 +01:00 [DBG] Connection id "0HMLNKQ6LMRHJ" accepted.
2022-10-27 00:05:30.292 +01:00 [DBG] Connection id "0HMLNKQ6LMRHJ" started.
2022-10-27 00:05:30.302 +01:00 [DBG] Connection 0HMLNKQ6LMRHJ established using the following protocol: "Tls13"
2022-10-27 00:05:30.329 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 -
2022-10-27 00:05:30.332 +01:00 [DBG] POST requests are not supported
2022-10-27 00:05:30.360 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/renew'
2022-10-27 00:05:30.365 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/users/renew'
2022-10-27 00:05:30.368 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:05:30.461 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:05:30.466 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:05:30.468 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:05:30.497 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:05:30.500 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:05:30.502 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:05:30.504 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:05:30.505 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:05:30.507 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:05:30.509 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:05:30.729 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:05:30.762 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:05:30.780 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:05:30.785 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-27 00:05:30.787 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:05:30.793 +01:00 [DBG] Connection id "0HMLNKQ6LMRHJ", Request id "0HMLNKQ6LMRHJ:00000002": started reading request body.
2022-10-27 00:05:30.797 +01:00 [DBG] Connection id "0HMLNKQ6LMRHJ", Request id "0HMLNKQ6LMRHJ:00000002": done reading request body.
2022-10-27 00:05:30.801 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-27 00:05:30.803 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:05:30.804 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:05:30.806 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:05:30.815 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:05:31.862 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:05:31.951 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-27 00:05:32.291 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:05:32.343 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:05:32.417 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (71ms).
2022-10-27 00:05:32.426 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:05:32.615 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:05:32.631 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:05:32.721 +01:00 [INF] Executed DbCommand (95ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:05:32.768 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:05:32.819 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:05:32.825 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:05:32.834 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:05:33.006 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:05:33.019 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:05:33.029 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:05:33.033 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:05:33.050 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:05:33.080 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:05:33.084 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:05:33.087 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:05:33.097 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:05:33.151 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:05:33.153 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-27 00:05:33.156 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:05:33.184 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:05:33.211 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-27 00:05:33.223 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:05:33.237 +01:00 [DBG] Committing transaction.
2022-10-27 00:05:33.251 +01:00 [DBG] Committed transaction.
2022-10-27 00:05:33.258 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:05:33.261 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:05:33.267 +01:00 [DBG] Disposing transaction.
2022-10-27 00:05:33.282 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:05:33.287 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:05:33.300 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:05:33.306 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:05:33.306 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:05:33.308 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:05:33.309 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:05:33.311 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:05:33.325 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 2811.346ms
2022-10-27 00:05:33.328 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:05:33.331 +01:00 [DBG] Connection id "0HMLNKQ6LMRHJ" completed keep alive response.
2022-10-27 00:05:33.336 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:05:33.340 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3011.0311ms
2022-10-27 00:05:33.359 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:05:33.360 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:05:33.362 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:05:33.363 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:05:33.365 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:05:33.367 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:05:33.368 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:05:33.375 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-27 00:05:33.385 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-27 00:05:33.387 +01:00 [DBG] Connection id "0HMLNKQ6LMRHJ" completed keep alive response.
2022-10-27 00:05:33.392 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 401 0 - 32.5182ms
2022-10-27 00:05:51.677 +01:00 [DBG] Connection id "0HMLNKQ6LMRHK" accepted.
2022-10-27 00:05:51.685 +01:00 [DBG] Connection id "0HMLNKQ6LMRHK" started.
2022-10-27 00:05:51.697 +01:00 [DBG] Connection 0HMLNKQ6LMRHK established using the following protocol: "Tls13"
2022-10-27 00:05:51.699 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:05:51.701 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:05:51.702 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:05:51.703 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:05:51.705 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:05:51.778 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:05:51.780 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:05:51.782 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:05:51.784 +01:00 [DBG] Authorization was successful.
2022-10-27 00:05:51.785 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:05:51.788 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:05:51.792 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:05:51.794 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:05:51.795 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:05:51.797 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:05:51.798 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:05:51.801 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:05:51.803 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:05:51.847 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:05:51.862 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-27 00:05:51.944 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
            SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
            FROM SB-operational.Users AS u
            WHERE u.user_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-27 00:05:51.960 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:05:51.962 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:05:51.963 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:05:51.964 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:05:51.965 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:05:51.971 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:05:51.988 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:05:52.008 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:05:52.010 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:05:52.012 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:05:52.014 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:05:52.017 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:05:52.018 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:05:52.019 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:05:52.020 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:05:52.022 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:05:52.028 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 227.3361ms
2022-10-27 00:05:52.031 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:05:52.034 +01:00 [DBG] Connection id "0HMLNKQ6LMRHK" completed keep alive response.
2022-10-27 00:05:52.036 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:05:52.038 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 338.7674ms
2022-10-27 00:05:54.663 +01:00 [DBG] Connection id "0HMLNKQ6LMRHL" accepted.
2022-10-27 00:05:54.664 +01:00 [DBG] Connection id "0HMLNKQ6LMRHL" started.
2022-10-27 00:05:54.666 +01:00 [DBG] Connection 0HMLNKQ6LMRHL established using the following protocol: "Tls13"
2022-10-27 00:05:54.668 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/logout application/json;+charset=utf-8 -
2022-10-27 00:05:54.668 +01:00 [DBG] POST requests are not supported
2022-10-27 00:05:54.669 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/logout'
2022-10-27 00:05:54.671 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Logout' is valid for the request path '/api/users/logout'
2022-10-27 00:05:54.673 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-27 00:05:54.674 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:05:54.675 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:05:54.676 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:05:54.677 +01:00 [DBG] Authorization was successful.
2022-10-27 00:05:54.678 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-27 00:05:54.682 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:05:54.683 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:05:54.685 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:05:54.686 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:05:54.688 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:05:54.690 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:05:54.692 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:05:54.698 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:05:54.701 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-27 00:05:54.702 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-27 00:05:54.704 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:05:54.706 +01:00 [DBG] Connection id "0HMLNKQ6LMRHL", Request id "0HMLNKQ6LMRHL:00000002": started reading request body.
2022-10-27 00:05:54.707 +01:00 [DBG] Connection id "0HMLNKQ6LMRHL", Request id "0HMLNKQ6LMRHL:00000002": done reading request body.
2022-10-27 00:05:54.710 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'
2022-10-27 00:05:54.712 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-27 00:05:54.714 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-27 00:05:54.715 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-27 00:05:54.718 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-27 00:05:54.731 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:05:54.735 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.Id == __userTokenId_0)'
2022-10-27 00:05:54.738 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_token_id == @__userTokenId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:05:54.741 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:05:54.742 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:05:54.744 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:05:54.745 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:05:54.747 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-27 00:05:54.750 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-27 00:05:54.753 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:05:54.754 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:05:54.755 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:05:54.756 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:05:54.758 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:05:54.761 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:05:54.762 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:05:54.764 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:05:54.766 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:05:54.767 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:05:54.770 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:05:54.771 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:05:54.777 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:05:54.778 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:05:54.782 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-27 00:05:54.788 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-27 00:05:54.794 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:05:54.796 +01:00 [DBG] Committing transaction.
2022-10-27 00:05:54.799 +01:00 [DBG] Committed transaction.
2022-10-27 00:05:54.800 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:05:54.801 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:05:54.802 +01:00 [DBG] Disposing transaction.
2022-10-27 00:05:54.803 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:05:54.805 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:05:54.810 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:05:54.813 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:05:54.814 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:05:54.815 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:05:54.817 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-27 00:05:54.818 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2022-10-27 00:05:54.820 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API) in 127.9873ms
2022-10-27 00:05:54.822 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-27 00:05:54.824 +01:00 [DBG] Connection id "0HMLNKQ6LMRHL" completed keep alive response.
2022-10-27 00:05:54.825 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:05:54.827 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/logout application/json;+charset=utf-8 - - 200 - text/plain;+charset=utf-8 158.9353ms
2022-10-27 00:06:01.663 +01:00 [DBG] Connection id "0HMLNKQ6LMRHM" accepted.
2022-10-27 00:06:01.665 +01:00 [DBG] Connection id "0HMLNKQ6LMRHM" started.
2022-10-27 00:06:01.668 +01:00 [DBG] Connection 0HMLNKQ6LMRHM established using the following protocol: "Tls13"
2022-10-27 00:06:01.670 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json;+charset=utf-8 -
2022-10-27 00:06:01.670 +01:00 [DBG] POST requests are not supported
2022-10-27 00:06:01.671 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-27 00:06:01.673 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-27 00:06:01.674 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-27 00:06:01.675 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:06:01.676 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:06:01.677 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-27 00:06:01.681 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:06:01.683 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:06:01.684 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:06:01.686 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:06:01.688 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:06:01.689 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:06:01.691 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:06:01.693 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:06:01.694 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-27 00:06:01.696 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-27 00:06:01.697 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:06:01.699 +01:00 [DBG] Connection id "0HMLNKQ6LMRHM", Request id "0HMLNKQ6LMRHM:00000002": started reading request body.
2022-10-27 00:06:01.701 +01:00 [DBG] Connection id "0HMLNKQ6LMRHM", Request id "0HMLNKQ6LMRHM:00000002": done reading request body.
2022-10-27 00:06:01.705 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-27 00:06:01.707 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-27 00:06:01.709 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-27 00:06:01.711 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-27 00:06:01.713 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-27 00:06:01.717 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:06:01.721 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-27 00:06:01.725 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:06:01.728 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:06:01.729 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:06:01.730 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:06:01.731 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:06:01.733 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-27 00:06:01.736 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-27 00:06:01.739 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:06:01.740 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:06:01.741 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:06:01.742 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:06:01.745 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-27 00:06:01.748 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:06:01.751 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:06:01.752 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:06:01.753 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:06:01.754 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:06:01.755 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-27 00:06:01.759 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-27 00:06:01.761 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:06:01.763 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:06:01.763 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:06:01.764 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:06:01.772 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:06:01.776 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:06:01.778 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:06:01.779 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:06:01.786 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:06:01.788 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:06:01.789 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:06:01.790 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:06:01.792 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:06:01.793 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:06:01.794 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:06:01.795 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-27 00:06:01.799 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-27 00:06:01.803 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:06:01.803 +01:00 [DBG] Committing transaction.
2022-10-27 00:06:01.806 +01:00 [DBG] Committed transaction.
2022-10-27 00:06:01.807 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:06:01.808 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:06:01.809 +01:00 [DBG] Disposing transaction.
2022-10-27 00:06:01.810 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:06:01.813 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:06:01.814 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:06:01.817 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:06:01.818 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:06:01.819 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:06:01.820 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:06:01.821 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:06:01.823 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 131.966ms
2022-10-27 00:06:01.825 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-27 00:06:01.826 +01:00 [DBG] Connection id "0HMLNKQ6LMRHM" completed keep alive response.
2022-10-27 00:06:01.827 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:06:01.828 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 158.2593ms
2022-10-27 00:06:01.845 +01:00 [DBG] Connection id "0HMLNKQ6LMRHN" accepted.
2022-10-27 00:06:01.846 +01:00 [DBG] Connection id "0HMLNKQ6LMRHN" started.
2022-10-27 00:06:01.850 +01:00 [DBG] Connection 0HMLNKQ6LMRHN established using the following protocol: "Tls13"
2022-10-27 00:06:01.851 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:06:01.852 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:06:01.853 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:06:01.854 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:06:01.857 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:06:01.858 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:06:01.859 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:06:01.860 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:06:01.861 +01:00 [DBG] Authorization was successful.
2022-10-27 00:06:01.862 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:06:01.863 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:06:01.866 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:06:01.867 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:06:01.868 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:06:01.870 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:06:01.872 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:06:01.874 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:06:01.875 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:06:01.877 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:06:01.881 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:06:01.883 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:06:01.884 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:06:01.885 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:06:01.886 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:06:01.890 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:06:01.894 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:06:01.896 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:06:01.897 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:06:01.898 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:06:01.899 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:06:01.902 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:06:01.903 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:06:01.904 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:06:01.905 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:06:01.907 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:06:01.908 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 34.4722ms
2022-10-27 00:06:01.910 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:06:01.912 +01:00 [DBG] Connection id "0HMLNKQ6LMRHN" completed keep alive response.
2022-10-27 00:06:01.914 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:06:01.915 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 63.9061ms
2022-10-27 00:06:04.516 +01:00 [DBG] Connection id "0HMLNKQ6LMRHO" accepted.
2022-10-27 00:06:04.517 +01:00 [DBG] Connection id "0HMLNKQ6LMRHO" started.
2022-10-27 00:06:04.521 +01:00 [DBG] Connection 0HMLNKQ6LMRHO established using the following protocol: "Tls13"
2022-10-27 00:06:04.525 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:06:04.526 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:06:04.527 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:06:04.528 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:06:04.529 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:06:04.531 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:06:04.531 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:06:04.532 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:06:04.533 +01:00 [DBG] Authorization was successful.
2022-10-27 00:06:04.534 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:06:04.535 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:06:04.540 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:06:04.542 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:06:04.543 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:06:04.545 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:06:04.547 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:06:04.548 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:06:04.550 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:06:04.551 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:06:04.555 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:06:04.557 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:06:04.558 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:06:04.559 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:06:04.560 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:06:04.564 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:06:04.568 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:06:04.569 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:06:04.570 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:06:04.572 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:06:04.573 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:06:04.575 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:06:04.576 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:06:04.577 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:06:04.578 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:06:04.579 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:06:04.580 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 32.3479ms
2022-10-27 00:06:04.582 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:06:04.583 +01:00 [DBG] Connection id "0HMLNKQ6LMRHO" completed keep alive response.
2022-10-27 00:06:04.584 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:06:04.585 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 60.4010ms
2022-10-27 00:06:09.000 +01:00 [DBG] Connection id "0HMLNKQ6LMRHO" received FIN.
2022-10-27 00:06:09.000 +01:00 [DBG] Connection id "0HMLNKQ6LMRHM" received FIN.
2022-10-27 00:06:09.000 +01:00 [DBG] Connection id "0HMLNKQ6LMRHN" received FIN.
2022-10-27 00:06:09.001 +01:00 [DBG] Connection id "0HMLNKQ6LMRHL" received FIN.
2022-10-27 00:06:09.001 +01:00 [DBG] Connection id "0HMLNKQ6LMRHK" received FIN.
2022-10-27 00:06:09.002 +01:00 [DBG] Connection id "0HMLNKQ6LMRHJ" received FIN.
2022-10-27 00:06:09.002 +01:00 [DBG] Connection id "0HMLNKQ6LMRHO" disconnecting.
2022-10-27 00:06:09.004 +01:00 [DBG] Connection id "0HMLNKQ6LMRHM" disconnecting.
2022-10-27 00:06:09.006 +01:00 [DBG] Connection id "0HMLNKQ6LMRHN" disconnecting.
2022-10-27 00:06:09.009 +01:00 [DBG] Connection id "0HMLNKQ6LMRHO" sending FIN because: "The client closed the connection."
2022-10-27 00:06:09.011 +01:00 [DBG] Connection id "0HMLNKQ6LMRHM" sending FIN because: "The client closed the connection."
2022-10-27 00:06:09.012 +01:00 [DBG] Connection id "0HMLNKQ6LMRHN" sending FIN because: "The client closed the connection."
2022-10-27 00:06:09.014 +01:00 [DBG] Connection id "0HMLNKQ6LMRHL" disconnecting.
2022-10-27 00:06:09.016 +01:00 [DBG] Connection id "0HMLNKQ6LMRHK" disconnecting.
2022-10-27 00:06:09.017 +01:00 [DBG] Connection id "0HMLNKQ6LMRHL" sending FIN because: "The client closed the connection."
2022-10-27 00:06:09.018 +01:00 [DBG] Connection id "0HMLNKQ6LMRHK" stopped.
2022-10-27 00:06:09.019 +01:00 [DBG] Connection id "0HMLNKQ6LMRHJ" disconnecting.
2022-10-27 00:06:09.020 +01:00 [DBG] Connection id "0HMLNKQ6LMRHN" stopped.
2022-10-27 00:06:09.020 +01:00 [DBG] Connection id "0HMLNKQ6LMRHL" stopped.
2022-10-27 00:06:09.020 +01:00 [DBG] Connection id "0HMLNKQ6LMRHO" stopped.
2022-10-27 00:06:09.020 +01:00 [DBG] Connection id "0HMLNKQ6LMRHM" stopped.
2022-10-27 00:06:09.021 +01:00 [DBG] Connection id "0HMLNKQ6LMRHJ" sending FIN because: "The client closed the connection."
2022-10-27 00:06:09.023 +01:00 [DBG] Connection id "0HMLNKQ6LMRHK" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:06:09.032 +01:00 [DBG] Connection id "0HMLNKQ6LMRHJ" stopped.
2022-10-27 00:07:20.829 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:07:21.124 +01:00 [DBG] Hosting starting
2022-10-27 00:07:21.360 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:07:21.366 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:07:21.375 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:07:21.377 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:07:21.385 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:07:21.394 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:07:21.395 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:07:21.412 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:07:21.418 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:07:21.428 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:07:21.432 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:07:21.449 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:07:21.456 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:07:21.462 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:07:21.464 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:07:21.773 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:07:21.855 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:07:21.856 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:07:21.860 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:07:21.862 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:07:21.864 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:07:21.866 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:07:21.868 +01:00 [INF] Hosting environment: Development
2022-10-27 00:07:21.869 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:07:21.871 +01:00 [DBG] Hosting started
2022-10-27 00:07:22.014 +01:00 [DBG] Connection id "0HMLNKRBAFI30" accepted.
2022-10-27 00:07:22.017 +01:00 [DBG] Connection id "0HMLNKRBAFI30" started.
2022-10-27 00:07:22.021 +01:00 [DBG] Connection id "0HMLNKRBAFI30" received FIN.
2022-10-27 00:07:22.033 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:07:22.086 +01:00 [DBG] Connection id "0HMLNKRBAFI30" stopped.
2022-10-27 00:07:22.102 +01:00 [DBG] Connection id "0HMLNKRBAFI30" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:07:22.359 +01:00 [DBG] Connection id "0HMLNKRBAFI31" accepted.
2022-10-27 00:07:22.369 +01:00 [DBG] Connection id "0HMLNKRBAFI31" started.
2022-10-27 00:07:22.481 +01:00 [DBG] Connection 0HMLNKRBAFI31 established using the following protocol: "Tls13"
2022-10-27 00:07:22.581 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:07:22.650 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:07:22.806 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:07:23.007 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:07:23.054 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 476.2317ms
2022-10-27 00:07:23.148 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:07:23.149 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:07:23.217 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 68.7656ms
2022-10-27 00:07:23.248 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 99.2154ms
2022-10-27 00:07:23.442 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:07:23.633 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 190.7477ms
2022-10-27 00:07:27.009 +01:00 [DBG] Connection id "0HMLNKRBAFI32" accepted.
2022-10-27 00:07:27.011 +01:00 [DBG] Connection id "0HMLNKRBAFI32" started.
2022-10-27 00:07:27.021 +01:00 [DBG] Connection 0HMLNKRBAFI32 established using the following protocol: "Tls13"
2022-10-27 00:07:27.047 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 -
2022-10-27 00:07:27.050 +01:00 [DBG] POST requests are not supported
2022-10-27 00:07:27.075 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/renew'
2022-10-27 00:07:27.080 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/users/renew'
2022-10-27 00:07:27.082 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:07:27.161 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:07:27.166 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:07:27.168 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:07:27.199 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:07:27.203 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:07:27.205 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:07:27.206 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:07:27.208 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:07:27.210 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:07:27.212 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:07:27.473 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:07:27.502 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:07:27.517 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:07:27.522 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-27 00:07:27.525 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:07:27.530 +01:00 [DBG] Connection id "0HMLNKRBAFI32", Request id "0HMLNKRBAFI32:00000002": started reading request body.
2022-10-27 00:07:27.535 +01:00 [DBG] Connection id "0HMLNKRBAFI32", Request id "0HMLNKRBAFI32:00000002": done reading request body.
2022-10-27 00:07:27.542 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-27 00:07:27.544 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:07:27.546 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:07:27.547 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:07:27.556 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:07:28.624 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:07:28.684 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-27 00:07:29.034 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:07:29.084 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:07:29.163 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (78ms).
2022-10-27 00:07:29.174 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:07:29.360 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:07:29.376 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:07:29.470 +01:00 [INF] Executed DbCommand (99ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:07:29.519 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:07:29.566 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:07:29.571 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:07:29.581 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:07:29.774 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:07:29.787 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:07:29.797 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:07:29.801 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:07:29.818 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:07:29.848 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:07:29.851 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:07:29.854 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:07:29.864 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:07:29.921 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:07:29.923 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-27 00:07:29.926 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:07:29.951 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:07:29.977 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-27 00:07:29.989 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:07:30.003 +01:00 [DBG] Committing transaction.
2022-10-27 00:07:30.015 +01:00 [DBG] Committed transaction.
2022-10-27 00:07:30.022 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:07:30.026 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:07:30.031 +01:00 [DBG] Disposing transaction.
2022-10-27 00:07:30.046 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:07:30.052 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:07:30.066 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:07:30.070 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:07:30.071 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:07:30.072 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:07:30.074 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:07:30.075 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:07:30.088 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 2872.8798ms
2022-10-27 00:07:30.093 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:07:30.096 +01:00 [DBG] Connection id "0HMLNKRBAFI32" completed keep alive response.
2022-10-27 00:07:30.100 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:07:30.107 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3060.0497ms
2022-10-27 00:07:30.135 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:07:30.137 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:07:30.139 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:07:30.141 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:07:30.143 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:07:30.146 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:07:30.147 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:07:30.151 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-27 00:07:30.160 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-27 00:07:30.161 +01:00 [DBG] Connection id "0HMLNKRBAFI32" completed keep alive response.
2022-10-27 00:07:30.162 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 401 0 - 27.3121ms
2022-10-27 00:09:06.279 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:09:06.444 +01:00 [DBG] Hosting starting
2022-10-27 00:09:06.481 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:09:06.485 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:09:06.491 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:09:06.493 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:09:06.499 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:09:06.518 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:09:06.520 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:09:06.528 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:09:06.531 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:09:06.535 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:09:06.537 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:09:06.542 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:09:06.545 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:09:06.549 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:09:06.551 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:09:06.735 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:09:06.786 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:09:06.787 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:09:06.788 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:09:06.789 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:09:06.790 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:09:06.791 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:09:06.792 +01:00 [INF] Hosting environment: Development
2022-10-27 00:09:06.793 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:09:06.794 +01:00 [DBG] Hosting started
2022-10-27 00:09:06.822 +01:00 [DBG] Connection id "0HMLNKSAI088G" accepted.
2022-10-27 00:09:06.825 +01:00 [DBG] Connection id "0HMLNKSAI088G" started.
2022-10-27 00:09:06.832 +01:00 [DBG] Connection id "0HMLNKSAI088H" accepted.
2022-10-27 00:09:06.834 +01:00 [DBG] Connection id "0HMLNKSAI088H" started.
2022-10-27 00:09:06.845 +01:00 [DBG] Connection id "0HMLNKSAI088H" received FIN.
2022-10-27 00:09:06.845 +01:00 [DBG] Connection id "0HMLNKSAI088G" received FIN.
2022-10-27 00:09:06.874 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:09:06.874 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:09:06.952 +01:00 [DBG] Connection id "0HMLNKSAI088G" stopped.
2022-10-27 00:09:06.952 +01:00 [DBG] Connection id "0HMLNKSAI088H" stopped.
2022-10-27 00:09:06.963 +01:00 [DBG] Connection id "0HMLNKSAI088G" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:09:06.963 +01:00 [DBG] Connection id "0HMLNKSAI088H" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:09:07.332 +01:00 [DBG] Connection id "0HMLNKSAI088I" accepted.
2022-10-27 00:09:07.343 +01:00 [DBG] Connection id "0HMLNKSAI088I" started.
2022-10-27 00:09:07.384 +01:00 [DBG] Connection 0HMLNKSAI088I established using the following protocol: "Tls13"
2022-10-27 00:09:07.444 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:09:07.485 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:09:07.617 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:09:07.750 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:09:07.759 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 318.5036ms
2022-10-27 00:09:07.870 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:09:07.870 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:09:07.879 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 9.0093ms
2022-10-27 00:09:07.927 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 56.5709ms
2022-10-27 00:09:08.137 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:09:08.367 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 229.9417ms
2022-10-27 00:09:10.230 +01:00 [DBG] Connection id "0HMLNKSAI088J" accepted.
2022-10-27 00:09:10.232 +01:00 [DBG] Connection id "0HMLNKSAI088J" started.
2022-10-27 00:09:10.241 +01:00 [DBG] Connection 0HMLNKSAI088J established using the following protocol: "Tls13"
2022-10-27 00:09:10.265 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 -
2022-10-27 00:09:10.268 +01:00 [DBG] POST requests are not supported
2022-10-27 00:09:10.292 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/renew'
2022-10-27 00:09:10.297 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/users/renew'
2022-10-27 00:09:10.300 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:09:10.369 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:09:10.373 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:09:10.375 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:09:10.401 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:09:10.405 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:09:10.407 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:09:10.408 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:09:10.410 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:09:10.412 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:09:10.415 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:09:10.582 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:09:10.609 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:09:10.623 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:09:10.627 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-27 00:09:10.629 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:09:10.634 +01:00 [DBG] Connection id "0HMLNKSAI088J", Request id "0HMLNKSAI088J:00000002": started reading request body.
2022-10-27 00:09:10.639 +01:00 [DBG] Connection id "0HMLNKSAI088J", Request id "0HMLNKSAI088J:00000002": done reading request body.
2022-10-27 00:09:10.644 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-27 00:09:10.646 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:09:10.647 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:09:10.649 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:09:10.657 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:09:11.681 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:09:11.740 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-27 00:09:12.085 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:09:12.133 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:09:12.209 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (73ms).
2022-10-27 00:09:12.219 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:09:12.388 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:09:12.407 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:09:12.498 +01:00 [INF] Executed DbCommand (98ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:09:12.539 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:09:12.584 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:09:12.591 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:09:12.602 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:09:12.766 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:09:12.780 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:09:12.791 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:09:12.796 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:09:12.817 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:09:12.850 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:09:12.853 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:09:12.857 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:09:12.867 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:09:12.923 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:09:12.925 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:09:12.928 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:09:12.954 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:09:12.981 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-27 00:09:12.994 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:09:13.013 +01:00 [DBG] Committing transaction.
2022-10-27 00:09:13.031 +01:00 [DBG] Committed transaction.
2022-10-27 00:09:13.040 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:09:13.044 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:09:13.050 +01:00 [DBG] Disposing transaction.
2022-10-27 00:09:13.065 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:09:13.071 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:09:13.084 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:09:13.088 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:09:13.089 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:09:13.090 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:09:13.091 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:09:13.094 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:09:13.107 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 2689.0097ms
2022-10-27 00:09:13.111 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:09:13.115 +01:00 [DBG] Connection id "0HMLNKSAI088J" completed keep alive response.
2022-10-27 00:09:13.119 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:09:13.123 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 2857.5993ms
2022-10-27 00:09:13.138 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:09:13.139 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:09:13.141 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:09:13.143 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:09:13.145 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:09:13.148 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:09:13.149 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:09:13.153 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-27 00:09:13.161 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-27 00:09:13.163 +01:00 [DBG] Connection id "0HMLNKSAI088J" completed keep alive response.
2022-10-27 00:09:13.164 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 401 0 - 26.4152ms
2022-10-27 00:09:44.788 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:09:45.069 +01:00 [DBG] Hosting starting
2022-10-27 00:09:45.119 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:09:45.125 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:09:45.133 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:09:45.136 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:09:45.145 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:09:45.153 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:09:45.154 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:09:45.163 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:09:45.168 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:09:45.172 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:09:45.174 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:09:45.179 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:09:45.182 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:09:45.186 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:09:45.187 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:09:45.313 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:09:45.362 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:09:45.363 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:09:45.365 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:09:45.365 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:09:45.366 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:09:45.368 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:09:45.368 +01:00 [INF] Hosting environment: Development
2022-10-27 00:09:45.369 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:09:45.370 +01:00 [DBG] Hosting started
2022-10-27 00:09:45.643 +01:00 [DBG] Connection id "0HMLNKSM47BUT" accepted.
2022-10-27 00:09:45.664 +01:00 [DBG] Connection id "0HMLNKSM47BUU" received FIN.
2022-10-27 00:09:45.667 +01:00 [DBG] Connection id "0HMLNKSM47BUT" started.
2022-10-27 00:09:45.668 +01:00 [DBG] Connection id "0HMLNKSM47BUT" received FIN.
2022-10-27 00:09:45.674 +01:00 [DBG] Connection id "0HMLNKSM47BUU" accepted.
2022-10-27 00:09:45.697 +01:00 [DBG] Connection id "0HMLNKSM47BUU" started.
2022-10-27 00:09:45.708 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:09:45.708 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:09:45.755 +01:00 [DBG] Connection id "0HMLNKSM47BUU" stopped.
2022-10-27 00:09:45.755 +01:00 [DBG] Connection id "0HMLNKSM47BUT" stopped.
2022-10-27 00:09:45.760 +01:00 [DBG] Connection id "0HMLNKSM47BUT" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:09:45.760 +01:00 [DBG] Connection id "0HMLNKSM47BUU" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:09:46.107 +01:00 [DBG] Connection id "0HMLNKSM47BUV" accepted.
2022-10-27 00:09:46.109 +01:00 [DBG] Connection id "0HMLNKSM47BUV" started.
2022-10-27 00:09:46.152 +01:00 [DBG] Connection 0HMLNKSM47BUV established using the following protocol: "Tls13"
2022-10-27 00:09:46.221 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:09:46.272 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:09:46.395 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:09:46.520 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:09:46.526 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 309.5121ms
2022-10-27 00:09:46.607 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:09:46.629 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:09:46.636 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 28.8232ms
2022-10-27 00:09:46.765 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 136.0386ms
2022-10-27 00:09:46.925 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:09:47.141 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 216.0254ms
2022-10-27 00:09:49.350 +01:00 [DBG] Connection id "0HMLNKSM47BV0" accepted.
2022-10-27 00:09:49.353 +01:00 [DBG] Connection id "0HMLNKSM47BV0" started.
2022-10-27 00:09:49.363 +01:00 [DBG] Connection 0HMLNKSM47BV0 established using the following protocol: "Tls13"
2022-10-27 00:09:49.388 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:09:49.391 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:09:49.416 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:09:49.421 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:09:49.423 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:09:49.698 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:09:49.700 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:09:49.704 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:09:49.709 +01:00 [DBG] Authorization was successful.
2022-10-27 00:09:49.712 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:09:49.728 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:09:49.732 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:09:49.734 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:09:49.736 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:09:49.738 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:09:49.739 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:09:49.741 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:09:49.902 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:09:49.929 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:09:50.872 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:09:50.972 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-27 00:09:51.344 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
            SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
            FROM SB-operational.Users AS u
            WHERE u.user_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-27 00:09:51.404 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:09:51.480 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (72ms).
2022-10-27 00:09:51.495 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:09:51.723 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:09:51.740 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:09:51.836 +01:00 [INF] Executed DbCommand (100ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:09:51.894 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:09:51.951 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:09:51.962 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:09:51.972 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:09:51.986 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:09:51.990 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:09:51.991 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:09:51.992 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:09:51.994 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:09:51.996 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:09:52.018 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 2272.8397ms
2022-10-27 00:09:52.021 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:09:52.026 +01:00 [DBG] Connection id "0HMLNKSM47BV0" completed keep alive response.
2022-10-27 00:09:52.029 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:09:52.034 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 2646.5227ms
2022-10-27 00:10:26.621 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:10:26.770 +01:00 [DBG] Hosting starting
2022-10-27 00:10:26.812 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:10:26.816 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:10:26.821 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:10:26.822 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:10:26.828 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:10:26.834 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:10:26.835 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:10:26.843 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:10:26.846 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:10:26.850 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:10:26.852 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:10:26.857 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:10:26.860 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:10:26.864 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:10:26.866 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:10:26.998 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:10:27.044 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:10:27.045 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:10:27.046 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:10:27.047 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:10:27.048 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:10:27.049 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:10:27.049 +01:00 [INF] Hosting environment: Development
2022-10-27 00:10:27.050 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:10:27.051 +01:00 [DBG] Hosting started
2022-10-27 00:10:27.159 +01:00 [DBG] Connection id "0HMLNKT2G5KVB" received FIN.
2022-10-27 00:10:27.159 +01:00 [DBG] Connection id "0HMLNKT2G5KVA" received FIN.
2022-10-27 00:10:27.163 +01:00 [DBG] Connection id "0HMLNKT2G5KVA" accepted.
2022-10-27 00:10:27.163 +01:00 [DBG] Connection id "0HMLNKT2G5KVB" accepted.
2022-10-27 00:10:27.183 +01:00 [DBG] Connection id "0HMLNKT2G5KVB" started.
2022-10-27 00:10:27.183 +01:00 [DBG] Connection id "0HMLNKT2G5KVA" started.
2022-10-27 00:10:27.208 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:10:27.209 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:10:27.289 +01:00 [DBG] Connection id "0HMLNKT2G5KVA" stopped.
2022-10-27 00:10:27.289 +01:00 [DBG] Connection id "0HMLNKT2G5KVB" stopped.
2022-10-27 00:10:27.294 +01:00 [DBG] Connection id "0HMLNKT2G5KVA" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:10:27.294 +01:00 [DBG] Connection id "0HMLNKT2G5KVB" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:10:27.590 +01:00 [DBG] Connection id "0HMLNKT2G5KVC" accepted.
2022-10-27 00:10:27.592 +01:00 [DBG] Connection id "0HMLNKT2G5KVC" started.
2022-10-27 00:10:27.651 +01:00 [DBG] Connection 0HMLNKT2G5KVC established using the following protocol: "Tls13"
2022-10-27 00:10:27.712 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:10:27.750 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:10:27.890 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:10:28.013 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:10:28.019 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 309.4549ms
2022-10-27 00:10:28.093 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:10:28.093 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:10:28.100 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 15.8442ms
2022-10-27 00:10:28.130 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 36.9537ms
2022-10-27 00:10:28.342 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:10:28.557 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 214.9706ms
2022-10-27 00:10:30.778 +01:00 [DBG] Connection id "0HMLNKT2G5KVD" accepted.
2022-10-27 00:10:30.780 +01:00 [DBG] Connection id "0HMLNKT2G5KVD" started.
2022-10-27 00:10:30.790 +01:00 [DBG] Connection 0HMLNKT2G5KVD established using the following protocol: "Tls13"
2022-10-27 00:10:30.814 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 -
2022-10-27 00:10:30.817 +01:00 [DBG] POST requests are not supported
2022-10-27 00:10:30.843 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/renew'
2022-10-27 00:10:30.850 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/users/renew'
2022-10-27 00:10:30.853 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:10:30.917 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:10:30.922 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:10:30.925 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:10:30.951 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:10:30.954 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:10:30.956 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:10:30.957 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:10:30.959 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:10:30.961 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:10:30.963 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:10:31.132 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:10:31.159 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:10:31.172 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:10:31.176 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-27 00:10:31.178 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:10:31.183 +01:00 [DBG] Connection id "0HMLNKT2G5KVD", Request id "0HMLNKT2G5KVD:00000002": started reading request body.
2022-10-27 00:10:31.187 +01:00 [DBG] Connection id "0HMLNKT2G5KVD", Request id "0HMLNKT2G5KVD:00000002": done reading request body.
2022-10-27 00:10:31.193 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-27 00:10:31.195 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:10:31.197 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:10:31.198 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:10:31.206 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:10:32.178 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:10:32.233 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-27 00:10:32.571 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:10:32.618 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:10:32.688 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (66ms).
2022-10-27 00:10:32.697 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:10:32.877 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:10:32.893 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:10:32.991 +01:00 [INF] Executed DbCommand (103ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:10:33.033 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:10:33.078 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:10:33.083 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:10:33.091 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:10:33.259 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:10:33.271 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:10:33.283 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:10:33.287 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:10:33.307 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:10:33.338 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:10:33.341 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:10:33.344 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:10:33.354 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:10:33.413 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:10:33.415 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:10:33.418 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:10:33.442 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:10:33.468 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-27 00:10:33.483 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:10:33.497 +01:00 [DBG] Committing transaction.
2022-10-27 00:10:33.516 +01:00 [DBG] Committed transaction.
2022-10-27 00:10:33.523 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:10:33.527 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:10:33.532 +01:00 [DBG] Disposing transaction.
2022-10-27 00:10:33.547 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:10:33.553 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:10:33.566 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:10:33.571 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:10:33.572 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:10:33.574 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:10:33.576 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:10:33.578 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:10:33.591 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 2624.1828ms
2022-10-27 00:10:33.595 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:10:33.598 +01:00 [DBG] Connection id "0HMLNKT2G5KVD" completed keep alive response.
2022-10-27 00:10:33.602 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:10:33.606 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 2792.5613ms
2022-10-27 00:10:33.622 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:10:33.624 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:10:33.626 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:10:33.627 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:10:33.629 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:10:33.631 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:10:33.632 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:10:33.637 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-27 00:10:33.645 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-27 00:10:33.646 +01:00 [DBG] Connection id "0HMLNKT2G5KVD" completed keep alive response.
2022-10-27 00:10:33.648 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 401 0 - 25.2482ms
2022-10-27 00:12:34.712 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:12:34.979 +01:00 [DBG] Hosting starting
2022-10-27 00:12:35.026 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:12:35.034 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:12:35.054 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:12:35.058 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:12:35.067 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:12:35.076 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:12:35.077 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:12:35.094 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:12:35.098 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:12:35.102 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:12:35.104 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:12:35.109 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:12:35.112 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:12:35.116 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:12:35.117 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:12:35.249 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:12:35.298 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:12:35.299 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:12:35.300 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:12:35.301 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:12:35.302 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:12:35.303 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:12:35.304 +01:00 [INF] Hosting environment: Development
2022-10-27 00:12:35.305 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:12:35.306 +01:00 [DBG] Hosting started
2022-10-27 00:12:35.526 +01:00 [DBG] Connection id "0HMLNKU8OBMO9" accepted.
2022-10-27 00:12:35.530 +01:00 [DBG] Connection id "0HMLNKU8OBMOA" accepted.
2022-10-27 00:12:35.535 +01:00 [DBG] Connection id "0HMLNKU8OBMOA" started.
2022-10-27 00:12:35.535 +01:00 [DBG] Connection id "0HMLNKU8OBMO9" started.
2022-10-27 00:12:35.583 +01:00 [DBG] Connection id "0HMLNKU8OBMO9" received FIN.
2022-10-27 00:12:35.583 +01:00 [DBG] Connection id "0HMLNKU8OBMOA" received FIN.
2022-10-27 00:12:35.598 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:12:35.598 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:12:35.662 +01:00 [DBG] Connection id "0HMLNKU8OBMO9" stopped.
2022-10-27 00:12:35.662 +01:00 [DBG] Connection id "0HMLNKU8OBMOA" stopped.
2022-10-27 00:12:35.667 +01:00 [DBG] Connection id "0HMLNKU8OBMOA" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:12:35.667 +01:00 [DBG] Connection id "0HMLNKU8OBMO9" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:12:35.984 +01:00 [DBG] Connection id "0HMLNKU8OBMOB" accepted.
2022-10-27 00:12:35.987 +01:00 [DBG] Connection id "0HMLNKU8OBMOB" started.
2022-10-27 00:12:36.027 +01:00 [DBG] Connection 0HMLNKU8OBMOB established using the following protocol: "Tls13"
2022-10-27 00:12:36.080 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:12:36.123 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:12:36.240 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:12:36.376 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:12:36.381 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 303.9933ms
2022-10-27 00:12:36.446 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:12:36.447 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:12:36.458 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 11.4318ms
2022-10-27 00:12:36.535 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 88.2621ms
2022-10-27 00:12:36.748 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:12:36.987 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 238.5388ms
2022-10-27 00:12:39.079 +01:00 [DBG] Connection id "0HMLNKU8OBMOC" accepted.
2022-10-27 00:12:39.080 +01:00 [DBG] Connection id "0HMLNKU8OBMOC" started.
2022-10-27 00:12:39.089 +01:00 [DBG] Connection 0HMLNKU8OBMOC established using the following protocol: "Tls13"
2022-10-27 00:12:39.113 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 -
2022-10-27 00:12:39.116 +01:00 [DBG] POST requests are not supported
2022-10-27 00:12:39.140 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/renew'
2022-10-27 00:12:39.145 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/users/renew'
2022-10-27 00:12:39.147 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:12:39.212 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:12:39.216 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:12:39.219 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:12:39.247 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:12:39.252 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:12:39.254 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:12:39.256 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:12:39.258 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:12:39.260 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:12:39.262 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:12:39.429 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:12:39.459 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:12:39.473 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:12:39.478 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-27 00:12:39.480 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:12:39.487 +01:00 [DBG] Connection id "0HMLNKU8OBMOC", Request id "0HMLNKU8OBMOC:00000002": started reading request body.
2022-10-27 00:12:39.492 +01:00 [DBG] Connection id "0HMLNKU8OBMOC", Request id "0HMLNKU8OBMOC:00000002": done reading request body.
2022-10-27 00:12:39.497 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-27 00:12:39.499 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:12:39.501 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:12:39.503 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:12:39.511 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:12:40.515 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:12:40.572 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-27 00:12:40.924 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:12:40.974 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:12:41.050 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (74ms).
2022-10-27 00:12:41.060 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:12:41.234 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:12:41.250 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:12:41.347 +01:00 [INF] Executed DbCommand (102ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:12:41.388 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:12:41.434 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:12:41.440 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:12:41.450 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:12:41.627 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:12:41.640 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:12:41.650 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:12:41.655 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:12:41.673 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:12:41.705 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:12:41.708 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:12:41.712 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:12:41.722 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:12:41.785 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:12:41.787 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-27 00:12:41.790 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:12:41.815 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:12:41.842 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-27 00:12:41.854 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:12:41.868 +01:00 [DBG] Committing transaction.
2022-10-27 00:12:41.881 +01:00 [DBG] Committed transaction.
2022-10-27 00:12:41.888 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:12:41.891 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:12:41.897 +01:00 [DBG] Disposing transaction.
2022-10-27 00:12:41.911 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:12:41.917 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:12:41.930 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:12:41.934 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:12:41.935 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:12:41.936 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:12:41.937 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:12:41.939 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:12:41.954 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 2687.1883ms
2022-10-27 00:12:41.959 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:12:41.962 +01:00 [DBG] Connection id "0HMLNKU8OBMOC" completed keep alive response.
2022-10-27 00:12:41.968 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:12:41.973 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 2860.2299ms
2022-10-27 00:12:41.998 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:12:41.999 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:12:42.001 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:12:42.002 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:12:42.004 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:12:42.007 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:12:42.008 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:12:42.012 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-27 00:12:42.021 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-27 00:12:42.023 +01:00 [DBG] Connection id "0HMLNKU8OBMOC" completed keep alive response.
2022-10-27 00:12:42.024 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 401 0 - 26.3522ms
2022-10-27 00:12:56.558 +01:00 [DBG] Connection id "0HMLNKU8OBMOC" received FIN.
2022-10-27 00:12:56.564 +01:00 [DBG] Connection id "0HMLNKU8OBMOC" disconnecting.
2022-10-27 00:12:56.567 +01:00 [DBG] Connection id "0HMLNKU8OBMOC" sending FIN because: "The client closed the connection."
2022-10-27 00:12:56.574 +01:00 [DBG] Connection id "0HMLNKU8OBMOC" stopped.
2022-10-27 00:13:31.093 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:13:31.259 +01:00 [DBG] Hosting starting
2022-10-27 00:13:31.319 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:13:31.328 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:13:31.340 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:13:31.341 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:13:31.348 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:13:31.356 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:13:31.357 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:13:31.366 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:13:31.371 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:13:31.375 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:13:31.380 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:13:31.395 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:13:31.398 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:13:31.404 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:13:31.406 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:13:31.543 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:13:31.675 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:13:31.678 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:13:31.679 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:13:31.680 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:13:31.681 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:13:31.682 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:13:31.683 +01:00 [INF] Hosting environment: Development
2022-10-27 00:13:31.684 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:13:31.685 +01:00 [DBG] Hosting started
2022-10-27 00:13:32.065 +01:00 [DBG] Connection id "0HMLNKUPJI6QO" accepted.
2022-10-27 00:13:32.067 +01:00 [DBG] Connection id "0HMLNKUPJI6QO" started.
2022-10-27 00:13:32.070 +01:00 [DBG] Connection id "0HMLNKUPJI6QP" accepted.
2022-10-27 00:13:32.071 +01:00 [DBG] Connection id "0HMLNKUPJI6QP" started.
2022-10-27 00:13:32.088 +01:00 [DBG] Connection id "0HMLNKUPJI6QP" received FIN.
2022-10-27 00:13:32.088 +01:00 [DBG] Connection id "0HMLNKUPJI6QO" received FIN.
2022-10-27 00:13:32.114 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:13:32.115 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:13:32.155 +01:00 [DBG] Connection id "0HMLNKUPJI6QO" stopped.
2022-10-27 00:13:32.155 +01:00 [DBG] Connection id "0HMLNKUPJI6QP" stopped.
2022-10-27 00:13:32.164 +01:00 [DBG] Connection id "0HMLNKUPJI6QO" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:13:32.164 +01:00 [DBG] Connection id "0HMLNKUPJI6QP" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:13:32.385 +01:00 [DBG] Connection id "0HMLNKUPJI6QQ" accepted.
2022-10-27 00:13:32.386 +01:00 [DBG] Connection id "0HMLNKUPJI6QQ" started.
2022-10-27 00:13:32.436 +01:00 [DBG] Connection 0HMLNKUPJI6QQ established using the following protocol: "Tls13"
2022-10-27 00:13:32.492 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:13:32.549 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:13:32.703 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:13:32.826 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:13:32.847 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 358.9424ms
2022-10-27 00:13:32.977 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:13:32.977 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:13:32.983 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 6.7474ms
2022-10-27 00:13:33.053 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 76.5336ms
2022-10-27 00:13:33.243 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:13:33.494 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 251.8418ms
2022-10-27 00:13:37.308 +01:00 [DBG] Connection id "0HMLNKUPJI6QR" accepted.
2022-10-27 00:13:37.310 +01:00 [DBG] Connection id "0HMLNKUPJI6QR" started.
2022-10-27 00:13:37.320 +01:00 [DBG] Connection 0HMLNKUPJI6QR established using the following protocol: "Tls13"
2022-10-27 00:13:37.343 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:13:37.347 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:13:37.372 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:13:37.379 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:13:37.381 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:13:37.668 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:13:37.670 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:13:37.674 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:13:37.680 +01:00 [DBG] Authorization was successful.
2022-10-27 00:13:37.682 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:13:37.701 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:13:37.707 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:13:37.711 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:13:37.714 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:13:37.717 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:13:37.719 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:13:37.721 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:13:37.895 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:13:37.924 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:13:38.915 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:13:39.020 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-27 00:13:39.400 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
            SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
            FROM SB-operational.Users AS u
            WHERE u.user_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-27 00:13:39.467 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:13:39.548 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (77ms).
2022-10-27 00:13:39.562 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:13:39.766 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:13:39.787 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:13:39.885 +01:00 [INF] Executed DbCommand (107ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:13:39.936 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:13:39.993 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:13:40.004 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:13:40.014 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:13:40.026 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:13:40.030 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:13:40.031 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:13:40.032 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:13:40.033 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:13:40.035 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:13:40.056 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 2331.903ms
2022-10-27 00:13:40.060 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:13:40.065 +01:00 [DBG] Connection id "0HMLNKUPJI6QR" completed keep alive response.
2022-10-27 00:13:40.069 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:13:40.074 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 2730.7679ms
2022-10-27 00:14:52.342 +01:00 [DBG] Connection id "0HMLNKUPJI6QR" received FIN.
2022-10-27 00:14:52.361 +01:00 [DBG] Connection id "0HMLNKUPJI6QR" disconnecting.
2022-10-27 00:14:52.363 +01:00 [DBG] Connection id "0HMLNKUPJI6QR" sending FIN because: "The client closed the connection."
2022-10-27 00:14:52.371 +01:00 [DBG] Connection id "0HMLNKUPJI6QR" stopped.
2022-10-27 00:17:03.002 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:17:03.113 +01:00 [DBG] Hosting starting
2022-10-27 00:17:03.152 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:17:03.159 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:17:03.166 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:17:03.168 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:17:03.175 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:17:03.184 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:17:03.187 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:17:03.196 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:17:03.201 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:17:03.205 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:17:03.207 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:17:03.213 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:17:03.216 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:17:03.221 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:17:03.223 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:17:03.362 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:17:03.413 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:17:03.414 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:17:03.415 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:17:03.416 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:17:03.417 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:17:03.418 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:17:03.419 +01:00 [INF] Hosting environment: Development
2022-10-27 00:17:03.420 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:17:03.421 +01:00 [DBG] Hosting started
2022-10-27 00:17:03.804 +01:00 [DBG] Connection id "0HMLNL0OMSHNF" received FIN.
2022-10-27 00:17:03.820 +01:00 [DBG] Connection id "0HMLNL0OMSHNF" accepted.
2022-10-27 00:17:03.831 +01:00 [DBG] Connection id "0HMLNL0OMSHNF" started.
2022-10-27 00:17:03.865 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:17:03.921 +01:00 [DBG] Connection id "0HMLNL0OMSHNF" stopped.
2022-10-27 00:17:03.926 +01:00 [DBG] Connection id "0HMLNL0OMSHNF" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:17:08.169 +01:00 [DBG] Connection id "0HMLNL0OMSHNG" accepted.
2022-10-27 00:17:08.171 +01:00 [DBG] Connection id "0HMLNL0OMSHNG" started.
2022-10-27 00:17:08.208 +01:00 [DBG] Connection 0HMLNL0OMSHNG established using the following protocol: "Tls13"
2022-10-27 00:17:08.248 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 -
2022-10-27 00:17:08.266 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:17:08.304 +01:00 [DBG] POST requests are not supported
2022-10-27 00:17:08.334 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/renew'
2022-10-27 00:17:08.340 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/users/renew'
2022-10-27 00:17:08.342 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:17:08.417 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:17:08.422 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:17:08.425 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:17:08.456 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:17:08.460 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:17:08.461 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:17:08.463 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:17:08.465 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:17:08.466 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:17:08.468 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:17:08.665 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:17:08.693 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:17:08.705 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:17:08.709 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-27 00:17:08.711 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:17:08.727 +01:00 [DBG] Connection id "0HMLNL0OMSHNG", Request id "0HMLNL0OMSHNG:00000002": started reading request body.
2022-10-27 00:17:08.732 +01:00 [DBG] Connection id "0HMLNL0OMSHNG", Request id "0HMLNL0OMSHNG:00000002": done reading request body.
2022-10-27 00:17:08.737 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-27 00:17:08.739 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:17:08.742 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:17:08.743 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:17:08.751 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:17:09.133 +01:00 [DBG] Connection id "0HMLNL0OMSHNH" accepted.
2022-10-27 00:17:09.135 +01:00 [DBG] Connection id "0HMLNL0OMSHNH" started.
2022-10-27 00:17:09.151 +01:00 [DBG] Connection 0HMLNL0OMSHNH established using the following protocol: "Tls13"
2022-10-27 00:17:09.178 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:17:09.259 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:17:09.376 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:17:09.382 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 203.4593ms
2022-10-27 00:17:09.431 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:17:09.436 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:17:09.451 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 14.3465ms
2022-10-27 00:17:09.494 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 63.2967ms
2022-10-27 00:17:09.662 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:17:09.849 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 186.4362ms
2022-10-27 00:17:10.087 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:17:10.149 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-27 00:17:10.519 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:17:10.570 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:17:10.649 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (76ms).
2022-10-27 00:17:10.660 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:17:10.835 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:17:10.852 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:17:10.945 +01:00 [INF] Executed DbCommand (98ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:17:10.997 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:17:11.046 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:17:11.052 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:17:11.062 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:17:11.237 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:17:11.252 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:17:11.263 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:17:11.268 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:17:11.285 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:17:11.316 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:17:11.320 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:17:11.324 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:17:11.335 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:17:11.396 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:17:11.399 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-27 00:17:11.403 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:17:11.427 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:17:11.453 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-27 00:17:11.466 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:17:11.481 +01:00 [DBG] Committing transaction.
2022-10-27 00:17:11.496 +01:00 [DBG] Committed transaction.
2022-10-27 00:17:11.503 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:17:11.506 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:17:11.513 +01:00 [DBG] Disposing transaction.
2022-10-27 00:17:11.532 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:17:11.538 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:17:11.554 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:17:11.560 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:17:11.561 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:17:11.562 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:17:11.563 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:17:11.565 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:17:11.587 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 3112.891ms
2022-10-27 00:17:11.595 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:17:11.600 +01:00 [DBG] Connection id "0HMLNL0OMSHNG" completed keep alive response.
2022-10-27 00:17:11.603 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:17:11.610 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3365.5991ms
2022-10-27 00:17:11.632 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:17:11.633 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:17:11.635 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:17:11.636 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:17:11.638 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:17:11.641 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:17:11.642 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:17:11.650 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-27 00:17:11.663 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-27 00:17:11.664 +01:00 [DBG] Connection id "0HMLNL0OMSHNG" completed keep alive response.
2022-10-27 00:17:11.666 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 401 0 - 34.0369ms
2022-10-27 00:18:23.224 +01:00 [DBG] Connection id "0HMLNL0OMSHNG" received FIN.
2022-10-27 00:18:23.228 +01:00 [DBG] Connection id "0HMLNL0OMSHNG" disconnecting.
2022-10-27 00:18:23.236 +01:00 [DBG] Connection id "0HMLNL0OMSHNG" sending FIN because: "The client closed the connection."
2022-10-27 00:18:23.239 +01:00 [DBG] Connection id "0HMLNL0OMSHNG" stopped.
2022-10-27 00:19:40.215 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:19:40.319 +01:00 [DBG] Hosting starting
2022-10-27 00:19:40.363 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:19:40.369 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:19:40.376 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:19:40.378 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:19:40.385 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:19:40.390 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:19:40.392 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:19:40.400 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:19:40.403 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:19:40.406 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:19:40.408 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:19:40.413 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:19:40.416 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:19:40.420 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:19:40.421 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:19:40.554 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:19:40.609 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:19:40.610 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:19:40.611 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:19:40.612 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:19:40.613 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:19:40.614 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:19:40.615 +01:00 [INF] Hosting environment: Development
2022-10-27 00:19:40.616 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:19:40.617 +01:00 [DBG] Hosting started
2022-10-27 00:19:40.767 +01:00 [DBG] Connection id "0HMLNL27FO2EK" accepted.
2022-10-27 00:19:40.767 +01:00 [DBG] Connection id "0HMLNL27FO2EJ" accepted.
2022-10-27 00:19:40.770 +01:00 [DBG] Connection id "0HMLNL27FO2EK" started.
2022-10-27 00:19:40.771 +01:00 [DBG] Connection id "0HMLNL27FO2EJ" started.
2022-10-27 00:19:40.786 +01:00 [DBG] Connection id "0HMLNL27FO2EJ" received FIN.
2022-10-27 00:19:40.786 +01:00 [DBG] Connection id "0HMLNL27FO2EK" received FIN.
2022-10-27 00:19:40.792 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:19:40.792 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:19:40.877 +01:00 [DBG] Connection id "0HMLNL27FO2EK" stopped.
2022-10-27 00:19:40.877 +01:00 [DBG] Connection id "0HMLNL27FO2EJ" stopped.
2022-10-27 00:19:40.881 +01:00 [DBG] Connection id "0HMLNL27FO2EK" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:19:40.881 +01:00 [DBG] Connection id "0HMLNL27FO2EJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:19:41.186 +01:00 [DBG] Connection id "0HMLNL27FO2EL" accepted.
2022-10-27 00:19:41.191 +01:00 [DBG] Connection id "0HMLNL27FO2EL" started.
2022-10-27 00:19:41.256 +01:00 [DBG] Connection id "0HMLNL27FO2EL" received FIN.
2022-10-27 00:19:41.267 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:19:41.280 +01:00 [DBG] Connection id "0HMLNL27FO2EL" stopped.
2022-10-27 00:19:41.282 +01:00 [DBG] Connection id "0HMLNL27FO2EL" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:22:30.216 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:22:30.328 +01:00 [DBG] Hosting starting
2022-10-27 00:22:30.367 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:22:30.372 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:22:30.378 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:22:30.380 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:22:30.385 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:22:30.391 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:22:30.393 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:22:30.400 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:22:30.403 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:22:30.406 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:22:30.408 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:22:30.414 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:22:30.417 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:22:30.421 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:22:30.423 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:22:30.568 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:22:30.649 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:22:30.652 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:22:30.654 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:22:30.655 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:22:30.656 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:22:30.657 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:22:30.658 +01:00 [INF] Hosting environment: Development
2022-10-27 00:22:30.659 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:22:30.660 +01:00 [DBG] Hosting started
2022-10-27 00:22:31.057 +01:00 [DBG] Connection id "0HMLNL3Q7P76V" accepted.
2022-10-27 00:22:31.057 +01:00 [DBG] Connection id "0HMLNL3Q7P770" accepted.
2022-10-27 00:22:31.064 +01:00 [DBG] Connection id "0HMLNL3Q7P76V" started.
2022-10-27 00:22:31.066 +01:00 [DBG] Connection id "0HMLNL3Q7P770" started.
2022-10-27 00:22:31.068 +01:00 [DBG] Connection id "0HMLNL3Q7P770" received FIN.
2022-10-27 00:22:31.069 +01:00 [DBG] Connection id "0HMLNL3Q7P76V" received FIN.
2022-10-27 00:22:31.089 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:22:31.152 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:22:31.190 +01:00 [DBG] Connection id "0HMLNL3Q7P770" stopped.
2022-10-27 00:22:31.190 +01:00 [DBG] Connection id "0HMLNL3Q7P76V" stopped.
2022-10-27 00:22:31.199 +01:00 [DBG] Connection id "0HMLNL3Q7P770" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:22:31.199 +01:00 [DBG] Connection id "0HMLNL3Q7P76V" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:22:31.569 +01:00 [DBG] Connection id "0HMLNL3Q7P771" accepted.
2022-10-27 00:22:31.575 +01:00 [DBG] Connection id "0HMLNL3Q7P771" started.
2022-10-27 00:22:32.322 +01:00 [DBG] Connection id "0HMLNL3Q7P771" received FIN.
2022-10-27 00:22:32.327 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:22:32.347 +01:00 [DBG] Connection id "0HMLNL3Q7P771" stopped.
2022-10-27 00:22:32.349 +01:00 [DBG] Connection id "0HMLNL3Q7P771" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:22:39.086 +01:00 [DBG] Connection id "0HMLNL3Q7P772" accepted.
2022-10-27 00:22:39.087 +01:00 [DBG] Connection id "0HMLNL3Q7P772" started.
2022-10-27 00:22:39.104 +01:00 [DBG] Connection 0HMLNL3Q7P772 established using the following protocol: "Tls13"
2022-10-27 00:22:39.140 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json;+charset=utf-8 -
2022-10-27 00:22:39.158 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:22:39.202 +01:00 [DBG] POST requests are not supported
2022-10-27 00:22:39.228 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-27 00:22:39.234 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-27 00:22:39.237 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-27 00:22:39.326 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:22:39.331 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:22:39.333 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-27 00:22:39.358 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:22:39.362 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:22:39.363 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:22:39.365 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:22:39.368 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:22:39.370 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:22:39.372 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:39.584 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:22:39.612 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:39.624 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-27 00:22:39.628 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-27 00:22:39.630 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:22:39.645 +01:00 [DBG] Connection id "0HMLNL3Q7P772", Request id "0HMLNL3Q7P772:00000002": started reading request body.
2022-10-27 00:22:39.652 +01:00 [DBG] Connection id "0HMLNL3Q7P772", Request id "0HMLNL3Q7P772:00000002": done reading request body.
2022-10-27 00:22:39.658 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-27 00:22:39.661 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-27 00:22:39.663 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-27 00:22:39.665 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-27 00:22:39.673 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-27 00:22:40.687 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:22:40.748 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-27 00:22:41.095 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:22:41.145 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:41.216 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (68ms).
2022-10-27 00:22:41.225 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:41.419 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:41.435 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-27 00:22:41.528 +01:00 [INF] Executed DbCommand (96ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-27 00:22:41.587 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:41.643 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:41.649 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:41.657 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:41.662 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-27 00:22:41.667 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:22:41.670 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:41.671 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:22:41.672 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:41.674 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:41.675 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-27 00:22:41.683 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-27 00:22:41.689 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:41.701 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:41.702 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:41.704 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:41.707 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:22:41.711 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:22:41.711 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:22:41.712 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:22:41.714 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-27 00:22:41.715 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-27 00:22:41.724 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 2348.3809ms
2022-10-27 00:22:41.729 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-27 00:22:41.731 +01:00 [DBG] Connection id "0HMLNL3Q7P772" completed keep alive response.
2022-10-27 00:22:41.737 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:22:41.744 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 2607.3510ms
2022-10-27 00:22:41.755 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/GetTokenAgain application/json;+charset=utf-8 -
2022-10-27 00:22:41.757 +01:00 [DBG] POST requests are not supported
2022-10-27 00:22:41.760 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/GetTokenAgain'
2022-10-27 00:22:41.761 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/GetTokenAgain' is valid for the request path '/api/users/GetTokenAgain'
2022-10-27 00:22:41.762 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-27 00:22:41.764 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:22:41.765 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:22:41.767 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-27 00:22:41.771 +01:00 [INF] Route matched with {action = "GetUserToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] GetUserToken(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:22:41.773 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:22:41.775 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:22:41.777 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:22:41.778 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:22:41.780 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:22:41.781 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:41.784 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:41.789 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-27 00:22:41.791 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-27 00:22:41.793 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:22:41.794 +01:00 [DBG] Connection id "0HMLNL3Q7P772", Request id "0HMLNL3Q7P772:00000003": started reading request body.
2022-10-27 00:22:41.795 +01:00 [DBG] Connection id "0HMLNL3Q7P772", Request id "0HMLNL3Q7P772:00000003": done reading request body.
2022-10-27 00:22:41.796 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-27 00:22:41.797 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-27 00:22:41.799 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-27 00:22:41.802 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-27 00:22:41.804 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-27 00:22:41.840 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:22:41.861 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:41.863 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:22:41.865 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:41.866 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:41.867 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-27 00:22:41.871 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-27 00:22:41.873 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:41.874 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:41.875 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:41.876 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:41.882 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(t => t.UserId == __id_0)'
2022-10-27 00:22:41.888 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-27 00:22:41.911 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:41.912 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:22:41.920 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:41.924 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:41.926 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__id_0
LIMIT 1
2022-10-27 00:22:41.941 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__id_0
LIMIT 1
2022-10-27 00:22:41.951 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:41.959 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:41.968 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:41.971 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:41.988 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:22:41.992 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:22:41.993 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:22:41.994 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:22:41.995 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:22:41.997 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:22:42.006 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserToken (SimpleBank.AcctManage.API) in 224.6268ms
2022-10-27 00:22:42.009 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-27 00:22:42.015 +01:00 [DBG] Connection id "0HMLNL3Q7P772" completed keep alive response.
2022-10-27 00:22:42.017 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:22:42.018 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/GetTokenAgain application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 263.0788ms
2022-10-27 00:22:42.037 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 -
2022-10-27 00:22:42.038 +01:00 [DBG] POST requests are not supported
2022-10-27 00:22:42.039 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/renew'
2022-10-27 00:22:42.041 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/users/renew'
2022-10-27 00:22:42.042 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:22:42.044 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:22:42.045 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:22:42.046 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:22:42.049 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:22:42.051 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:22:42.053 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:22:42.054 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:22:42.056 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:22:42.058 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:22:42.059 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:42.065 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:42.067 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:22:42.068 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-27 00:22:42.070 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:22:42.072 +01:00 [DBG] Connection id "0HMLNL3Q7P772", Request id "0HMLNL3Q7P772:00000004": started reading request body.
2022-10-27 00:22:42.073 +01:00 [DBG] Connection id "0HMLNL3Q7P772", Request id "0HMLNL3Q7P772:00000004": done reading request body.
2022-10-27 00:22:42.074 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-27 00:22:42.075 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:22:42.077 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:22:42.078 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:22:42.080 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:22:42.090 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:22:42.094 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-27 00:22:42.097 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:22:42.100 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:42.101 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:22:42.102 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:42.103 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:42.104 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:22:42.107 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:22:42.110 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:42.111 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:42.112 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:42.113 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:42.277 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:42.289 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:42.299 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:22:42.303 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:22:42.320 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:22:42.342 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:42.344 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:42.348 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:22:42.361 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:22:42.411 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:42.412 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:22:42.415 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:22:42.429 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:22:42.452 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-27 00:22:42.460 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:42.468 +01:00 [DBG] Committing transaction.
2022-10-27 00:22:42.481 +01:00 [DBG] Committed transaction.
2022-10-27 00:22:42.488 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:42.490 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:42.495 +01:00 [DBG] Disposing transaction.
2022-10-27 00:22:42.510 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:42.516 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:22:42.519 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:22:42.521 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:22:42.522 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:22:42.523 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:22:42.524 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:22:42.525 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:22:42.527 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 467.6422ms
2022-10-27 00:22:42.529 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:22:42.530 +01:00 [DBG] Connection id "0HMLNL3Q7P772" completed keep alive response.
2022-10-27 00:22:42.531 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:22:42.532 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 494.9279ms
2022-10-27 00:22:42.567 +01:00 [DBG] Connection id "0HMLNL3Q7P773" accepted.
2022-10-27 00:22:42.568 +01:00 [DBG] Connection id "0HMLNL3Q7P773" started.
2022-10-27 00:22:42.572 +01:00 [DBG] Connection 0HMLNL3Q7P773 established using the following protocol: "Tls13"
2022-10-27 00:22:42.576 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:22:42.585 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:22:42.587 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:22:42.588 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:22:42.591 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:22:42.659 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:22:42.662 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:42.663 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:42.668 +01:00 [DBG] Authorization was successful.
2022-10-27 00:22:42.670 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:22:42.673 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:22:42.676 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:22:42.677 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:22:42.678 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:22:42.681 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:22:42.683 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:22:42.684 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:42.686 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:42.690 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:22:42.700 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-27 00:22:42.777 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
            SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
            FROM SB-operational.Users AS u
            WHERE u.user_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-27 00:22:42.782 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:42.783 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:22:42.784 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:42.786 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:42.787 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:22:42.790 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:22:42.794 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:42.796 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:42.797 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:42.799 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:42.801 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:22:42.804 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:22:42.804 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:22:42.805 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:22:42.806 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:22:42.808 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:22:42.811 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 126.6286ms
2022-10-27 00:22:42.812 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:22:42.814 +01:00 [DBG] Connection id "0HMLNL3Q7P773" completed keep alive response.
2022-10-27 00:22:42.815 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:22:42.816 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 240.3096ms
2022-10-27 00:22:47.974 +01:00 [DBG] Connection id "0HMLNL3Q7P774" accepted.
2022-10-27 00:22:47.975 +01:00 [DBG] Connection id "0HMLNL3Q7P774" started.
2022-10-27 00:22:47.978 +01:00 [DBG] Connection 0HMLNL3Q7P774 established using the following protocol: "Tls13"
2022-10-27 00:22:47.980 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/ - -
2022-10-27 00:22:47.982 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:22:47.984 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/'
2022-10-27 00:22:47.985 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts/'
2022-10-27 00:22:47.988 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:22:47.989 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:22:47.990 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:47.991 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:47.992 +01:00 [DBG] Authorization was successful.
2022-10-27 00:22:47.993 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:22:47.996 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:22:48.000 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:22:48.002 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:22:48.003 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:22:48.005 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:22:48.006 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:22:48.008 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:22:48.010 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:22:48.013 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:22:48.017 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(account => account.UserId == __userId_0)'
2022-10-27 00:22:48.021 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
        SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
        FROM SB-operational.Accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-27 00:22:48.024 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:48.025 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:22:48.026 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:48.028 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:48.029 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:22:48.034 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:22:48.049 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:48.061 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:48.063 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:48.065 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:48.067 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:48.068 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:48.070 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:48.070 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:48.072 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:48.073 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:48.074 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:22:48.076 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:48.077 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:48.078 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:22:48.082 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:22:48.085 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:48.086 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:48.088 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:48.090 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:22:48.092 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:22:48.093 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:22:48.094 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:22:48.095 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:22:48.096 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-27 00:22:48.108 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 100.7541ms
2022-10-27 00:22:48.111 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:22:48.112 +01:00 [DBG] Connection id "0HMLNL3Q7P774" completed keep alive response.
2022-10-27 00:22:48.113 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:22:48.114 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/ - - - 200 - application/json;+charset=utf-8 134.4822ms
2022-10-27 00:22:53.230 +01:00 [DBG] Connection id "0HMLNL3Q7P775" accepted.
2022-10-27 00:22:53.231 +01:00 [DBG] Connection id "0HMLNL3Q7P775" started.
2022-10-27 00:22:53.233 +01:00 [DBG] Connection 0HMLNL3Q7P775 established using the following protocol: "Tls13"
2022-10-27 00:22:53.235 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:22:53.236 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:22:53.238 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:22:53.239 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:22:53.241 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:22:53.242 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:22:53.243 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:53.244 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:53.245 +01:00 [DBG] Authorization was successful.
2022-10-27 00:22:53.246 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:22:53.247 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:22:53.250 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:22:53.251 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:22:53.253 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:22:53.256 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:22:53.258 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:22:53.259 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:53.261 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:53.262 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:22:53.265 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:53.266 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:22:53.267 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:53.268 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:53.270 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:22:53.275 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:22:53.278 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:53.279 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:53.280 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:53.281 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:53.283 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:22:53.285 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:22:53.286 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:22:53.287 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:22:53.288 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:22:53.290 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:22:53.291 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 32.1745ms
2022-10-27 00:22:53.292 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:22:53.294 +01:00 [DBG] Connection id "0HMLNL3Q7P775" completed keep alive response.
2022-10-27 00:22:53.295 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:22:53.296 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 60.4926ms
2022-10-27 00:22:54.728 +01:00 [DBG] Connection id "0HMLNL3Q7P776" accepted.
2022-10-27 00:22:54.730 +01:00 [DBG] Connection id "0HMLNL3Q7P776" started.
2022-10-27 00:22:54.733 +01:00 [DBG] Connection 0HMLNL3Q7P776 established using the following protocol: "Tls13"
2022-10-27 00:22:54.735 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/ - -
2022-10-27 00:22:54.736 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:22:54.737 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/'
2022-10-27 00:22:54.738 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts/'
2022-10-27 00:22:54.740 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:22:54.742 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:22:54.742 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:54.743 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:54.744 +01:00 [DBG] Authorization was successful.
2022-10-27 00:22:54.745 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:22:54.746 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:22:54.749 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:22:54.750 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:22:54.752 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:22:54.755 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:22:54.756 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:22:54.758 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:22:54.760 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:22:54.762 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:22:54.764 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:54.765 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:22:54.767 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:54.768 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:54.770 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:22:54.774 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:22:54.776 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:54.777 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:54.779 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:54.780 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:54.782 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:54.784 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:54.785 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:54.786 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:54.788 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:54.789 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:54.790 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:22:54.791 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:54.792 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:54.794 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:22:54.797 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:22:54.799 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:54.800 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:54.801 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:54.803 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:22:54.805 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:22:54.805 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:22:54.806 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:22:54.807 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:22:54.808 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-27 00:22:54.810 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 52.0166ms
2022-10-27 00:22:54.812 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:22:54.813 +01:00 [DBG] Connection id "0HMLNL3Q7P776" completed keep alive response.
2022-10-27 00:22:54.814 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:22:54.815 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/ - - - 200 - application/json;+charset=utf-8 80.0797ms
2022-10-27 00:22:55.816 +01:00 [DBG] Connection id "0HMLNL3Q7P777" accepted.
2022-10-27 00:22:55.817 +01:00 [DBG] Connection id "0HMLNL3Q7P777" started.
2022-10-27 00:22:55.820 +01:00 [DBG] Connection 0HMLNL3Q7P777 established using the following protocol: "Tls13"
2022-10-27 00:22:55.821 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:22:55.822 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:22:55.823 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:22:55.825 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:22:55.827 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:22:55.828 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:22:55.828 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:55.829 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:55.831 +01:00 [DBG] Authorization was successful.
2022-10-27 00:22:55.831 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:22:55.832 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:22:55.834 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:22:55.836 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:22:55.838 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:22:55.842 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:22:55.844 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:22:55.846 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:55.847 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:55.848 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:22:55.851 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:55.852 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:22:55.853 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:55.855 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:55.856 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:22:55.860 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:22:55.863 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:55.864 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:55.865 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:55.866 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:55.867 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:22:55.870 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:22:55.871 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:22:55.872 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:22:55.873 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:22:55.874 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:22:55.876 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 30.2519ms
2022-10-27 00:22:55.877 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:22:55.878 +01:00 [DBG] Connection id "0HMLNL3Q7P777" completed keep alive response.
2022-10-27 00:22:55.879 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:22:55.880 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 59.0723ms
2022-10-27 00:22:58.180 +01:00 [DBG] Connection id "0HMLNL3Q7P778" accepted.
2022-10-27 00:22:58.181 +01:00 [DBG] Connection id "0HMLNL3Q7P778" started.
2022-10-27 00:22:58.183 +01:00 [DBG] Connection 0HMLNL3Q7P778 established using the following protocol: "Tls13"
2022-10-27 00:22:58.184 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/ - -
2022-10-27 00:22:58.185 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:22:58.186 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/'
2022-10-27 00:22:58.187 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts/'
2022-10-27 00:22:58.189 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:22:58.191 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:22:58.192 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:58.193 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:58.194 +01:00 [DBG] Authorization was successful.
2022-10-27 00:22:58.195 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:22:58.196 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:22:58.198 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:22:58.200 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:22:58.201 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:22:58.203 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:22:58.205 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:22:58.206 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:22:58.209 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:22:58.211 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:22:58.214 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:58.215 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:22:58.216 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:58.217 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:58.218 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:22:58.222 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:22:58.225 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:58.226 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:58.227 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:58.229 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:58.231 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:58.233 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:58.234 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:58.235 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:58.236 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:58.237 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:58.238 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:22:58.240 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:58.241 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:58.242 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:22:58.246 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:22:58.250 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:58.251 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:58.252 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:58.253 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:22:58.257 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:22:58.258 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:22:58.259 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:22:58.260 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:22:58.261 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-27 00:22:58.263 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 56.9736ms
2022-10-27 00:22:58.265 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:22:58.266 +01:00 [DBG] Connection id "0HMLNL3Q7P778" completed keep alive response.
2022-10-27 00:22:58.267 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:22:58.268 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/ - - - 200 - application/json;+charset=utf-8 83.5597ms
2022-10-27 00:22:58.932 +01:00 [DBG] Connection id "0HMLNL3Q7P779" accepted.
2022-10-27 00:22:58.933 +01:00 [DBG] Connection id "0HMLNL3Q7P779" started.
2022-10-27 00:22:58.935 +01:00 [DBG] Connection 0HMLNL3Q7P779 established using the following protocol: "Tls13"
2022-10-27 00:22:58.936 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:22:58.937 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:22:58.938 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:22:58.939 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:22:58.942 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:22:58.944 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:22:58.945 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:58.946 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:22:58.946 +01:00 [DBG] Authorization was successful.
2022-10-27 00:22:58.947 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:22:58.949 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:22:58.951 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:22:58.952 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:22:58.953 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:22:58.955 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:22:58.957 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:22:58.959 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:58.960 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:22:58.962 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:22:58.964 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:22:58.965 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:22:58.967 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:58.968 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:58.969 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:22:58.973 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:22:58.975 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:22:58.977 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:22:58.977 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:22:58.979 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:22:58.980 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:22:58.983 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:22:58.984 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:22:58.985 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:22:58.985 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:22:58.987 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:22:58.988 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 29.1301ms
2022-10-27 00:22:58.989 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:22:58.991 +01:00 [DBG] Connection id "0HMLNL3Q7P779" completed keep alive response.
2022-10-27 00:22:58.992 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:22:58.993 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 56.7297ms
2022-10-27 00:23:25.892 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:23:26.315 +01:00 [DBG] Hosting starting
2022-10-27 00:23:26.796 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:23:26.804 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:23:26.812 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:23:26.816 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:23:26.824 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:23:26.831 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:23:26.834 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:23:26.849 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:23:26.855 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:23:26.863 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:23:26.872 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:23:26.878 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:23:26.891 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:23:26.901 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:23:26.904 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:23:27.094 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:23:27.150 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:23:27.151 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:23:27.152 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:23:27.153 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:23:27.154 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:23:27.155 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:23:27.156 +01:00 [INF] Hosting environment: Development
2022-10-27 00:23:27.157 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:23:27.157 +01:00 [DBG] Hosting started
2022-10-27 00:23:27.300 +01:00 [DBG] Connection id "0HMLNL4B05EQQ" accepted.
2022-10-27 00:23:27.302 +01:00 [DBG] Connection id "0HMLNL4B05EQR" accepted.
2022-10-27 00:23:27.313 +01:00 [DBG] Connection id "0HMLNL4B05EQR" started.
2022-10-27 00:23:27.313 +01:00 [DBG] Connection id "0HMLNL4B05EQQ" started.
2022-10-27 00:23:27.315 +01:00 [DBG] Connection id "0HMLNL4B05EQQ" received FIN.
2022-10-27 00:23:27.315 +01:00 [DBG] Connection id "0HMLNL4B05EQR" received FIN.
2022-10-27 00:23:27.334 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:23:27.334 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:23:27.452 +01:00 [DBG] Connection id "0HMLNL4B05EQR" stopped.
2022-10-27 00:23:27.452 +01:00 [DBG] Connection id "0HMLNL4B05EQQ" stopped.
2022-10-27 00:23:27.456 +01:00 [DBG] Connection id "0HMLNL4B05EQR" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:23:27.456 +01:00 [DBG] Connection id "0HMLNL4B05EQQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:23:27.615 +01:00 [DBG] Connection id "0HMLNL4B05EQS" accepted.
2022-10-27 00:23:27.617 +01:00 [DBG] Connection id "0HMLNL4B05EQS" started.
2022-10-27 00:23:27.655 +01:00 [DBG] Connection id "0HMLNL4B05EQS" received FIN.
2022-10-27 00:23:27.667 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:23:27.696 +01:00 [DBG] Connection id "0HMLNL4B05EQS" stopped.
2022-10-27 00:23:27.724 +01:00 [DBG] Connection id "0HMLNL4B05EQS" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:23:31.263 +01:00 [DBG] Connection id "0HMLNL4B05EQT" accepted.
2022-10-27 00:23:31.265 +01:00 [DBG] Connection id "0HMLNL4B05EQT" started.
2022-10-27 00:23:31.295 +01:00 [DBG] Connection 0HMLNL4B05EQT established using the following protocol: "Tls13"
2022-10-27 00:23:31.342 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger - -
2022-10-27 00:23:31.379 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:23:31.451 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger - - - 301 0 - 112.3279ms
2022-10-27 00:23:31.464 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:23:31.528 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:23:31.664 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:23:31.668 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 204.3983ms
2022-10-27 00:23:31.715 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/swagger-ui.css - -
2022-10-27 00:23:31.716 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/swagger-ui-standalone-preset.js - -
2022-10-27 00:23:31.722 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:23:31.716 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/swagger-ui-bundle.js - -
2022-10-27 00:23:31.723 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:23:31.734 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 10.9707ms
2022-10-27 00:23:31.739 +01:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-10-27 00:23:31.744 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/swagger-ui.css - - - 200 143632 text/css 28.9058ms
2022-10-27 00:23:31.745 +01:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-10-27 00:23:31.761 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 44.5570ms
2022-10-27 00:23:31.772 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 50.2853ms
2022-10-27 00:23:31.780 +01:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-10-27 00:23:31.784 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 68.7339ms
2022-10-27 00:23:31.934 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/favicon-16x16.png - -
2022-10-27 00:23:31.936 +01:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2022-10-27 00:23:31.937 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/favicon-16x16.png - - - 200 665 image/png 3.0430ms
2022-10-27 00:23:32.032 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:23:32.188 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 155.7030ms
2022-10-27 00:23:34.309 +01:00 [DBG] Connection id "0HMLNL4B05EQU" accepted.
2022-10-27 00:23:34.311 +01:00 [DBG] Connection id "0HMLNL4B05EQU" started.
2022-10-27 00:23:34.320 +01:00 [DBG] Connection 0HMLNL4B05EQU established using the following protocol: "Tls13"
2022-10-27 00:23:34.342 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:23:34.345 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:23:34.373 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:23:34.379 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:23:34.382 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:23:34.657 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:23:34.660 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:23:34.664 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:23:34.669 +01:00 [DBG] Authorization was successful.
2022-10-27 00:23:34.672 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:23:34.689 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:23:34.693 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:23:34.695 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:23:34.696 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:23:34.698 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:23:34.700 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:23:34.702 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:23:34.870 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:23:34.898 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:23:35.853 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:23:35.946 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-27 00:23:36.314 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
            SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
            FROM SB-operational.Users AS u
            WHERE u.user_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-27 00:23:36.375 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:23:36.449 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (70ms).
2022-10-27 00:23:36.464 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:23:36.671 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:23:36.688 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:23:36.783 +01:00 [INF] Executed DbCommand (99ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:23:36.838 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:23:36.894 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:23:36.904 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:23:36.913 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:23:36.925 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:23:36.931 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:23:36.931 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:23:36.932 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:23:36.934 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:23:36.935 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:23:36.955 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 2249.9407ms
2022-10-27 00:23:36.959 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:23:36.964 +01:00 [DBG] Connection id "0HMLNL4B05EQU" completed keep alive response.
2022-10-27 00:23:36.967 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:23:36.972 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 2630.4760ms
2022-10-27 00:24:34.498 +01:00 [DBG] Connection id "0HMLNL4B05EQV" accepted.
2022-10-27 00:24:34.499 +01:00 [DBG] Connection id "0HMLNL4B05EQV" started.
2022-10-27 00:24:34.502 +01:00 [DBG] Connection 0HMLNL4B05EQV established using the following protocol: "Tls13"
2022-10-27 00:24:34.509 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/login application/json;+charset=utf-8 -
2022-10-27 00:24:34.510 +01:00 [DBG] POST requests are not supported
2022-10-27 00:24:34.513 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/login'
2022-10-27 00:24:34.514 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Login' is valid for the request path '/api/users/login'
2022-10-27 00:24:34.515 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-27 00:24:34.518 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:24:34.519 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:24:34.521 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-27 00:24:34.534 +01:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:24:34.538 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:24:34.539 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:24:34.541 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:24:34.543 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:24:34.544 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:24:34.546 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:24:34.558 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:24:34.572 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-27 00:24:34.576 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-27 00:24:34.579 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:24:34.585 +01:00 [DBG] Connection id "0HMLNL4B05EQV", Request id "0HMLNL4B05EQV:00000002": started reading request body.
2022-10-27 00:24:34.591 +01:00 [DBG] Connection id "0HMLNL4B05EQV", Request id "0HMLNL4B05EQV:00000002": done reading request body.
2022-10-27 00:24:34.596 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'
2022-10-27 00:24:34.599 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-27 00:24:34.601 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-27 00:24:34.602 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest' ...
2022-10-27 00:24:34.611 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LoginUserRequest'.
2022-10-27 00:24:34.653 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:24:34.660 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-27 00:24:34.679 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:24:34.687 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:34.689 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:24:34.692 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:34.694 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:34.696 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-27 00:24:34.707 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-27 00:24:34.711 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:34.714 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:34.716 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:34.718 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:34.722 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.UserId == __userId_0)'
2022-10-27 00:24:34.726 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:24:34.729 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:34.730 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:24:34.732 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:34.733 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:34.734 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-27 00:24:34.738 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-27 00:24:34.743 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:34.753 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:34.754 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:34.756 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:34.802 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:34.818 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:34.827 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:24:34.830 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:24:34.845 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:24:34.871 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:34.873 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:34.877 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:24:34.887 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:24:34.931 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:34.933 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:24:34.935 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-27 00:24:34.949 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-27 00:24:34.958 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:34.965 +01:00 [DBG] Committing transaction.
2022-10-27 00:24:34.979 +01:00 [DBG] Committed transaction.
2022-10-27 00:24:34.985 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:34.987 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:34.993 +01:00 [DBG] Disposing transaction.
2022-10-27 00:24:34.998 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:35.004 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:24:35.007 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:24:35.009 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:24:35.010 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:24:35.011 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:24:35.012 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:24:35.014 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:24:35.017 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API) in 471.3311ms
2022-10-27 00:24:35.019 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Login (SimpleBank.AcctManage.API)'
2022-10-27 00:24:35.020 +01:00 [DBG] Connection id "0HMLNL4B05EQV" completed keep alive response.
2022-10-27 00:24:35.021 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:24:35.022 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 513.4795ms
2022-10-27 00:24:35.044 +01:00 [DBG] Connection id "0HMLNL4B05ER0" accepted.
2022-10-27 00:24:35.049 +01:00 [DBG] Connection id "0HMLNL4B05ER0" started.
2022-10-27 00:24:35.053 +01:00 [DBG] Connection 0HMLNL4B05ER0 established using the following protocol: "Tls13"
2022-10-27 00:24:35.055 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:24:35.057 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:24:35.058 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:24:35.060 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:24:35.062 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:24:35.064 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:24:35.065 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:24:35.066 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:24:35.067 +01:00 [DBG] Authorization was successful.
2022-10-27 00:24:35.068 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:24:35.069 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:24:35.073 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:24:35.074 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:24:35.076 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:24:35.078 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:24:35.079 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:24:35.081 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:24:35.087 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:24:35.096 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:24:35.103 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:35.104 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:24:35.105 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:35.106 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:35.107 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:24:35.112 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:24:35.115 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:35.116 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:35.117 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:35.118 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:35.120 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:24:35.122 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:24:35.123 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:24:35.124 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:24:35.124 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:24:35.126 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:24:35.127 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 46.1726ms
2022-10-27 00:24:35.129 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:24:35.130 +01:00 [DBG] Connection id "0HMLNL4B05ER0" completed keep alive response.
2022-10-27 00:24:35.131 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:24:35.132 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 76.9068ms
2022-10-27 00:24:38.895 +01:00 [DBG] Connection id "0HMLNL4B05ER1" accepted.
2022-10-27 00:24:38.898 +01:00 [DBG] Connection id "0HMLNL4B05ER1" started.
2022-10-27 00:24:38.902 +01:00 [DBG] Connection 0HMLNL4B05ER1 established using the following protocol: "Tls13"
2022-10-27 00:24:38.904 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/ - -
2022-10-27 00:24:38.904 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:24:38.905 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/'
2022-10-27 00:24:38.906 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts/'
2022-10-27 00:24:38.908 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:24:38.910 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:24:38.911 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:24:38.912 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:24:38.913 +01:00 [DBG] Authorization was successful.
2022-10-27 00:24:38.914 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:24:38.918 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:24:38.920 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:24:38.922 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:24:38.923 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:24:38.925 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:24:38.927 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:24:38.929 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:24:38.931 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:24:38.934 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:24:38.937 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(account => account.UserId == __userId_0)'
2022-10-27 00:24:38.941 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
        SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
        FROM SB-operational.Accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-27 00:24:38.946 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:38.947 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:24:38.948 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:38.949 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:38.950 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:24:38.955 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:24:38.970 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:38.983 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:38.986 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:38.987 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:38.989 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:38.990 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:38.992 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:38.993 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:38.994 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:38.996 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:38.997 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:24:38.999 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:39.000 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:39.002 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:24:39.006 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:24:39.009 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:39.010 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:39.011 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:39.014 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:24:39.017 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:24:39.017 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:24:39.019 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:24:39.020 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:24:39.021 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-27 00:24:39.031 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 102.4827ms
2022-10-27 00:24:39.034 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:24:39.035 +01:00 [DBG] Connection id "0HMLNL4B05ER1" completed keep alive response.
2022-10-27 00:24:39.037 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:24:39.038 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/ - - - 200 - application/json;+charset=utf-8 134.2564ms
2022-10-27 00:24:43.576 +01:00 [DBG] Connection id "0HMLNL4B05ER2" accepted.
2022-10-27 00:24:43.578 +01:00 [DBG] Connection id "0HMLNL4B05ER2" started.
2022-10-27 00:24:43.583 +01:00 [DBG] Connection 0HMLNL4B05ER2 established using the following protocol: "Tls13"
2022-10-27 00:24:43.585 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 -
2022-10-27 00:24:43.586 +01:00 [DBG] POST requests are not supported
2022-10-27 00:24:43.587 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/renew'
2022-10-27 00:24:43.588 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/users/renew'
2022-10-27 00:24:43.590 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:24:43.591 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:24:43.592 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:24:43.593 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:24:43.597 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:24:43.600 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:24:43.601 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:24:43.603 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:24:43.604 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:24:43.606 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:24:43.608 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:24:43.610 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:24:43.611 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:24:43.613 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-27 00:24:43.615 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:24:43.616 +01:00 [DBG] Connection id "0HMLNL4B05ER2", Request id "0HMLNL4B05ER2:00000002": started reading request body.
2022-10-27 00:24:43.618 +01:00 [DBG] Connection id "0HMLNL4B05ER2", Request id "0HMLNL4B05ER2:00000002": done reading request body.
2022-10-27 00:24:43.619 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-27 00:24:43.621 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:24:43.622 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:24:43.623 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:24:43.625 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:24:43.628 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:24:43.631 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-27 00:24:43.635 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:24:43.637 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:43.638 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:24:43.639 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:43.640 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:43.642 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:24:43.647 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:24:43.650 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:43.652 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:43.653 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:43.654 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:43.668 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:43.675 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:43.677 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:24:43.678 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:24:43.681 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:24:43.683 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:43.684 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:43.685 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:24:43.686 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:24:43.694 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:43.695 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:24:43.698 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:24:43.703 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:24:43.721 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-27 00:24:43.727 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:43.728 +01:00 [DBG] Committing transaction.
2022-10-27 00:24:43.732 +01:00 [DBG] Committed transaction.
2022-10-27 00:24:43.733 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:43.734 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:43.735 +01:00 [DBG] Disposing transaction.
2022-10-27 00:24:43.739 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:43.741 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:24:43.743 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:24:43.745 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:24:43.746 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:24:43.747 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:24:43.748 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:24:43.750 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:24:43.752 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 143.7349ms
2022-10-27 00:24:43.754 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:24:43.755 +01:00 [DBG] Connection id "0HMLNL4B05ER2" completed keep alive response.
2022-10-27 00:24:43.756 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:24:43.757 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 171.7324ms
2022-10-27 00:24:43.770 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/ - -
2022-10-27 00:24:43.771 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:24:43.772 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/'
2022-10-27 00:24:43.773 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts/'
2022-10-27 00:24:43.775 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:24:43.776 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:24:43.777 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:24:43.778 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:24:43.779 +01:00 [DBG] Authorization was successful.
2022-10-27 00:24:43.781 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:24:43.782 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:24:43.784 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:24:43.786 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:24:43.788 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:24:43.790 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:24:43.791 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:24:43.793 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:24:43.795 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:24:43.797 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:24:43.799 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:43.800 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:24:43.802 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:43.803 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:43.804 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:24:43.808 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:24:43.810 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:43.811 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:43.813 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:43.815 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:43.816 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:43.818 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:43.819 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:43.820 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:43.821 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:43.823 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:43.824 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:24:43.825 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:43.826 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:43.828 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:24:43.832 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:24:43.835 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:43.836 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:43.837 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:43.839 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:24:43.841 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:24:43.842 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:24:43.843 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:24:43.844 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:24:43.845 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-27 00:24:43.847 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 53.3524ms
2022-10-27 00:24:43.848 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:24:43.849 +01:00 [DBG] Connection id "0HMLNL4B05ER2" completed keep alive response.
2022-10-27 00:24:43.850 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:24:43.851 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/ - - - 200 - application/json;+charset=utf-8 81.0886ms
2022-10-27 00:24:49.366 +01:00 [DBG] Connection id "0HMLNL4B05EQU" received FIN.
2022-10-27 00:24:49.369 +01:00 [DBG] Connection id "0HMLNL4B05EQU" disconnecting.
2022-10-27 00:24:49.370 +01:00 [DBG] Connection id "0HMLNL4B05EQU" sending FIN because: "The client closed the connection."
2022-10-27 00:24:49.382 +01:00 [DBG] Connection id "0HMLNL4B05EQU" stopped.
2022-10-27 00:24:53.021 +01:00 [DBG] Connection id "0HMLNL4B05ER3" accepted.
2022-10-27 00:24:53.023 +01:00 [DBG] Connection id "0HMLNL4B05ER3" started.
2022-10-27 00:24:53.027 +01:00 [DBG] Connection 0HMLNL4B05ER3 established using the following protocol: "Tls13"
2022-10-27 00:24:53.028 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:24:53.029 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:24:53.032 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:24:53.034 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:24:53.036 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:24:53.037 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:24:53.038 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:24:53.040 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:24:53.041 +01:00 [DBG] Authorization was successful.
2022-10-27 00:24:53.042 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:24:53.043 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:24:53.045 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:24:53.047 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:24:53.048 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:24:53.050 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:24:53.052 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:24:53.053 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:24:53.055 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:24:53.058 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:24:53.060 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:53.061 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:24:53.063 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:53.064 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:53.065 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:24:53.069 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-27 00:24:53.072 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:53.073 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:53.074 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:53.075 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:53.076 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:24:53.079 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:24:53.080 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:24:53.081 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:24:53.082 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:24:53.083 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.CreateUserResponse'.
2022-10-27 00:24:53.085 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 31.8414ms
2022-10-27 00:24:53.086 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:24:53.088 +01:00 [DBG] Connection id "0HMLNL4B05ER3" completed keep alive response.
2022-10-27 00:24:53.088 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:24:53.090 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 200 - application/json;+charset=utf-8 61.5932ms
2022-10-27 00:24:54.643 +01:00 [DBG] Connection id "0HMLNL4B05ER4" accepted.
2022-10-27 00:24:54.644 +01:00 [DBG] Connection id "0HMLNL4B05ER4" started.
2022-10-27 00:24:54.648 +01:00 [DBG] Connection 0HMLNL4B05ER4 established using the following protocol: "Tls13"
2022-10-27 00:24:54.650 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/logout application/json;+charset=utf-8 -
2022-10-27 00:24:54.652 +01:00 [DBG] POST requests are not supported
2022-10-27 00:24:54.654 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/logout'
2022-10-27 00:24:54.656 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Logout' is valid for the request path '/api/users/logout'
2022-10-27 00:24:54.660 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-27 00:24:54.663 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:24:54.665 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:24:54.667 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:24:54.668 +01:00 [DBG] Authorization was successful.
2022-10-27 00:24:54.669 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-27 00:24:54.672 +01:00 [INF] Route matched with {action = "Logout", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:24:54.674 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:24:54.676 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:24:54.678 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:24:54.680 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:24:54.682 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:24:54.683 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:24:54.685 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:24:54.686 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-27 00:24:54.687 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-27 00:24:54.689 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:24:54.691 +01:00 [DBG] Connection id "0HMLNL4B05ER4", Request id "0HMLNL4B05ER4:00000002": started reading request body.
2022-10-27 00:24:54.692 +01:00 [DBG] Connection id "0HMLNL4B05ER4", Request id "0HMLNL4B05ER4:00000002": done reading request body.
2022-10-27 00:24:54.695 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'
2022-10-27 00:24:54.696 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-27 00:24:54.697 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-27 00:24:54.699 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest' ...
2022-10-27 00:24:54.701 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.LogoutUserRequest'.
2022-10-27 00:24:54.705 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:24:54.708 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.Id == __userTokenId_0)'
2022-10-27 00:24:54.712 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.user_token_id == @__userTokenId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:24:54.714 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:54.715 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:24:54.716 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:54.718 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:54.719 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-27 00:24:54.723 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-27 00:24:54.726 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:54.727 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:54.728 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:54.729 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:54.730 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:54.732 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:24:54.733 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:24:54.734 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:24:54.735 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:54.736 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:54.737 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:24:54.738 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:24:54.739 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:24:54.740 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:24:54.741 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-27 00:24:54.745 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-27 00:24:54.747 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:24:54.748 +01:00 [DBG] Committing transaction.
2022-10-27 00:24:54.751 +01:00 [DBG] Committed transaction.
2022-10-27 00:24:54.752 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:24:54.753 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:24:54.754 +01:00 [DBG] Disposing transaction.
2022-10-27 00:24:54.755 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:24:54.757 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:24:54.761 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:24:54.764 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:24:54.765 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:24:54.766 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:24:54.767 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-27 00:24:54.768 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2022-10-27 00:24:54.770 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API) in 86.7716ms
2022-10-27 00:24:54.771 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.Logout (SimpleBank.AcctManage.API)'
2022-10-27 00:24:54.773 +01:00 [DBG] Connection id "0HMLNL4B05ER4" completed keep alive response.
2022-10-27 00:24:54.774 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:24:54.775 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/logout application/json;+charset=utf-8 - - 200 - text/plain;+charset=utf-8 125.3159ms
2022-10-27 00:24:56.404 +01:00 [DBG] Connection id "0HMLNL4B05ER4" received FIN.
2022-10-27 00:24:56.404 +01:00 [DBG] Connection id "0HMLNL4B05ER3" received FIN.
2022-10-27 00:24:56.404 +01:00 [DBG] Connection id "0HMLNL4B05ER1" received FIN.
2022-10-27 00:24:56.405 +01:00 [DBG] Connection id "0HMLNL4B05EQV" received FIN.
2022-10-27 00:24:56.406 +01:00 [DBG] Connection id "0HMLNL4B05ER0" received FIN.
2022-10-27 00:24:56.406 +01:00 [DBG] Connection id "0HMLNL4B05ER4" disconnecting.
2022-10-27 00:24:56.408 +01:00 [DBG] Connection id "0HMLNL4B05ER3" disconnecting.
2022-10-27 00:24:56.425 +01:00 [DBG] Connection id "0HMLNL4B05ER3" sending FIN because: "The client closed the connection."
2022-10-27 00:24:56.422 +01:00 [DBG] Connection id "0HMLNL4B05ER1" disconnecting.
2022-10-27 00:24:56.423 +01:00 [DBG] Connection id "0HMLNL4B05ER4" sending FIN because: "The client closed the connection."
2022-10-27 00:24:56.437 +01:00 [DBG] Connection id "0HMLNL4B05EQV" disconnecting.
2022-10-27 00:24:56.436 +01:00 [DBG] Connection id "0HMLNL4B05ER1" sending FIN because: "The client closed the connection."
2022-10-27 00:24:56.446 +01:00 [DBG] Connection id "0HMLNL4B05ER0" disconnecting.
2022-10-27 00:24:56.442 +01:00 [DBG] Connection id "0HMLNL4B05ER3" stopped.
2022-10-27 00:24:56.442 +01:00 [DBG] Connection id "0HMLNL4B05ER4" stopped.
2022-10-27 00:24:56.440 +01:00 [DBG] Connection id "0HMLNL4B05EQV" stopped.
2022-10-27 00:24:56.452 +01:00 [DBG] Connection id "0HMLNL4B05ER1" stopped.
2022-10-27 00:24:56.449 +01:00 [DBG] Connection id "0HMLNL4B05ER0" stopped.
2022-10-27 00:24:56.478 +01:00 [DBG] Connection id "0HMLNL4B05EQV" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:24:56.494 +01:00 [DBG] Connection id "0HMLNL4B05ER0" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:25:00.740 +01:00 [DBG] Connection id "0HMLNL4B05ER5" accepted.
2022-10-27 00:25:00.742 +01:00 [DBG] Connection id "0HMLNL4B05ER5" started.
2022-10-27 00:25:00.744 +01:00 [DBG] Connection 0HMLNL4B05ER5 established using the following protocol: "Tls13"
2022-10-27 00:25:00.746 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891 - -
2022-10-27 00:25:00.747 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:25:00.748 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891'
2022-10-27 00:25:00.749 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts/{accountId}' is valid for the request path '/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891'
2022-10-27 00:25:00.750 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:25:00.752 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:25:00.752 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:25:00.753 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:25:00.754 +01:00 [DBG] Authorization was successful.
2022-10-27 00:25:00.755 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:25:00.759 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:25:00.762 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:25:00.764 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:25:00.766 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:25:00.767 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:25:00.769 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:25:00.771 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:25:00.772 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:25:00.774 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:25:00.776 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-27 00:25:00.779 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:25:00.780 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:25:00.782 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:25:00.783 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:25:00.787 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:25:00.789 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-27 00:25:00.793 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Account>(
    asyncEnumerable: new SingleQueryingEnumerable<Account>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.account_id, a.balance, a.created_at, a.currency, a.user_id
            FROM SB-operational.Accounts AS a
            WHERE a.account_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-27 00:25:00.796 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:25:00.798 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:25:00.799 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:25:00.800 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:25:00.802 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:25:00.806 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:25:00.808 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:25:00.811 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:25:00.811 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:25:00.813 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:25:00.818 +01:00 [DBG] Compiling query expression: 
'DbSet<Movement>()
    .Where(movement => movement.AccountId == __accountId_0)'
2022-10-27 00:25:00.822 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Movement>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Movement.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Movement.AccountId (Guid) Required FK Index, 1], [Property: Movement.Amount (decimal) Required, 2], [Property: Movement.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3] }
        SELECT m.movement_id, m.account_id, m.amount, m.created_at
        FROM SB-operational.Movements AS m
        WHERE m.account_id == @__accountId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movement>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-27 00:25:00.825 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:25:00.826 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:25:00.827 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:25:00.828 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:25:00.829 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:25:00.835 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:25:00.838 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:25:00.839 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:25:00.840 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:25:00.842 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:25:00.844 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:25:00.845 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:25:00.846 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:25:00.847 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:25:00.849 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims'.
2022-10-27 00:25:00.852 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 81.8282ms
2022-10-27 00:25:00.854 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:25:00.855 +01:00 [DBG] Connection id "0HMLNL4B05ER5" completed keep alive response.
2022-10-27 00:25:00.856 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:25:00.857 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891 - - - 200 - application/json;+charset=utf-8 111.7156ms
2022-10-27 00:25:03.394 +01:00 [DBG] Connection id "0HMLNL4B05ER6" accepted.
2022-10-27 00:25:03.395 +01:00 [DBG] Connection id "0HMLNL4B05ER6" started.
2022-10-27 00:25:03.398 +01:00 [DBG] Connection 0HMLNL4B05ER6 established using the following protocol: "Tls13"
2022-10-27 00:25:03.399 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/268f578c-c52e-49cc-afed-970579676dba - -
2022-10-27 00:25:03.401 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:25:03.402 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/268f578c-c52e-49cc-afed-970579676dba'
2022-10-27 00:25:03.403 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts/{accountId}' is valid for the request path '/api/accounts/268f578c-c52e-49cc-afed-970579676dba'
2022-10-27 00:25:03.405 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:25:03.406 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:25:03.407 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:25:03.408 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:25:03.409 +01:00 [DBG] Authorization was successful.
2022-10-27 00:25:03.410 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:25:03.411 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:25:03.413 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:25:03.415 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:25:03.417 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:25:03.419 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:25:03.420 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:25:03.422 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:25:03.424 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:25:03.425 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:25:03.426 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-27 00:25:03.428 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:25:03.429 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:25:03.430 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:25:03.431 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:25:03.434 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:25:03.436 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:25:03.437 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:25:03.439 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:25:03.440 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:25:03.441 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:25:03.445 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:25:03.448 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:25:03.450 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:25:03.451 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:25:03.452 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:25:03.453 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:25:03.454 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:25:03.455 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:25:03.457 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:25:03.458 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:25:03.461 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:25:03.466 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:25:03.486 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:25:03.489 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:25:03.489 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:25:03.491 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:25:03.492 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:25:03.495 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:25:03.495 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:25:03.497 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:25:03.498 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:25:03.500 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims'.
2022-10-27 00:25:03.502 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 80.1932ms
2022-10-27 00:25:03.504 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:25:03.505 +01:00 [DBG] Connection id "0HMLNL4B05ER6" completed keep alive response.
2022-10-27 00:25:03.506 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:25:03.507 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/268f578c-c52e-49cc-afed-970579676dba - - - 200 - application/json;+charset=utf-8 107.7955ms
2022-10-27 00:25:18.399 +01:00 [DBG] Connection id "0HMLNL4B05ER5" received FIN.
2022-10-27 00:25:18.399 +01:00 [DBG] Connection id "0HMLNL4B05ER6" received FIN.
2022-10-27 00:25:18.404 +01:00 [DBG] Connection id "0HMLNL4B05ER6" sending FIN because: "The client closed the connection."
2022-10-27 00:25:18.402 +01:00 [DBG] Connection id "0HMLNL4B05ER5" disconnecting.
2022-10-27 00:25:18.400 +01:00 [DBG] Connection id "0HMLNL4B05ER2" received FIN.
2022-10-27 00:25:18.406 +01:00 [DBG] Connection id "0HMLNL4B05ER6" disconnecting.
2022-10-27 00:25:18.407 +01:00 [DBG] Connection id "0HMLNL4B05ER5" sending FIN because: "The client closed the connection."
2022-10-27 00:25:18.409 +01:00 [DBG] Connection id "0HMLNL4B05ER2" sending FIN because: "The client closed the connection."
2022-10-27 00:25:18.410 +01:00 [DBG] Connection id "0HMLNL4B05ER6" stopped.
2022-10-27 00:25:18.413 +01:00 [DBG] Connection id "0HMLNL4B05ER2" disconnecting.
2022-10-27 00:25:18.416 +01:00 [DBG] Connection id "0HMLNL4B05ER2" stopped.
2022-10-27 00:25:18.427 +01:00 [DBG] Connection id "0HMLNL4B05ER5" stopped.
2022-10-27 00:26:34.629 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-27 00:26:34.732 +01:00 [DBG] Hosting starting
2022-10-27 00:26:34.772 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-27 00:26:34.776 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-27 00:26:34.781 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-27 00:26:34.782 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-27 00:26:34.788 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-27 00:26:34.794 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-27 00:26:34.795 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-27 00:26:34.803 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-27 00:26:34.808 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:26:34.812 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-27 00:26:34.814 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-27 00:26:34.818 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-27 00:26:34.822 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-27 00:26:34.827 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-27 00:26:34.829 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-27 00:26:35.019 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-27 00:26:35.086 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-27 00:26:35.088 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-27 00:26:35.089 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-27 00:26:35.091 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-27 00:26:35.092 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-27 00:26:35.094 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-27 00:26:35.095 +01:00 [INF] Hosting environment: Development
2022-10-27 00:26:35.096 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-27 00:26:35.098 +01:00 [DBG] Hosting started
2022-10-27 00:26:35.450 +01:00 [DBG] Connection id "0HMLNL632GUCL" received FIN.
2022-10-27 00:26:35.462 +01:00 [DBG] Connection id "0HMLNL632GUCL" accepted.
2022-10-27 00:26:35.465 +01:00 [DBG] Connection id "0HMLNL632GUCL" started.
2022-10-27 00:26:35.482 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-27 00:26:35.527 +01:00 [DBG] Connection id "0HMLNL632GUCL" stopped.
2022-10-27 00:26:35.531 +01:00 [DBG] Connection id "0HMLNL632GUCL" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-27 00:26:40.283 +01:00 [DBG] Connection id "0HMLNL632GUCM" accepted.
2022-10-27 00:26:40.285 +01:00 [DBG] Connection id "0HMLNL632GUCM" started.
2022-10-27 00:26:40.324 +01:00 [DBG] Connection 0HMLNL632GUCM established using the following protocol: "Tls13"
2022-10-27 00:26:40.359 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 -
2022-10-27 00:26:40.377 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-27 00:26:40.419 +01:00 [DBG] POST requests are not supported
2022-10-27 00:26:40.447 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/renew'
2022-10-27 00:26:40.453 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/users/renew'
2022-10-27 00:26:40.456 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:26:40.536 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:26:40.541 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:26:40.544 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:26:40.571 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:26:40.576 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:26:40.577 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:26:40.579 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:26:40.581 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:26:40.583 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:26:40.585 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:26:40.765 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-27 00:26:40.791 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:26:40.824 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:26:40.830 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-27 00:26:40.833 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:26:40.855 +01:00 [DBG] Connection id "0HMLNL632GUCM", Request id "0HMLNL632GUCM:00000002": started reading request body.
2022-10-27 00:26:40.862 +01:00 [DBG] Connection id "0HMLNL632GUCM", Request id "0HMLNL632GUCM:00000002": done reading request body.
2022-10-27 00:26:40.868 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-27 00:26:40.870 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:26:40.871 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:26:40.873 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:26:40.881 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:26:41.949 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:26:42.002 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.RefreshToken == __refreshToken_0)'
2022-10-27 00:26:42.359 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
        SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
        FROM SB-auth.UserTokens AS u
        WHERE u.refresh_token == @__refreshToken_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-27 00:26:42.407 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:26:42.485 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (73ms).
2022-10-27 00:26:42.497 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:26:42.781 +01:00 [DBG] Connection id "0HMLNL632GUCN" accepted.
2022-10-27 00:26:42.789 +01:00 [DBG] Connection id "0HMLNL632GUCN" started.
2022-10-27 00:26:42.794 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:26:42.801 +01:00 [DBG] Connection 0HMLNL632GUCN established using the following protocol: "Tls13"
2022-10-27 00:26:42.820 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:26:42.833 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-27 00:26:42.927 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-27 00:26:42.935 +01:00 [INF] Executed DbCommand (126ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:26:42.993 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:26:43.039 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:26:43.045 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-27 00:26:43.045 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:26:43.053 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 218.5464ms
2022-10-27 00:26:43.070 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:26:43.100 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-27 00:26:43.102 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-27 00:26:43.119 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 16.7926ms
2022-10-27 00:26:43.173 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 72.4241ms
2022-10-27 00:26:43.276 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:26:43.291 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:26:43.301 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:26:43.305 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:26:43.324 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:26:43.336 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-27 00:26:43.367 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:26:43.375 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:26:43.384 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:26:43.398 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:26:43.467 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:26:43.468 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:26:43.472 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:26:43.498 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:26:43.519 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 182.4442ms
2022-10-27 00:26:43.529 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-27 00:26:43.542 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:26:43.556 +01:00 [DBG] Committing transaction.
2022-10-27 00:26:43.573 +01:00 [DBG] Committed transaction.
2022-10-27 00:26:43.582 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:26:43.585 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:26:43.591 +01:00 [DBG] Disposing transaction.
2022-10-27 00:26:43.606 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:26:43.611 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:26:43.625 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:26:43.629 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:26:43.630 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:26:43.631 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:26:43.632 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:26:43.634 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:26:43.648 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 3059.7831ms
2022-10-27 00:26:43.653 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:26:43.656 +01:00 [DBG] Connection id "0HMLNL632GUCM" completed keep alive response.
2022-10-27 00:26:43.660 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:26:43.664 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3308.4629ms
2022-10-27 00:26:43.687 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/users/profile - -
2022-10-27 00:26:43.688 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:26:43.691 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/profile'
2022-10-27 00:26:43.693 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Profile' is valid for the request path '/api/users/profile'
2022-10-27 00:26:43.694 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-27 00:26:43.696 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:26:43.697 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:26:43.703 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-27 00:26:43.711 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-27 00:26:43.712 +01:00 [DBG] Connection id "0HMLNL632GUCM" completed keep alive response.
2022-10-27 00:26:43.713 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/users/profile - - - 401 0 - 25.5446ms
2022-10-27 00:26:57.723 +01:00 [DBG] Connection id "0HMLNL632GUCO" accepted.
2022-10-27 00:26:57.724 +01:00 [DBG] Connection id "0HMLNL632GUCO" started.
2022-10-27 00:26:57.729 +01:00 [DBG] Connection 0HMLNL632GUCO established using the following protocol: "Tls13"
2022-10-27 00:26:57.732 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/ - -
2022-10-27 00:26:57.734 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:26:57.736 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/'
2022-10-27 00:26:57.737 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts' is valid for the request path '/api/accounts/'
2022-10-27 00:26:57.739 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:26:57.818 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:26:57.821 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:26:57.822 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:26:57.824 +01:00 [DBG] Authorization was successful.
2022-10-27 00:26:57.825 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:26:57.829 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:26:57.832 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:26:57.833 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:26:57.835 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:26:57.837 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:26:57.838 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:26:57.840 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:26:57.843 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:26:57.884 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:26:57.888 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(account => account.UserId == __userId_0)'
2022-10-27 00:26:57.894 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
        SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
        FROM SB-operational.Accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-27 00:26:57.897 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:26:57.898 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:26:57.900 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:26:57.901 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:26:57.902 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:26:57.906 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:26:57.923 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:26:57.938 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:26:57.940 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:26:57.941 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:26:57.943 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:26:57.945 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:26:57.947 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:26:57.948 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:26:57.949 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:26:57.953 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:26:57.954 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:26:57.956 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:26:57.957 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:26:57.958 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:26:57.962 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-27 00:26:57.964 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:26:57.965 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:26:57.966 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:26:57.968 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:26:57.971 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:26:57.972 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:26:57.973 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:26:57.974 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:26:57.975 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-27 00:26:57.985 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 145.2045ms
2022-10-27 00:26:57.987 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-27 00:26:57.988 +01:00 [DBG] Connection id "0HMLNL632GUCO" completed keep alive response.
2022-10-27 00:26:57.989 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:26:57.991 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/ - - - 200 - application/json;+charset=utf-8 258.8509ms
2022-10-27 00:27:06.509 +01:00 [DBG] Connection id "0HMLNL632GUCP" accepted.
2022-10-27 00:27:06.510 +01:00 [DBG] Connection id "0HMLNL632GUCP" started.
2022-10-27 00:27:06.512 +01:00 [DBG] Connection 0HMLNL632GUCP established using the following protocol: "Tls13"
2022-10-27 00:27:06.514 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891 - -
2022-10-27 00:27:06.515 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:27:06.516 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891'
2022-10-27 00:27:06.517 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts/{accountId}' is valid for the request path '/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891'
2022-10-27 00:27:06.519 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:06.520 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:27:06.521 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:06.522 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:06.523 +01:00 [DBG] Authorization was successful.
2022-10-27 00:27:06.525 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:06.529 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:27:06.532 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:27:06.533 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:27:06.535 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:27:06.537 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:27:06.538 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:27:06.541 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:06.544 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:06.547 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:06.549 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-27 00:27:06.551 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:06.553 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:06.554 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:06.556 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:06.570 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:27:06.593 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-27 00:27:06.684 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Account>(
    asyncEnumerable: new SingleQueryingEnumerable<Account>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.account_id, a.balance, a.created_at, a.currency, a.user_id
            FROM SB-operational.Accounts AS a
            WHERE a.account_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-27 00:27:06.700 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:06.701 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:27:06.703 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:06.704 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:06.705 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:06.709 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:06.714 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:06.717 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:06.718 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:06.720 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:06.724 +01:00 [DBG] Compiling query expression: 
'DbSet<Movement>()
    .Where(movement => movement.AccountId == __accountId_0)'
2022-10-27 00:27:06.728 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Movement>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Movement.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Movement.AccountId (Guid) Required FK Index, 1], [Property: Movement.Amount (decimal) Required, 2], [Property: Movement.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3] }
        SELECT m.movement_id, m.account_id, m.amount, m.created_at
        FROM SB-operational.Movements AS m
        WHERE m.account_id == @__accountId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movement>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-27 00:27:06.731 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:06.732 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:27:06.733 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:06.734 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:06.736 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:06.739 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:06.741 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:06.742 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:06.743 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:06.745 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:27:06.748 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:27:06.748 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:27:06.749 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:27:06.750 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:27:06.752 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims'.
2022-10-27 00:27:06.755 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 214.4106ms
2022-10-27 00:27:06.757 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:06.759 +01:00 [DBG] Connection id "0HMLNL632GUCP" completed keep alive response.
2022-10-27 00:27:06.759 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:27:06.761 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891 - - - 200 - application/json;+charset=utf-8 246.7562ms
2022-10-27 00:27:13.284 +01:00 [DBG] Connection id "0HMLNL632GUCQ" accepted.
2022-10-27 00:27:13.286 +01:00 [DBG] Connection id "0HMLNL632GUCQ" started.
2022-10-27 00:27:13.288 +01:00 [DBG] Connection 0HMLNL632GUCQ established using the following protocol: "Tls13"
2022-10-27 00:27:13.290 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/7847d3a3-30e7-40bf-830d-7a98255d143c - -
2022-10-27 00:27:13.290 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:27:13.291 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/7847d3a3-30e7-40bf-830d-7a98255d143c'
2022-10-27 00:27:13.292 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts/{accountId}' is valid for the request path '/api/accounts/7847d3a3-30e7-40bf-830d-7a98255d143c'
2022-10-27 00:27:13.294 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:13.295 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:27:13.296 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:13.298 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:13.299 +01:00 [DBG] Authorization was successful.
2022-10-27 00:27:13.299 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:13.301 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:27:13.303 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:27:13.305 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:27:13.306 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:27:13.308 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:27:13.310 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:27:13.311 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:13.317 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:13.319 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:13.320 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-27 00:27:13.322 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:13.323 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:13.325 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:13.326 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:13.328 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:27:13.331 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:13.332 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:27:13.333 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:13.334 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:13.336 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:13.339 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:13.343 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:13.344 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:13.345 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:13.346 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:13.348 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:13.349 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:27:13.350 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:13.351 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:13.353 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:13.356 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:13.360 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:13.382 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:13.386 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:13.387 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:13.389 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:13.391 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:27:13.394 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:27:13.395 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:27:13.395 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:27:13.397 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:27:13.398 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims'.
2022-10-27 00:27:13.401 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 89.5597ms
2022-10-27 00:27:13.404 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:13.405 +01:00 [DBG] Connection id "0HMLNL632GUCQ" completed keep alive response.
2022-10-27 00:27:13.406 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:27:13.408 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/7847d3a3-30e7-40bf-830d-7a98255d143c - - - 200 - application/json;+charset=utf-8 117.9310ms
2022-10-27 00:27:22.969 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891 - -
2022-10-27 00:27:22.971 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:27:22.971 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891'
2022-10-27 00:27:22.973 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts/{accountId}' is valid for the request path '/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891'
2022-10-27 00:27:22.975 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:22.976 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:27:22.977 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:22.978 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:22.979 +01:00 [DBG] Authorization was successful.
2022-10-27 00:27:22.980 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:22.981 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:27:22.983 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:27:22.984 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:27:22.986 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:27:22.988 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:27:22.990 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:27:22.994 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:22.997 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:22.999 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:23.000 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-27 00:27:23.002 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:23.004 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:23.005 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:23.007 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:23.010 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:27:23.014 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:23.015 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:27:23.016 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:23.017 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:23.019 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:23.023 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:23.027 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:23.028 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:23.029 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:23.030 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:23.032 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:23.033 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:27:23.034 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:23.035 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:23.037 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:23.040 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:23.044 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:23.044 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:23.046 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:23.047 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:27:23.049 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:27:23.050 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:27:23.051 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:27:23.052 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:27:23.053 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims'.
2022-10-27 00:27:23.055 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 60.5095ms
2022-10-27 00:27:23.057 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:23.058 +01:00 [DBG] Connection id "0HMLNL632GUCP" completed keep alive response.
2022-10-27 00:27:23.059 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:27:23.060 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891 - - - 200 - application/json;+charset=utf-8 90.7973ms
2022-10-27 00:27:46.660 +01:00 [DBG] Connection id "0HMLNL632GUCR" accepted.
2022-10-27 00:27:46.661 +01:00 [DBG] Connection id "0HMLNL632GUCR" started.
2022-10-27 00:27:46.667 +01:00 [DBG] Connection 0HMLNL632GUCR established using the following protocol: "Tls13"
2022-10-27 00:27:46.670 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 -
2022-10-27 00:27:46.671 +01:00 [DBG] POST requests are not supported
2022-10-27 00:27:46.672 +01:00 [DBG] 1 candidate(s) found for the request path '/api/users/renew'
2022-10-27 00:27:46.673 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/Users/Renew' is valid for the request path '/api/users/renew'
2022-10-27 00:27:46.675 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:27:46.676 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:27:46.677 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-27 00:27:46.678 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:27:46.679 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API).
2022-10-27 00:27:46.686 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:27:46.687 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:27:46.689 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:27:46.692 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:27:46.694 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:27:46.695 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:27:46.697 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.UsersController (SimpleBank.AcctManage.API)
2022-10-27 00:27:46.710 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:27:46.711 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' using the name '' in request data ...
2022-10-27 00:27:46.713 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-27 00:27:46.715 +01:00 [DBG] Connection id "0HMLNL632GUCR", Request id "0HMLNL632GUCR:00000002": started reading request body.
2022-10-27 00:27:46.717 +01:00 [DBG] Connection id "0HMLNL632GUCR", Request id "0HMLNL632GUCR:00000002": done reading request body.
2022-10-27 00:27:46.718 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'
2022-10-27 00:27:46.719 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:27:46.721 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:27:46.722 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest' ...
2022-10-27 00:27:46.724 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.Requests.RenewRequest'.
2022-10-27 00:27:46.725 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:27:46.728 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:46.729 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:27:46.731 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:46.732 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:46.733 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:27:46.736 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-27 00:27:46.738 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:46.739 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:46.740 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:46.741 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:46.743 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:46.744 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:46.746 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:27:46.747 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-27 00:27:46.748 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-27 00:27:46.749 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:46.750 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:46.751 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-27 00:27:46.752 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-27 00:27:46.753 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:46.754 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:27:46.755 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:27:46.760 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = DateTime2), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-27 00:27:46.763 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-27 00:27:46.765 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:46.766 +01:00 [DBG] Committing transaction.
2022-10-27 00:27:46.768 +01:00 [DBG] Committed transaction.
2022-10-27 00:27:46.769 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:46.770 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:46.771 +01:00 [DBG] Disposing transaction.
2022-10-27 00:27:46.772 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:46.774 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-27 00:27:46.776 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:27:46.778 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:27:46.778 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:27:46.779 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:27:46.780 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:27:46.782 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.LoginUserResponse'.
2022-10-27 00:27:46.783 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API) in 88.3251ms
2022-10-27 00:27:46.785 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.UsersController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-27 00:27:46.786 +01:00 [DBG] Connection id "0HMLNL632GUCR" completed keep alive response.
2022-10-27 00:27:46.787 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:27:46.788 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/users/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 118.1846ms
2022-10-27 00:27:52.783 +01:00 [DBG] Connection id "0HMLNL632GUCS" accepted.
2022-10-27 00:27:52.785 +01:00 [DBG] Connection id "0HMLNL632GUCS" started.
2022-10-27 00:27:52.795 +01:00 [DBG] Connection 0HMLNL632GUCS established using the following protocol: "Tls13"
2022-10-27 00:27:52.796 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/5927bcd8-ee3e-4be1-b459-d4f1ea32ea22 - -
2022-10-27 00:27:52.797 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:27:52.799 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/5927bcd8-ee3e-4be1-b459-d4f1ea32ea22'
2022-10-27 00:27:52.800 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts/{accountId}' is valid for the request path '/api/accounts/5927bcd8-ee3e-4be1-b459-d4f1ea32ea22'
2022-10-27 00:27:52.802 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:52.805 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:27:52.807 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:52.809 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:52.810 +01:00 [DBG] Authorization was successful.
2022-10-27 00:27:52.811 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:52.812 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:27:52.815 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:27:52.816 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:27:52.818 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:27:52.820 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:27:52.823 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:27:52.825 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:52.827 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:52.828 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:52.830 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-27 00:27:52.831 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:52.833 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:52.834 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:52.835 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:52.837 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:27:52.840 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:52.841 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:27:52.843 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:52.844 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:52.845 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:52.849 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:52.852 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:52.854 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:52.855 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:52.856 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:52.858 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:52.858 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:27:52.860 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:52.861 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:52.862 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:52.866 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:52.868 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:52.871 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:52.873 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:52.873 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:52.875 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:52.876 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:27:52.878 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:27:52.879 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:27:52.880 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:27:52.881 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:27:52.882 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims'.
2022-10-27 00:27:52.884 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 58.7389ms
2022-10-27 00:27:52.885 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:52.886 +01:00 [DBG] Connection id "0HMLNL632GUCS" completed keep alive response.
2022-10-27 00:27:52.888 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:27:52.890 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/5927bcd8-ee3e-4be1-b459-d4f1ea32ea22 - - - 200 - application/json;+charset=utf-8 93.0828ms
2022-10-27 00:27:54.576 +01:00 [DBG] Connection id "0HMLNL632GUCT" accepted.
2022-10-27 00:27:54.577 +01:00 [DBG] Connection id "0HMLNL632GUCT" started.
2022-10-27 00:27:54.580 +01:00 [DBG] Connection 0HMLNL632GUCT established using the following protocol: "Tls13"
2022-10-27 00:27:54.582 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/268f578c-c52e-49cc-afed-970579676dba - -
2022-10-27 00:27:54.583 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:27:54.585 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/268f578c-c52e-49cc-afed-970579676dba'
2022-10-27 00:27:54.586 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts/{accountId}' is valid for the request path '/api/accounts/268f578c-c52e-49cc-afed-970579676dba'
2022-10-27 00:27:54.589 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:54.593 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:27:54.594 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:54.596 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:54.597 +01:00 [DBG] Authorization was successful.
2022-10-27 00:27:54.598 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:54.600 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:27:54.602 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:27:54.603 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:27:54.606 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:27:54.609 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:27:54.611 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:27:54.613 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:54.615 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:54.616 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:54.618 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-27 00:27:54.619 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:54.620 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:54.622 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:54.625 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:54.626 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:27:54.628 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:54.629 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:27:54.631 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:54.632 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:54.634 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:54.637 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:54.644 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:54.645 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:54.646 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:54.648 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:54.649 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:54.650 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:27:54.651 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:54.652 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:54.654 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:54.658 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:54.660 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:54.662 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:54.664 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:54.665 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:54.666 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:54.667 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:27:54.670 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:27:54.671 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:27:54.673 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:27:54.674 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:27:54.675 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims'.
2022-10-27 00:27:54.676 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 63.3017ms
2022-10-27 00:27:54.678 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:54.679 +01:00 [DBG] Connection id "0HMLNL632GUCT" completed keep alive response.
2022-10-27 00:27:54.680 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:27:54.681 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/268f578c-c52e-49cc-afed-970579676dba - - - 200 - application/json;+charset=utf-8 99.3385ms
2022-10-27 00:27:55.351 +01:00 [DBG] Connection id "0HMLNL632GUCM" received FIN.
2022-10-27 00:27:55.352 +01:00 [DBG] Connection id "0HMLNL632GUCM" disconnecting.
2022-10-27 00:27:55.353 +01:00 [DBG] Connection id "0HMLNL632GUCM" sending FIN because: "The client closed the connection."
2022-10-27 00:27:55.367 +01:00 [DBG] Connection id "0HMLNL632GUCM" stopped.
2022-10-27 00:27:55.996 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/5927bcd8-ee3e-4be1-b459-d4f1ea32ea22 - -
2022-10-27 00:27:55.997 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:27:55.998 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/5927bcd8-ee3e-4be1-b459-d4f1ea32ea22'
2022-10-27 00:27:55.999 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts/{accountId}' is valid for the request path '/api/accounts/5927bcd8-ee3e-4be1-b459-d4f1ea32ea22'
2022-10-27 00:27:56.001 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:56.002 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:27:56.003 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:56.004 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:56.005 +01:00 [DBG] Authorization was successful.
2022-10-27 00:27:56.006 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:56.009 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:27:56.011 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:27:56.012 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:27:56.013 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:27:56.015 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:27:56.017 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:27:56.018 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:56.020 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:56.021 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:56.023 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-27 00:27:56.025 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:56.027 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:56.028 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:56.029 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:56.031 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:27:56.034 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:56.035 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:27:56.036 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:56.038 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:56.039 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:56.044 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:56.047 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:56.049 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:56.049 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:56.051 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:56.053 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:56.054 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-27 00:27:56.055 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:56.059 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:56.062 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:56.066 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:56.068 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:56.070 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:56.071 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:56.072 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:56.074 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:56.076 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:27:56.078 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:27:56.079 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:27:56.080 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:27:56.081 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:27:56.083 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims'.
2022-10-27 00:27:56.084 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 65.8777ms
2022-10-27 00:27:56.086 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:56.087 +01:00 [DBG] Connection id "0HMLNL632GUCS" completed keep alive response.
2022-10-27 00:27:56.088 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:27:56.090 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/5927bcd8-ee3e-4be1-b459-d4f1ea32ea22 - - - 200 - application/json;+charset=utf-8 94.1108ms
2022-10-27 00:27:59.418 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891 - -
2022-10-27 00:27:59.420 +01:00 [DBG] The request path  does not match the path filter
2022-10-27 00:27:59.420 +01:00 [DBG] 1 candidate(s) found for the request path '/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891'
2022-10-27 00:27:59.422 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/Accounts/{accountId}' is valid for the request path '/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891'
2022-10-27 00:27:59.423 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:59.425 +01:00 [DBG] Successfully validated the token.
2022-10-27 00:27:59.427 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:59.429 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-27 00:27:59.431 +01:00 [DBG] Authorization was successful.
2022-10-27 00:27:59.432 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:59.433 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API).
2022-10-27 00:27:59.436 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-27 00:27:59.437 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-27 00:27:59.439 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-10-27 00:27:59.443 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-27 00:27:59.445 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-10-27 00:27:59.448 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:59.450 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.AccountsController (SimpleBank.AcctManage.API)
2022-10-27 00:27:59.451 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:59.452 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-27 00:27:59.454 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:59.455 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:59.456 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-27 00:27:59.458 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-27 00:27:59.459 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-27 00:27:59.463 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:59.464 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:27:59.465 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:59.466 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:59.467 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:59.472 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-27 00:27:59.475 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-27 00:27:59.477 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:59.478 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:59.479 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:59.481 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-27 00:27:59.482 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-27 00:27:59.483 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:59.484 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:59.486 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:59.489 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-27 00:27:59.491 +01:00 [DBG] A data reader was disposed.
2022-10-27 00:27:59.492 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-27 00:27:59.494 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-27 00:27:59.496 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-27 00:27:59.498 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-27 00:27:59.499 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-27 00:27:59.500 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-27 00:27:59.500 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-27 00:27:59.502 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.Responses.AccountMovims'.
2022-10-27 00:27:59.504 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 55.877ms
2022-10-27 00:27:59.505 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-27 00:27:59.506 +01:00 [DBG] Connection id "0HMLNL632GUCP" completed keep alive response.
2022-10-27 00:27:59.507 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-27 00:27:59.508 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/accounts/2cdcf524-7bff-4398-83d2-78c16cda8891 - - - 200 - application/json;+charset=utf-8 89.9934ms
2022-10-27 00:28:12.797 +01:00 [DBG] Connection id "0HMLNL632GUCO" received FIN.
2022-10-27 00:28:12.799 +01:00 [DBG] Connection id "0HMLNL632GUCO" sending FIN because: "The client closed the connection."
2022-10-27 00:28:12.800 +01:00 [DBG] Connection id "0HMLNL632GUCO" disconnecting.
2022-10-27 00:28:12.812 +01:00 [DBG] Connection id "0HMLNL632GUCO" stopped.
2022-10-27 00:28:28.341 +01:00 [DBG] Connection id "0HMLNL632GUCQ" received FIN.
2022-10-27 00:28:28.349 +01:00 [DBG] Connection id "0HMLNL632GUCQ" sending FIN because: "The client closed the connection."
2022-10-27 00:28:28.352 +01:00 [DBG] Connection id "0HMLNL632GUCQ" disconnecting.
2022-10-27 00:28:28.353 +01:00 [DBG] Connection id "0HMLNL632GUCQ" stopped.
