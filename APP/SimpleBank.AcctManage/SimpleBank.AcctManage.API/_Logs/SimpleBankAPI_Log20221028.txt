2022-10-28 09:28:19.373 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 09:28:19.531 +01:00 [DBG] Hosting starting
2022-10-28 09:28:19.737 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 09:28:19.790 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 09:28:19.961 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 09:28:20.274 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 09:28:20.311 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 09:28:20.331 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 09:28:20.338 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 09:28:20.353 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 09:28:20.362 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 09:28:20.478 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 09:28:20.697 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 09:28:20.729 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 09:28:20.741 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 09:28:20.769 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 09:28:20.892 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 09:28:22.517 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 09:28:22.801 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 09:28:22.909 +01:00 [DBG] Connection id "0HMLONPG8CFU3" accepted.
2022-10-28 09:28:22.924 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 09:28:22.948 +01:00 [DBG] Connection id "0HMLONPG8CFU3" started.
2022-10-28 09:28:22.958 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 09:28:22.981 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 09:28:23.001 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 09:28:23.067 +01:00 [DBG] Connection id "0HMLONPG8CFU4" accepted.
2022-10-28 09:28:23.589 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 09:28:23.623 +01:00 [DBG] Connection id "0HMLONPG8CFU4" started.
2022-10-28 09:28:23.736 +01:00 [INF] Hosting environment: Development
2022-10-28 09:28:23.757 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 09:28:23.759 +01:00 [DBG] Hosting started
2022-10-28 09:28:27.288 +01:00 [DBG] Connection id "0HMLONPG8CFU5" accepted.
2022-10-28 09:28:27.292 +01:00 [DBG] Connection id "0HMLONPG8CFU5" started.
2022-10-28 09:28:27.421 +01:00 [DBG] Connection id "0HMLONPG8CFU5" received FIN.
2022-10-28 09:28:27.442 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 09:28:27.944 +01:00 [DBG] Connection id "0HMLONPG8CFU5" stopped.
2022-10-28 09:28:27.954 +01:00 [DBG] Connection id "0HMLONPG8CFU5" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 09:28:31.045 +01:00 [DBG] Connection id "0HMLONPG8CFU6" accepted.
2022-10-28 09:28:31.047 +01:00 [DBG] Connection id "0HMLONPG8CFU6" started.
2022-10-28 09:28:31.066 +01:00 [DBG] Connection 0HMLONPG8CFU6 established using the following protocol: "Tls13"
2022-10-28 09:28:31.135 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger - -
2022-10-28 09:28:31.177 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 09:28:31.287 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger - - - 301 0 - 154.2092ms
2022-10-28 09:28:31.310 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-28 09:28:31.389 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-28 09:28:31.600 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-28 09:28:31.603 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 292.8521ms
2022-10-28 09:28:31.661 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/swagger-ui.css - -
2022-10-28 09:28:31.663 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/swagger-ui-bundle.js - -
2022-10-28 09:28:31.663 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-28 09:28:31.663 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/swagger-ui-standalone-preset.js - -
2022-10-28 09:28:31.664 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-28 09:28:31.712 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 48.4464ms
2022-10-28 09:28:31.763 +01:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-10-28 09:28:31.765 +01:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-10-28 09:28:31.775 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 110.6657ms
2022-10-28 09:28:31.782 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/swagger-ui.css - - - 200 143632 text/css 124.9793ms
2022-10-28 09:28:31.804 +01:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-10-28 09:28:31.809 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 145.1835ms
2022-10-28 09:28:31.989 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 325.6681ms
2022-10-28 09:28:32.191 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/favicon-16x16.png - -
2022-10-28 09:28:32.200 +01:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2022-10-28 09:28:32.226 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/favicon-16x16.png - - - 200 665 image/png 35.0232ms
2022-10-28 09:28:32.326 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-28 09:28:32.724 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 398.1647ms
2022-10-28 09:28:33.079 +01:00 [DBG] Authentication of the HTTPS connection timed out.
2022-10-28 09:28:33.081 +01:00 [DBG] Connection id "0HMLONPG8CFU3" stopped.
2022-10-28 09:28:33.083 +01:00 [DBG] Connection id "0HMLONPG8CFU3" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 09:28:33.755 +01:00 [DBG] Authentication of the HTTPS connection timed out.
2022-10-28 09:28:33.756 +01:00 [DBG] Connection id "0HMLONPG8CFU4" stopped.
2022-10-28 09:28:33.757 +01:00 [DBG] Connection id "0HMLONPG8CFU4" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 09:28:34.131 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v2/swagger.json - -
2022-10-28 09:28:34.133 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v2/swagger.json - - - 200 - application/json;charset=utf-8 1.8563ms
2022-10-28 09:28:35.876 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-28 09:28:35.892 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 16.5243ms
2022-10-28 09:30:17.268 +01:00 [DBG] Connection id "0HMLONPG8CFU7" accepted.
2022-10-28 09:30:17.269 +01:00 [DBG] Connection id "0HMLONPG8CFU7" started.
2022-10-28 09:30:17.293 +01:00 [DBG] Connection 0HMLONPG8CFU7 established using the following protocol: "Tls13"
2022-10-28 09:30:17.319 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/users/ application/json;+charset=utf-8 -
2022-10-28 09:30:17.320 +01:00 [DBG] POST requests are not supported
2022-10-28 09:30:17.351 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/users/'
2022-10-28 09:30:17.359 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.Create (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Users' is valid for the request path '/api/v1/users/'
2022-10-28 09:30:17.365 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-28 09:30:17.448 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:30:17.453 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:30:17.455 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-28 09:30:17.483 +01:00 [INF] Route matched with {action = "Create", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse]] Create(SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API).
2022-10-28 09:30:17.487 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:30:17.488 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:30:17.490 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:30:17.492 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:30:17.493 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:30:17.497 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:30:17.985 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 09:30:18.018 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:30:18.039 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateUserRequest' ...
2022-10-28 09:30:18.047 +01:00 [DBG] Attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateUserRequest' using the name '' in request data ...
2022-10-28 09:30:18.052 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:30:18.059 +01:00 [DBG] Connection id "0HMLONPG8CFU7", Request id "0HMLONPG8CFU7:00000002": started reading request body.
2022-10-28 09:30:18.066 +01:00 [DBG] Connection id "0HMLONPG8CFU7", Request id "0HMLONPG8CFU7:00000002": done reading request body.
2022-10-28 09:30:18.072 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateUserRequest'
2022-10-28 09:30:18.075 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateUserRequest'.
2022-10-28 09:30:18.077 +01:00 [DBG] Done attempting to bind parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateUserRequest'.
2022-10-28 09:30:18.079 +01:00 [DBG] Attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateUserRequest' ...
2022-10-28 09:30:18.089 +01:00 [DBG] Done attempting to validate the bound parameter 'createUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateUserRequest'.
2022-10-28 09:30:19.178 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:30:19.230 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:30:19.324 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:30:19.335 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:30:19.344 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:30:19.363 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:30:19.483 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:30:19.803 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:30:19.812 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:30:19.826 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:30:19.898 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:30:19.909 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2022-10-28 09:30:19.933 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Binary), @p4='?' (DbType = Binary), @p5='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_id, password_changed_at;
2022-10-28 09:30:20.081 +01:00 [INF] Executed DbCommand (152ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Binary), @p4='?' (DbType = Binary), @p5='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Users" (created_at, email, fullname, "Password", salt, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_id, password_changed_at;
2022-10-28 09:30:20.118 +01:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:30:20.139 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:30:20.154 +01:00 [DBG] Committing transaction.
2022-10-28 09:30:20.170 +01:00 [DBG] Committed transaction.
2022-10-28 09:30:20.181 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:30:20.192 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:30:20.198 +01:00 [DBG] Disposing transaction.
2022-10-28 09:30:20.217 +01:00 [DBG] An entity of type 'User' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:30:20.223 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:30:20.234 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:30:20.238 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:30:20.239 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:30:20.240 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:30:20.241 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:30:20.243 +01:00 [INF] Executing CreatedResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse'.
2022-10-28 09:30:20.259 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.UsersController.Create (SimpleBank.AcctManage.API) in 2758.4015ms
2022-10-28 09:30:20.264 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.Create (SimpleBank.AcctManage.API)'
2022-10-28 09:30:20.269 +01:00 [DBG] Connection id "0HMLONPG8CFU7" completed keep alive response.
2022-10-28 09:30:20.274 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:30:20.279 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/users/ application/json;+charset=utf-8 - - 201 - application/json;+charset=utf-8 2960.3491ms
2022-10-28 09:30:47.760 +01:00 [DBG] Connection id "0HMLONPG8CFU8" accepted.
2022-10-28 09:30:47.764 +01:00 [DBG] Connection id "0HMLONPG8CFU8" started.
2022-10-28 09:30:47.767 +01:00 [DBG] Connection 0HMLONPG8CFU8 established using the following protocol: "Tls13"
2022-10-28 09:30:47.770 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 09:30:47.771 +01:00 [DBG] POST requests are not supported
2022-10-28 09:30:47.773 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 09:30:47.774 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 09:30:47.776 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 09:30:47.778 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:30:47.779 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:30:47.780 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 09:30:47.783 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 09:30:47.787 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:30:47.788 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:30:47.790 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:30:47.792 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:30:47.794 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:30:47.796 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:30:47.799 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:30:47.811 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 09:30:47.813 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 09:30:47.814 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:30:47.816 +01:00 [DBG] Connection id "0HMLONPG8CFU8", Request id "0HMLONPG8CFU8:00000002": started reading request body.
2022-10-28 09:30:47.817 +01:00 [DBG] Connection id "0HMLONPG8CFU8", Request id "0HMLONPG8CFU8:00000002": done reading request body.
2022-10-28 09:30:47.819 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 09:30:47.821 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 09:30:47.822 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 09:30:47.823 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 09:30:47.826 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 09:30:47.875 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:30:47.950 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 09:30:48.346 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 09:30:48.392 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:30:48.394 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 09:30:48.397 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:30:48.399 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:30:48.401 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 09:30:48.409 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 09:30:48.420 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:30:48.431 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:30:48.435 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:30:48.439 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:30:48.449 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 09:30:48.458 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 09:30:48.475 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:30:48.477 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:30:48.478 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:30:48.479 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:30:48.480 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 09:30:48.496 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 09:30:48.505 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:30:48.506 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:30:48.507 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:30:48.667 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:30:48.680 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:30:48.682 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:30:48.683 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:30:48.689 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:30:48.692 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:30:48.694 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:30:48.696 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:30:48.697 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:30:48.699 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:30:48.701 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:30:48.703 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 09:30:48.707 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 09:30:48.711 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:30:48.715 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:30:48.717 +01:00 [DBG] Committing transaction.
2022-10-28 09:30:48.720 +01:00 [DBG] Committed transaction.
2022-10-28 09:30:48.721 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:30:48.722 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:30:48.723 +01:00 [DBG] Disposing transaction.
2022-10-28 09:30:48.725 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:30:48.727 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:30:48.729 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:30:48.731 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:30:48.732 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:30:48.732 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:30:48.733 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:30:48.735 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 09:30:48.738 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 942.8236ms
2022-10-28 09:30:48.740 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 09:30:48.741 +01:00 [DBG] Connection id "0HMLONPG8CFU8" completed keep alive response.
2022-10-28 09:30:48.742 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:30:48.743 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 973.0443ms
2022-10-28 09:30:48.785 +01:00 [DBG] Connection id "0HMLONPG8CFU9" accepted.
2022-10-28 09:30:48.786 +01:00 [DBG] Connection id "0HMLONPG8CFU9" started.
2022-10-28 09:30:48.789 +01:00 [DBG] Connection 0HMLONPG8CFU9 established using the following protocol: "Tls13"
2022-10-28 09:30:48.792 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - -
2022-10-28 09:30:48.793 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:30:48.795 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/users/profile'
2022-10-28 09:30:48.796 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Users/Profile' is valid for the request path '/api/v1/users/profile'
2022-10-28 09:30:48.797 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:30:48.868 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:30:48.870 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:30:48.872 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:30:48.878 +01:00 [DBG] Authorization was successful.
2022-10-28 09:30:48.880 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:30:48.882 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API).
2022-10-28 09:30:48.885 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:30:48.886 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:30:48.888 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:30:48.890 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:30:48.892 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:30:48.894 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:30:48.900 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:30:48.911 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:30:48.923 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-28 09:30:49.016 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
            SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
            FROM SB-operational.Users AS u
            WHERE u.user_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 09:30:49.021 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:30:49.023 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 09:30:49.025 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:30:49.026 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:30:49.028 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:30:49.031 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:30:49.035 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:30:49.036 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:30:49.037 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:30:49.038 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:30:49.039 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:30:49.041 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:30:49.042 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:30:49.043 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:30:49.044 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:30:49.045 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse'.
2022-10-28 09:30:49.047 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 153.297ms
2022-10-28 09:30:49.048 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:30:49.050 +01:00 [DBG] Connection id "0HMLONPG8CFU9" completed keep alive response.
2022-10-28 09:30:49.051 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:30:49.052 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - - - 200 - application/json;+charset=utf-8 259.8245ms
2022-10-28 09:31:26.230 +01:00 [DBG] Connection id "0HMLONPG8CFU6" received FIN.
2022-10-28 09:31:26.243 +01:00 [DBG] Connection id "0HMLONPG8CFU6" is closed. The last processed stream ID was 35.
2022-10-28 09:31:26.250 +01:00 [DBG] Connection id "0HMLONPG8CFU6" sending FIN because: "The client closed the connection."
2022-10-28 09:31:26.253 +01:00 [DBG] Connection id "0HMLONPG8CFU6" stopped.
2022-10-28 09:31:32.320 +01:00 [DBG] Connection id "0HMLONPG8CFU7" received FIN.
2022-10-28 09:31:32.322 +01:00 [DBG] Connection id "0HMLONPG8CFU7" disconnecting.
2022-10-28 09:31:32.323 +01:00 [DBG] Connection id "0HMLONPG8CFU7" sending FIN because: "The client closed the connection."
2022-10-28 09:31:32.335 +01:00 [DBG] Connection id "0HMLONPG8CFU7" stopped.
2022-10-28 09:31:50.567 +01:00 [DBG] Connection id "0HMLONPG8CFUA" accepted.
2022-10-28 09:31:50.578 +01:00 [DBG] Connection id "0HMLONPG8CFUA" started.
2022-10-28 09:31:50.589 +01:00 [DBG] Connection 0HMLONPG8CFUA established using the following protocol: "Tls13"
2022-10-28 09:31:50.594 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/renew application/json;+charset=utf-8 -
2022-10-28 09:31:50.598 +01:00 [DBG] POST requests are not supported
2022-10-28 09:31:50.606 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/renew'
2022-10-28 09:31:50.608 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Renew' is valid for the request path '/api/v1/auth/renew'
2022-10-28 09:31:50.609 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 09:31:50.611 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:31:50.612 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:31:50.613 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 09:31:50.618 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 09:31:50.620 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:31:50.622 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:31:50.623 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:31:50.625 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:31:50.627 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:31:50.629 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:31:50.630 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:31:50.633 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' ...
2022-10-28 09:31:50.635 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' using the name '' in request data ...
2022-10-28 09:31:50.636 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:31:50.638 +01:00 [DBG] Connection id "0HMLONPG8CFUA", Request id "0HMLONPG8CFUA:00000002": started reading request body.
2022-10-28 09:31:50.639 +01:00 [DBG] Connection id "0HMLONPG8CFUA", Request id "0HMLONPG8CFUA:00000002": done reading request body.
2022-10-28 09:31:50.640 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'
2022-10-28 09:31:50.641 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 09:31:50.643 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 09:31:50.644 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' ...
2022-10-28 09:31:50.646 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 09:31:50.650 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:31:50.652 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.RefreshToken == __refreshToken_0)'
2022-10-28 09:31:50.656 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.refresh_token == @__refreshToken_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 09:31:50.659 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:31:50.660 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:31:50.661 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:31:50.662 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:31:50.664 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-28 09:31:50.670 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-28 09:31:50.673 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:31:50.674 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:31:50.675 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:31:50.676 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:31:50.680 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:31:50.683 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:31:50.684 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:31:50.686 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:31:50.687 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:31:50.688 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:31:50.689 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:31:50.690 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:31:50.695 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:31:50.696 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:31:50.697 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:31:50.708 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:31:50.711 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:31:50.712 +01:00 [DBG] Committing transaction.
2022-10-28 09:31:50.714 +01:00 [DBG] Committed transaction.
2022-10-28 09:31:50.715 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:31:50.717 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:31:50.718 +01:00 [DBG] Disposing transaction.
2022-10-28 09:31:50.719 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:31:50.722 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:31:50.724 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:31:50.726 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:31:50.727 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:31:50.728 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:31:50.729 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:31:50.730 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 09:31:50.731 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API) in 102.5253ms
2022-10-28 09:31:50.733 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 09:31:50.735 +01:00 [DBG] Connection id "0HMLONPG8CFUA" completed keep alive response.
2022-10-28 09:31:50.737 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:31:50.740 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 145.7419ms
2022-10-28 09:31:50.753 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:31:50.754 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:31:50.755 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:31:50.756 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:31:50.758 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:31:50.760 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:31:50.761 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:31:50.762 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:31:50.763 +01:00 [DBG] Authorization was successful.
2022-10-28 09:31:50.764 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:31:50.771 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:31:50.773 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:31:50.775 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:31:50.776 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:31:50.778 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:31:50.780 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:31:50.781 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:31:50.784 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:31:50.803 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:31:50.807 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(account => account.UserId == __userId_0)'
2022-10-28 09:31:50.811 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
        SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
        FROM SB-operational.Accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-28 09:31:50.813 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:31:50.814 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:31:50.815 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:31:50.817 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:31:50.818 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:31:50.824 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:31:50.826 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:31:50.827 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:31:50.828 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:31:50.831 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:31:50.834 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:31:50.835 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-10-28 09:31:50.838 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-10-28 09:31:50.839 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-10-28 09:31:50.842 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 60.6892ms
2022-10-28 09:31:50.844 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:31:50.846 +01:00 [DBG] Connection id "0HMLONPG8CFUA" completed keep alive response.
2022-10-28 09:31:50.850 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:31:50.851 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 404 - application/problem+json;+charset=utf-8 98.1573ms
2022-10-28 09:32:02.833 +01:00 [DBG] Connection id "0HMLONPG8CFU8" received FIN.
2022-10-28 09:32:02.835 +01:00 [DBG] Connection id "0HMLONPG8CFU8" disconnecting.
2022-10-28 09:32:02.843 +01:00 [DBG] Connection id "0HMLONPG8CFU8" sending FIN because: "The client closed the connection."
2022-10-28 09:32:02.849 +01:00 [DBG] Connection id "0HMLONPG8CFU8" stopped.
2022-10-28 09:32:03.823 +01:00 [DBG] Connection id "0HMLONPG8CFU9" received FIN.
2022-10-28 09:32:03.828 +01:00 [DBG] Connection id "0HMLONPG8CFU9" sending FIN because: "The client closed the connection."
2022-10-28 09:32:03.832 +01:00 [DBG] Connection id "0HMLONPG8CFU9" disconnecting.
2022-10-28 09:32:03.833 +01:00 [DBG] Connection id "0HMLONPG8CFU9" stopped.
2022-10-28 09:32:16.538 +01:00 [DBG] Connection id "0HMLONPG8CFUB" accepted.
2022-10-28 09:32:16.539 +01:00 [DBG] Connection id "0HMLONPG8CFUB" started.
2022-10-28 09:32:16.550 +01:00 [DBG] Connection 0HMLONPG8CFUB established using the following protocol: "Tls13"
2022-10-28 09:32:16.552 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/accounts/ application/json;+charset=utf-8 -
2022-10-28 09:32:16.553 +01:00 [DBG] POST requests are not supported
2022-10-28 09:32:16.554 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:32:16.556 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:32:16.557 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:32:16.560 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:32:16.561 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:32:16.563 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:32:16.565 +01:00 [DBG] Authorization was successful.
2022-10-28 09:32:16.567 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:32:16.571 +01:00 [INF] Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]] CreateAccount(SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:32:16.576 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:32:16.582 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:32:16.585 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:32:16.588 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:32:16.590 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:32:16.597 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:32:16.600 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:32:16.601 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' ...
2022-10-28 09:32:16.602 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' using the name '' in request data ...
2022-10-28 09:32:16.604 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:32:16.611 +01:00 [DBG] Connection id "0HMLONPG8CFUB", Request id "0HMLONPG8CFUB:00000002": started reading request body.
2022-10-28 09:32:16.614 +01:00 [DBG] Connection id "0HMLONPG8CFUB", Request id "0HMLONPG8CFUB:00000002": done reading request body.
2022-10-28 09:32:16.618 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'
2022-10-28 09:32:16.619 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:32:16.620 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:32:16.622 +01:00 [DBG] Attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' ...
2022-10-28 09:32:16.627 +01:00 [DBG] Done attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:32:16.632 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:32:16.635 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:32:16.654 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:32:16.656 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:32:16.657 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:32:16.664 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:32:16.666 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:32:16.667 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:32:16.668 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:32:16.669 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:32:16.672 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:32:16.672 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:32:16.674 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-28 09:32:16.696 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-28 09:32:16.699 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:32:16.703 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:32:16.705 +01:00 [DBG] Committing transaction.
2022-10-28 09:32:16.710 +01:00 [DBG] Committed transaction.
2022-10-28 09:32:16.712 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:32:16.713 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:32:16.715 +01:00 [DBG] Disposing transaction.
2022-10-28 09:32:16.717 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:32:16.719 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:32:16.722 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:32:16.725 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:32:16.726 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:32:16.727 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:32:16.727 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:32:16.729 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse'.
2022-10-28 09:32:16.751 +01:00 [DBG] Found the endpoints ["SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2022-10-28 09:32:16.760 +01:00 [DBG] Successfully processed template api/v{version:apiVersion}/Accounts/{accountId} for SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) resulting in /api/v1/Accounts/5ab94791-a815-4279-bc83-bad967e5402d and 
2022-10-28 09:32:16.763 +01:00 [DBG] Link generation succeeded for endpoints ["SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] with result /api/v1/Accounts/5ab94791-a815-4279-bc83-bad967e5402d
2022-10-28 09:32:16.770 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API) in 173.8403ms
2022-10-28 09:32:16.773 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:32:16.775 +01:00 [DBG] Connection id "0HMLONPG8CFUB" completed keep alive response.
2022-10-28 09:32:16.777 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:32:16.778 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/accounts/ application/json;+charset=utf-8 - - 201 - application/json;+charset=utf-8 225.9925ms
2022-10-28 09:32:25.179 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/accounts/ application/json;+charset=utf-8 -
2022-10-28 09:32:25.181 +01:00 [DBG] POST requests are not supported
2022-10-28 09:32:25.182 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:32:25.183 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:32:25.188 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:32:25.190 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:32:25.190 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:32:25.191 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:32:25.192 +01:00 [DBG] Authorization was successful.
2022-10-28 09:32:25.193 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:32:25.195 +01:00 [INF] Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]] CreateAccount(SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:32:25.197 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:32:25.199 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:32:25.203 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:32:25.206 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:32:25.207 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:32:25.209 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:32:25.211 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:32:25.212 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' ...
2022-10-28 09:32:25.213 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' using the name '' in request data ...
2022-10-28 09:32:25.215 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:32:25.217 +01:00 [DBG] Connection id "0HMLONPG8CFUB", Request id "0HMLONPG8CFUB:00000003": started reading request body.
2022-10-28 09:32:25.221 +01:00 [DBG] Connection id "0HMLONPG8CFUB", Request id "0HMLONPG8CFUB:00000003": done reading request body.
2022-10-28 09:32:25.222 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'
2022-10-28 09:32:25.223 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:32:25.226 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:32:25.227 +01:00 [DBG] Attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' ...
2022-10-28 09:32:25.229 +01:00 [DBG] Done attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:32:25.230 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:32:25.232 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:32:25.237 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:32:25.238 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:32:25.240 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:32:25.241 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:32:25.242 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:32:25.244 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:32:25.245 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:32:25.246 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:32:25.248 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:32:25.249 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:32:25.251 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-28 09:32:25.256 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-28 09:32:25.260 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:32:25.261 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:32:25.262 +01:00 [DBG] Committing transaction.
2022-10-28 09:32:25.265 +01:00 [DBG] Committed transaction.
2022-10-28 09:32:25.266 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:32:25.268 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:32:25.269 +01:00 [DBG] Disposing transaction.
2022-10-28 09:32:25.270 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:32:25.271 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:32:25.273 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:32:25.275 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:32:25.276 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:32:25.277 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:32:25.278 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:32:25.279 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse'.
2022-10-28 09:32:25.280 +01:00 [DBG] Found the endpoints ["SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2022-10-28 09:32:25.282 +01:00 [DBG] Successfully processed template api/v{version:apiVersion}/Accounts/{accountId} for SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) resulting in /api/v1/Accounts/b187cbbb-ad7e-458e-b2b4-301d15b74708 and 
2022-10-28 09:32:25.284 +01:00 [DBG] Link generation succeeded for endpoints ["SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] with result /api/v1/Accounts/b187cbbb-ad7e-458e-b2b4-301d15b74708
2022-10-28 09:32:25.287 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API) in 77.8234ms
2022-10-28 09:32:25.288 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:32:25.289 +01:00 [DBG] Connection id "0HMLONPG8CFUB" completed keep alive response.
2022-10-28 09:32:25.290 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:32:25.292 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/accounts/ application/json;+charset=utf-8 - - 201 - application/json;+charset=utf-8 112.1687ms
2022-10-28 09:32:30.028 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/accounts/ application/json;+charset=utf-8 -
2022-10-28 09:32:30.029 +01:00 [DBG] POST requests are not supported
2022-10-28 09:32:30.030 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:32:30.031 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:32:30.033 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:32:30.035 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:32:30.036 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:32:30.037 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:32:30.042 +01:00 [DBG] Authorization was successful.
2022-10-28 09:32:30.043 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:32:30.045 +01:00 [INF] Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]] CreateAccount(SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:32:30.048 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:32:30.050 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:32:30.051 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:32:30.053 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:32:30.055 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:32:30.057 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:32:30.058 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:32:30.060 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' ...
2022-10-28 09:32:30.061 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' using the name '' in request data ...
2022-10-28 09:32:30.063 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:32:30.065 +01:00 [DBG] Connection id "0HMLONPG8CFUB", Request id "0HMLONPG8CFUB:00000004": started reading request body.
2022-10-28 09:32:30.066 +01:00 [DBG] Connection id "0HMLONPG8CFUB", Request id "0HMLONPG8CFUB:00000004": done reading request body.
2022-10-28 09:32:30.068 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'
2022-10-28 09:32:30.069 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:32:30.070 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:32:30.072 +01:00 [DBG] Attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' ...
2022-10-28 09:32:30.073 +01:00 [DBG] Done attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:32:30.075 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:32:30.076 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:32:30.078 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:32:30.079 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:32:30.081 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:32:30.082 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:32:30.083 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:32:30.085 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:32:30.087 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:32:30.090 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:32:30.091 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:32:30.093 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:32:30.095 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-28 09:32:30.100 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-28 09:32:30.103 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:32:30.107 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:32:30.108 +01:00 [DBG] Committing transaction.
2022-10-28 09:32:30.111 +01:00 [DBG] Committed transaction.
2022-10-28 09:32:30.112 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:32:30.113 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:32:30.114 +01:00 [DBG] Disposing transaction.
2022-10-28 09:32:30.115 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:32:30.117 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:32:30.118 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:32:30.121 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:32:30.122 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:32:30.124 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:32:30.125 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:32:30.126 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse'.
2022-10-28 09:32:30.128 +01:00 [DBG] Found the endpoints ["SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2022-10-28 09:32:30.129 +01:00 [DBG] Successfully processed template api/v{version:apiVersion}/Accounts/{accountId} for SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) resulting in /api/v1/Accounts/2e8068a3-c0f7-42c0-8868-81089f278f42 and 
2022-10-28 09:32:30.131 +01:00 [DBG] Link generation succeeded for endpoints ["SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] with result /api/v1/Accounts/2e8068a3-c0f7-42c0-8868-81089f278f42
2022-10-28 09:32:30.133 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API) in 75.7243ms
2022-10-28 09:32:30.134 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:32:30.136 +01:00 [DBG] Connection id "0HMLONPG8CFUB" completed keep alive response.
2022-10-28 09:32:30.137 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:32:30.139 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/accounts/ application/json;+charset=utf-8 - - 201 - application/json;+charset=utf-8 110.5449ms
2022-10-28 09:32:59.785 +01:00 [DBG] Connection id "0HMLONPG8CFUC" accepted.
2022-10-28 09:32:59.795 +01:00 [DBG] Connection id "0HMLONPG8CFUC" started.
2022-10-28 09:32:59.798 +01:00 [DBG] Connection 0HMLONPG8CFUC established using the following protocol: "Tls13"
2022-10-28 09:32:59.800 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/renew application/json;+charset=utf-8 -
2022-10-28 09:32:59.800 +01:00 [DBG] POST requests are not supported
2022-10-28 09:32:59.802 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/renew'
2022-10-28 09:32:59.804 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Renew' is valid for the request path '/api/v1/auth/renew'
2022-10-28 09:32:59.807 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 09:32:59.808 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:32:59.809 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:32:59.810 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 09:32:59.812 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 09:32:59.813 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:32:59.815 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:32:59.816 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:32:59.820 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:32:59.821 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:32:59.824 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:32:59.826 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:32:59.828 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' ...
2022-10-28 09:32:59.829 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' using the name '' in request data ...
2022-10-28 09:32:59.830 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:32:59.832 +01:00 [DBG] Connection id "0HMLONPG8CFUC", Request id "0HMLONPG8CFUC:00000002": started reading request body.
2022-10-28 09:32:59.833 +01:00 [DBG] Connection id "0HMLONPG8CFUC", Request id "0HMLONPG8CFUC:00000002": done reading request body.
2022-10-28 09:32:59.835 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'
2022-10-28 09:32:59.837 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 09:32:59.838 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 09:32:59.840 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' ...
2022-10-28 09:32:59.841 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 09:32:59.843 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:32:59.848 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:32:59.849 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:32:59.850 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:32:59.853 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:32:59.854 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-28 09:32:59.858 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-28 09:32:59.861 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:32:59.862 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:32:59.863 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:32:59.865 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:32:59.866 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:32:59.868 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:32:59.869 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:32:59.870 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:32:59.872 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:32:59.873 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:32:59.874 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:32:59.875 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:32:59.876 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:32:59.877 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:32:59.879 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:32:59.891 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:32:59.895 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:32:59.895 +01:00 [DBG] Committing transaction.
2022-10-28 09:32:59.899 +01:00 [DBG] Committed transaction.
2022-10-28 09:32:59.900 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:32:59.902 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:32:59.903 +01:00 [DBG] Disposing transaction.
2022-10-28 09:32:59.905 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:32:59.909 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:32:59.911 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:32:59.913 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:32:59.914 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:32:59.915 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:32:59.916 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:32:59.917 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 09:32:59.920 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API) in 95.4016ms
2022-10-28 09:32:59.921 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 09:32:59.923 +01:00 [DBG] Connection id "0HMLONPG8CFUC" completed keep alive response.
2022-10-28 09:32:59.924 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:32:59.925 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 125.8511ms
2022-10-28 09:33:05.611 +01:00 [DBG] Connection id "0HMLONPG8CFUA" received FIN.
2022-10-28 09:33:05.613 +01:00 [DBG] Connection id "0HMLONPG8CFUA" disconnecting.
2022-10-28 09:33:05.619 +01:00 [DBG] Connection id "0HMLONPG8CFUA" sending FIN because: "The client closed the connection."
2022-10-28 09:33:05.626 +01:00 [DBG] Connection id "0HMLONPG8CFUA" stopped.
2022-10-28 09:33:31.602 +01:00 [DBG] Connection id "0HMLONPG8CFUB" received FIN.
2022-10-28 09:33:31.607 +01:00 [DBG] Connection id "0HMLONPG8CFUB" disconnecting.
2022-10-28 09:33:31.619 +01:00 [DBG] Connection id "0HMLONPG8CFUB" sending FIN because: "The client closed the connection."
2022-10-28 09:33:31.634 +01:00 [DBG] Connection id "0HMLONPG8CFUB" stopped.
2022-10-28 09:33:44.633 +01:00 [DBG] Connection id "0HMLONPG8CFUD" accepted.
2022-10-28 09:33:44.636 +01:00 [DBG] Connection id "0HMLONPG8CFUD" started.
2022-10-28 09:33:44.639 +01:00 [DBG] Connection 0HMLONPG8CFUD established using the following protocol: "Tls13"
2022-10-28 09:33:44.640 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:33:44.641 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:33:44.642 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:33:44.643 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:33:44.645 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:33:44.646 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:33:44.647 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:33:44.649 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:33:44.650 +01:00 [DBG] Authorization was successful.
2022-10-28 09:33:44.651 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:33:44.653 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:33:44.655 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:33:44.656 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:33:44.658 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:33:44.660 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:33:44.661 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:33:44.663 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:33:44.666 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:33:44.675 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:33:44.677 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:33:44.678 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:33:44.679 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:44.680 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:44.682 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:33:44.686 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:33:44.702 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:44.708 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:44.710 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:44.711 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:33:44.712 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:44.715 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:44.718 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:33:44.721 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 09:33:44.723 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:44.724 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:44.725 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:33:44.731 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:33:44.737 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:33:44.739 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:44.740 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:44.741 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:33:44.744 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:33:44.744 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:33:44.745 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:33:44.746 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:33:44.748 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:33:44.749 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 86.0745ms
2022-10-28 09:33:44.750 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:33:44.752 +01:00 [DBG] Connection id "0HMLONPG8CFUD" completed keep alive response.
2022-10-28 09:33:44.752 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:33:44.754 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 113.6838ms
2022-10-28 09:33:52.439 +01:00 [DBG] Connection id "0HMLONPG8CFUE" accepted.
2022-10-28 09:33:52.444 +01:00 [DBG] Connection id "0HMLONPG8CFUE" started.
2022-10-28 09:33:52.450 +01:00 [DBG] Connection 0HMLONPG8CFUE established using the following protocol: "Tls13"
2022-10-28 09:33:52.451 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/transfers/ application/json;+charset=utf-8 -
2022-10-28 09:33:52.452 +01:00 [DBG] POST requests are not supported
2022-10-28 09:33:52.453 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/transfers/'
2022-10-28 09:33:52.455 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Transfers' is valid for the request path '/api/v1/transfers/'
2022-10-28 09:33:52.456 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-28 09:33:52.458 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:33:52.458 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:33:52.459 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:33:52.460 +01:00 [DBG] Authorization was successful.
2022-10-28 09:33:52.461 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-28 09:33:52.465 +01:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transfers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.TransferResponse]] MakeTransfer(SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.TransfersController (SimpleBank.AcctManage.API).
2022-10-28 09:33:52.467 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:33:52.468 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:33:52.470 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:33:52.473 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:33:52.474 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:33:52.476 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.TransfersController (SimpleBank.AcctManage.API)
2022-10-28 09:33:52.478 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.TransfersController (SimpleBank.AcctManage.API)
2022-10-28 09:33:52.479 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest' ...
2022-10-28 09:33:52.481 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest' using the name '' in request data ...
2022-10-28 09:33:52.482 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:33:52.483 +01:00 [DBG] Connection id "0HMLONPG8CFUE", Request id "0HMLONPG8CFUE:00000002": started reading request body.
2022-10-28 09:33:52.485 +01:00 [DBG] Connection id "0HMLONPG8CFUE", Request id "0HMLONPG8CFUE:00000002": done reading request body.
2022-10-28 09:33:52.488 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'
2022-10-28 09:33:52.489 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'.
2022-10-28 09:33:52.491 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'.
2022-10-28 09:33:52.492 +01:00 [DBG] Attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest' ...
2022-10-28 09:33:52.494 +01:00 [DBG] Done attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'.
2022-10-28 09:33:52.498 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:33:52.502 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-28 09:33:52.508 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Account>(
    asyncEnumerable: new SingleQueryingEnumerable<Account>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.account_id, a.balance, a.created_at, a.currency, a.user_id
            FROM SB-operational.Accounts AS a
            WHERE a.account_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 09:33:52.511 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:33:52.513 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:33:52.515 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:52.516 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:52.518 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:33:52.522 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:33:52.527 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:52.529 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:33:52.529 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:52.531 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:52.535 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:33:52.537 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:33:52.539 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:33:52.539 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:33:52.540 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 09:33:52.542 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-28 09:33:52.543 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API) in 67.1094ms
2022-10-28 09:33:52.545 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-28 09:33:52.546 +01:00 [DBG] Connection id "0HMLONPG8CFUE" completed keep alive response.
2022-10-28 09:33:52.548 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:33:52.549 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/transfers/ application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 97.5463ms
2022-10-28 09:33:58.073 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/transfers/ application/json;+charset=utf-8 -
2022-10-28 09:33:58.074 +01:00 [DBG] POST requests are not supported
2022-10-28 09:33:58.075 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/transfers/'
2022-10-28 09:33:58.078 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Transfers' is valid for the request path '/api/v1/transfers/'
2022-10-28 09:33:58.081 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-28 09:33:58.083 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:33:58.085 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:33:58.088 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:33:58.089 +01:00 [DBG] Authorization was successful.
2022-10-28 09:33:58.090 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-28 09:33:58.091 +01:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transfers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.TransferResponse]] MakeTransfer(SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.TransfersController (SimpleBank.AcctManage.API).
2022-10-28 09:33:58.096 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:33:58.098 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:33:58.099 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:33:58.101 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:33:58.103 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:33:58.105 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.TransfersController (SimpleBank.AcctManage.API)
2022-10-28 09:33:58.106 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.TransfersController (SimpleBank.AcctManage.API)
2022-10-28 09:33:58.108 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest' ...
2022-10-28 09:33:58.109 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest' using the name '' in request data ...
2022-10-28 09:33:58.111 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:33:58.113 +01:00 [DBG] Connection id "0HMLONPG8CFUE", Request id "0HMLONPG8CFUE:00000003": started reading request body.
2022-10-28 09:33:58.115 +01:00 [DBG] Connection id "0HMLONPG8CFUE", Request id "0HMLONPG8CFUE:00000003": done reading request body.
2022-10-28 09:33:58.116 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'
2022-10-28 09:33:58.117 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'.
2022-10-28 09:33:58.119 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'.
2022-10-28 09:33:58.120 +01:00 [DBG] Attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest' ...
2022-10-28 09:33:58.122 +01:00 [DBG] Done attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'.
2022-10-28 09:33:58.124 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:33:58.127 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:33:58.128 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:33:58.129 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:58.131 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:58.133 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:33:58.138 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:33:58.141 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.143 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:33:58.145 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:58.146 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:58.148 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:33:58.149 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:33:58.150 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:58.151 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:58.152 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:33:58.157 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:33:58.161 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.162 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:33:58.163 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:58.164 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:58.174 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.185 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.190 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.211 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.213 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.215 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.218 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.219 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.222 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:33:58.222 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:33:58.226 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:33:58.227 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:58.232 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:58.236 +01:00 [DBG] Enlisted in an ambient transaction with isolation level 'Serializable'.
2022-10-28 09:33:58.246 +01:00 [DBG] Executing 5 update commands as a batch.
2022-10-28 09:33:58.248 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:33:58.249 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:33:58.251 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Guid), @p14='?' (DbType = Decimal), @p15='?' (DbType = DateTime), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p10, @p11, @p12)
RETURNING movement_id;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p13, @p14, @p15)
RETURNING movement_id;
INSERT INTO "SB-historic"."Transfers" (amount, created_at, from_account_id, to_account_id)
VALUES (@p16, @p17, @p18, @p19)
RETURNING transfer_id;
2022-10-28 09:33:58.262 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Guid), @p14='?' (DbType = Decimal), @p15='?' (DbType = DateTime), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p10, @p11, @p12)
RETURNING movement_id;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p13, @p14, @p15)
RETURNING movement_id;
INSERT INTO "SB-historic"."Transfers" (amount, created_at, from_account_id, to_account_id)
VALUES (@p16, @p17, @p18, @p19)
RETURNING transfer_id;
2022-10-28 09:33:58.268 +01:00 [DBG] The foreign key property 'Movement.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:33:58.272 +01:00 [DBG] The foreign key property 'Movement.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:33:58.274 +01:00 [DBG] The foreign key property 'Transfer.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:33:58.277 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:33:58.278 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:58.280 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:58.282 +01:00 [DBG] An entity of type 'Transfer' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.285 +01:00 [DBG] An entity of type 'Movement' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.287 +01:00 [DBG] An entity of type 'Movement' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.290 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.293 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.295 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 5 entities written to the database.
2022-10-28 09:33:58.305 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-28 09:33:58.309 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.user_id == @__get_Item_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 09:33:58.312 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:33:58.313 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:33:58.314 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:58.316 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:58.317 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:33:58.320 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:33:58.322 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:33:58.329 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:33:58.330 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:33:58.331 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:33:59.523 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:33:59.527 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:33:59.529 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:33:59.531 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:33:59.532 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:33:59.534 +01:00 [INF] Executing CreatedResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.TransferResponse'.
2022-10-28 09:33:59.537 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API) in 1432.2137ms
2022-10-28 09:33:59.538 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-28 09:33:59.540 +01:00 [DBG] Connection id "0HMLONPG8CFUE" completed keep alive response.
2022-10-28 09:33:59.540 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:33:59.542 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/transfers/ application/json;+charset=utf-8 - - 201 - application/json;+charset=utf-8 1468.9906ms
2022-10-28 09:34:01.353 +01:00 [INF] Email Sent
2022-10-28 09:34:01.357 +01:00 [INF] - KEY:   | VALUE: {"FromUser":"IvoRodrigues","ToUser":"IvoRodrigues","ToAccountId":"b187cbbb-ad7e-458e-b2b4-301d15b74708","ToEmail":"ivo_mp_rodrigues@hotmail.com","Amount":"50"} - 
2022-10-28 09:34:09.863 +01:00 [DBG] Connection id "0HMLONPG8CFUF" accepted.
2022-10-28 09:34:09.864 +01:00 [DBG] Connection id "0HMLONPG8CFUF" started.
2022-10-28 09:34:09.870 +01:00 [DBG] Connection 0HMLONPG8CFUF established using the following protocol: "Tls13"
2022-10-28 09:34:09.871 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/renew application/json;+charset=utf-8 -
2022-10-28 09:34:09.872 +01:00 [DBG] POST requests are not supported
2022-10-28 09:34:09.873 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/renew'
2022-10-28 09:34:09.874 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Renew' is valid for the request path '/api/v1/auth/renew'
2022-10-28 09:34:09.876 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 09:34:09.877 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:34:09.878 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:34:09.879 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 09:34:09.880 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 09:34:09.882 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:34:09.883 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:34:09.885 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:09.888 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:34:09.890 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:09.891 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:34:09.893 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:34:09.894 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' ...
2022-10-28 09:34:09.896 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' using the name '' in request data ...
2022-10-28 09:34:09.897 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:34:09.898 +01:00 [DBG] Connection id "0HMLONPG8CFUF", Request id "0HMLONPG8CFUF:00000002": started reading request body.
2022-10-28 09:34:09.900 +01:00 [DBG] Connection id "0HMLONPG8CFUF", Request id "0HMLONPG8CFUF:00000002": done reading request body.
2022-10-28 09:34:09.901 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'
2022-10-28 09:34:09.902 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 09:34:09.903 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 09:34:09.905 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' ...
2022-10-28 09:34:09.907 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 09:34:09.909 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:34:09.911 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:09.912 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:34:09.914 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:09.915 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:09.917 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-28 09:34:09.921 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-28 09:34:09.926 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:09.928 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:09.929 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:09.930 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:09.932 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:09.933 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:34:09.935 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:34:09.936 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:34:09.937 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:09.939 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:09.941 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:34:09.942 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:34:09.944 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:09.945 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:34:09.947 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:34:09.951 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:34:09.954 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:09.955 +01:00 [DBG] Committing transaction.
2022-10-28 09:34:09.958 +01:00 [DBG] Committed transaction.
2022-10-28 09:34:09.959 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:09.960 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:09.961 +01:00 [DBG] Disposing transaction.
2022-10-28 09:34:09.962 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:09.965 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:34:09.967 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:34:09.969 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:34:09.970 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:34:09.971 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:34:09.972 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:34:09.974 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 09:34:09.976 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API) in 84.2246ms
2022-10-28 09:34:09.977 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 09:34:09.978 +01:00 [DBG] Connection id "0HMLONPG8CFUF" completed keep alive response.
2022-10-28 09:34:09.979 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:34:09.980 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 109.1707ms
2022-10-28 09:34:09.990 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/5ab94791-a815-4279-bc83-bad967e5402d - -
2022-10-28 09:34:09.991 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:34:09.992 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/5ab94791-a815-4279-bc83-bad967e5402d'
2022-10-28 09:34:09.993 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/5ab94791-a815-4279-bc83-bad967e5402d'
2022-10-28 09:34:09.995 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:09.996 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:34:09.997 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:34:09.999 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-28 09:34:10.010 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-28 09:34:10.012 +01:00 [DBG] Connection id "0HMLONPG8CFUF" completed keep alive response.
2022-10-28 09:34:10.013 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/5ab94791-a815-4279-bc83-bad967e5402d - - - 401 0 - 23.2815ms
2022-10-28 09:34:11.620 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/5ab94791-a815-4279-bc83-bad967e5402d - -
2022-10-28 09:34:11.621 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:34:11.622 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/5ab94791-a815-4279-bc83-bad967e5402d'
2022-10-28 09:34:11.623 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/5ab94791-a815-4279-bc83-bad967e5402d'
2022-10-28 09:34:11.627 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:11.629 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:34:11.630 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:34:11.631 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:34:11.633 +01:00 [DBG] Authorization was successful.
2022-10-28 09:34:11.635 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:11.639 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:34:11.642 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:34:11.644 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:34:11.645 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:11.648 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:34:11.649 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:11.651 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:34:11.652 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:34:11.654 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:34:11.655 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 09:34:11.660 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:34:11.661 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:34:11.663 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:34:11.665 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:34:11.669 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:34:11.672 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:11.673 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:34:11.675 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:11.676 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:11.677 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:34:11.681 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:34:11.684 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:11.687 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:11.688 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:11.689 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:11.695 +01:00 [DBG] Compiling query expression: 
'DbSet<Movement>()
    .Where(movement => movement.AccountId == __accountId_0)'
2022-10-28 09:34:11.699 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Movement>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Movement.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Movement.AccountId (Guid) Required FK Index, 1], [Property: Movement.Amount (decimal) Required, 2], [Property: Movement.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3] }
        SELECT m.movement_id, m.account_id, m.amount, m.created_at
        FROM SB-operational.Movements AS m
        WHERE m.account_id == @__accountId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movement>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-28 09:34:11.701 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:11.702 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:34:11.703 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:11.705 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:11.706 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:34:11.710 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:34:11.712 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:11.714 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:11.715 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:11.716 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:11.718 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:34:11.720 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:34:11.721 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:34:11.722 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:34:11.723 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:34:11.725 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 09:34:11.728 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 77.7022ms
2022-10-28 09:34:11.730 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:11.731 +01:00 [DBG] Connection id "0HMLONPG8CFUF" completed keep alive response.
2022-10-28 09:34:11.732 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:34:11.733 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/5ab94791-a815-4279-bc83-bad967e5402d - - - 200 - application/json;+charset=utf-8 113.6926ms
2022-10-28 09:34:14.849 +01:00 [DBG] Connection id "0HMLONPG8CFUC" received FIN.
2022-10-28 09:34:14.851 +01:00 [DBG] Connection id "0HMLONPG8CFUC" sending FIN because: "The client closed the connection."
2022-10-28 09:34:14.852 +01:00 [DBG] Connection id "0HMLONPG8CFUC" disconnecting.
2022-10-28 09:34:14.853 +01:00 [DBG] Connection id "0HMLONPG8CFUC" stopped.
2022-10-28 09:34:17.003 +01:00 [DBG] Connection id "0HMLONPG8CFUG" accepted.
2022-10-28 09:34:17.004 +01:00 [DBG] Connection id "0HMLONPG8CFUG" started.
2022-10-28 09:34:17.006 +01:00 [DBG] Connection 0HMLONPG8CFUG established using the following protocol: "Tls13"
2022-10-28 09:34:17.007 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/b187cbbb-ad7e-458e-b2b4-301d15b74708 - -
2022-10-28 09:34:17.008 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:34:17.009 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/b187cbbb-ad7e-458e-b2b4-301d15b74708'
2022-10-28 09:34:17.010 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/b187cbbb-ad7e-458e-b2b4-301d15b74708'
2022-10-28 09:34:17.013 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:17.015 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:34:17.016 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:34:17.017 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:34:17.018 +01:00 [DBG] Authorization was successful.
2022-10-28 09:34:17.019 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:17.020 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:34:17.022 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:34:17.023 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:34:17.025 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:17.027 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:34:17.030 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:17.032 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:34:17.034 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:34:17.035 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:34:17.037 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 09:34:17.038 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:34:17.039 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:34:17.040 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:34:17.042 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:34:17.043 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:34:17.049 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:17.054 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2022-10-28 09:34:17.058 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:17.061 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:17.065 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:34:17.072 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:34:17.075 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:17.077 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:17.078 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:17.083 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:17.086 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:17.087 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:34:17.088 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:17.090 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:17.091 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:34:17.094 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:34:17.097 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:17.099 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:17.099 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:17.101 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:17.102 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:34:17.104 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:34:17.105 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:34:17.106 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:34:17.107 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:34:17.108 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 09:34:17.109 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 77.2209ms
2022-10-28 09:34:17.111 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:17.113 +01:00 [DBG] Connection id "0HMLONPG8CFUG" completed keep alive response.
2022-10-28 09:34:17.114 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:34:17.115 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/b187cbbb-ad7e-458e-b2b4-301d15b74708 - - - 200 - application/json;+charset=utf-8 107.8654ms
2022-10-28 09:34:39.192 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/5ab94791-a815-4279-bc83-bad967e5402d - -
2022-10-28 09:34:39.193 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:34:39.195 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/5ab94791-a815-4279-bc83-bad967e5402d'
2022-10-28 09:34:39.196 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/5ab94791-a815-4279-bc83-bad967e5402d'
2022-10-28 09:34:39.198 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:39.199 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:34:39.201 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:34:39.202 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:34:39.205 +01:00 [DBG] Authorization was successful.
2022-10-28 09:34:39.208 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:39.210 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:34:39.212 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:34:39.214 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:34:39.216 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:39.228 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:34:39.230 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:39.239 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:34:39.244 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:34:39.247 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:34:39.255 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 09:34:39.259 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:34:39.260 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:34:39.261 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:34:39.263 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:34:39.265 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:34:39.272 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:39.273 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:34:39.274 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:39.276 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:39.277 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:34:39.288 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:34:39.293 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:39.294 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:39.295 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:39.296 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:39.298 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:39.299 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:34:39.301 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:39.302 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:39.305 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:34:39.308 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:34:39.311 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:39.312 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:39.313 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:39.315 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:39.316 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:34:39.318 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:34:39.319 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:34:39.320 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:34:39.321 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:34:39.322 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 09:34:39.324 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 85.3886ms
2022-10-28 09:34:39.327 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:39.328 +01:00 [DBG] Connection id "0HMLONPG8CFUF" completed keep alive response.
2022-10-28 09:34:39.329 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:34:39.331 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/5ab94791-a815-4279-bc83-bad967e5402d - - - 200 - application/json;+charset=utf-8 139.5095ms
2022-10-28 09:34:41.016 +01:00 [DBG] Connection id "0HMLONPG8CFUH" accepted.
2022-10-28 09:34:41.018 +01:00 [DBG] Connection id "0HMLONPG8CFUH" started.
2022-10-28 09:34:41.023 +01:00 [DBG] Connection 0HMLONPG8CFUH established using the following protocol: "Tls13"
2022-10-28 09:34:41.025 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/2e8068a3-c0f7-42c0-8868-81089f278f42 - -
2022-10-28 09:34:41.026 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:34:41.027 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/2e8068a3-c0f7-42c0-8868-81089f278f42'
2022-10-28 09:34:41.028 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/2e8068a3-c0f7-42c0-8868-81089f278f42'
2022-10-28 09:34:41.030 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:41.031 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:34:41.032 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:34:41.034 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:34:41.035 +01:00 [DBG] Authorization was successful.
2022-10-28 09:34:41.037 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:41.038 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:34:41.041 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:34:41.042 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:34:41.044 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:41.046 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:34:41.048 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:41.049 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:34:41.051 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:34:41.053 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:34:41.055 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 09:34:41.057 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:34:41.059 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:34:41.060 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:34:41.062 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:34:41.063 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:34:41.066 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:41.067 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:34:41.068 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:41.070 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:41.072 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:34:41.075 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:34:41.079 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:41.080 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:41.081 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:41.082 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:41.083 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:41.084 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:34:41.086 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:41.088 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:41.089 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:34:41.092 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:34:41.095 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:41.096 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:41.097 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:41.098 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:34:41.101 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:34:41.101 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:34:41.102 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:34:41.103 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:34:41.105 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 09:34:41.107 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 57.1891ms
2022-10-28 09:34:41.108 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:34:41.109 +01:00 [DBG] Connection id "0HMLONPG8CFUH" completed keep alive response.
2022-10-28 09:34:41.110 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:34:41.111 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/2e8068a3-c0f7-42c0-8868-81089f278f42 - - - 200 - application/json;+charset=utf-8 86.4362ms
2022-10-28 09:34:54.120 +01:00 [DBG] Connection id "0HMLONPG8CFUI" accepted.
2022-10-28 09:34:54.124 +01:00 [DBG] Connection id "0HMLONPG8CFUI" started.
2022-10-28 09:34:54.130 +01:00 [DBG] Connection 0HMLONPG8CFUI established using the following protocol: "Tls13"
2022-10-28 09:34:54.131 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:34:54.133 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:34:54.137 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:34:54.139 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:34:54.141 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:34:54.142 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:34:54.143 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:34:54.145 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:34:54.146 +01:00 [DBG] Authorization was successful.
2022-10-28 09:34:54.147 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:34:54.148 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:34:54.151 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:34:54.153 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:34:54.156 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:54.158 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:34:54.160 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:54.162 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:34:54.166 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:34:54.188 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:34:54.191 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:54.192 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:34:54.194 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:54.196 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:54.199 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:34:54.206 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:34:54.208 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:54.210 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:54.211 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:54.213 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:54.214 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:54.216 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:54.219 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:54.220 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:34:54.223 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:54.225 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:54.227 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:34:54.231 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:34:54.234 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:54.235 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:54.236 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:54.238 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:34:54.240 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:34:54.241 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:34:54.242 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:34:54.243 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:34:54.244 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:34:54.246 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 83.8867ms
2022-10-28 09:34:54.247 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:34:54.249 +01:00 [DBG] Connection id "0HMLONPG8CFUI" completed keep alive response.
2022-10-28 09:34:54.250 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:34:54.251 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 119.4321ms
2022-10-28 09:34:56.499 +01:00 [DBG] Connection id "0HMLONPG8CFUJ" accepted.
2022-10-28 09:34:56.502 +01:00 [DBG] Connection id "0HMLONPG8CFUJ" started.
2022-10-28 09:34:56.512 +01:00 [DBG] Connection 0HMLONPG8CFUJ established using the following protocol: "Tls13"
2022-10-28 09:34:56.513 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:34:56.514 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:34:56.515 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:34:56.517 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:34:56.521 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:34:56.523 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:34:56.525 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:34:56.526 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:34:56.527 +01:00 [DBG] Authorization was successful.
2022-10-28 09:34:56.528 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:34:56.529 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:34:56.531 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:34:56.532 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:34:56.533 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:56.536 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:34:56.538 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:34:56.540 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:34:56.541 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:34:56.550 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:34:56.552 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:56.553 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:34:56.555 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:56.556 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:56.557 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:34:56.560 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:34:56.562 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:56.563 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:56.565 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:34:56.566 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:56.567 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:56.569 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:56.570 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:34:56.571 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:34:56.572 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:56.573 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:56.574 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:34:56.578 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:34:56.580 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:34:56.580 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:34:56.582 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:34:56.583 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:34:56.586 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:34:56.586 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:34:56.587 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:34:56.588 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:34:56.589 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:34:56.591 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 51.288ms
2022-10-28 09:34:56.592 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:34:56.593 +01:00 [DBG] Connection id "0HMLONPG8CFUJ" completed keep alive response.
2022-10-28 09:34:56.594 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:34:56.595 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 82.4815ms
2022-10-28 09:34:59.680 +01:00 [DBG] Connection id "0HMLONPG8CFUD" received FIN.
2022-10-28 09:34:59.689 +01:00 [DBG] Connection id "0HMLONPG8CFUD" disconnecting.
2022-10-28 09:34:59.703 +01:00 [DBG] Connection id "0HMLONPG8CFUD" sending FIN because: "The client closed the connection."
2022-10-28 09:34:59.710 +01:00 [DBG] Connection id "0HMLONPG8CFUD" stopped.
2022-10-28 09:35:01.451 +01:00 [DBG] Connection id "0HMLONPG8CFUK" accepted.
2022-10-28 09:35:01.452 +01:00 [DBG] Connection id "0HMLONPG8CFUK" started.
2022-10-28 09:35:01.455 +01:00 [DBG] Connection 0HMLONPG8CFUK established using the following protocol: "Tls13"
2022-10-28 09:35:01.456 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:35:01.457 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:35:01.458 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:35:01.459 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:35:01.461 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:35:01.462 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:35:01.463 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:35:01.463 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:35:01.464 +01:00 [DBG] Authorization was successful.
2022-10-28 09:35:01.465 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:35:01.466 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:35:01.468 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:35:01.470 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:35:01.471 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:35:01.475 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:35:01.476 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:35:01.478 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:35:01.481 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:35:01.493 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:35:01.496 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:35:01.497 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:35:01.498 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:01.499 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:01.501 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:35:01.509 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:35:01.516 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:01.518 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:01.520 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:01.521 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:35:01.522 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:01.523 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:01.529 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:35:01.529 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:35:01.531 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:01.532 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:01.533 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:35:01.537 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:35:01.540 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:35:01.541 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:01.543 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:01.545 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:35:01.547 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:35:01.548 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:35:01.549 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:35:01.550 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:35:01.551 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:35:01.553 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 74.8787ms
2022-10-28 09:35:01.554 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:35:01.556 +01:00 [DBG] Connection id "0HMLONPG8CFUK" completed keep alive response.
2022-10-28 09:35:01.557 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:35:01.558 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 101.8255ms
2022-10-28 09:35:03.937 +01:00 [DBG] Connection id "0HMLONPG8CFUL" accepted.
2022-10-28 09:35:03.938 +01:00 [DBG] Connection id "0HMLONPG8CFUL" started.
2022-10-28 09:35:03.941 +01:00 [DBG] Connection 0HMLONPG8CFUL established using the following protocol: "Tls13"
2022-10-28 09:35:03.944 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - -
2022-10-28 09:35:03.946 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:35:03.949 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/users/profile'
2022-10-28 09:35:03.950 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Users/Profile' is valid for the request path '/api/v1/users/profile'
2022-10-28 09:35:03.951 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:35:03.953 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:35:03.953 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:35:03.954 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:35:03.955 +01:00 [DBG] Authorization was successful.
2022-10-28 09:35:03.956 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:35:03.958 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API).
2022-10-28 09:35:03.970 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:35:03.971 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:35:03.973 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:35:03.975 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:35:03.978 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:35:03.980 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:35:03.981 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:35:03.982 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:35:03.985 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:35:03.986 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:35:03.987 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:03.988 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:03.989 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:35:03.996 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:35:03.999 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:04.000 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:35:04.001 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:04.002 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:04.004 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:35:04.006 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:35:04.007 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:35:04.008 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:35:04.010 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:35:04.012 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse'.
2022-10-28 09:35:04.014 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 34.5755ms
2022-10-28 09:35:04.015 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:35:04.017 +01:00 [DBG] Connection id "0HMLONPG8CFUL" completed keep alive response.
2022-10-28 09:35:04.017 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:35:04.018 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - - - 200 - application/json;+charset=utf-8 74.7816ms
2022-10-28 09:35:05.904 +01:00 [DBG] Connection id "0HMLONPG8CFUM" accepted.
2022-10-28 09:35:05.906 +01:00 [DBG] Connection id "0HMLONPG8CFUM" started.
2022-10-28 09:35:05.908 +01:00 [DBG] Connection 0HMLONPG8CFUM established using the following protocol: "Tls13"
2022-10-28 09:35:05.910 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/logout application/json;+charset=utf-8 -
2022-10-28 09:35:05.911 +01:00 [DBG] POST requests are not supported
2022-10-28 09:35:05.911 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/logout'
2022-10-28 09:35:05.913 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Logout' is valid for the request path '/api/v1/auth/logout'
2022-10-28 09:35:05.915 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Logout (SimpleBank.AcctManage.API)'
2022-10-28 09:35:05.916 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:35:05.917 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:35:05.918 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:35:05.918 +01:00 [DBG] Authorization was successful.
2022-10-28 09:35:05.919 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Logout (SimpleBank.AcctManage.API)'
2022-10-28 09:35:05.923 +01:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 09:35:05.925 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:35:05.927 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:35:05.928 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:35:05.931 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:35:05.932 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:35:05.934 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:35:05.935 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:35:05.937 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest' ...
2022-10-28 09:35:05.938 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-28 09:35:05.939 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:35:05.941 +01:00 [DBG] Connection id "0HMLONPG8CFUM", Request id "0HMLONPG8CFUM:00000002": started reading request body.
2022-10-28 09:35:05.942 +01:00 [DBG] Connection id "0HMLONPG8CFUM", Request id "0HMLONPG8CFUM:00000002": done reading request body.
2022-10-28 09:35:05.944 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest'
2022-10-28 09:35:05.946 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest'.
2022-10-28 09:35:05.947 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest'.
2022-10-28 09:35:05.948 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest' ...
2022-10-28 09:35:05.950 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest'.
2022-10-28 09:35:05.954 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:35:05.956 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.Id == __userTokenId_0)'
2022-10-28 09:35:05.960 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_token_id == @__userTokenId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 09:35:05.963 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:35:05.964 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:35:05.965 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:05.967 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:05.968 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-28 09:35:05.971 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-28 09:35:05.974 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:05.975 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:35:05.977 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:05.978 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:05.980 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:05.982 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:35:05.983 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:35:05.984 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:35:05.985 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:05.987 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:05.988 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:35:05.989 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:35:05.990 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:35:05.991 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:35:05.992 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:35:05.996 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:35:05.998 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:35:05.999 +01:00 [DBG] Committing transaction.
2022-10-28 09:35:06.002 +01:00 [DBG] Committed transaction.
2022-10-28 09:35:06.002 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:06.004 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:06.005 +01:00 [DBG] Disposing transaction.
2022-10-28 09:35:06.007 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:06.009 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:35:06.013 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:35:06.016 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:35:06.017 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:35:06.018 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:35:06.018 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 09:35:06.020 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2022-10-28 09:35:06.021 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Logout (SimpleBank.AcctManage.API) in 87.1709ms
2022-10-28 09:35:06.022 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Logout (SimpleBank.AcctManage.API)'
2022-10-28 09:35:06.024 +01:00 [DBG] Connection id "0HMLONPG8CFUM" completed keep alive response.
2022-10-28 09:35:06.026 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:35:06.027 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/logout application/json;+charset=utf-8 - - 200 - text/plain;+charset=utf-8 117.1256ms
2022-10-28 09:35:07.513 +01:00 [DBG] Connection id "0HMLONPG8CFUE" received FIN.
2022-10-28 09:35:07.516 +01:00 [DBG] Connection id "0HMLONPG8CFUE" sending FIN because: "The client closed the connection."
2022-10-28 09:35:07.519 +01:00 [DBG] Connection id "0HMLONPG8CFUE" disconnecting.
2022-10-28 09:35:07.520 +01:00 [DBG] Connection id "0HMLONPG8CFUE" stopped.
2022-10-28 09:35:32.070 +01:00 [DBG] Connection id "0HMLONPG8CFUG" received FIN.
2022-10-28 09:35:32.077 +01:00 [DBG] Connection id "0HMLONPG8CFUG" sending FIN because: "The client closed the connection."
2022-10-28 09:35:32.085 +01:00 [DBG] Connection id "0HMLONPG8CFUG" disconnecting.
2022-10-28 09:35:32.087 +01:00 [DBG] Connection id "0HMLONPG8CFUG" stopped.
2022-10-28 09:35:39.930 +01:00 [DBG] Connection id "0HMLONPG8CFUF" received FIN.
2022-10-28 09:35:39.931 +01:00 [DBG] Connection id "0HMLONPG8CFUF" sending FIN because: "The client closed the connection."
2022-10-28 09:35:39.932 +01:00 [DBG] Connection id "0HMLONPG8CFUF" disconnecting.
2022-10-28 09:35:39.933 +01:00 [DBG] Connection id "0HMLONPG8CFUF" stopped.
2022-10-28 09:35:48.184 +01:00 [DBG] Connection id "0HMLONPG8CFUN" accepted.
2022-10-28 09:35:48.189 +01:00 [DBG] Connection id "0HMLONPG8CFUN" started.
2022-10-28 09:35:48.193 +01:00 [DBG] Connection 0HMLONPG8CFUN established using the following protocol: "Tls13"
2022-10-28 09:35:48.194 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 09:35:48.195 +01:00 [DBG] POST requests are not supported
2022-10-28 09:35:48.196 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 09:35:48.197 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 09:35:48.198 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 09:35:48.200 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:35:48.200 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:35:48.201 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 09:35:48.203 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 09:35:48.209 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:35:48.211 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:35:48.213 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:35:48.215 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:35:48.217 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:35:48.218 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:35:48.221 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:35:48.222 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 09:35:48.223 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 09:35:48.225 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:35:48.227 +01:00 [DBG] Connection id "0HMLONPG8CFUN", Request id "0HMLONPG8CFUN:00000002": started reading request body.
2022-10-28 09:35:48.228 +01:00 [DBG] Connection id "0HMLONPG8CFUN", Request id "0HMLONPG8CFUN:00000002": done reading request body.
2022-10-28 09:35:48.229 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 09:35:48.230 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 09:35:48.231 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 09:35:48.233 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 09:35:48.234 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 09:35:48.237 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:35:48.239 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:35:48.240 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:35:48.241 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:48.252 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:48.253 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 09:35:48.258 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 09:35:48.260 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:48.262 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:35:48.262 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:48.264 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:48.267 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:35:48.268 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:35:48.269 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:48.272 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:48.273 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 09:35:48.277 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 09:35:48.280 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:48.281 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:35:48.282 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:48.284 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:48.285 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:48.288 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:35:48.289 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:35:48.291 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:35:48.292 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:48.293 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:48.294 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:35:48.295 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:35:48.296 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:35:48.297 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:35:48.298 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:35:48.306 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:35:48.309 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:35:48.310 +01:00 [DBG] Committing transaction.
2022-10-28 09:35:48.312 +01:00 [DBG] Committed transaction.
2022-10-28 09:35:48.313 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:48.314 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:48.315 +01:00 [DBG] Disposing transaction.
2022-10-28 09:35:48.316 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:48.318 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:35:48.319 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:35:48.322 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:35:48.322 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:35:48.323 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:35:48.324 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:35:48.325 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 09:35:48.327 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 108.4845ms
2022-10-28 09:35:48.328 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 09:35:48.330 +01:00 [DBG] Connection id "0HMLONPG8CFUN" completed keep alive response.
2022-10-28 09:35:48.331 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:35:48.332 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 138.0511ms
2022-10-28 09:35:48.360 +01:00 [DBG] Connection id "0HMLONPG8CFUO" accepted.
2022-10-28 09:35:48.361 +01:00 [DBG] Connection id "0HMLONPG8CFUO" started.
2022-10-28 09:35:48.364 +01:00 [DBG] Connection 0HMLONPG8CFUO established using the following protocol: "Tls13"
2022-10-28 09:35:48.365 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - -
2022-10-28 09:35:48.366 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:35:48.367 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/users/profile'
2022-10-28 09:35:48.368 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Users/Profile' is valid for the request path '/api/v1/users/profile'
2022-10-28 09:35:48.370 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:35:48.371 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:35:48.372 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:35:48.372 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:35:48.373 +01:00 [DBG] Authorization was successful.
2022-10-28 09:35:48.374 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:35:48.376 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API).
2022-10-28 09:35:48.378 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:35:48.379 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:35:48.380 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:35:48.382 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:35:48.384 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:35:48.386 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:35:48.387 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:35:48.389 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:35:48.391 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:35:48.392 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:35:48.393 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:48.394 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:48.395 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:35:48.399 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:35:48.402 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:48.404 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:35:48.405 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:48.406 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:48.407 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:35:48.409 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:35:48.410 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:35:48.411 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:35:48.413 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:35:48.414 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse'.
2022-10-28 09:35:48.416 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 30.1931ms
2022-10-28 09:35:48.417 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:35:48.418 +01:00 [DBG] Connection id "0HMLONPG8CFUO" completed keep alive response.
2022-10-28 09:35:48.419 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:35:48.421 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - - - 200 - application/json;+charset=utf-8 55.8610ms
2022-10-28 09:35:56.095 +01:00 [DBG] Connection id "0HMLONPG8CFUH" received FIN.
2022-10-28 09:35:56.097 +01:00 [DBG] Connection id "0HMLONPG8CFUH" sending FIN because: "The client closed the connection."
2022-10-28 09:35:56.099 +01:00 [DBG] Connection id "0HMLONPG8CFUH" disconnecting.
2022-10-28 09:35:56.100 +01:00 [DBG] Connection id "0HMLONPG8CFUH" stopped.
2022-10-28 09:35:58.207 +01:00 [DBG] Connection id "0HMLONPG8CFUP" accepted.
2022-10-28 09:35:58.210 +01:00 [DBG] Connection id "0HMLONPG8CFUP" started.
2022-10-28 09:35:58.218 +01:00 [DBG] Connection 0HMLONPG8CFUP established using the following protocol: "Tls13"
2022-10-28 09:35:58.221 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:35:58.223 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:35:58.225 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:35:58.226 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:35:58.228 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:35:58.229 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:35:58.231 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:35:58.233 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:35:58.234 +01:00 [DBG] Authorization was successful.
2022-10-28 09:35:58.235 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:35:58.236 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:35:58.238 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:35:58.240 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:35:58.241 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:35:58.243 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:35:58.245 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:35:58.247 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:35:58.248 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:35:58.270 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:35:58.281 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:35:58.293 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (12ms).
2022-10-28 09:35:58.304 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:58.310 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:58.320 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:35:58.333 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:35:58.336 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:35:58.338 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:35:58.339 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:58.340 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:58.342 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:35:58.343 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:35:58.344 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:58.346 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:58.349 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:35:58.353 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:35:58.356 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:35:58.357 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:35:58.359 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:35:58.360 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:35:58.363 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:35:58.366 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:35:58.368 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:35:58.369 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:35:58.370 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:35:58.372 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 125.6047ms
2022-10-28 09:35:58.373 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:35:58.374 +01:00 [DBG] Connection id "0HMLONPG8CFUP" completed keep alive response.
2022-10-28 09:35:58.375 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:35:58.376 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 155.0095ms
2022-10-28 09:36:09.161 +01:00 [DBG] Connection id "0HMLONPG8CFUI" received FIN.
2022-10-28 09:36:09.163 +01:00 [DBG] Connection id "0HMLONPG8CFUI" sending FIN because: "The client closed the connection."
2022-10-28 09:36:09.166 +01:00 [DBG] Connection id "0HMLONPG8CFUI" disconnecting.
2022-10-28 09:36:09.168 +01:00 [DBG] Connection id "0HMLONPG8CFUI" stopped.
2022-10-28 09:36:11.530 +01:00 [DBG] Connection id "0HMLONPG8CFUJ" received FIN.
2022-10-28 09:36:11.532 +01:00 [DBG] Connection id "0HMLONPG8CFUJ" sending FIN because: "The client closed the connection."
2022-10-28 09:36:11.533 +01:00 [DBG] Connection id "0HMLONPG8CFUJ" disconnecting.
2022-10-28 09:36:11.534 +01:00 [DBG] Connection id "0HMLONPG8CFUJ" stopped.
2022-10-28 09:36:16.518 +01:00 [DBG] Connection id "0HMLONPG8CFUK" received FIN.
2022-10-28 09:36:16.520 +01:00 [DBG] Connection id "0HMLONPG8CFUK" sending FIN because: "The client closed the connection."
2022-10-28 09:36:16.522 +01:00 [DBG] Connection id "0HMLONPG8CFUK" disconnecting.
2022-10-28 09:36:16.523 +01:00 [DBG] Connection id "0HMLONPG8CFUK" stopped.
2022-10-28 09:36:18.984 +01:00 [DBG] Connection id "0HMLONPG8CFUL" received FIN.
2022-10-28 09:36:18.986 +01:00 [DBG] Connection id "0HMLONPG8CFUL" sending FIN because: "The client closed the connection."
2022-10-28 09:36:18.987 +01:00 [DBG] Connection id "0HMLONPG8CFUL" disconnecting.
2022-10-28 09:36:18.988 +01:00 [DBG] Connection id "0HMLONPG8CFUL" stopped.
2022-10-28 09:36:20.978 +01:00 [DBG] Connection id "0HMLONPG8CFUM" received FIN.
2022-10-28 09:36:20.981 +01:00 [DBG] Connection id "0HMLONPG8CFUM" sending FIN because: "The client closed the connection."
2022-10-28 09:36:20.983 +01:00 [DBG] Connection id "0HMLONPG8CFUM" disconnecting.
2022-10-28 09:36:20.984 +01:00 [DBG] Connection id "0HMLONPG8CFUM" stopped.
2022-10-28 09:37:03.248 +01:00 [DBG] Connection id "0HMLONPG8CFUN" received FIN.
2022-10-28 09:37:03.258 +01:00 [DBG] Connection id "0HMLONPG8CFUN" disconnecting.
2022-10-28 09:37:03.275 +01:00 [DBG] Connection id "0HMLONPG8CFUN" sending FIN because: "The client closed the connection."
2022-10-28 09:37:03.293 +01:00 [DBG] Connection id "0HMLONPG8CFUN" stopped.
2022-10-28 09:37:03.420 +01:00 [DBG] Connection id "0HMLONPG8CFUO" received FIN.
2022-10-28 09:37:03.422 +01:00 [DBG] Connection id "0HMLONPG8CFUO" sending FIN because: "The client closed the connection."
2022-10-28 09:37:03.424 +01:00 [DBG] Connection id "0HMLONPG8CFUO" disconnecting.
2022-10-28 09:37:03.425 +01:00 [DBG] Connection id "0HMLONPG8CFUO" stopped.
2022-10-28 09:37:13.271 +01:00 [DBG] Connection id "0HMLONPG8CFUP" received FIN.
2022-10-28 09:37:13.273 +01:00 [DBG] Connection id "0HMLONPG8CFUP" sending FIN because: "The client closed the connection."
2022-10-28 09:37:13.275 +01:00 [DBG] Connection id "0HMLONPG8CFUP" disconnecting.
2022-10-28 09:37:13.276 +01:00 [DBG] Connection id "0HMLONPG8CFUP" stopped.
2022-10-28 09:53:28.860 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 09:53:28.934 +01:00 [DBG] Hosting starting
2022-10-28 09:53:28.975 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 09:53:28.981 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 09:53:28.987 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 09:53:28.988 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 09:53:28.995 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 09:53:29.002 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 09:53:29.003 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 09:53:29.019 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 09:53:29.039 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 09:53:29.046 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 09:53:29.049 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 09:53:29.055 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 09:53:29.059 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 09:53:29.063 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 09:53:29.064 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 09:53:29.198 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 09:53:29.261 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 09:53:29.262 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 09:53:29.263 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 09:53:29.264 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 09:53:29.265 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 09:53:29.266 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 09:53:29.267 +01:00 [INF] Hosting environment: Development
2022-10-28 09:53:29.268 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 09:53:29.269 +01:00 [DBG] Hosting started
2022-10-28 09:53:29.510 +01:00 [DBG] Connection id "0HMLOO7H8FTBB" received FIN.
2022-10-28 09:53:29.548 +01:00 [DBG] Connection id "0HMLOO7H8FTBB" accepted.
2022-10-28 09:53:29.554 +01:00 [DBG] Connection id "0HMLOO7H8FTBB" started.
2022-10-28 09:53:29.604 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 09:53:30.007 +01:00 [DBG] Connection id "0HMLOO7H8FTBB" stopped.
2022-10-28 09:53:30.026 +01:00 [DBG] Connection id "0HMLOO7H8FTBB" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 09:53:35.110 +01:00 [DBG] Connection id "0HMLOO7H8FTBC" accepted.
2022-10-28 09:53:35.114 +01:00 [DBG] Connection id "0HMLOO7H8FTBC" started.
2022-10-28 09:53:35.159 +01:00 [DBG] Connection id "0HMLOO7H8FTBC" received FIN.
2022-10-28 09:53:35.243 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 09:53:35.286 +01:00 [DBG] Connection id "0HMLOO7H8FTBC" stopped.
2022-10-28 09:53:35.317 +01:00 [DBG] Connection id "0HMLOO7H8FTBC" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 09:53:48.354 +01:00 [DBG] Connection id "0HMLOO7H8FTBD" accepted.
2022-10-28 09:53:48.356 +01:00 [DBG] Connection id "0HMLOO7H8FTBD" started.
2022-10-28 09:53:48.377 +01:00 [DBG] Connection 0HMLOO7H8FTBD established using the following protocol: "Tls13"
2022-10-28 09:53:48.414 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 09:53:48.434 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 09:53:48.485 +01:00 [DBG] POST requests are not supported
2022-10-28 09:53:48.520 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 09:53:48.529 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 09:53:48.537 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 09:53:48.625 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:53:48.629 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:53:48.631 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 09:53:48.660 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 09:53:48.663 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:53:48.665 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:53:48.666 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:53:48.669 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:53:48.670 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:53:48.673 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:53:48.906 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 09:53:48.937 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:53:48.964 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 09:53:48.973 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 09:53:48.977 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:53:48.996 +01:00 [DBG] Connection id "0HMLOO7H8FTBD", Request id "0HMLOO7H8FTBD:00000002": started reading request body.
2022-10-28 09:53:49.002 +01:00 [DBG] Connection id "0HMLOO7H8FTBD", Request id "0HMLOO7H8FTBD:00000002": done reading request body.
2022-10-28 09:53:49.007 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 09:53:49.009 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 09:53:49.010 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 09:53:49.012 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 09:53:49.022 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 09:53:50.107 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:53:50.166 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 09:53:50.518 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 09:53:50.565 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:53:50.649 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (80ms).
2022-10-28 09:53:50.659 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:50.928 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:50.945 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 09:53:51.044 +01:00 [INF] Executed DbCommand (106ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 09:53:51.103 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:53:51.154 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:53:51.159 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:51.167 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:51.176 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 09:53:51.183 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 09:53:51.205 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:53:51.207 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:53:51.215 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:51.218 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:51.220 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 09:53:51.241 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 09:53:51.251 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:53:51.275 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:53:51.284 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:51.289 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:51.455 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:53:51.464 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:53:51.468 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:53:51.494 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:53:51.517 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:51.519 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:51.522 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:53:51.533 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:53:51.577 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:53:51.579 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:53:51.581 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:53:51.595 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:53:51.603 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:53:51.611 +01:00 [DBG] Committing transaction.
2022-10-28 09:53:51.625 +01:00 [DBG] Committed transaction.
2022-10-28 09:53:51.631 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:51.633 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:51.639 +01:00 [DBG] Disposing transaction.
2022-10-28 09:53:51.645 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:53:51.652 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:53:51.663 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:53:51.670 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:53:51.671 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:53:51.673 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:53:51.676 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:53:51.679 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 09:53:51.713 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 3035.8728ms
2022-10-28 09:53:51.717 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 09:53:51.725 +01:00 [DBG] Connection id "0HMLOO7H8FTBD" completed keep alive response.
2022-10-28 09:53:51.730 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:53:51.735 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3324.3442ms
2022-10-28 09:53:51.786 +01:00 [DBG] Connection id "0HMLOO7H8FTBE" accepted.
2022-10-28 09:53:51.790 +01:00 [DBG] Connection id "0HMLOO7H8FTBE" started.
2022-10-28 09:53:51.794 +01:00 [DBG] Connection 0HMLOO7H8FTBE established using the following protocol: "Tls13"
2022-10-28 09:53:51.800 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - -
2022-10-28 09:53:51.802 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:53:51.803 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/users/profile'
2022-10-28 09:53:51.805 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Users/Profile' is valid for the request path '/api/v1/users/profile'
2022-10-28 09:53:51.807 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:53:51.884 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:53:51.889 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:53:51.893 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:53:51.901 +01:00 [DBG] Authorization was successful.
2022-10-28 09:53:51.904 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:53:51.909 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API).
2022-10-28 09:53:51.912 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:53:51.914 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:53:51.916 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:53:51.918 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:53:51.920 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:53:51.922 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:53:51.924 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:53:51.972 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:53:51.982 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-28 09:53:52.055 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
            SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
            FROM SB-operational.Users AS u
            WHERE u.user_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 09:53:52.059 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:53:52.060 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:53:52.061 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:52.063 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:52.064 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:53:52.068 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:53:52.072 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:53:52.074 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:53:52.074 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:52.075 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:52.078 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:53:52.080 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:53:52.081 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:53:52.082 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:53:52.083 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:53:52.085 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse'.
2022-10-28 09:53:52.089 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 166.7838ms
2022-10-28 09:53:52.091 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:53:52.093 +01:00 [DBG] Connection id "0HMLOO7H8FTBE" completed keep alive response.
2022-10-28 09:53:52.094 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:53:52.096 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - - - 200 - application/json;+charset=utf-8 296.1822ms
2022-10-28 09:53:53.436 +01:00 [DBG] Connection id "0HMLOO7H8FTBF" accepted.
2022-10-28 09:53:53.437 +01:00 [DBG] Connection id "0HMLOO7H8FTBF" started.
2022-10-28 09:53:53.440 +01:00 [DBG] Connection 0HMLOO7H8FTBF established using the following protocol: "Tls13"
2022-10-28 09:53:53.442 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:53:53.443 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:53:53.444 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:53:53.445 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:53:53.446 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:53:53.448 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:53:53.449 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:53:53.450 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:53:53.451 +01:00 [DBG] Authorization was successful.
2022-10-28 09:53:53.452 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:53:53.456 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:53:53.458 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:53:53.459 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:53:53.460 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:53:53.462 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:53:53.464 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:53:53.466 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:53:53.469 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:53:53.512 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:53:53.518 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(account => account.UserId == __userId_0)'
2022-10-28 09:53:53.523 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
        SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
        FROM SB-operational.Accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-28 09:53:53.526 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:53:53.527 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:53:53.528 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:53.530 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:53.531 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:53:53.536 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:53:53.552 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:53:53.565 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:53:53.566 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:53.568 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:53.576 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:53:53.578 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:53:53.579 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:53.581 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:53.582 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:53:53.586 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:53:53.589 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:53:53.590 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:53.591 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:53.594 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:53:53.596 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:53:53.597 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:53:53.598 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:53:53.599 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:53:53.601 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:53:53.615 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 149.0416ms
2022-10-28 09:53:53.618 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:53:53.619 +01:00 [DBG] Connection id "0HMLOO7H8FTBF" completed keep alive response.
2022-10-28 09:53:53.620 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:53:53.621 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 179.2715ms
2022-10-28 09:53:59.359 +01:00 [DBG] Connection id "0HMLOO7H8FTBG" accepted.
2022-10-28 09:53:59.360 +01:00 [DBG] Connection id "0HMLOO7H8FTBG" started.
2022-10-28 09:53:59.364 +01:00 [DBG] Connection 0HMLOO7H8FTBG established using the following protocol: "Tls13"
2022-10-28 09:53:59.366 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/accounts/ application/json;+charset=utf-8 -
2022-10-28 09:53:59.367 +01:00 [DBG] POST requests are not supported
2022-10-28 09:53:59.368 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:53:59.369 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:53:59.371 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:53:59.373 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:53:59.374 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:53:59.375 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:53:59.377 +01:00 [DBG] Authorization was successful.
2022-10-28 09:53:59.378 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:53:59.381 +01:00 [INF] Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]] CreateAccount(SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:53:59.384 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:53:59.385 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:53:59.386 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:53:59.388 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:53:59.389 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:53:59.391 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:53:59.393 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:53:59.395 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' ...
2022-10-28 09:53:59.396 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' using the name '' in request data ...
2022-10-28 09:53:59.398 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:53:59.399 +01:00 [DBG] Connection id "0HMLOO7H8FTBG", Request id "0HMLOO7H8FTBG:00000002": started reading request body.
2022-10-28 09:53:59.401 +01:00 [DBG] Connection id "0HMLOO7H8FTBG", Request id "0HMLOO7H8FTBG:00000002": done reading request body.
2022-10-28 09:53:59.404 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'
2022-10-28 09:53:59.405 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:53:59.407 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:53:59.408 +01:00 [DBG] Attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' ...
2022-10-28 09:53:59.411 +01:00 [DBG] Done attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:53:59.415 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:53:59.433 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:53:59.444 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:53:59.446 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:53:59.447 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:53:59.453 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:53:59.454 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:59.455 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:59.457 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:53:59.458 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:53:59.469 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:53:59.470 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:53:59.473 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-28 09:53:59.496 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-28 09:53:59.515 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:53:59.524 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:53:59.526 +01:00 [DBG] Committing transaction.
2022-10-28 09:53:59.530 +01:00 [DBG] Committed transaction.
2022-10-28 09:53:59.531 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:53:59.532 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:53:59.533 +01:00 [DBG] Disposing transaction.
2022-10-28 09:53:59.539 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:53:59.542 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:53:59.545 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:53:59.547 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:53:59.548 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:53:59.549 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:53:59.550 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:53:59.551 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse'.
2022-10-28 09:53:59.573 +01:00 [DBG] Found the endpoints ["SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2022-10-28 09:53:59.584 +01:00 [DBG] Successfully processed template api/v{version:apiVersion}/Accounts/{accountId} for SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) resulting in /api/v1/Accounts/49ba51db-f107-4e70-bff5-931f2721f502 and 
2022-10-28 09:53:59.587 +01:00 [DBG] Link generation succeeded for endpoints ["SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] with result /api/v1/Accounts/49ba51db-f107-4e70-bff5-931f2721f502
2022-10-28 09:53:59.589 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API) in 197.6786ms
2022-10-28 09:53:59.590 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:53:59.592 +01:00 [DBG] Connection id "0HMLOO7H8FTBG" completed keep alive response.
2022-10-28 09:53:59.593 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:53:59.595 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/accounts/ application/json;+charset=utf-8 - - 201 - application/json;+charset=utf-8 228.5331ms
2022-10-28 09:54:02.196 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/accounts/ application/json;+charset=utf-8 -
2022-10-28 09:54:02.198 +01:00 [DBG] POST requests are not supported
2022-10-28 09:54:02.199 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:54:02.200 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:54:02.202 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:02.203 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:02.204 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:02.205 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:02.206 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:02.207 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:02.208 +01:00 [INF] Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]] CreateAccount(SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:54:02.210 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:02.211 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:02.213 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:02.216 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:02.217 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:02.219 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:02.224 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:02.226 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' ...
2022-10-28 09:54:02.228 +01:00 [DBG] Attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' using the name '' in request data ...
2022-10-28 09:54:02.229 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:54:02.231 +01:00 [DBG] Connection id "0HMLOO7H8FTBG", Request id "0HMLOO7H8FTBG:00000003": started reading request body.
2022-10-28 09:54:02.233 +01:00 [DBG] Connection id "0HMLOO7H8FTBG", Request id "0HMLOO7H8FTBG:00000003": done reading request body.
2022-10-28 09:54:02.234 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'
2022-10-28 09:54:02.236 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:54:02.237 +01:00 [DBG] Done attempting to bind parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:54:02.238 +01:00 [DBG] Attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest' ...
2022-10-28 09:54:02.240 +01:00 [DBG] Done attempting to validate the bound parameter 'accountRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.CreateAccountRequest'.
2022-10-28 09:54:02.241 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:02.243 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Account'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:02.245 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:02.247 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:54:02.248 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:54:02.249 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:54:02.250 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:02.251 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:02.253 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:54:02.254 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:54:02.255 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:02.256 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:54:02.257 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-28 09:54:02.261 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-operational"."Accounts" (balance, created_at, currency, user_id)
VALUES (@p0, @p1, @p2, @p3)
RETURNING account_id;
2022-10-28 09:54:02.265 +01:00 [DBG] The foreign key property 'Account.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:54:02.267 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:02.267 +01:00 [DBG] Committing transaction.
2022-10-28 09:54:02.270 +01:00 [DBG] Committed transaction.
2022-10-28 09:54:02.271 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:02.272 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:02.274 +01:00 [DBG] Disposing transaction.
2022-10-28 09:54:02.274 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:02.276 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:54:02.277 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:02.280 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:02.282 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:02.283 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:02.284 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:02.285 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse'.
2022-10-28 09:54:02.288 +01:00 [DBG] Found the endpoints ["SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2022-10-28 09:54:02.290 +01:00 [DBG] Successfully processed template api/v{version:apiVersion}/Accounts/{accountId} for SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) resulting in /api/v1/Accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d and 
2022-10-28 09:54:02.293 +01:00 [DBG] Link generation succeeded for endpoints ["SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)"] with result /api/v1/Accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d
2022-10-28 09:54:02.297 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API) in 77.712ms
2022-10-28 09:54:02.299 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.CreateAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:02.302 +01:00 [DBG] Connection id "0HMLOO7H8FTBG" completed keep alive response.
2022-10-28 09:54:02.303 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:02.304 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/accounts/ application/json;+charset=utf-8 - - 201 - application/json;+charset=utf-8 108.5567ms
2022-10-28 09:54:21.462 +01:00 [DBG] Connection id "0HMLOO7H8FTBH" accepted.
2022-10-28 09:54:21.466 +01:00 [DBG] Connection id "0HMLOO7H8FTBH" started.
2022-10-28 09:54:21.469 +01:00 [DBG] Connection 0HMLOO7H8FTBH established using the following protocol: "Tls13"
2022-10-28 09:54:21.471 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/transfers/ application/json;+charset=utf-8 -
2022-10-28 09:54:21.472 +01:00 [DBG] POST requests are not supported
2022-10-28 09:54:21.473 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/transfers/'
2022-10-28 09:54:21.474 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Transfers' is valid for the request path '/api/v1/transfers/'
2022-10-28 09:54:21.476 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-28 09:54:21.478 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:21.479 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:21.480 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:21.481 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:21.482 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-28 09:54:21.486 +01:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transfers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.TransferResponse]] MakeTransfer(SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.TransfersController (SimpleBank.AcctManage.API).
2022-10-28 09:54:21.488 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:21.489 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:21.490 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:21.493 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:21.495 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:21.497 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.TransfersController (SimpleBank.AcctManage.API)
2022-10-28 09:54:21.499 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.TransfersController (SimpleBank.AcctManage.API)
2022-10-28 09:54:21.500 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest' ...
2022-10-28 09:54:21.502 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest' using the name '' in request data ...
2022-10-28 09:54:21.503 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:54:21.505 +01:00 [DBG] Connection id "0HMLOO7H8FTBH", Request id "0HMLOO7H8FTBH:00000002": started reading request body.
2022-10-28 09:54:21.506 +01:00 [DBG] Connection id "0HMLOO7H8FTBH", Request id "0HMLOO7H8FTBH:00000002": done reading request body.
2022-10-28 09:54:21.509 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'
2022-10-28 09:54:21.510 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'.
2022-10-28 09:54:21.513 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'.
2022-10-28 09:54:21.514 +01:00 [DBG] Attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest' ...
2022-10-28 09:54:21.517 +01:00 [DBG] Done attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'.
2022-10-28 09:54:21.521 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:21.523 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-28 09:54:21.527 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Account>(
    asyncEnumerable: new SingleQueryingEnumerable<Account>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.account_id, a.balance, a.created_at, a.currency, a.user_id
            FROM SB-operational.Accounts AS a
            WHERE a.account_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 09:54:21.530 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:21.531 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:54:21.533 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:21.534 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:21.535 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:21.542 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:21.546 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:21.547 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:21.547 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:21.549 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:21.552 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:21.553 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:54:21.555 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:21.556 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:21.557 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:21.560 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:21.563 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:21.564 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:21.565 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:21.567 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:21.569 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:21.572 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:21.573 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:21.574 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:21.575 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 09:54:21.576 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-28 09:54:21.578 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API) in 81.7159ms
2022-10-28 09:54:21.580 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-28 09:54:21.581 +01:00 [DBG] Connection id "0HMLOO7H8FTBH" completed keep alive response.
2022-10-28 09:54:21.583 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:21.584 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/transfers/ application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 113.4714ms
2022-10-28 09:54:33.801 +01:00 [DBG] Connection id "0HMLOO7H8FTBI" accepted.
2022-10-28 09:54:33.802 +01:00 [DBG] Connection id "0HMLOO7H8FTBI" started.
2022-10-28 09:54:33.805 +01:00 [DBG] Connection 0HMLOO7H8FTBI established using the following protocol: "Tls13"
2022-10-28 09:54:33.806 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502 - -
2022-10-28 09:54:33.807 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:54:33.808 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502'
2022-10-28 09:54:33.809 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502'
2022-10-28 09:54:33.811 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:33.815 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:33.816 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:33.817 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:33.818 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:33.819 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:33.823 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:54:33.826 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:33.830 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:33.835 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:33.841 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:33.843 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:33.846 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:33.848 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:33.850 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:54:33.852 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 09:54:33.855 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:33.857 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:33.859 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:54:33.861 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:33.868 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:33.873 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:33.875 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 09:54:33.877 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:33.882 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:33.884 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:33.892 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:33.900 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:33.902 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:33.903 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:33.904 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:33.909 +01:00 [DBG] Compiling query expression: 
'DbSet<Movement>()
    .Where(movement => movement.AccountId == __accountId_0)'
2022-10-28 09:54:33.915 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Movement>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Movement.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Movement.AccountId (Guid) Required FK Index, 1], [Property: Movement.Amount (decimal) Required, 2], [Property: Movement.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3] }
        SELECT m.movement_id, m.account_id, m.amount, m.created_at
        FROM SB-operational.Movements AS m
        WHERE m.account_id == @__accountId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movement>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-28 09:54:33.919 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:33.920 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:54:33.921 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:33.922 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:33.924 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:54:33.928 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:54:33.931 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:33.932 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:33.933 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:33.935 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:33.937 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:33.938 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:33.939 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:33.940 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:33.941 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 09:54:33.946 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 100.6768ms
2022-10-28 09:54:33.948 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:33.949 +01:00 [DBG] Connection id "0HMLOO7H8FTBI" completed keep alive response.
2022-10-28 09:54:33.950 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:33.951 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502 - - - 200 - application/json;+charset=utf-8 144.9338ms
2022-10-28 09:54:35.460 +01:00 [DBG] Connection id "0HMLOO7H8FTBJ" accepted.
2022-10-28 09:54:35.461 +01:00 [DBG] Connection id "0HMLOO7H8FTBJ" started.
2022-10-28 09:54:35.466 +01:00 [DBG] Connection 0HMLOO7H8FTBJ established using the following protocol: "Tls13"
2022-10-28 09:54:35.468 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d - -
2022-10-28 09:54:35.469 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:54:35.470 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d'
2022-10-28 09:54:35.473 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d'
2022-10-28 09:54:35.478 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:35.487 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:35.491 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:35.492 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:35.493 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:35.494 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:35.495 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:54:35.498 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:35.500 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:35.502 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:35.504 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:35.506 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:35.508 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:35.509 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:35.511 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:54:35.512 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 09:54:35.515 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:35.516 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:35.517 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:54:35.518 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:35.520 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:35.522 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:35.523 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:54:35.524 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:35.526 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:35.527 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:35.531 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:35.535 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:35.537 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:35.538 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:35.539 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:35.541 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:35.542 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:54:35.543 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:35.544 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:35.547 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:54:35.550 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:54:35.553 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:35.554 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:35.555 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:35.556 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:35.558 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:35.559 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:35.560 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:35.561 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:35.563 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 09:54:35.565 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 56.9673ms
2022-10-28 09:54:35.566 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:35.567 +01:00 [DBG] Connection id "0HMLOO7H8FTBJ" completed keep alive response.
2022-10-28 09:54:35.569 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:35.570 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d - - - 200 - application/json;+charset=utf-8 101.4819ms
2022-10-28 09:54:36.553 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502 - -
2022-10-28 09:54:36.555 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:54:36.555 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502'
2022-10-28 09:54:36.557 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502'
2022-10-28 09:54:36.558 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:36.559 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:36.560 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:36.561 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:36.562 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:36.564 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:36.566 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:54:36.568 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:36.569 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:36.570 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:36.573 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:36.575 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:36.576 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:36.578 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:36.579 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:54:36.581 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 09:54:36.584 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:36.586 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:36.588 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:54:36.589 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:36.591 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:36.595 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:36.596 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:54:36.599 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:36.601 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:36.603 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:36.608 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:36.612 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:36.617 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:36.619 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:36.620 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:36.621 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:36.622 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:54:36.624 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:36.626 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:36.627 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:54:36.633 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:54:36.637 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:36.638 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:36.639 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:36.641 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:36.643 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:36.644 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:36.645 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:36.645 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:36.647 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 09:54:36.648 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 71.9377ms
2022-10-28 09:54:36.650 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:36.651 +01:00 [DBG] Connection id "0HMLOO7H8FTBI" completed keep alive response.
2022-10-28 09:54:36.652 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:36.653 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502 - - - 200 - application/json;+charset=utf-8 100.3948ms
2022-10-28 09:54:38.666 +01:00 [DBG] Connection id "0HMLOO7H8FTBK" accepted.
2022-10-28 09:54:38.669 +01:00 [DBG] Connection id "0HMLOO7H8FTBK" started.
2022-10-28 09:54:38.675 +01:00 [DBG] Connection 0HMLOO7H8FTBK established using the following protocol: "Tls13"
2022-10-28 09:54:38.676 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:54:38.677 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:54:38.678 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:54:38.679 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:54:38.681 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:38.685 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:38.686 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:38.691 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:38.692 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:38.695 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:38.697 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:54:38.698 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:38.701 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:38.703 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:38.705 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:38.706 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:38.708 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:38.709 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:38.729 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:38.743 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:38.748 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2022-10-28 09:54:38.757 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:38.762 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:38.766 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:38.774 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:38.779 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:38.781 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:38.784 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:38.787 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:38.788 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:38.790 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:38.792 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:38.793 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:54:38.795 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:38.796 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:38.797 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:38.802 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:38.806 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:38.807 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:38.808 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:38.809 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:38.811 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:38.812 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:38.813 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:38.813 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:38.815 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:54:38.816 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 108.2391ms
2022-10-28 09:54:38.817 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:38.819 +01:00 [DBG] Connection id "0HMLOO7H8FTBK" completed keep alive response.
2022-10-28 09:54:38.819 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:38.821 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 144.5800ms
2022-10-28 09:54:40.092 +01:00 [DBG] Connection id "0HMLOO7H8FTBL" accepted.
2022-10-28 09:54:40.095 +01:00 [DBG] Connection id "0HMLOO7H8FTBL" started.
2022-10-28 09:54:40.098 +01:00 [DBG] Connection 0HMLOO7H8FTBL established using the following protocol: "Tls13"
2022-10-28 09:54:40.099 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:54:40.102 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:54:40.103 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:54:40.104 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:54:40.106 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:40.108 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:40.108 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:40.110 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:40.110 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:40.111 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:40.112 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:54:40.114 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:40.116 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:40.117 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:40.120 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:40.121 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:40.123 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:40.124 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:40.138 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:40.142 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:40.144 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 09:54:40.147 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:40.149 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:40.151 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:40.157 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:40.160 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:40.162 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:40.164 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:40.165 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:40.166 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:40.168 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:40.171 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:40.173 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:54:40.175 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:40.176 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:40.178 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:40.181 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:40.183 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:40.183 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:40.185 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:40.187 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:40.189 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:40.189 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:40.191 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:40.192 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:40.194 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:54:40.195 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 72.4956ms
2022-10-28 09:54:40.196 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:40.198 +01:00 [DBG] Connection id "0HMLOO7H8FTBL" completed keep alive response.
2022-10-28 09:54:40.198 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:40.199 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 100.0104ms
2022-10-28 09:54:41.529 +01:00 [DBG] Connection id "0HMLOO7H8FTBM" accepted.
2022-10-28 09:54:41.530 +01:00 [DBG] Connection id "0HMLOO7H8FTBM" started.
2022-10-28 09:54:41.533 +01:00 [DBG] Connection 0HMLOO7H8FTBM established using the following protocol: "Tls13"
2022-10-28 09:54:41.535 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:54:41.536 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:54:41.538 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:54:41.541 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:54:41.543 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:41.545 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:41.546 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:41.547 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:41.548 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:41.549 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:41.550 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:54:41.553 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:41.555 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:41.557 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:41.560 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:41.561 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:41.563 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:41.564 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:41.589 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:41.591 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:41.595 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-10-28 09:54:41.597 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:41.598 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:41.600 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:41.606 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:41.609 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:41.612 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:41.615 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:41.616 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:41.617 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:41.619 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:41.622 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:41.625 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-10-28 09:54:41.626 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:41.627 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:41.628 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:41.633 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:41.637 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:41.640 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:41.644 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:41.646 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:41.648 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:41.648 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:41.649 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:41.650 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:41.652 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:54:41.654 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 91.1648ms
2022-10-28 09:54:41.655 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:41.657 +01:00 [DBG] Connection id "0HMLOO7H8FTBM" completed keep alive response.
2022-10-28 09:54:41.657 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:41.658 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 123.3820ms
2022-10-28 09:54:43.224 +01:00 [DBG] Connection id "0HMLOO7H8FTBN" accepted.
2022-10-28 09:54:43.226 +01:00 [DBG] Connection id "0HMLOO7H8FTBN" started.
2022-10-28 09:54:43.229 +01:00 [DBG] Connection 0HMLOO7H8FTBN established using the following protocol: "Tls13"
2022-10-28 09:54:43.232 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - -
2022-10-28 09:54:43.235 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:54:43.239 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/users/profile'
2022-10-28 09:54:43.240 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Users/Profile' is valid for the request path '/api/v1/users/profile'
2022-10-28 09:54:43.247 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:54:43.249 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:43.250 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:43.251 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:43.252 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:43.258 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:54:43.262 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API).
2022-10-28 09:54:43.265 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:43.266 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:43.267 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:43.269 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:43.272 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:43.274 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:54:43.275 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:54:43.277 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:43.279 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:43.280 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:54:43.281 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:43.283 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:43.284 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:43.289 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:43.292 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:43.293 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:43.294 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:43.295 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:43.296 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:43.298 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:43.299 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:43.300 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:43.301 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:43.303 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse'.
2022-10-28 09:54:43.308 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 34.4784ms
2022-10-28 09:54:43.310 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:54:43.312 +01:00 [DBG] Connection id "0HMLOO7H8FTBN" completed keep alive response.
2022-10-28 09:54:43.315 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:43.318 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - - - 200 - application/json;+charset=utf-8 86.3902ms
2022-10-28 09:54:44.049 +01:00 [DBG] Connection id "0HMLOO7H8FTBO" accepted.
2022-10-28 09:54:44.050 +01:00 [DBG] Connection id "0HMLOO7H8FTBO" started.
2022-10-28 09:54:44.053 +01:00 [DBG] Connection 0HMLOO7H8FTBO established using the following protocol: "Tls13"
2022-10-28 09:54:44.056 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:54:44.059 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:54:44.062 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:54:44.064 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:54:44.067 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:44.068 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:44.068 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:44.069 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:44.070 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:44.076 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:44.078 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:54:44.080 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:44.081 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:44.083 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:44.085 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:44.086 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:44.091 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:44.095 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:44.120 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:44.133 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:44.137 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2022-10-28 09:54:44.145 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:44.152 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:44.166 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:44.175 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:44.179 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:44.182 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:44.184 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:44.187 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:44.190 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:44.193 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:44.194 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:44.196 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:54:44.198 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:44.199 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:44.200 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:44.203 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:44.207 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:44.208 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:44.209 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:44.211 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:44.214 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:44.215 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:44.216 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:44.216 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:44.218 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:54:44.219 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 128.2691ms
2022-10-28 09:54:44.220 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:44.223 +01:00 [DBG] Connection id "0HMLOO7H8FTBO" completed keep alive response.
2022-10-28 09:54:44.225 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:44.226 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 169.7539ms
2022-10-28 09:54:45.571 +01:00 [DBG] Connection id "0HMLOO7H8FTBP" accepted.
2022-10-28 09:54:45.578 +01:00 [DBG] Connection id "0HMLOO7H8FTBP" started.
2022-10-28 09:54:45.586 +01:00 [DBG] Connection 0HMLOO7H8FTBP established using the following protocol: "Tls13"
2022-10-28 09:54:45.588 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - -
2022-10-28 09:54:45.589 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:54:45.592 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/users/profile'
2022-10-28 09:54:45.596 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Users/Profile' is valid for the request path '/api/v1/users/profile'
2022-10-28 09:54:45.599 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:54:45.601 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:45.603 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:45.604 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:45.605 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:45.607 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:54:45.610 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API).
2022-10-28 09:54:45.617 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:45.619 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:45.621 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:45.625 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:45.628 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:45.633 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:54:45.635 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 09:54:45.637 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:45.642 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:45.643 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:54:45.644 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:45.645 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:45.646 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:45.650 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:45.658 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:45.659 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:45.660 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:45.661 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:45.662 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:45.664 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:45.665 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:45.666 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:45.667 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:45.668 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse'.
2022-10-28 09:54:45.670 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 37.5554ms
2022-10-28 09:54:45.672 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 09:54:45.674 +01:00 [DBG] Connection id "0HMLOO7H8FTBP" completed keep alive response.
2022-10-28 09:54:45.675 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:45.677 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - - - 200 - application/json;+charset=utf-8 88.9694ms
2022-10-28 09:54:46.449 +01:00 [DBG] Connection id "0HMLOO7H8FTBQ" accepted.
2022-10-28 09:54:46.450 +01:00 [DBG] Connection id "0HMLOO7H8FTBQ" started.
2022-10-28 09:54:46.453 +01:00 [DBG] Connection 0HMLOO7H8FTBQ established using the following protocol: "Tls13"
2022-10-28 09:54:46.455 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:54:46.456 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:54:46.459 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:54:46.462 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:54:46.465 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:46.468 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:46.469 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:46.471 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:46.472 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:46.473 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:46.477 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:54:46.480 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:46.483 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:46.485 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:46.487 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:46.488 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:46.490 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:46.496 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:46.507 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:46.517 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:46.521 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-10-28 09:54:46.529 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:46.535 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:46.546 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:46.558 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:46.563 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:46.565 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:46.567 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:46.570 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:46.572 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:46.574 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:46.577 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:46.578 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:54:46.580 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:46.581 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:46.582 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:46.585 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:54:46.588 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:46.588 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:46.590 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:46.591 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:46.593 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:46.594 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:46.595 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:46.596 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:46.597 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:54:46.599 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 108.7649ms
2022-10-28 09:54:46.600 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:54:46.601 +01:00 [DBG] Connection id "0HMLOO7H8FTBQ" completed keep alive response.
2022-10-28 09:54:46.602 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:46.603 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 148.5900ms
2022-10-28 09:54:49.106 +01:00 [DBG] Connection id "0HMLOO7H8FTBR" accepted.
2022-10-28 09:54:49.107 +01:00 [DBG] Connection id "0HMLOO7H8FTBR" started.
2022-10-28 09:54:49.110 +01:00 [DBG] Connection 0HMLOO7H8FTBR established using the following protocol: "Tls13"
2022-10-28 09:54:49.112 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502 - -
2022-10-28 09:54:49.113 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:54:49.114 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502'
2022-10-28 09:54:49.115 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502'
2022-10-28 09:54:49.117 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:49.118 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:49.119 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:49.120 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:49.121 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:49.122 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:49.124 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:54:49.129 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:49.132 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:49.134 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:49.138 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:49.140 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:49.144 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:49.147 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:49.149 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:54:49.150 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 09:54:49.152 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:49.153 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:49.155 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:54:49.156 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:49.157 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:49.161 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:49.163 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:54:49.164 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:49.165 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:49.167 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:49.171 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:49.174 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:49.176 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:49.177 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:49.178 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:49.179 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:49.180 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:54:49.182 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:49.183 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:49.185 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:54:49.188 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:54:49.190 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:49.191 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:49.193 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:49.195 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:49.198 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:49.199 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:49.200 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:49.201 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:49.203 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 09:54:49.205 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 60.8233ms
2022-10-28 09:54:49.206 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:49.208 +01:00 [DBG] Connection id "0HMLOO7H8FTBR" completed keep alive response.
2022-10-28 09:54:49.209 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:49.211 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502 - - - 200 - application/json;+charset=utf-8 99.2614ms
2022-10-28 09:54:50.483 +01:00 [DBG] Connection id "0HMLOO7H8FTBS" accepted.
2022-10-28 09:54:50.484 +01:00 [DBG] Connection id "0HMLOO7H8FTBS" started.
2022-10-28 09:54:50.486 +01:00 [DBG] Connection 0HMLOO7H8FTBS established using the following protocol: "Tls13"
2022-10-28 09:54:50.488 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d - -
2022-10-28 09:54:50.489 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:54:50.490 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d'
2022-10-28 09:54:50.491 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d'
2022-10-28 09:54:50.493 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:50.496 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:54:50.497 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:50.498 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:54:50.499 +01:00 [DBG] Authorization was successful.
2022-10-28 09:54:50.500 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:50.501 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:54:50.505 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:50.506 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:50.507 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:50.509 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:50.512 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:50.514 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:50.516 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:54:50.517 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:54:50.518 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 09:54:50.520 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:50.521 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:50.522 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:54:50.523 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:54:50.525 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:50.528 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:50.530 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:54:50.531 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:50.532 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:50.534 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:50.538 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:54:50.541 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:50.542 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:50.543 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:50.545 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:50.546 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:50.547 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:54:50.549 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:50.550 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:50.551 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:54:50.555 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:54:50.557 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:50.558 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:50.559 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:50.561 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:50.564 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:50.565 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:50.566 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:50.566 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:50.568 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 09:54:50.569 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 55.3105ms
2022-10-28 09:54:50.571 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:54:50.572 +01:00 [DBG] Connection id "0HMLOO7H8FTBS" completed keep alive response.
2022-10-28 09:54:50.573 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:50.574 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d - - - 200 - application/json;+charset=utf-8 86.2096ms
2022-10-28 09:54:52.042 +01:00 [DBG] Connection id "0HMLOO7H8FTBT" accepted.
2022-10-28 09:54:52.043 +01:00 [DBG] Connection id "0HMLOO7H8FTBT" started.
2022-10-28 09:54:52.048 +01:00 [DBG] Connection 0HMLOO7H8FTBT established using the following protocol: "Tls13"
2022-10-28 09:54:52.049 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/renew application/json;+charset=utf-8 -
2022-10-28 09:54:52.050 +01:00 [DBG] POST requests are not supported
2022-10-28 09:54:52.052 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/renew'
2022-10-28 09:54:52.053 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Renew' is valid for the request path '/api/v1/auth/renew'
2022-10-28 09:54:52.055 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 09:54:52.056 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:54:52.057 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 09:54:52.058 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 09:54:52.061 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 09:54:52.064 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:54:52.066 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:54:52.067 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:52.069 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:54:52.071 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:54:52.074 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:54:52.075 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 09:54:52.077 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' ...
2022-10-28 09:54:52.078 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' using the name '' in request data ...
2022-10-28 09:54:52.080 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:54:52.082 +01:00 [DBG] Connection id "0HMLOO7H8FTBT", Request id "0HMLOO7H8FTBT:00000002": started reading request body.
2022-10-28 09:54:52.083 +01:00 [DBG] Connection id "0HMLOO7H8FTBT", Request id "0HMLOO7H8FTBT:00000002": done reading request body.
2022-10-28 09:54:52.085 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'
2022-10-28 09:54:52.087 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 09:54:52.088 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 09:54:52.089 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' ...
2022-10-28 09:54:52.091 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 09:54:52.095 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:54:52.097 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.RefreshToken == __refreshToken_0)'
2022-10-28 09:54:52.101 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.refresh_token == @__refreshToken_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 09:54:52.103 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:52.106 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 09:54:52.107 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:52.108 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:52.110 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-28 09:54:52.117 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-28 09:54:52.120 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:52.122 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:52.123 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:52.125 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:52.127 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:52.131 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:54:52.133 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:54:52.135 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:54:52.137 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:52.139 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:52.141 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 09:54:52.142 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 09:54:52.143 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:54:52.144 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:54:52.147 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:54:52.151 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 09:54:52.153 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:54:52.154 +01:00 [DBG] Committing transaction.
2022-10-28 09:54:52.157 +01:00 [DBG] Committed transaction.
2022-10-28 09:54:52.157 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:54:52.158 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:54:52.160 +01:00 [DBG] Disposing transaction.
2022-10-28 09:54:52.161 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:54:52.163 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 09:54:52.164 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:54:52.166 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:54:52.167 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:54:52.169 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:54:52.170 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:54:52.171 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 09:54:52.173 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API) in 99.0426ms
2022-10-28 09:54:52.174 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 09:54:52.176 +01:00 [DBG] Connection id "0HMLOO7H8FTBT" completed keep alive response.
2022-10-28 09:54:52.177 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:54:52.178 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 128.3665ms
2022-10-28 09:55:03.397 +01:00 [DBG] Connection id "0HMLOO7H8FTBD" received FIN.
2022-10-28 09:55:03.415 +01:00 [DBG] Connection id "0HMLOO7H8FTBD" disconnecting.
2022-10-28 09:55:03.418 +01:00 [DBG] Connection id "0HMLOO7H8FTBD" sending FIN because: "The client closed the connection."
2022-10-28 09:55:03.427 +01:00 [DBG] Connection id "0HMLOO7H8FTBD" stopped.
2022-10-28 09:55:04.015 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/transfers/ application/json;+charset=utf-8 -
2022-10-28 09:55:04.016 +01:00 [DBG] POST requests are not supported
2022-10-28 09:55:04.017 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/transfers/'
2022-10-28 09:55:04.021 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Transfers' is valid for the request path '/api/v1/transfers/'
2022-10-28 09:55:04.023 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-28 09:55:04.025 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:55:04.026 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:55:04.027 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:55:04.028 +01:00 [DBG] Authorization was successful.
2022-10-28 09:55:04.029 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-28 09:55:04.030 +01:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transfers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.TransferResponse]] MakeTransfer(SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.TransfersController (SimpleBank.AcctManage.API).
2022-10-28 09:55:04.033 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:55:04.035 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:55:04.036 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:55:04.038 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:55:04.040 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:55:04.042 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.TransfersController (SimpleBank.AcctManage.API)
2022-10-28 09:55:04.043 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.TransfersController (SimpleBank.AcctManage.API)
2022-10-28 09:55:04.045 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest' ...
2022-10-28 09:55:04.046 +01:00 [DBG] Attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest' using the name '' in request data ...
2022-10-28 09:55:04.048 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 09:55:04.049 +01:00 [DBG] Connection id "0HMLOO7H8FTBT", Request id "0HMLOO7H8FTBT:00000003": started reading request body.
2022-10-28 09:55:04.051 +01:00 [DBG] Connection id "0HMLOO7H8FTBT", Request id "0HMLOO7H8FTBT:00000003": done reading request body.
2022-10-28 09:55:04.052 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'
2022-10-28 09:55:04.053 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'.
2022-10-28 09:55:04.055 +01:00 [DBG] Done attempting to bind parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'.
2022-10-28 09:55:04.056 +01:00 [DBG] Attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest' ...
2022-10-28 09:55:04.057 +01:00 [DBG] Done attempting to validate the bound parameter 'transferRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.TransferRequest'.
2022-10-28 09:55:04.059 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:55:04.061 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:55:04.062 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:55:04.063 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:04.065 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:04.066 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:55:04.069 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:55:04.072 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.074 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:55:04.075 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:04.076 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:04.078 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:55:04.079 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:55:04.080 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:04.082 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:04.083 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:55:04.087 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:55:04.089 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.090 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:55:04.091 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:04.093 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:04.101 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Transfer'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.112 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Transfer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.116 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.138 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.141 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.Movement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.142 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.144 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.146 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.149 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:55:04.150 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 09:55:04.154 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 09:55:04.155 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:04.160 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:04.164 +01:00 [DBG] Enlisted in an ambient transaction with isolation level 'Serializable'.
2022-10-28 09:55:04.174 +01:00 [DBG] Executing 5 update commands as a batch.
2022-10-28 09:55:04.177 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:55:04.178 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:55:04.180 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Guid), @p14='?' (DbType = Decimal), @p15='?' (DbType = DateTime), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p10, @p11, @p12)
RETURNING movement_id;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p13, @p14, @p15)
RETURNING movement_id;
INSERT INTO "SB-historic"."Transfers" (amount, created_at, from_account_id, to_account_id)
VALUES (@p16, @p17, @p18, @p19)
RETURNING transfer_id;
2022-10-28 09:55:04.190 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p9='?' (DbType = Guid), @p5='?' (DbType = Decimal), @p6='?' (DbType = DateTime), @p7='?', @p8='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (DbType = Decimal), @p12='?' (DbType = DateTime), @p13='?' (DbType = Guid), @p14='?' (DbType = Decimal), @p15='?' (DbType = DateTime), @p16='?' (DbType = Decimal), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-operational"."Accounts" SET balance = @p0, created_at = @p1, currency = @p2, user_id = @p3
WHERE account_id = @p4;
UPDATE "SB-operational"."Accounts" SET balance = @p5, created_at = @p6, currency = @p7, user_id = @p8
WHERE account_id = @p9;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p10, @p11, @p12)
RETURNING movement_id;
INSERT INTO "SB-operational"."Movements" (account_id, amount, created_at)
VALUES (@p13, @p14, @p15)
RETURNING movement_id;
INSERT INTO "SB-historic"."Transfers" (amount, created_at, from_account_id, to_account_id)
VALUES (@p16, @p17, @p18, @p19)
RETURNING transfer_id;
2022-10-28 09:55:04.196 +01:00 [DBG] The foreign key property 'Movement.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:55:04.200 +01:00 [DBG] The foreign key property 'Movement.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:55:04.203 +01:00 [DBG] The foreign key property 'Transfer.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 09:55:04.207 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:55:04.209 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:04.212 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:04.216 +01:00 [DBG] An entity of type 'Transfer' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.220 +01:00 [DBG] An entity of type 'Movement' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.224 +01:00 [DBG] An entity of type 'Movement' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.229 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.232 +01:00 [DBG] An entity of type 'Account' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.234 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 5 entities written to the database.
2022-10-28 09:55:04.245 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-28 09:55:04.250 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.user_id == @__get_Item_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 09:55:04.253 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:55:04.254 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:55:04.257 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:04.261 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:04.262 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:55:04.267 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 09:55:04.269 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:04.281 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:55:04.283 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:04.284 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:05.458 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:55:05.465 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:55:05.466 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:55:05.468 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:55:05.470 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:55:05.472 +01:00 [INF] Executing CreatedResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.TransferResponse'.
2022-10-28 09:55:05.474 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API) in 1432.6615ms
2022-10-28 09:55:05.478 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.TransfersController.MakeTransfer (SimpleBank.AcctManage.API)'
2022-10-28 09:55:05.480 +01:00 [DBG] Connection id "0HMLOO7H8FTBT" completed keep alive response.
2022-10-28 09:55:05.481 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:55:05.483 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/transfers/ application/json;+charset=utf-8 - - 201 - application/json;+charset=utf-8 1468.2569ms
2022-10-28 09:55:06.840 +01:00 [DBG] Connection id "0HMLOO7H8FTBE" received FIN.
2022-10-28 09:55:06.843 +01:00 [DBG] Connection id "0HMLOO7H8FTBE" sending FIN because: "The client closed the connection."
2022-10-28 09:55:06.846 +01:00 [DBG] Connection id "0HMLOO7H8FTBE" disconnecting.
2022-10-28 09:55:06.847 +01:00 [DBG] Connection id "0HMLOO7H8FTBE" stopped.
2022-10-28 09:55:07.844 +01:00 [INF] Email Sent
2022-10-28 09:55:07.848 +01:00 [INF] - KEY:   | VALUE: {"FromUser":"Dummytester2","ToUser":"Dummytester2","ToAccountId":"c2a61345-6b78-4266-a2b3-a937cb2c9a2d","ToEmail":"ivo.mp.rodrigues@gmail.com","Amount":"5000"} - 
2022-10-28 09:55:08.476 +01:00 [DBG] Connection id "0HMLOO7H8FTBF" received FIN.
2022-10-28 09:55:08.483 +01:00 [DBG] Connection id "0HMLOO7H8FTBF" sending FIN because: "The client closed the connection."
2022-10-28 09:55:08.488 +01:00 [DBG] Connection id "0HMLOO7H8FTBF" disconnecting.
2022-10-28 09:55:08.489 +01:00 [DBG] Connection id "0HMLOO7H8FTBF" stopped.
2022-10-28 09:55:09.723 +01:00 [DBG] Connection id "0HMLOO7H8FTBU" accepted.
2022-10-28 09:55:09.725 +01:00 [DBG] Connection id "0HMLOO7H8FTBU" started.
2022-10-28 09:55:09.733 +01:00 [DBG] Connection 0HMLOO7H8FTBU established using the following protocol: "Tls13"
2022-10-28 09:55:09.735 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:55:09.736 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:55:09.737 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:55:09.738 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:55:09.739 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:55:09.741 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:55:09.741 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:55:09.742 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:55:09.743 +01:00 [DBG] Authorization was successful.
2022-10-28 09:55:09.744 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:55:09.745 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:55:09.749 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:55:09.750 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:55:09.752 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:55:09.755 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:55:09.756 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:55:09.758 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:55:09.759 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:55:09.782 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:55:09.791 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:55:09.795 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2022-10-28 09:55:09.806 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:09.811 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:09.818 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:55:09.828 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:55:09.836 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:09.840 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:09.845 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:09.849 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:55:09.852 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:09.855 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:09.860 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:55:09.864 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-10-28 09:55:09.868 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:09.872 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:09.876 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:55:09.891 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:55:09.900 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:55:09.903 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:09.905 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:09.908 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:55:09.911 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:55:09.913 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:55:09.917 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:55:09.918 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:55:09.920 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:55:09.922 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 163.9786ms
2022-10-28 09:55:09.923 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:55:09.924 +01:00 [DBG] Connection id "0HMLOO7H8FTBU" completed keep alive response.
2022-10-28 09:55:09.925 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:55:09.926 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 190.8768ms
2022-10-28 09:55:11.762 +01:00 [DBG] Connection id "0HMLOO7H8FTBV" accepted.
2022-10-28 09:55:11.763 +01:00 [DBG] Connection id "0HMLOO7H8FTBV" started.
2022-10-28 09:55:11.779 +01:00 [DBG] Connection 0HMLOO7H8FTBV established using the following protocol: "Tls13"
2022-10-28 09:55:11.782 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 09:55:11.784 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:55:11.785 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 09:55:11.787 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 09:55:11.791 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:55:11.794 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:55:11.795 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:55:11.797 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:55:11.799 +01:00 [DBG] Authorization was successful.
2022-10-28 09:55:11.800 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:55:11.802 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:55:11.804 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:55:11.806 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:55:11.808 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:55:11.811 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:55:11.812 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:55:11.814 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:55:11.817 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:55:11.833 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:55:11.837 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:55:11.839 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:55:11.840 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:11.841 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:11.842 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:55:11.845 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:55:11.848 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:11.849 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:11.851 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:11.852 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:55:11.853 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:11.854 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:11.855 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:55:11.856 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:55:11.857 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:11.858 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:11.859 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:55:11.862 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 09:55:11.865 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:55:11.866 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:11.867 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:11.868 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:55:11.870 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:55:11.871 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:55:11.872 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:55:11.873 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:55:11.874 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 09:55:11.876 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 61.6515ms
2022-10-28 09:55:11.877 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 09:55:11.878 +01:00 [DBG] Connection id "0HMLOO7H8FTBV" completed keep alive response.
2022-10-28 09:55:11.879 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:55:11.880 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 98.1026ms
2022-10-28 09:55:14.209 +01:00 [DBG] Connection id "0HMLOO7H8FTC0" accepted.
2022-10-28 09:55:14.210 +01:00 [DBG] Connection id "0HMLOO7H8FTC0" started.
2022-10-28 09:55:14.214 +01:00 [DBG] Connection 0HMLOO7H8FTC0 established using the following protocol: "Tls13"
2022-10-28 09:55:14.216 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502 - -
2022-10-28 09:55:14.217 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 09:55:14.222 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502'
2022-10-28 09:55:14.226 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502'
2022-10-28 09:55:14.229 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:55:14.230 +01:00 [DBG] Successfully validated the token.
2022-10-28 09:55:14.231 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:55:14.233 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 09:55:14.236 +01:00 [DBG] Authorization was successful.
2022-10-28 09:55:14.238 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:55:14.240 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 09:55:14.244 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 09:55:14.246 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 09:55:14.247 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:55:14.249 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 09:55:14.254 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 09:55:14.259 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:55:14.260 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 09:55:14.262 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:55:14.263 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 09:55:14.265 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:55:14.266 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:55:14.267 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 09:55:14.269 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 09:55:14.272 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 09:55:14.275 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:55:14.277 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 09:55:14.278 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:14.279 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:14.280 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:55:14.284 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 09:55:14.288 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:14.290 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:55:14.290 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:14.292 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:14.294 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 09:55:14.294 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 09:55:14.296 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:14.297 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:14.298 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:55:14.304 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 09:55:14.307 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 09:55:14.309 +01:00 [DBG] A data reader was disposed.
2022-10-28 09:55:14.309 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 09:55:14.310 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 09:55:14.312 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 09:55:14.314 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 09:55:14.315 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 09:55:14.316 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 09:55:14.317 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 09:55:14.318 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 09:55:14.321 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 62.7531ms
2022-10-28 09:55:14.323 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 09:55:14.324 +01:00 [DBG] Connection id "0HMLOO7H8FTC0" completed keep alive response.
2022-10-28 09:55:14.325 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 09:55:14.326 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502 - - - 200 - application/json;+charset=utf-8 109.9821ms
2022-10-28 09:55:14.393 +01:00 [DBG] Connection id "0HMLOO7H8FTBG" received FIN.
2022-10-28 09:55:14.395 +01:00 [DBG] Connection id "0HMLOO7H8FTBG" sending FIN because: "The client closed the connection."
2022-10-28 09:55:14.397 +01:00 [DBG] Connection id "0HMLOO7H8FTBG" disconnecting.
2022-10-28 09:55:14.398 +01:00 [DBG] Connection id "0HMLOO7H8FTBG" stopped.
2022-10-28 09:55:19.735 +01:00 [DBG] Connection id "0HMLOO7H8FTC0" received FIN.
2022-10-28 09:55:19.735 +01:00 [DBG] Connection id "0HMLOO7H8FTBV" received FIN.
2022-10-28 09:55:19.736 +01:00 [DBG] Connection id "0HMLOO7H8FTC0" disconnecting.
2022-10-28 09:55:19.743 +01:00 [DBG] Connection id "0HMLOO7H8FTBV" sending FIN because: "The client closed the connection."
2022-10-28 09:55:19.744 +01:00 [DBG] Connection id "0HMLOO7H8FTC0" sending FIN because: "The client closed the connection."
2022-10-28 09:55:19.745 +01:00 [DBG] Connection id "0HMLOO7H8FTBV" disconnecting.
2022-10-28 09:55:19.748 +01:00 [DBG] Connection id "0HMLOO7H8FTBV" stopped.
2022-10-28 09:55:19.762 +01:00 [DBG] Connection id "0HMLOO7H8FTC0" stopped.
2022-10-28 10:04:09.149 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 10:04:09.222 +01:00 [DBG] Hosting starting
2022-10-28 10:04:09.272 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 10:04:09.286 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 10:04:09.297 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 10:04:09.298 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 10:04:09.307 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 10:04:09.315 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 10:04:09.316 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 10:04:09.328 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 10:04:09.333 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 10:04:09.339 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 10:04:09.343 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 10:04:09.349 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 10:04:09.356 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 10:04:09.361 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 10:04:09.367 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 10:04:09.619 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 10:04:09.799 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 10:04:09.883 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 10:04:09.892 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 10:04:09.896 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 10:04:09.897 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 10:04:09.898 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 10:04:09.899 +01:00 [INF] Hosting environment: Development
2022-10-28 10:04:09.900 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 10:04:09.901 +01:00 [DBG] Hosting started
2022-10-28 10:04:10.064 +01:00 [DBG] Connection id "0HMLOODG57K8J" accepted.
2022-10-28 10:04:10.064 +01:00 [DBG] Connection id "0HMLOODG57K8K" accepted.
2022-10-28 10:04:10.069 +01:00 [DBG] Connection id "0HMLOODG57K8K" started.
2022-10-28 10:04:10.069 +01:00 [DBG] Connection id "0HMLOODG57K8J" started.
2022-10-28 10:04:10.119 +01:00 [DBG] Connection id "0HMLOODG57K8K" received FIN.
2022-10-28 10:04:10.119 +01:00 [DBG] Connection id "0HMLOODG57K8J" received FIN.
2022-10-28 10:04:10.132 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 10:04:10.132 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 10:04:10.298 +01:00 [DBG] Connection id "0HMLOODG57K8J" stopped.
2022-10-28 10:04:10.298 +01:00 [DBG] Connection id "0HMLOODG57K8K" stopped.
2022-10-28 10:04:10.304 +01:00 [DBG] Connection id "0HMLOODG57K8J" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 10:04:10.304 +01:00 [DBG] Connection id "0HMLOODG57K8K" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 10:04:15.469 +01:00 [DBG] Connection id "0HMLOODG57K8L" accepted.
2022-10-28 10:04:15.482 +01:00 [DBG] Connection id "0HMLOODG57K8L" started.
2022-10-28 10:04:15.508 +01:00 [DBG] Connection id "0HMLOODG57K8L" received FIN.
2022-10-28 10:04:15.512 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 10:04:15.525 +01:00 [DBG] Connection id "0HMLOODG57K8L" stopped.
2022-10-28 10:04:15.528 +01:00 [DBG] Connection id "0HMLOODG57K8L" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 10:04:23.770 +01:00 [DBG] Connection id "0HMLOODG57K8M" accepted.
2022-10-28 10:04:23.772 +01:00 [DBG] Connection id "0HMLOODG57K8M" started.
2022-10-28 10:04:23.794 +01:00 [DBG] Connection 0HMLOODG57K8M established using the following protocol: "Tls13"
2022-10-28 10:04:23.846 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 10:04:23.849 +01:00 [DBG] Connection id "0HMLOODG57K8N" accepted.
2022-10-28 10:04:23.856 +01:00 [DBG] Connection id "0HMLOODG57K8N" started.
2022-10-28 10:04:23.860 +01:00 [DBG] Connection 0HMLOODG57K8N established using the following protocol: "Tls13"
2022-10-28 10:04:23.863 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 10:04:23.867 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 10:04:23.867 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 10:04:23.948 +01:00 [DBG] POST requests are not supported
2022-10-28 10:04:23.948 +01:00 [DBG] POST requests are not supported
2022-10-28 10:04:23.982 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 10:04:23.982 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 10:04:23.990 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 10:04:23.990 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 10:04:23.998 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 10:04:23.998 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.092 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:24.092 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:24.097 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:24.097 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:24.099 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.099 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.134 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 10:04:24.135 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 10:04:24.143 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:24.146 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:24.148 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:24.150 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:24.157 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:24.159 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:24.162 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:24.164 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:24.166 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:24.169 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:24.173 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:24.174 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:24.462 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 10:04:24.462 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 10:04:24.494 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:24.494 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:24.509 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:24.509 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:24.512 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 10:04:24.512 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 10:04:24.514 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 10:04:24.515 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 10:04:24.532 +01:00 [DBG] Connection id "0HMLOODG57K8M", Request id "0HMLOODG57K8M:00000002": started reading request body.
2022-10-28 10:04:24.532 +01:00 [DBG] Connection id "0HMLOODG57K8N", Request id "0HMLOODG57K8N:00000002": started reading request body.
2022-10-28 10:04:24.539 +01:00 [DBG] Connection id "0HMLOODG57K8M", Request id "0HMLOODG57K8M:00000002": done reading request body.
2022-10-28 10:04:24.539 +01:00 [DBG] Connection id "0HMLOODG57K8N", Request id "0HMLOODG57K8N:00000002": done reading request body.
2022-10-28 10:04:24.545 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 10:04:24.545 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 10:04:24.546 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.547 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.548 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.550 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.551 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:24.553 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:24.565 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.565 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.572 +01:00 [DBG] The request has model state errors, returning an error response.
2022-10-28 10:04:24.574 +01:00 [DBG] The request has model state errors, returning an error response.
2022-10-28 10:04:24.576 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2022-10-28 10:04:24.576 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2022-10-28 10:04:24.581 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:24.581 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:24.586 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:24.588 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:24.589 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-10-28 10:04:24.589 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-10-28 10:04:24.592 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-10-28 10:04:24.594 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-10-28 10:04:24.595 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-10-28 10:04:24.597 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-10-28 10:04:24.615 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 438.4772ms
2022-10-28 10:04:24.615 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 436.7861ms
2022-10-28 10:04:24.619 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.621 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.622 +01:00 [DBG] Connection id "0HMLOODG57K8N" completed keep alive response.
2022-10-28 10:04:24.627 +01:00 [DBG] Connection id "0HMLOODG57K8M" completed keep alive response.
2022-10-28 10:04:24.629 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - application/problem+json;+charset=utf-8 788.0458ms
2022-10-28 10:04:24.629 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - application/problem+json;+charset=utf-8 765.3921ms
2022-10-28 10:04:24.642 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/GetTokenAgain application/json;+charset=utf-8 -
2022-10-28 10:04:24.642 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/GetTokenAgain application/json;+charset=utf-8 -
2022-10-28 10:04:24.644 +01:00 [DBG] POST requests are not supported
2022-10-28 10:04:24.644 +01:00 [DBG] POST requests are not supported
2022-10-28 10:04:24.646 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/GetTokenAgain'
2022-10-28 10:04:24.646 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/GetTokenAgain'
2022-10-28 10:04:24.647 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/GetTokenAgain' is valid for the request path '/api/v1/auth/GetTokenAgain'
2022-10-28 10:04:24.650 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.648 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/GetTokenAgain' is valid for the request path '/api/v1/auth/GetTokenAgain'
2022-10-28 10:04:24.653 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:24.654 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.655 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:24.656 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:24.657 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.657 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:24.659 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.661 +01:00 [INF] Route matched with {action = "GetUserToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] GetUserToken(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 10:04:24.661 +01:00 [INF] Route matched with {action = "GetUserToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] GetUserToken(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 10:04:24.663 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:24.665 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:24.669 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:24.667 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:24.671 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:24.673 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:24.676 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:24.679 +01:00 [DBG] Connection id "0HMLOODG57K8O" accepted.
2022-10-28 10:04:24.679 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:24.680 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:24.681 +01:00 [DBG] Connection id "0HMLOODG57K8O" started.
2022-10-28 10:04:24.683 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:24.685 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:24.688 +01:00 [DBG] Connection 0HMLOODG57K8O established using the following protocol: "Tls13"
2022-10-28 10:04:24.688 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:24.691 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 10:04:24.693 +01:00 [DBG] POST requests are not supported
2022-10-28 10:04:24.694 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 10:04:24.694 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:24.694 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:24.695 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 10:04:24.696 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:24.697 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:24.699 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.700 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 10:04:24.701 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 10:04:24.703 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:24.705 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 10:04:24.707 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 10:04:24.708 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:24.709 +01:00 [DBG] Connection id "0HMLOODG57K8M", Request id "0HMLOODG57K8M:00000003": started reading request body.
2022-10-28 10:04:24.711 +01:00 [DBG] Connection id "0HMLOODG57K8N", Request id "0HMLOODG57K8N:00000003": started reading request body.
2022-10-28 10:04:24.712 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.713 +01:00 [DBG] Connection id "0HMLOODG57K8M", Request id "0HMLOODG57K8M:00000003": done reading request body.
2022-10-28 10:04:24.714 +01:00 [DBG] Connection id "0HMLOODG57K8N", Request id "0HMLOODG57K8N:00000003": done reading request body.
2022-10-28 10:04:24.715 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 10:04:24.716 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 10:04:24.717 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 10:04:24.723 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:24.725 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.726 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.728 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:24.729 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.730 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.734 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:24.733 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:24.732 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:24.738 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.739 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.741 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:24.743 +01:00 [DBG] The request has model state errors, returning an error response.
2022-10-28 10:04:24.744 +01:00 [DBG] The request has model state errors, returning an error response.
2022-10-28 10:04:24.745 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:24.746 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2022-10-28 10:04:24.747 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2022-10-28 10:04:24.748 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:24.749 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:24.750 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:24.753 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:24.756 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:24.758 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:24.759 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:24.760 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-10-28 10:04:24.761 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-10-28 10:04:24.762 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 10:04:24.765 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-10-28 10:04:24.767 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-10-28 10:04:24.769 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 10:04:24.771 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-10-28 10:04:24.772 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-10-28 10:04:24.774 +01:00 [DBG] Connection id "0HMLOODG57K8O", Request id "0HMLOODG57K8O:00000002": started reading request body.
2022-10-28 10:04:24.776 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API) in 91.3652ms
2022-10-28 10:04:24.778 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API) in 90.0536ms
2022-10-28 10:04:24.780 +01:00 [DBG] Connection id "0HMLOODG57K8O", Request id "0HMLOODG57K8O:00000002": done reading request body.
2022-10-28 10:04:24.781 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.783 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:24.787 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 10:04:24.789 +01:00 [DBG] Connection id "0HMLOODG57K8N" completed keep alive response.
2022-10-28 10:04:24.791 +01:00 [DBG] Connection id "0HMLOODG57K8M" completed keep alive response.
2022-10-28 10:04:24.793 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.795 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/GetTokenAgain application/json;+charset=utf-8 - - 400 - application/problem+json;+charset=utf-8 152.4118ms
2022-10-28 10:04:24.796 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/GetTokenAgain application/json;+charset=utf-8 - - 400 - application/problem+json;+charset=utf-8 153.7874ms
2022-10-28 10:04:24.798 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:24.807 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:24.809 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:25.550 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 10:04:25.552 +01:00 [DBG] POST requests are not supported
2022-10-28 10:04:25.554 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 10:04:25.556 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 10:04:25.558 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 10:04:25.560 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:25.561 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:25.562 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 10:04:25.564 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 10:04:25.566 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:25.567 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:25.570 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:25.572 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:25.574 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:25.575 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:25.577 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:25.579 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:25.580 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 10:04:25.582 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 10:04:25.583 +01:00 [DBG] Connection id "0HMLOODG57K8M", Request id "0HMLOODG57K8M:00000004": started reading request body.
2022-10-28 10:04:25.584 +01:00 [DBG] Connection id "0HMLOODG57K8M", Request id "0HMLOODG57K8M:00000004": done reading request body.
2022-10-28 10:04:25.587 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 10:04:25.588 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:25.590 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:25.591 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:25.593 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:25.900 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 10:04:25.900 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 10:04:25.959 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 10:04:26.309 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 10:04:26.352 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:26.352 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:26.428 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (72ms).
2022-10-28 10:04:26.428 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (72ms).
2022-10-28 10:04:26.438 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:26.438 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:26.664 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:26.664 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:26.680 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 10:04:26.680 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 10:04:26.778 +01:00 [INF] Executed DbCommand (102ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 10:04:26.778 +01:00 [INF] Executed DbCommand (103ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 10:04:26.830 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:26.830 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:26.883 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:26.883 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:26.889 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:26.889 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:26.900 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:26.900 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:26.912 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 10:04:26.921 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 10:04:26.948 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:26.948 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:26.950 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 10:04:26.951 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 10:04:26.959 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:26.959 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:26.962 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:26.962 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:26.965 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 10:04:26.965 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 10:04:26.985 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 10:04:26.985 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 10:04:26.996 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:26.996 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:27.012 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:27.012 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:27.021 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.021 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.024 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.024 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.032 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:27.032 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:27.035 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:27.037 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:27.038 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 10:04:27.039 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 10:04:27.040 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 10:04:27.041 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 10:04:27.042 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 10:04:27.043 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 10:04:27.044 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 10:04:27.045 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 10:04:27.054 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2305.8524ms
2022-10-28 10:04:27.054 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 1478.6865ms
2022-10-28 10:04:27.057 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.058 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.062 +01:00 [DBG] Connection id "0HMLOODG57K8O" completed keep alive response.
2022-10-28 10:04:27.062 +01:00 [DBG] Connection id "0HMLOODG57K8M" completed keep alive response.
2022-10-28 10:04:27.065 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 10:04:27.065 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 10:04:27.068 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 1517.3236ms
2022-10-28 10:04:27.068 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 2376.9390ms
2022-10-28 10:04:27.069 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/GetTokenAgain application/json;+charset=utf-8 -
2022-10-28 10:04:27.069 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/GetTokenAgain application/json;+charset=utf-8 -
2022-10-28 10:04:27.070 +01:00 [DBG] POST requests are not supported
2022-10-28 10:04:27.071 +01:00 [DBG] POST requests are not supported
2022-10-28 10:04:27.072 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/GetTokenAgain'
2022-10-28 10:04:27.073 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/GetTokenAgain'
2022-10-28 10:04:27.074 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/GetTokenAgain' is valid for the request path '/api/v1/auth/GetTokenAgain'
2022-10-28 10:04:27.075 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/GetTokenAgain' is valid for the request path '/api/v1/auth/GetTokenAgain'
2022-10-28 10:04:27.077 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.079 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.080 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:27.081 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:27.082 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:27.083 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:27.084 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.085 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.087 +01:00 [INF] Route matched with {action = "GetUserToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] GetUserToken(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 10:04:27.089 +01:00 [INF] Route matched with {action = "GetUserToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] GetUserToken(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 10:04:27.091 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:27.094 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:27.097 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:27.095 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:27.098 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:27.100 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:27.103 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:27.105 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:27.107 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:27.109 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:27.110 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:27.112 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:27.114 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:27.115 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:27.116 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:27.117 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:27.119 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 10:04:27.121 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 10:04:27.123 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 10:04:27.125 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 10:04:27.126 +01:00 [DBG] Connection id "0HMLOODG57K8O", Request id "0HMLOODG57K8O:00000003": started reading request body.
2022-10-28 10:04:27.128 +01:00 [DBG] Connection id "0HMLOODG57K8M", Request id "0HMLOODG57K8M:00000005": started reading request body.
2022-10-28 10:04:27.129 +01:00 [DBG] Connection id "0HMLOODG57K8O", Request id "0HMLOODG57K8O:00000003": done reading request body.
2022-10-28 10:04:27.130 +01:00 [DBG] Connection id "0HMLOODG57K8M", Request id "0HMLOODG57K8M:00000005": done reading request body.
2022-10-28 10:04:27.132 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 10:04:27.135 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:27.133 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 10:04:27.136 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:27.137 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:27.139 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:27.140 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:27.142 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:27.143 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 10:04:27.146 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 10:04:27.187 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 10:04:27.187 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 10:04:27.191 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:27.193 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:27.194 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-10-28 10:04:27.195 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 10:04:27.197 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.198 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.200 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.201 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.202 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 10:04:27.204 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 10:04:27.207 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 10:04:27.209 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 10:04:27.210 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:27.212 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:27.213 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:27.215 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:27.215 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.216 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.217 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.218 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.221 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:27.221 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:27.222 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 10:04:27.223 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 10:04:27.224 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.225 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.227 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.228 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.229 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 10:04:27.230 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 10:04:27.234 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 10:04:27.237 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 10:04:27.240 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:27.242 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:27.243 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:27.244 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:27.245 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.247 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.246 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.250 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:27.250 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.252 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:27.253 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:27.254 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 10:04:27.256 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:27.257 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 10:04:27.258 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 10:04:27.259 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 10:04:27.260 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 10:04:27.262 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 10:04:27.262 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 10:04:27.265 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 10:04:27.270 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API) in 157.8799ms
2022-10-28 10:04:27.270 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API) in 159.6461ms
2022-10-28 10:04:27.272 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.273 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.GetUserToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.274 +01:00 [DBG] Connection id "0HMLOODG57K8M" completed keep alive response.
2022-10-28 10:04:27.276 +01:00 [DBG] Connection id "0HMLOODG57K8O" completed keep alive response.
2022-10-28 10:04:27.277 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 10:04:27.278 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 10:04:27.279 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/GetTokenAgain application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 210.0554ms
2022-10-28 10:04:27.280 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/GetTokenAgain application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 210.2988ms
2022-10-28 10:04:27.298 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/renew application/json;+charset=utf-8 -
2022-10-28 10:04:27.299 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/renew application/json;+charset=utf-8 -
2022-10-28 10:04:27.299 +01:00 [DBG] POST requests are not supported
2022-10-28 10:04:27.300 +01:00 [DBG] POST requests are not supported
2022-10-28 10:04:27.301 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/renew'
2022-10-28 10:04:27.302 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/renew'
2022-10-28 10:04:27.303 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Renew' is valid for the request path '/api/v1/auth/renew'
2022-10-28 10:04:27.304 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Renew' is valid for the request path '/api/v1/auth/renew'
2022-10-28 10:04:27.305 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.307 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.308 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:27.310 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:27.311 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:27.312 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 10:04:27.314 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.315 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.319 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 10:04:27.323 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:27.320 +01:00 [INF] Route matched with {action = "RenewToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] RenewToken(SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 10:04:27.324 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:27.326 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:27.328 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:27.329 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:27.331 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:27.332 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:27.334 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:27.336 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:27.339 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:27.341 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:27.343 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:27.345 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:27.346 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' ...
2022-10-28 10:04:27.348 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 10:04:27.349 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' using the name '' in request data ...
2022-10-28 10:04:27.350 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' ...
2022-10-28 10:04:27.352 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 10:04:27.353 +01:00 [DBG] Attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' using the name '' in request data ...
2022-10-28 10:04:27.355 +01:00 [DBG] Connection id "0HMLOODG57K8O", Request id "0HMLOODG57K8O:00000004": started reading request body.
2022-10-28 10:04:27.356 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 10:04:27.358 +01:00 [DBG] Connection id "0HMLOODG57K8O", Request id "0HMLOODG57K8O:00000004": done reading request body.
2022-10-28 10:04:27.359 +01:00 [DBG] Connection id "0HMLOODG57K8M", Request id "0HMLOODG57K8M:00000006": started reading request body.
2022-10-28 10:04:27.360 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'
2022-10-28 10:04:27.361 +01:00 [DBG] Connection id "0HMLOODG57K8M", Request id "0HMLOODG57K8M:00000006": done reading request body.
2022-10-28 10:04:27.363 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 10:04:27.364 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'
2022-10-28 10:04:27.365 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 10:04:27.366 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 10:04:27.367 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' ...
2022-10-28 10:04:27.369 +01:00 [DBG] Done attempting to bind parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 10:04:27.371 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 10:04:27.372 +01:00 [DBG] Attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest' ...
2022-10-28 10:04:27.375 +01:00 [DBG] Done attempting to validate the bound parameter 'renewRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.RenewRequest'.
2022-10-28 10:04:27.375 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 10:04:27.376 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 10:04:27.378 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.RefreshToken == __refreshToken_0)'
2022-10-28 10:04:27.383 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.refresh_token == @__refreshToken_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 10:04:27.386 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:27.386 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:27.387 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 10:04:27.388 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 10:04:27.389 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.391 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.393 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.394 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.395 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-28 10:04:27.396 +01:00 [DBG] Executing DbCommand [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-28 10:04:27.400 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-28 10:04:27.403 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.refresh_token = @__refreshToken_0
LIMIT 1
2022-10-28 10:04:27.405 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:27.407 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:27.408 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:27.410 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:27.411 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.411 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.412 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.414 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.578 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:27.578 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:27.588 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 10:04:27.588 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 10:04:27.591 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 10:04:27.591 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 10:04:27.603 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 10:04:27.603 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 10:04:27.627 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.627 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.629 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.630 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.634 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 10:04:27.634 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 10:04:27.644 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 10:04:27.644 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 10:04:27.693 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:27.693 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:27.695 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 10:04:27.697 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-10-28 10:04:27.699 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 10:04:27.699 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 10:04:27.712 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 10:04:27.720 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:27.729 +01:00 [DBG] Committing transaction.
2022-10-28 10:04:27.740 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 10:04:27.743 +01:00 [DBG] Committed transaction.
2022-10-28 10:04:27.743 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:27.745 +01:00 [DBG] Committing transaction.
2022-10-28 10:04:27.749 +01:00 [DBG] Committed transaction.
2022-10-28 10:04:27.750 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.750 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:27.752 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.753 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:27.760 +01:00 [DBG] Disposing transaction.
2022-10-28 10:04:27.760 +01:00 [DBG] Disposing transaction.
2022-10-28 10:04:27.765 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:27.765 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:27.771 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 10:04:27.771 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 10:04:27.772 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:27.774 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:27.776 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:27.779 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:27.779 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 10:04:27.780 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 10:04:27.781 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 10:04:27.782 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 10:04:27.783 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 10:04:27.784 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 10:04:27.785 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 10:04:27.786 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 10:04:27.788 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API) in 443.035ms
2022-10-28 10:04:27.789 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API) in 450.5472ms
2022-10-28 10:04:27.791 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.792 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.RenewToken (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.793 +01:00 [DBG] Connection id "0HMLOODG57K8M" completed keep alive response.
2022-10-28 10:04:27.795 +01:00 [DBG] Connection id "0HMLOODG57K8O" completed keep alive response.
2022-10-28 10:04:27.796 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 10:04:27.797 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 10:04:27.798 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 498.8550ms
2022-10-28 10:04:27.799 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/renew application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 500.6282ms
2022-10-28 10:04:27.843 +01:00 [DBG] Connection id "0HMLOODG57K8P" accepted.
2022-10-28 10:04:27.844 +01:00 [DBG] Connection id "0HMLOODG57K8P" started.
2022-10-28 10:04:27.846 +01:00 [DBG] Connection id "0HMLOODG57K8Q" accepted.
2022-10-28 10:04:27.847 +01:00 [DBG] Connection id "0HMLOODG57K8Q" started.
2022-10-28 10:04:27.847 +01:00 [DBG] Connection 0HMLOODG57K8P established using the following protocol: "Tls13"
2022-10-28 10:04:27.849 +01:00 [DBG] Connection 0HMLOODG57K8Q established using the following protocol: "Tls13"
2022-10-28 10:04:27.852 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - -
2022-10-28 10:04:27.852 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - -
2022-10-28 10:04:27.853 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 10:04:27.853 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 10:04:27.854 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/users/profile'
2022-10-28 10:04:27.856 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/users/profile'
2022-10-28 10:04:27.856 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Users/Profile' is valid for the request path '/api/v1/users/profile'
2022-10-28 10:04:27.857 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Users/Profile' is valid for the request path '/api/v1/users/profile'
2022-10-28 10:04:27.859 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.860 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.938 +01:00 [DBG] Successfully validated the token.
2022-10-28 10:04:27.938 +01:00 [DBG] Successfully validated the token.
2022-10-28 10:04:27.943 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 10:04:27.943 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 10:04:27.945 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 10:04:27.946 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 10:04:27.952 +01:00 [DBG] Authorization was successful.
2022-10-28 10:04:27.952 +01:00 [DBG] Authorization was successful.
2022-10-28 10:04:27.955 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.955 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 10:04:27.958 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API).
2022-10-28 10:04:27.959 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API).
2022-10-28 10:04:27.961 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:27.963 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:27.964 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:27.966 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:27.967 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:27.969 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:27.971 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:27.973 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:27.974 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:27.976 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:27.977 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 10:04:27.979 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 10:04:27.981 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 10:04:27.982 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 10:04:27.986 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 10:04:27.986 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 10:04:27.996 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-28 10:04:28.075 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
            SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
            FROM SB-operational.Users AS u
            WHERE u.user_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 10:04:28.078 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:28.078 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:28.080 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 10:04:28.081 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 10:04:28.082 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:28.084 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:28.086 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:28.087 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:28.090 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 10:04:28.091 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 10:04:28.095 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 10:04:28.098 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 10:04:28.101 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:28.103 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:28.105 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:28.106 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:28.107 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:28.108 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:28.109 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:28.111 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:28.114 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:28.114 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:28.116 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:28.119 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:28.120 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 10:04:28.122 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 10:04:28.123 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 10:04:28.125 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 10:04:28.127 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 10:04:28.130 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 10:04:28.131 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse'.
2022-10-28 10:04:28.133 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse'.
2022-10-28 10:04:28.136 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 156.6465ms
2022-10-28 10:04:28.136 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 158.4286ms
2022-10-28 10:04:28.137 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 10:04:28.139 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 10:04:28.143 +01:00 [DBG] Connection id "0HMLOODG57K8Q" completed keep alive response.
2022-10-28 10:04:28.145 +01:00 [DBG] Connection id "0HMLOODG57K8P" completed keep alive response.
2022-10-28 10:04:28.146 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 10:04:28.148 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 10:04:28.149 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - - - 200 - application/json;+charset=utf-8 297.4130ms
2022-10-28 10:04:28.151 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - - - 200 - application/json;+charset=utf-8 299.1424ms
2022-10-28 10:04:30.140 +01:00 [DBG] Connection id "0HMLOODG57K8R" accepted.
2022-10-28 10:04:30.144 +01:00 [DBG] Connection id "0HMLOODG57K8R" started.
2022-10-28 10:04:30.149 +01:00 [DBG] Connection 0HMLOODG57K8R established using the following protocol: "Tls13"
2022-10-28 10:04:30.151 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 10:04:30.153 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 10:04:30.154 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 10:04:30.155 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 10:04:30.157 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 10:04:30.161 +01:00 [DBG] Successfully validated the token.
2022-10-28 10:04:30.162 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 10:04:30.165 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 10:04:30.166 +01:00 [DBG] Authorization was successful.
2022-10-28 10:04:30.168 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 10:04:30.171 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 10:04:30.174 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 10:04:30.177 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 10:04:30.178 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:30.181 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 10:04:30.182 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 10:04:30.185 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 10:04:30.186 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 10:04:30.193 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 10:04:30.197 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(account => account.UserId == __userId_0)'
2022-10-28 10:04:30.201 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
        SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
        FROM SB-operational.Accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-28 10:04:30.204 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:30.205 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 10:04:30.206 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:30.208 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:30.210 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 10:04:30.214 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 10:04:30.231 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:30.245 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:30.248 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 10:04:30.249 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:30.250 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:30.251 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:30.253 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 10:04:30.254 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 10:04:30.255 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:30.257 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:30.259 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 10:04:30.264 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 10:04:30.266 +01:00 [DBG] A data reader was disposed.
2022-10-28 10:04:30.268 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 10:04:30.269 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 10:04:30.271 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 10:04:30.274 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 10:04:30.276 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 10:04:30.277 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 10:04:30.278 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 10:04:30.279 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 10:04:30.288 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 103.4472ms
2022-10-28 10:04:30.291 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 10:04:30.293 +01:00 [DBG] Connection id "0HMLOODG57K8R" completed keep alive response.
2022-10-28 10:04:30.295 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 10:04:30.297 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 145.2091ms
2022-10-28 10:04:33.640 +01:00 [DBG] Connection id "0HMLOODG57K8R" received FIN.
2022-10-28 10:04:33.640 +01:00 [DBG] Connection id "0HMLOODG57K8N" received FIN.
2022-10-28 10:04:33.640 +01:00 [DBG] Connection id "0HMLOODG57K8M" received FIN.
2022-10-28 10:04:33.641 +01:00 [DBG] Connection id "0HMLOODG57K8O" received FIN.
2022-10-28 10:04:33.641 +01:00 [DBG] Connection id "0HMLOODG57K8Q" received FIN.
2022-10-28 10:04:33.644 +01:00 [DBG] Connection id "0HMLOODG57K8P" received FIN.
2022-10-28 10:04:33.649 +01:00 [DBG] Connection id "0HMLOODG57K8R" disconnecting.
2022-10-28 10:04:33.652 +01:00 [DBG] Connection id "0HMLOODG57K8N" disconnecting.
2022-10-28 10:04:33.655 +01:00 [DBG] Connection id "0HMLOODG57K8M" disconnecting.
2022-10-28 10:04:33.656 +01:00 [DBG] Connection id "0HMLOODG57K8R" sending FIN because: "The client closed the connection."
2022-10-28 10:04:33.657 +01:00 [DBG] Connection id "0HMLOODG57K8N" sending FIN because: "The client closed the connection."
2022-10-28 10:04:33.659 +01:00 [DBG] Connection id "0HMLOODG57K8M" stopped.
2022-10-28 10:04:33.660 +01:00 [DBG] Connection id "0HMLOODG57K8O" disconnecting.
2022-10-28 10:04:33.663 +01:00 [DBG] Connection id "0HMLOODG57K8Q" disconnecting.
2022-10-28 10:04:33.663 +01:00 [DBG] Connection id "0HMLOODG57K8R" stopped.
2022-10-28 10:04:33.663 +01:00 [DBG] Connection id "0HMLOODG57K8N" stopped.
2022-10-28 10:04:33.665 +01:00 [DBG] Connection id "0HMLOODG57K8Q" stopped.
2022-10-28 10:04:33.664 +01:00 [DBG] Connection id "0HMLOODG57K8O" sending FIN because: "The client closed the connection."
2022-10-28 10:04:33.666 +01:00 [DBG] Connection id "0HMLOODG57K8P" disconnecting.
2022-10-28 10:04:33.669 +01:00 [DBG] Connection id "0HMLOODG57K8M" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 10:04:33.670 +01:00 [DBG] Connection id "0HMLOODG57K8Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 10:04:33.670 +01:00 [DBG] Connection id "0HMLOODG57K8P" sending FIN because: "The client closed the connection."
2022-10-28 10:04:33.682 +01:00 [DBG] Connection id "0HMLOODG57K8P" stopped.
2022-10-28 10:04:33.682 +01:00 [DBG] Connection id "0HMLOODG57K8O" stopped.
2022-10-28 13:04:27.057 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 13:04:27.182 +01:00 [DBG] Hosting starting
2022-10-28 13:04:27.239 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 13:04:27.244 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 13:04:27.251 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 13:04:27.253 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 13:04:27.259 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 13:04:27.267 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 13:04:27.268 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 13:04:27.278 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 13:04:27.287 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 13:04:27.317 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 13:04:27.322 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 13:04:27.328 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 13:04:27.332 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 13:04:27.337 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 13:04:27.339 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 13:04:27.528 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 13:04:27.583 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 13:04:27.585 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 13:04:27.587 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 13:04:27.587 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 13:04:27.588 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 13:04:27.590 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 13:04:27.591 +01:00 [INF] Hosting environment: Development
2022-10-28 13:04:27.592 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 13:04:27.593 +01:00 [DBG] Hosting started
2022-10-28 13:04:27.689 +01:00 [DBG] Connection id "0HMLORI826FE7" received FIN.
2022-10-28 13:04:27.719 +01:00 [DBG] Connection id "0HMLORI826FE7" accepted.
2022-10-28 13:04:27.724 +01:00 [DBG] Connection id "0HMLORI826FE7" started.
2022-10-28 13:04:27.826 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 13:04:28.125 +01:00 [DBG] Connection id "0HMLORI826FE8" accepted.
2022-10-28 13:04:28.335 +01:00 [DBG] Connection id "0HMLORI826FE8" started.
2022-10-28 13:04:28.339 +01:00 [DBG] Connection id "0HMLORI826FE7" stopped.
2022-10-28 13:04:28.349 +01:00 [DBG] Connection id "0HMLORI826FE7" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 13:04:28.365 +01:00 [DBG] Connection id "0HMLORI826FE8" received FIN.
2022-10-28 13:04:28.402 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 13:04:28.422 +01:00 [DBG] Connection id "0HMLORI826FE8" stopped.
2022-10-28 13:04:28.427 +01:00 [DBG] Connection id "0HMLORI826FE8" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 13:04:36.670 +01:00 [DBG] Connection id "0HMLORI826FE9" accepted.
2022-10-28 13:04:36.672 +01:00 [DBG] Connection id "0HMLORI826FE9" started.
2022-10-28 13:04:36.693 +01:00 [DBG] Connection 0HMLORI826FE9 established using the following protocol: "Tls13"
2022-10-28 13:04:36.734 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 13:04:36.753 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 13:04:36.834 +01:00 [DBG] POST requests are not supported
2022-10-28 13:04:36.863 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 13:04:36.870 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 13:04:36.877 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 13:04:36.969 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 13:04:36.974 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 13:04:36.976 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 13:04:37.003 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 13:04:37.008 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 13:04:37.009 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 13:04:37.011 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:37.013 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 13:04:37.014 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:37.017 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 13:04:37.420 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 13:04:37.448 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 13:04:37.463 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 13:04:37.467 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 13:04:37.469 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 13:04:37.484 +01:00 [DBG] Connection id "0HMLORI826FE9", Request id "0HMLORI826FE9:00000002": started reading request body.
2022-10-28 13:04:37.490 +01:00 [DBG] Connection id "0HMLORI826FE9", Request id "0HMLORI826FE9:00000002": done reading request body.
2022-10-28 13:04:37.495 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 13:04:37.497 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 13:04:37.498 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 13:04:37.500 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 13:04:37.509 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 13:04:38.541 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 13:04:38.600 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 13:04:38.940 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 13:04:38.989 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:39.066 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (74ms).
2022-10-28 13:04:39.076 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:39.351 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:39.371 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 13:04:39.472 +01:00 [INF] Executed DbCommand (110ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 13:04:39.519 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:39.570 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:39.575 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:39.584 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:39.593 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 13:04:39.601 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 13:04:39.627 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:39.629 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 13:04:39.637 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:39.640 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:39.643 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 13:04:39.662 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 13:04:39.673 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:39.690 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:39.698 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:39.702 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:39.875 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:39.885 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 13:04:39.888 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 13:04:39.912 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 13:04:39.934 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:39.936 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:39.939 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 13:04:39.949 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 13:04:39.993 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:39.995 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 13:04:39.997 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 13:04:40.009 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 13:04:40.016 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:40.024 +01:00 [DBG] Committing transaction.
2022-10-28 13:04:40.038 +01:00 [DBG] Committed transaction.
2022-10-28 13:04:40.044 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:40.046 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:40.051 +01:00 [DBG] Disposing transaction.
2022-10-28 13:04:40.057 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:40.063 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 13:04:40.073 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 13:04:40.077 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 13:04:40.078 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 13:04:40.079 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 13:04:40.080 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 13:04:40.082 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 13:04:40.103 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 3082.6852ms
2022-10-28 13:04:40.107 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 13:04:40.112 +01:00 [DBG] Connection id "0HMLORI826FE9" completed keep alive response.
2022-10-28 13:04:40.116 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 13:04:40.121 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3389.8725ms
2022-10-28 13:04:40.168 +01:00 [DBG] Connection id "0HMLORI826FEA" accepted.
2022-10-28 13:04:40.169 +01:00 [DBG] Connection id "0HMLORI826FEA" started.
2022-10-28 13:04:40.175 +01:00 [DBG] Connection 0HMLORI826FEA established using the following protocol: "Tls13"
2022-10-28 13:04:40.180 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - -
2022-10-28 13:04:40.182 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 13:04:40.185 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/users/profile'
2022-10-28 13:04:40.186 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Users/Profile' is valid for the request path '/api/v1/users/profile'
2022-10-28 13:04:40.187 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 13:04:40.261 +01:00 [DBG] Successfully validated the token.
2022-10-28 13:04:40.263 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:40.265 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:40.270 +01:00 [DBG] Authorization was successful.
2022-10-28 13:04:40.272 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 13:04:40.275 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API).
2022-10-28 13:04:40.277 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 13:04:40.279 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 13:04:40.280 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:40.283 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 13:04:40.284 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:40.286 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 13:04:40.288 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 13:04:40.333 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 13:04:40.343 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-28 13:04:40.412 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
            SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
            FROM SB-operational.Users AS u
            WHERE u.user_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 13:04:40.415 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:40.416 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 13:04:40.418 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:40.419 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:40.420 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 13:04:40.424 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 13:04:40.427 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:40.428 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:40.429 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:40.430 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:40.433 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 13:04:40.436 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 13:04:40.437 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 13:04:40.438 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 13:04:40.439 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 13:04:40.441 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse'.
2022-10-28 13:04:40.444 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 158.3459ms
2022-10-28 13:04:40.447 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 13:04:40.449 +01:00 [DBG] Connection id "0HMLORI826FEA" completed keep alive response.
2022-10-28 13:04:40.450 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 13:04:40.451 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - - - 200 - application/json;+charset=utf-8 271.4281ms
2022-10-28 13:04:44.992 +01:00 [DBG] Connection id "0HMLORI826FEB" accepted.
2022-10-28 13:04:44.993 +01:00 [DBG] Connection id "0HMLORI826FEB" started.
2022-10-28 13:04:44.996 +01:00 [DBG] Connection 0HMLORI826FEB established using the following protocol: "Tls13"
2022-10-28 13:04:44.999 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 13:04:45.001 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 13:04:45.002 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 13:04:45.003 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 13:04:45.004 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 13:04:45.006 +01:00 [DBG] Successfully validated the token.
2022-10-28 13:04:45.007 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:45.008 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:45.010 +01:00 [DBG] Authorization was successful.
2022-10-28 13:04:45.010 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 13:04:45.014 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 13:04:45.017 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 13:04:45.018 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 13:04:45.019 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:45.021 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 13:04:45.022 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:45.024 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 13:04:45.026 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 13:04:45.047 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 13:04:45.053 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .Where(account => account.UserId == __userId_0)'
2022-10-28 13:04:45.058 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Account>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
        SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
        FROM SB-operational.Accounts AS a
        WHERE a.user_id == @__userId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-28 13:04:45.060 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:45.061 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 13:04:45.062 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:45.064 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:45.065 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 13:04:45.069 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 13:04:45.085 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:45.098 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:45.100 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:45.101 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:45.103 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:45.105 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:45.109 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:45.110 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 13:04:45.111 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:45.112 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:45.114 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 13:04:45.118 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 13:04:45.120 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:45.121 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:45.122 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:45.124 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 13:04:45.126 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 13:04:45.127 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 13:04:45.128 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 13:04:45.128 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 13:04:45.130 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 13:04:45.142 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 118.1723ms
2022-10-28 13:04:45.144 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 13:04:45.146 +01:00 [DBG] Connection id "0HMLORI826FEB" completed keep alive response.
2022-10-28 13:04:45.147 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 13:04:45.148 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 149.1707ms
2022-10-28 13:04:48.958 +01:00 [DBG] Connection id "0HMLORI826FEC" accepted.
2022-10-28 13:04:48.959 +01:00 [DBG] Connection id "0HMLORI826FEC" started.
2022-10-28 13:04:48.961 +01:00 [DBG] Connection 0HMLORI826FEC established using the following protocol: "Tls13"
2022-10-28 13:04:48.963 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/81173f53-72c7-4dc7-90eb-864b0a6c206e - -
2022-10-28 13:04:48.964 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 13:04:48.965 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/81173f53-72c7-4dc7-90eb-864b0a6c206e'
2022-10-28 13:04:48.966 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/81173f53-72c7-4dc7-90eb-864b0a6c206e'
2022-10-28 13:04:48.969 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 13:04:48.970 +01:00 [DBG] Successfully validated the token.
2022-10-28 13:04:48.971 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:48.972 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:48.973 +01:00 [DBG] Authorization was successful.
2022-10-28 13:04:48.974 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 13:04:48.978 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 13:04:48.981 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 13:04:48.983 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 13:04:48.985 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:48.988 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 13:04:48.989 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:48.991 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 13:04:48.992 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 13:04:48.994 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 13:04:48.995 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 13:04:48.997 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 13:04:48.998 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 13:04:49.000 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 13:04:49.003 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 13:04:49.006 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 13:04:49.009 +01:00 [DBG] Compiling query expression: 
'DbSet<Account>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: (object)__get_Item_0))'
2022-10-28 13:04:49.013 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Account>(
    asyncEnumerable: new SingleQueryingEnumerable<Account>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Account.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Account.Balance (decimal) Required, 1], [Property: Account.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Account.Currency (string) Required ValueGenerated.OnAdd MaxLength(3), 3], [Property: Account.UserId (Guid) Required FK Index, 4] }
            SELECT TOP(1) a.account_id, a.balance, a.created_at, a.currency, a.user_id
            FROM SB-operational.Accounts AS a
            WHERE a.account_id == @__get_Item_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Account>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 13:04:49.016 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:49.018 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 13:04:49.021 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:49.023 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:49.024 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 13:04:49.028 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 13:04:49.032 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:49.036 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:49.039 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:49.040 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:49.045 +01:00 [DBG] Compiling query expression: 
'DbSet<Movement>()
    .Where(movement => movement.AccountId == __accountId_0)'
2022-10-28 13:04:49.049 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Movement>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Movement.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Movement.AccountId (Guid) Required FK Index, 1], [Property: Movement.Amount (decimal) Required, 2], [Property: Movement.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3] }
        SELECT m.movement_id, m.account_id, m.amount, m.created_at
        FROM SB-operational.Movements AS m
        WHERE m.account_id == @__accountId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movement>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)'
2022-10-28 13:04:49.053 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:49.054 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 13:04:49.055 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:49.056 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:49.058 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 13:04:49.062 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 13:04:49.065 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:49.065 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:49.067 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:49.069 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 13:04:49.071 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 13:04:49.072 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 13:04:49.073 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 13:04:49.073 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 13:04:49.075 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 13:04:49.078 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 87.2757ms
2022-10-28 13:04:49.080 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 13:04:49.081 +01:00 [DBG] Connection id "0HMLORI826FEC" completed keep alive response.
2022-10-28 13:04:49.082 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 13:04:49.083 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/81173f53-72c7-4dc7-90eb-864b0a6c206e - - - 200 - application/json;+charset=utf-8 120.6398ms
2022-10-28 13:04:50.230 +01:00 [DBG] Connection id "0HMLORI826FED" accepted.
2022-10-28 13:04:50.231 +01:00 [DBG] Connection id "0HMLORI826FED" started.
2022-10-28 13:04:50.233 +01:00 [DBG] Connection 0HMLORI826FED established using the following protocol: "Tls13"
2022-10-28 13:04:50.234 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502 - -
2022-10-28 13:04:50.236 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 13:04:50.238 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502'
2022-10-28 13:04:50.239 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502'
2022-10-28 13:04:50.240 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 13:04:50.242 +01:00 [DBG] Successfully validated the token.
2022-10-28 13:04:50.242 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:50.244 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:50.245 +01:00 [DBG] Authorization was successful.
2022-10-28 13:04:50.245 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 13:04:50.247 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 13:04:50.249 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 13:04:50.250 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 13:04:50.252 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:50.255 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 13:04:50.256 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:50.258 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 13:04:50.263 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 13:04:50.265 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 13:04:50.266 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 13:04:50.268 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 13:04:50.270 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 13:04:50.272 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 13:04:50.273 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 13:04:50.274 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 13:04:50.276 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:50.277 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 13:04:50.278 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:50.280 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:50.281 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 13:04:50.286 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 13:04:50.289 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:50.291 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:50.291 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:50.292 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:50.294 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:50.295 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 13:04:50.296 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:50.297 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:50.298 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 13:04:50.303 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 13:04:50.308 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:50.331 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:50.333 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:50.335 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:50.337 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 13:04:50.339 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 13:04:50.340 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 13:04:50.341 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 13:04:50.342 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 13:04:50.343 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 13:04:50.345 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 87.1218ms
2022-10-28 13:04:50.346 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 13:04:50.348 +01:00 [DBG] Connection id "0HMLORI826FED" completed keep alive response.
2022-10-28 13:04:50.349 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 13:04:50.350 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/49ba51db-f107-4e70-bff5-931f2721f502 - - - 200 - application/json;+charset=utf-8 115.8932ms
2022-10-28 13:04:53.509 +01:00 [DBG] Connection id "0HMLORI826FEE" accepted.
2022-10-28 13:04:53.511 +01:00 [DBG] Connection id "0HMLORI826FEE" started.
2022-10-28 13:04:53.513 +01:00 [DBG] Connection 0HMLORI826FEE established using the following protocol: "Tls13"
2022-10-28 13:04:53.514 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d - -
2022-10-28 13:04:53.515 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 13:04:53.516 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d'
2022-10-28 13:04:53.517 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts/{accountId}' is valid for the request path '/api/v1/accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d'
2022-10-28 13:04:53.519 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 13:04:53.520 +01:00 [DBG] Successfully validated the token.
2022-10-28 13:04:53.521 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:53.523 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:53.524 +01:00 [DBG] Authorization was successful.
2022-10-28 13:04:53.525 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 13:04:53.526 +01:00 [INF] Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims]] GetAccount(System.Guid) on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 13:04:53.528 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 13:04:53.529 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 13:04:53.531 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:53.533 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 13:04:53.534 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:53.536 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 13:04:53.538 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 13:04:53.541 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' ...
2022-10-28 13:04:53.543 +01:00 [DBG] Attempting to bind parameter 'accountId' of type 'System.Guid' using the name 'accountId' in request data ...
2022-10-28 13:04:53.545 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 13:04:53.547 +01:00 [DBG] Done attempting to bind parameter 'accountId' of type 'System.Guid'.
2022-10-28 13:04:53.548 +01:00 [DBG] Attempting to validate the bound parameter 'accountId' of type 'System.Guid' ...
2022-10-28 13:04:53.549 +01:00 [DBG] Done attempting to validate the bound parameter 'accountId' of type 'System.Guid'.
2022-10-28 13:04:53.551 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 13:04:53.554 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:53.556 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 13:04:53.558 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:53.560 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:53.561 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 13:04:53.565 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.account_id = @__get_Item_0
LIMIT 1
2022-10-28 13:04:53.568 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:53.569 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:53.570 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:53.571 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:53.574 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:53.574 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 13:04:53.576 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:53.577 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:53.578 +01:00 [DBG] Executing DbCommand [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 13:04:53.581 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accountId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT m.movement_id, m.account_id, m.amount, m.created_at
FROM "SB-operational"."Movements" AS m
WHERE m.account_id = @__accountId_0
2022-10-28 13:04:53.584 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Movement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:53.585 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:53.586 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:53.587 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:53.589 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 13:04:53.592 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 13:04:53.593 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 13:04:53.593 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 13:04:53.594 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 13:04:53.596 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountMovims'.
2022-10-28 13:04:53.597 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API) in 60.7474ms
2022-10-28 13:04:53.598 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAccount (SimpleBank.AcctManage.API)'
2022-10-28 13:04:53.600 +01:00 [DBG] Connection id "0HMLORI826FEE" completed keep alive response.
2022-10-28 13:04:53.601 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 13:04:53.602 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/c2a61345-6b78-4266-a2b3-a937cb2c9a2d - - - 200 - application/json;+charset=utf-8 88.1360ms
2022-10-28 13:04:56.915 +01:00 [DBG] Connection id "0HMLORI826FEF" accepted.
2022-10-28 13:04:56.917 +01:00 [DBG] Connection id "0HMLORI826FEF" started.
2022-10-28 13:04:56.919 +01:00 [DBG] Connection 0HMLORI826FEF established using the following protocol: "Tls13"
2022-10-28 13:04:56.921 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - -
2022-10-28 13:04:56.921 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 13:04:56.923 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/users/profile'
2022-10-28 13:04:56.924 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Users/Profile' is valid for the request path '/api/v1/users/profile'
2022-10-28 13:04:56.926 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 13:04:56.928 +01:00 [DBG] Successfully validated the token.
2022-10-28 13:04:56.929 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:56.931 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:56.932 +01:00 [DBG] Authorization was successful.
2022-10-28 13:04:56.933 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 13:04:56.934 +01:00 [INF] Route matched with {action = "GetUserInfo", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse]] GetUserInfo() on controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API).
2022-10-28 13:04:56.936 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 13:04:56.937 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 13:04:56.939 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:56.941 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 13:04:56.943 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:56.945 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 13:04:56.946 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.UsersController (SimpleBank.AcctManage.API)
2022-10-28 13:04:56.948 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 13:04:56.950 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:56.951 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 13:04:56.952 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:56.954 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:56.955 +01:00 [DBG] Executing DbCommand [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 13:04:56.959 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.user_id = @__get_Item_0
LIMIT 1
2022-10-28 13:04:56.962 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:56.963 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:56.964 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:56.965 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:56.967 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 13:04:56.969 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 13:04:56.970 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 13:04:56.971 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 13:04:56.973 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 13:04:56.974 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.CreateUserResponse'.
2022-10-28 13:04:56.975 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API) in 30.8757ms
2022-10-28 13:04:56.977 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.UsersController.GetUserInfo (SimpleBank.AcctManage.API)'
2022-10-28 13:04:56.978 +01:00 [DBG] Connection id "0HMLORI826FEF" completed keep alive response.
2022-10-28 13:04:56.979 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 13:04:56.980 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/users/profile - - - 200 - application/json;+charset=utf-8 59.7692ms
2022-10-28 13:04:58.050 +01:00 [DBG] Connection id "0HMLORI826FEG" accepted.
2022-10-28 13:04:58.051 +01:00 [DBG] Connection id "0HMLORI826FEG" started.
2022-10-28 13:04:58.055 +01:00 [DBG] Connection 0HMLORI826FEG established using the following protocol: "Tls13"
2022-10-28 13:04:58.057 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - -
2022-10-28 13:04:58.058 +01:00 [DBG] The request path  does not match the path filter
2022-10-28 13:04:58.059 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/accounts/'
2022-10-28 13:04:58.064 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Accounts' is valid for the request path '/api/v1/accounts/'
2022-10-28 13:04:58.067 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 13:04:58.069 +01:00 [DBG] Successfully validated the token.
2022-10-28 13:04:58.069 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:58.070 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 13:04:58.071 +01:00 [DBG] Authorization was successful.
2022-10-28 13:04:58.072 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 13:04:58.074 +01:00 [INF] Route matched with {action = "GetAllAccounts", controller = "Accounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse]]] GetAllAccounts() on controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API).
2022-10-28 13:04:58.081 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 13:04:58.084 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 13:04:58.087 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:58.091 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 13:04:58.095 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 13:04:58.099 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 13:04:58.101 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AccountsController (SimpleBank.AcctManage.API)
2022-10-28 13:04:58.124 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 13:04:58.128 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:58.129 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 13:04:58.130 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:58.131 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:58.132 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 13:04:58.136 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 13:04:58.140 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:58.141 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:58.143 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'Account' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 13:04:58.145 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:58.145 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:58.147 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:58.148 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 13:04:58.149 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 13:04:58.151 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:58.152 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:58.154 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 13:04:58.157 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT a.account_id, a.balance, a.created_at, a.currency, a.user_id
FROM "SB-operational"."Accounts" AS a
WHERE a.user_id = @__userId_0
2022-10-28 13:04:58.161 +01:00 [DBG] A data reader was disposed.
2022-10-28 13:04:58.161 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 13:04:58.163 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 13:04:58.164 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 13:04:58.166 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 13:04:58.167 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 13:04:58.168 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 13:04:58.170 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 13:04:58.171 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SimpleBank.AcctManage.API.DTModels.v1.Responses.AccountResponse, SimpleBank.AcctManage.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-28 13:04:58.172 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API) in 73.8126ms
2022-10-28 13:04:58.174 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AccountsController.GetAllAccounts (SimpleBank.AcctManage.API)'
2022-10-28 13:04:58.175 +01:00 [DBG] Connection id "0HMLORI826FEG" completed keep alive response.
2022-10-28 13:04:58.176 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 13:04:58.177 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7074/api/v1/accounts/ - - - 200 - application/json;+charset=utf-8 120.5304ms
2022-10-28 16:30:24.343 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 16:30:24.427 +01:00 [DBG] Hosting starting
2022-10-28 16:30:24.487 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 16:30:24.492 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 16:30:24.498 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 16:30:24.500 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 16:30:24.507 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 16:30:24.513 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 16:30:24.514 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 16:30:24.524 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 16:30:24.527 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:30:24.532 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 16:30:24.535 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:30:24.540 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 16:30:24.542 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 16:30:24.546 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 16:30:24.547 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 16:30:24.701 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 16:30:24.751 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 16:30:24.752 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 16:30:24.754 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 16:30:24.755 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 16:30:24.756 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 16:30:24.757 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 16:30:24.758 +01:00 [INF] Hosting environment: Development
2022-10-28 16:30:24.759 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 16:30:24.760 +01:00 [DBG] Hosting started
2022-10-28 16:30:25.023 +01:00 [DBG] Connection id "0HMLOV5AQSC5A" accepted.
2022-10-28 16:30:25.023 +01:00 [DBG] Connection id "0HMLOV5AQSC59" accepted.
2022-10-28 16:30:25.027 +01:00 [DBG] Connection id "0HMLOV5AQSC5A" started.
2022-10-28 16:30:25.030 +01:00 [DBG] Connection id "0HMLOV5AQSC59" started.
2022-10-28 16:30:25.040 +01:00 [DBG] Connection id "0HMLOV5AQSC59" received FIN.
2022-10-28 16:30:25.041 +01:00 [DBG] Connection id "0HMLOV5AQSC5A" received FIN.
2022-10-28 16:30:25.066 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:30:25.066 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:30:25.135 +01:00 [DBG] Connection id "0HMLOV5AQSC5A" stopped.
2022-10-28 16:30:25.135 +01:00 [DBG] Connection id "0HMLOV5AQSC59" stopped.
2022-10-28 16:30:25.138 +01:00 [DBG] Connection id "0HMLOV5AQSC5A" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:30:25.138 +01:00 [DBG] Connection id "0HMLOV5AQSC59" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:30:25.801 +01:00 [DBG] Connection id "0HMLOV5AQSC5B" accepted.
2022-10-28 16:30:25.808 +01:00 [DBG] Connection id "0HMLOV5AQSC5B" started.
2022-10-28 16:30:25.854 +01:00 [DBG] Connection id "0HMLOV5AQSC5B" received FIN.
2022-10-28 16:30:25.858 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:30:25.864 +01:00 [DBG] Connection id "0HMLOV5AQSC5B" stopped.
2022-10-28 16:30:25.866 +01:00 [DBG] Connection id "0HMLOV5AQSC5B" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:35:25.243 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 16:35:25.307 +01:00 [DBG] Hosting starting
2022-10-28 16:35:25.358 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 16:35:25.362 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 16:35:25.397 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 16:35:25.399 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 16:35:25.406 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 16:35:25.411 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 16:35:25.413 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 16:35:25.420 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 16:35:25.424 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:35:25.428 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 16:35:25.430 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:35:25.434 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 16:35:25.438 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 16:35:25.444 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 16:35:25.446 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 16:35:25.583 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 16:35:25.637 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 16:35:25.638 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 16:35:25.640 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 16:35:25.641 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 16:35:25.642 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 16:35:25.643 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 16:35:25.644 +01:00 [INF] Hosting environment: Development
2022-10-28 16:35:25.645 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 16:35:25.646 +01:00 [DBG] Hosting started
2022-10-28 16:35:25.857 +01:00 [DBG] Connection id "0HMLOV84FSNJL" received FIN.
2022-10-28 16:35:25.857 +01:00 [DBG] Connection id "0HMLOV84FSNJK" received FIN.
2022-10-28 16:35:25.883 +01:00 [DBG] Connection id "0HMLOV84FSNJL" accepted.
2022-10-28 16:35:25.883 +01:00 [DBG] Connection id "0HMLOV84FSNJK" accepted.
2022-10-28 16:35:25.895 +01:00 [DBG] Connection id "0HMLOV84FSNJL" started.
2022-10-28 16:35:25.895 +01:00 [DBG] Connection id "0HMLOV84FSNJK" started.
2022-10-28 16:35:25.939 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:35:25.940 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:35:26.108 +01:00 [DBG] Connection id "0HMLOV84FSNJL" stopped.
2022-10-28 16:35:26.108 +01:00 [DBG] Connection id "0HMLOV84FSNJK" stopped.
2022-10-28 16:35:26.113 +01:00 [DBG] Connection id "0HMLOV84FSNJK" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:35:26.113 +01:00 [DBG] Connection id "0HMLOV84FSNJL" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:35:31.247 +01:00 [DBG] Connection id "0HMLOV84FSNJM" accepted.
2022-10-28 16:35:31.254 +01:00 [DBG] Connection id "0HMLOV84FSNJM" started.
2022-10-28 16:35:31.291 +01:00 [DBG] Connection id "0HMLOV84FSNJM" received FIN.
2022-10-28 16:35:31.299 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:35:31.308 +01:00 [DBG] Connection id "0HMLOV84FSNJM" stopped.
2022-10-28 16:35:31.309 +01:00 [DBG] Connection id "0HMLOV84FSNJM" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:43:17.018 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 16:43:17.665 +01:00 [DBG] Hosting starting
2022-10-28 16:43:17.711 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 16:43:17.715 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 16:43:17.722 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 16:43:17.723 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 16:43:17.729 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 16:43:17.734 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 16:43:17.735 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 16:43:17.744 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 16:43:17.746 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:43:17.750 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 16:43:17.752 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:43:17.759 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 16:43:17.762 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 16:43:17.765 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 16:43:17.766 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 16:43:17.904 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 16:43:17.957 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 16:43:17.958 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 16:43:17.959 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 16:43:17.960 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 16:43:17.962 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 16:43:17.963 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 16:43:17.964 +01:00 [INF] Hosting environment: Development
2022-10-28 16:43:17.965 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 16:43:17.966 +01:00 [DBG] Hosting started
2022-10-28 16:43:18.455 +01:00 [DBG] Connection id "0HMLOVCHAU91U" received FIN.
2022-10-28 16:43:18.456 +01:00 [DBG] Connection id "0HMLOVCHAU91V" reset.
2022-10-28 16:43:18.482 +01:00 [DBG] Connection id "0HMLOVCHAU91V" accepted.
2022-10-28 16:43:18.482 +01:00 [DBG] Connection id "0HMLOVCHAU91U" accepted.
2022-10-28 16:43:18.488 +01:00 [DBG] Connection id "0HMLOVCHAU91U" started.
2022-10-28 16:43:18.488 +01:00 [DBG] Connection id "0HMLOVCHAU91V" started.
2022-10-28 16:43:18.510 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:43:18.510 +01:00 [DBG] Failed to authenticate HTTPS connection.
Microsoft.AspNetCore.Connections.ConnectionResetException: An existing connection was forcibly closed by the remote host.
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.ReadAsync(CancellationToken token)
   at System.IO.Pipelines.Pipe.DefaultPipeReader.ReadAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.DuplexPipeStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:43:18.678 +01:00 [DBG] Connection id "0HMLOVCHAU91U" stopped.
2022-10-28 16:43:18.713 +01:00 [DBG] Connection id "0HMLOVCHAU91V" stopped.
2022-10-28 16:43:18.724 +01:00 [DBG] Connection id "0HMLOVCHAU91V" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:43:18.726 +01:00 [DBG] Connection id "0HMLOVCHAU91U" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:43:18.805 +01:00 [DBG] Connection id "0HMLOVCHAU920" accepted.
2022-10-28 16:43:18.810 +01:00 [DBG] Connection id "0HMLOVCHAU920" started.
2022-10-28 16:43:18.859 +01:00 [DBG] Connection id "0HMLOVCHAU920" received FIN.
2022-10-28 16:43:18.890 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:43:18.973 +01:00 [DBG] Connection id "0HMLOVCHAU920" stopped.
2022-10-28 16:43:18.980 +01:00 [DBG] Connection id "0HMLOVCHAU920" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:44:08.016 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 16:44:08.127 +01:00 [DBG] Hosting starting
2022-10-28 16:44:08.178 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 16:44:08.186 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 16:44:08.195 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 16:44:08.196 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 16:44:08.204 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 16:44:08.211 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 16:44:08.213 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 16:44:08.221 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 16:44:08.223 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:44:08.227 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 16:44:08.229 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:44:08.236 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 16:44:08.239 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 16:44:08.243 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 16:44:08.244 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 16:44:08.372 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 16:44:08.428 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 16:44:08.429 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 16:44:08.430 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 16:44:08.431 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 16:44:08.432 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 16:44:08.433 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 16:44:08.434 +01:00 [INF] Hosting environment: Development
2022-10-28 16:44:08.435 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 16:44:08.436 +01:00 [DBG] Hosting started
2022-10-28 16:44:08.679 +01:00 [DBG] Connection id "0HMLOVD09SL87" accepted.
2022-10-28 16:44:08.682 +01:00 [DBG] Connection id "0HMLOVD09SL87" received FIN.
2022-10-28 16:44:08.688 +01:00 [DBG] Connection id "0HMLOVD09SL87" started.
2022-10-28 16:44:08.722 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:44:08.786 +01:00 [DBG] Connection id "0HMLOVD09SL87" stopped.
2022-10-28 16:44:08.794 +01:00 [DBG] Connection id "0HMLOVD09SL87" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:44:09.067 +01:00 [DBG] Connection id "0HMLOVD09SL88" accepted.
2022-10-28 16:44:09.068 +01:00 [DBG] Connection id "0HMLOVD09SL88" started.
2022-10-28 16:44:09.104 +01:00 [DBG] Connection id "0HMLOVD09SL88" received FIN.
2022-10-28 16:44:09.121 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:44:09.133 +01:00 [DBG] Connection id "0HMLOVD09SL88" stopped.
2022-10-28 16:44:09.134 +01:00 [DBG] Connection id "0HMLOVD09SL88" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:45:47.550 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 16:45:47.697 +01:00 [DBG] Hosting starting
2022-10-28 16:45:47.732 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 16:45:47.736 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 16:45:47.742 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 16:45:47.743 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 16:45:47.749 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 16:45:47.755 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 16:45:47.756 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 16:45:47.765 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 16:45:47.768 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:45:47.772 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 16:45:47.776 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:45:47.781 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 16:45:47.784 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 16:45:47.788 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 16:45:47.790 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 16:45:47.933 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 16:45:47.984 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 16:45:47.986 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 16:45:47.988 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 16:45:47.989 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 16:45:47.991 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 16:45:47.992 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 16:45:47.993 +01:00 [INF] Hosting environment: Development
2022-10-28 16:45:47.994 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 16:45:47.995 +01:00 [DBG] Hosting started
2022-10-28 16:45:48.379 +01:00 [DBG] Connection id "0HMLOVDU0N9T2" received FIN.
2022-10-28 16:45:48.403 +01:00 [DBG] Connection id "0HMLOVDU0N9T2" accepted.
2022-10-28 16:45:48.407 +01:00 [DBG] Connection id "0HMLOVDU0N9T2" started.
2022-10-28 16:45:48.430 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:45:48.513 +01:00 [DBG] Connection id "0HMLOVDU0N9T2" stopped.
2022-10-28 16:45:48.518 +01:00 [DBG] Connection id "0HMLOVDU0N9T2" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:45:48.811 +01:00 [DBG] Connection id "0HMLOVDU0N9T3" accepted.
2022-10-28 16:45:48.815 +01:00 [DBG] Connection id "0HMLOVDU0N9T3" started.
2022-10-28 16:45:48.847 +01:00 [DBG] Connection id "0HMLOVDU0N9T3" received FIN.
2022-10-28 16:45:48.857 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:45:48.868 +01:00 [DBG] Connection id "0HMLOVDU0N9T3" stopped.
2022-10-28 16:45:48.872 +01:00 [DBG] Connection id "0HMLOVDU0N9T3" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:46:12.550 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 16:46:12.657 +01:00 [DBG] Hosting starting
2022-10-28 16:46:12.701 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 16:46:12.705 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 16:46:12.710 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 16:46:12.711 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 16:46:12.718 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 16:46:12.735 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 16:46:12.740 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 16:46:12.755 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 16:46:12.760 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:46:12.769 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 16:46:12.771 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:46:12.777 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 16:46:12.781 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 16:46:12.785 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 16:46:12.786 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 16:46:12.910 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 16:46:12.969 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 16:46:12.970 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 16:46:12.972 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 16:46:12.973 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 16:46:12.975 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 16:46:12.976 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 16:46:12.977 +01:00 [INF] Hosting environment: Development
2022-10-28 16:46:12.978 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 16:46:12.979 +01:00 [DBG] Hosting started
2022-10-28 16:46:13.053 +01:00 [DBG] Connection id "0HMLOVE5C1C6G" received FIN.
2022-10-28 16:46:13.053 +01:00 [DBG] Connection id "0HMLOVE5C1C6H" received FIN.
2022-10-28 16:46:13.066 +01:00 [DBG] Connection id "0HMLOVE5C1C6G" accepted.
2022-10-28 16:46:13.066 +01:00 [DBG] Connection id "0HMLOVE5C1C6H" accepted.
2022-10-28 16:46:13.069 +01:00 [DBG] Connection id "0HMLOVE5C1C6G" started.
2022-10-28 16:46:13.069 +01:00 [DBG] Connection id "0HMLOVE5C1C6H" started.
2022-10-28 16:46:13.115 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:46:13.124 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:46:13.222 +01:00 [DBG] Connection id "0HMLOVE5C1C6H" stopped.
2022-10-28 16:46:13.222 +01:00 [DBG] Connection id "0HMLOVE5C1C6G" stopped.
2022-10-28 16:46:13.227 +01:00 [DBG] Connection id "0HMLOVE5C1C6H" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:46:13.231 +01:00 [DBG] Connection id "0HMLOVE5C1C6G" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:46:13.498 +01:00 [DBG] Connection id "0HMLOVE5C1C6I" accepted.
2022-10-28 16:46:13.500 +01:00 [DBG] Connection id "0HMLOVE5C1C6I" started.
2022-10-28 16:46:13.572 +01:00 [DBG] Connection id "0HMLOVE5C1C6I" received FIN.
2022-10-28 16:46:13.590 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:46:13.621 +01:00 [DBG] Connection id "0HMLOVE5C1C6I" stopped.
2022-10-28 16:46:13.623 +01:00 [DBG] Connection id "0HMLOVE5C1C6I" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:54:20.986 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 16:54:21.056 +01:00 [DBG] Hosting starting
2022-10-28 16:54:21.107 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 16:54:21.111 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 16:54:21.117 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 16:54:21.118 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 16:54:21.124 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 16:54:21.130 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 16:54:21.131 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 16:54:21.140 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 16:54:21.143 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:54:21.147 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 16:54:21.149 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 16:54:21.153 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 16:54:21.156 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 16:54:21.160 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 16:54:21.161 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 16:54:21.319 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 16:54:21.385 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 16:54:21.387 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 16:54:21.389 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 16:54:21.390 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 16:54:21.391 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 16:54:21.392 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 16:54:21.393 +01:00 [INF] Hosting environment: Development
2022-10-28 16:54:21.395 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 16:54:21.396 +01:00 [DBG] Hosting started
2022-10-28 16:54:21.605 +01:00 [DBG] Connection id "0HMLOVIMV7AKO" received FIN.
2022-10-28 16:54:21.642 +01:00 [DBG] Connection id "0HMLOVIMV7AKO" accepted.
2022-10-28 16:54:21.650 +01:00 [DBG] Connection id "0HMLOVIMV7AKO" started.
2022-10-28 16:54:21.677 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:54:21.859 +01:00 [DBG] Connection id "0HMLOVIMV7AKO" stopped.
2022-10-28 16:54:21.862 +01:00 [DBG] Connection id "0HMLOVIMV7AKO" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:54:27.071 +01:00 [DBG] Connection id "0HMLOVIMV7AKP" accepted.
2022-10-28 16:54:27.073 +01:00 [DBG] Connection id "0HMLOVIMV7AKP" started.
2022-10-28 16:54:27.115 +01:00 [DBG] Connection id "0HMLOVIMV7AKP" received FIN.
2022-10-28 16:54:27.127 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 16:54:27.174 +01:00 [DBG] Connection id "0HMLOVIMV7AKP" stopped.
2022-10-28 16:54:27.180 +01:00 [DBG] Connection id "0HMLOVIMV7AKP" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 16:54:29.049 +01:00 [DBG] Connection id "0HMLOVIMV7AKQ" accepted.
2022-10-28 16:54:29.051 +01:00 [DBG] Connection id "0HMLOVIMV7AKQ" started.
2022-10-28 16:54:29.070 +01:00 [DBG] Connection 0HMLOVIMV7AKQ established using the following protocol: "Tls13"
2022-10-28 16:54:29.107 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 16:54:29.126 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 16:54:29.179 +01:00 [DBG] POST requests are not supported
2022-10-28 16:54:29.210 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 16:54:29.218 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 16:54:29.230 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 16:54:29.327 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 16:54:29.331 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 16:54:29.333 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 16:54:29.359 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 16:54:29.362 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 16:54:29.363 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 16:54:29.364 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 16:54:29.367 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 16:54:29.368 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 16:54:29.370 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 16:54:29.573 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 16:54:29.601 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 16:54:29.615 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 16:54:29.619 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 16:54:29.621 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 16:54:29.636 +01:00 [DBG] Connection id "0HMLOVIMV7AKQ", Request id "0HMLOVIMV7AKQ:00000002": started reading request body.
2022-10-28 16:54:29.642 +01:00 [DBG] Connection id "0HMLOVIMV7AKQ", Request id "0HMLOVIMV7AKQ:00000002": done reading request body.
2022-10-28 16:54:29.648 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 16:54:29.650 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 16:54:29.652 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 16:54:29.653 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 16:54:29.662 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 16:54:30.637 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 16:54:30.691 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 16:54:31.023 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 16:54:31.068 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 16:54:31.141 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (70ms).
2022-10-28 16:54:31.150 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 16:54:31.440 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 16:54:31.455 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 16:54:31.544 +01:00 [INF] Executed DbCommand (94ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 16:54:31.594 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 16:54:31.647 +01:00 [DBG] A data reader was disposed.
2022-10-28 16:54:31.652 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 16:54:31.660 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 16:54:31.669 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 16:54:31.676 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 16:54:31.701 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 16:54:31.703 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 16:54:31.710 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 16:54:31.714 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 16:54:31.716 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 16:54:31.736 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 16:54:31.746 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 16:54:31.763 +01:00 [DBG] A data reader was disposed.
2022-10-28 16:54:31.771 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 16:54:31.774 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 16:54:31.936 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 16:54:31.945 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 16:54:31.948 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 16:54:31.972 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 16:54:31.997 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 16:54:31.998 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 16:54:32.002 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 16:54:32.015 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 16:54:32.063 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 16:54:32.065 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 16:54:32.067 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 16:54:32.084 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 16:54:32.091 +01:00 [DBG] A data reader was disposed.
2022-10-28 16:54:32.098 +01:00 [DBG] Committing transaction.
2022-10-28 16:54:32.113 +01:00 [DBG] Committed transaction.
2022-10-28 16:54:32.119 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 16:54:32.122 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 16:54:32.126 +01:00 [DBG] Disposing transaction.
2022-10-28 16:54:32.132 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 16:54:32.137 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 16:54:32.146 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 16:54:32.150 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 16:54:32.151 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 16:54:32.152 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 16:54:32.153 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 16:54:32.154 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 16:54:32.175 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2801.0286ms
2022-10-28 16:54:32.178 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 16:54:32.185 +01:00 [DBG] Connection id "0HMLOVIMV7AKQ" completed keep alive response.
2022-10-28 16:54:32.189 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 16:54:32.194 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3091.0944ms
2022-10-28 17:31:10.337 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 17:31:10.404 +01:00 [DBG] Hosting starting
2022-10-28 17:31:10.454 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 17:31:10.458 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 17:31:10.467 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 17:31:10.472 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 17:31:10.483 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 17:31:10.489 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 17:31:10.491 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 17:31:10.500 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 17:31:10.506 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:31:10.519 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 17:31:10.524 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:31:10.532 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 17:31:10.536 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 17:31:10.540 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 17:31:10.542 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 17:31:10.772 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 17:31:10.850 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 17:31:10.851 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 17:31:10.853 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 17:31:10.854 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 17:31:10.855 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 17:31:10.856 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 17:31:10.857 +01:00 [INF] Hosting environment: Development
2022-10-28 17:31:10.858 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 17:31:10.859 +01:00 [DBG] Hosting started
2022-10-28 17:31:12.075 +01:00 [DBG] Connection id "0HMLP079NTGFN" received FIN.
2022-10-28 17:31:12.075 +01:00 [DBG] Connection id "0HMLP079NTGFM" received FIN.
2022-10-28 17:31:12.084 +01:00 [DBG] Connection id "0HMLP079NTGFM" accepted.
2022-10-28 17:31:12.084 +01:00 [DBG] Connection id "0HMLP079NTGFN" accepted.
2022-10-28 17:31:12.087 +01:00 [DBG] Connection id "0HMLP079NTGFM" started.
2022-10-28 17:31:12.088 +01:00 [DBG] Connection id "0HMLP079NTGFN" started.
2022-10-28 17:31:12.090 +01:00 [DBG] Connection id "0HMLP079NTGFO" accepted.
2022-10-28 17:31:12.092 +01:00 [DBG] Connection id "0HMLP079NTGFO" started.
2022-10-28 17:31:12.103 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:31:12.135 +01:00 [DBG] Connection id "0HMLP079NTGFO" received FIN.
2022-10-28 17:31:12.103 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:31:12.177 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:31:12.201 +01:00 [DBG] Connection id "0HMLP079NTGFM" stopped.
2022-10-28 17:31:12.204 +01:00 [DBG] Connection id "0HMLP079NTGFN" stopped.
2022-10-28 17:31:12.213 +01:00 [DBG] Connection id "0HMLP079NTGFM" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:31:12.213 +01:00 [DBG] Connection id "0HMLP079NTGFO" stopped.
2022-10-28 17:31:12.214 +01:00 [DBG] Connection id "0HMLP079NTGFN" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:31:12.220 +01:00 [DBG] Connection id "0HMLP079NTGFO" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:32:06.332 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 17:32:06.403 +01:00 [DBG] Hosting starting
2022-10-28 17:32:06.443 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 17:32:06.448 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 17:32:06.453 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 17:32:06.455 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 17:32:06.464 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 17:32:06.473 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 17:32:06.474 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 17:32:06.482 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 17:32:06.485 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:32:06.490 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 17:32:06.492 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:32:06.497 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 17:32:06.500 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 17:32:06.503 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 17:32:06.504 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 17:32:06.699 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 17:32:06.760 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 17:32:06.766 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 17:32:06.767 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 17:32:06.768 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 17:32:06.770 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 17:32:06.771 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 17:32:06.772 +01:00 [INF] Hosting environment: Development
2022-10-28 17:32:06.773 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 17:32:06.775 +01:00 [DBG] Hosting started
2022-10-28 17:32:07.222 +01:00 [DBG] Connection id "0HMLP07Q5QECO" accepted.
2022-10-28 17:32:07.225 +01:00 [DBG] Connection id "0HMLP07Q5QECO" started.
2022-10-28 17:32:07.227 +01:00 [DBG] Connection id "0HMLP07Q5QECP" accepted.
2022-10-28 17:32:07.229 +01:00 [DBG] Connection id "0HMLP07Q5QECP" started.
2022-10-28 17:32:07.263 +01:00 [DBG] Connection id "0HMLP07Q5QECP" received FIN.
2022-10-28 17:32:07.263 +01:00 [DBG] Connection id "0HMLP07Q5QECO" received FIN.
2022-10-28 17:32:07.273 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:32:07.273 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:32:07.355 +01:00 [DBG] Connection id "0HMLP07Q5QECO" stopped.
2022-10-28 17:32:07.355 +01:00 [DBG] Connection id "0HMLP07Q5QECP" stopped.
2022-10-28 17:32:07.364 +01:00 [DBG] Connection id "0HMLP07Q5QECO" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:32:07.366 +01:00 [DBG] Connection id "0HMLP07Q5QECP" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:32:07.522 +01:00 [DBG] Connection id "0HMLP07Q5QECQ" accepted.
2022-10-28 17:32:07.530 +01:00 [DBG] Connection id "0HMLP07Q5QECQ" started.
2022-10-28 17:32:07.574 +01:00 [DBG] Connection id "0HMLP07Q5QECQ" received FIN.
2022-10-28 17:32:07.583 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:32:07.595 +01:00 [DBG] Connection id "0HMLP07Q5QECQ" stopped.
2022-10-28 17:32:07.618 +01:00 [DBG] Connection id "0HMLP07Q5QECQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:32:25.907 +01:00 [DBG] Connection id "0HMLP07Q5QECR" accepted.
2022-10-28 17:32:25.910 +01:00 [DBG] Connection id "0HMLP07Q5QECR" started.
2022-10-28 17:32:25.933 +01:00 [DBG] Connection 0HMLP07Q5QECR established using the following protocol: "Tls13"
2022-10-28 17:32:25.975 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 17:32:25.995 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 17:32:26.044 +01:00 [DBG] POST requests are not supported
2022-10-28 17:32:26.073 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 17:32:26.080 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 17:32:26.087 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:32:26.171 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:32:26.175 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:32:26.177 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:32:26.206 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 17:32:26.209 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 17:32:26.210 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 17:32:26.211 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:32:26.214 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 17:32:26.215 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:32:26.218 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:32:26.423 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 17:32:26.451 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:32:26.465 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:32:26.469 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 17:32:26.471 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 17:32:26.486 +01:00 [DBG] Connection id "0HMLP07Q5QECR", Request id "0HMLP07Q5QECR:00000002": started reading request body.
2022-10-28 17:32:26.493 +01:00 [DBG] Connection id "0HMLP07Q5QECR", Request id "0HMLP07Q5QECR:00000002": done reading request body.
2022-10-28 17:32:26.499 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 17:32:26.501 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:32:26.502 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:32:26.503 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:32:26.512 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:32:27.513 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 17:32:27.568 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 17:32:27.908 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 17:32:27.956 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:32:28.032 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (72ms).
2022-10-28 17:32:28.042 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:32:28.272 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:32:28.288 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:32:28.384 +01:00 [INF] Executed DbCommand (102ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:32:28.432 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:32:28.482 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:32:28.488 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:32:28.497 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:32:28.506 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 17:32:28.514 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 17:32:28.541 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:32:28.543 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 17:32:28.551 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:32:28.555 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:32:28.557 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:32:28.576 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:32:28.587 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:32:28.604 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:32:28.613 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:32:28.615 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:32:28.777 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:32:28.787 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 17:32:28.791 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 17:32:28.815 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 17:32:28.839 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:32:28.841 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:32:28.844 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 17:32:28.854 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 17:32:28.898 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:32:28.900 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 17:32:28.902 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 17:32:28.912 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 17:32:28.919 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:32:28.928 +01:00 [DBG] Committing transaction.
2022-10-28 17:32:28.941 +01:00 [DBG] Committed transaction.
2022-10-28 17:32:28.948 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:32:28.952 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:32:28.957 +01:00 [DBG] Disposing transaction.
2022-10-28 17:32:28.962 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:32:28.968 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 17:32:28.978 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 17:32:28.983 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 17:32:28.984 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 17:32:28.985 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 17:32:28.986 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 17:32:28.988 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 17:32:29.009 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2787.3618ms
2022-10-28 17:32:29.013 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:32:29.019 +01:00 [DBG] Connection id "0HMLP07Q5QECR" completed keep alive response.
2022-10-28 17:32:29.024 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 17:32:29.029 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3058.8685ms
2022-10-28 17:33:36.428 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 17:33:36.494 +01:00 [DBG] Hosting starting
2022-10-28 17:33:36.530 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 17:33:36.534 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 17:33:36.539 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 17:33:36.540 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 17:33:36.547 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 17:33:36.552 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 17:33:36.553 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 17:33:36.561 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 17:33:36.565 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:33:36.568 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 17:33:36.570 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:33:36.575 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 17:33:36.578 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 17:33:36.582 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 17:33:36.584 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 17:33:36.713 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 17:33:36.764 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 17:33:36.766 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 17:33:36.767 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 17:33:36.768 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 17:33:36.769 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 17:33:36.770 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 17:33:36.771 +01:00 [INF] Hosting environment: Development
2022-10-28 17:33:36.771 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 17:33:36.772 +01:00 [DBG] Hosting started
2022-10-28 17:33:36.933 +01:00 [DBG] Connection id "0HMLP08KTCLMB" received FIN.
2022-10-28 17:33:36.946 +01:00 [DBG] Connection id "0HMLP08KTCLMB" accepted.
2022-10-28 17:33:36.951 +01:00 [DBG] Connection id "0HMLP08KTCLMB" started.
2022-10-28 17:33:36.974 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:33:37.040 +01:00 [DBG] Connection id "0HMLP08KTCLMB" stopped.
2022-10-28 17:33:37.047 +01:00 [DBG] Connection id "0HMLP08KTCLMB" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:33:37.318 +01:00 [DBG] Connection id "0HMLP08KTCLMC" accepted.
2022-10-28 17:33:37.320 +01:00 [DBG] Connection id "0HMLP08KTCLMC" started.
2022-10-28 17:33:37.356 +01:00 [DBG] Connection id "0HMLP08KTCLMC" received FIN.
2022-10-28 17:33:37.366 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:33:37.376 +01:00 [DBG] Connection id "0HMLP08KTCLMC" stopped.
2022-10-28 17:33:37.381 +01:00 [DBG] Connection id "0HMLP08KTCLMC" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:33:50.830 +01:00 [DBG] Connection id "0HMLP08KTCLMD" accepted.
2022-10-28 17:33:50.831 +01:00 [DBG] Connection id "0HMLP08KTCLMD" started.
2022-10-28 17:33:50.872 +01:00 [DBG] Connection 0HMLP08KTCLMD established using the following protocol: "Tls13"
2022-10-28 17:33:50.906 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 17:33:50.925 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 17:33:50.969 +01:00 [DBG] POST requests are not supported
2022-10-28 17:33:50.998 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 17:33:51.005 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 17:33:51.013 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:33:51.088 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:33:51.093 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:33:51.095 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:33:51.120 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 17:33:51.124 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 17:33:51.125 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 17:33:51.126 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:33:51.129 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 17:33:51.130 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:33:51.133 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:33:51.300 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 17:33:51.327 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:33:51.340 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:33:51.344 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 17:33:51.346 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 17:33:51.360 +01:00 [DBG] Connection id "0HMLP08KTCLMD", Request id "0HMLP08KTCLMD:00000002": started reading request body.
2022-10-28 17:33:51.366 +01:00 [DBG] Connection id "0HMLP08KTCLMD", Request id "0HMLP08KTCLMD:00000002": done reading request body.
2022-10-28 17:33:51.372 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 17:33:51.373 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:33:51.375 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:33:51.377 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:33:51.386 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:33:52.351 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 17:33:52.404 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 17:33:52.734 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 17:33:52.784 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:33:52.865 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (79ms).
2022-10-28 17:33:52.875 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:33:53.067 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:33:53.085 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:33:53.192 +01:00 [INF] Executed DbCommand (114ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:33:53.242 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:33:53.299 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:33:53.305 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:33:53.314 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:33:53.323 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 17:33:53.331 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 17:33:53.358 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:33:53.361 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 17:33:53.370 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:33:53.374 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:33:53.377 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:33:53.397 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:33:53.407 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:33:53.424 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:33:53.432 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:33:53.435 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:33:53.444 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 17:33:53.449 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 17:33:53.449 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 17:33:53.450 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 17:33:53.452 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 17:33:53.453 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 17:33:53.467 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2330.9671ms
2022-10-28 17:33:53.471 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:33:53.478 +01:00 [DBG] Connection id "0HMLP08KTCLMD" completed keep alive response.
2022-10-28 17:33:53.483 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 17:33:53.488 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 2584.1901ms
2022-10-28 17:36:56.028 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 17:36:56.098 +01:00 [DBG] Hosting starting
2022-10-28 17:36:56.134 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 17:36:56.138 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 17:36:56.143 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 17:36:56.144 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 17:36:56.150 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 17:36:56.155 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 17:36:56.156 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 17:36:56.166 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 17:36:56.169 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:36:56.173 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 17:36:56.175 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:36:56.180 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 17:36:56.182 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 17:36:56.186 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 17:36:56.188 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 17:36:56.381 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 17:36:56.432 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 17:36:56.433 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 17:36:56.434 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 17:36:56.435 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 17:36:56.436 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 17:36:56.437 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 17:36:56.438 +01:00 [INF] Hosting environment: Development
2022-10-28 17:36:56.439 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 17:36:56.440 +01:00 [DBG] Hosting started
2022-10-28 17:36:56.529 +01:00 [DBG] Connection id "0HMLP0AGCRO9F" accepted.
2022-10-28 17:36:56.532 +01:00 [DBG] Connection id "0HMLP0AGCRO9G" accepted.
2022-10-28 17:36:56.532 +01:00 [DBG] Connection id "0HMLP0AGCRO9F" started.
2022-10-28 17:36:56.533 +01:00 [DBG] Connection id "0HMLP0AGCRO9G" started.
2022-10-28 17:36:56.564 +01:00 [DBG] Connection id "0HMLP0AGCRO9G" received FIN.
2022-10-28 17:36:56.564 +01:00 [DBG] Connection id "0HMLP0AGCRO9F" received FIN.
2022-10-28 17:36:56.574 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:36:56.574 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:36:56.639 +01:00 [DBG] Connection id "0HMLP0AGCRO9F" stopped.
2022-10-28 17:36:56.639 +01:00 [DBG] Connection id "0HMLP0AGCRO9G" stopped.
2022-10-28 17:36:56.643 +01:00 [DBG] Connection id "0HMLP0AGCRO9G" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:36:56.643 +01:00 [DBG] Connection id "0HMLP0AGCRO9F" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:36:56.849 +01:00 [DBG] Connection id "0HMLP0AGCRO9H" accepted.
2022-10-28 17:36:56.851 +01:00 [DBG] Connection id "0HMLP0AGCRO9H" started.
2022-10-28 17:36:56.881 +01:00 [DBG] Connection id "0HMLP0AGCRO9H" received FIN.
2022-10-28 17:36:56.884 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:36:56.891 +01:00 [DBG] Connection id "0HMLP0AGCRO9H" stopped.
2022-10-28 17:36:56.892 +01:00 [DBG] Connection id "0HMLP0AGCRO9H" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:40:28.536 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 17:40:28.611 +01:00 [DBG] Hosting starting
2022-10-28 17:40:28.665 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 17:40:28.672 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 17:40:28.679 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 17:40:28.680 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 17:40:28.686 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 17:40:28.692 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 17:40:28.693 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 17:40:28.704 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 17:40:28.707 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:40:28.711 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 17:40:28.713 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:40:28.718 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 17:40:28.722 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 17:40:28.726 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 17:40:28.727 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 17:40:28.875 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 17:40:28.920 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 17:40:28.922 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 17:40:28.923 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 17:40:28.925 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 17:40:28.926 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 17:40:28.927 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 17:40:28.928 +01:00 [INF] Hosting environment: Development
2022-10-28 17:40:28.929 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 17:40:28.930 +01:00 [DBG] Hosting started
2022-10-28 17:40:29.054 +01:00 [DBG] Connection id "0HMLP0CFNLUM0" received FIN.
2022-10-28 17:40:29.057 +01:00 [DBG] Connection id "0HMLP0CFNLUM1" received FIN.
2022-10-28 17:40:29.081 +01:00 [DBG] Connection id "0HMLP0CFNLUM0" accepted.
2022-10-28 17:40:29.093 +01:00 [DBG] Connection id "0HMLP0CFNLUM1" accepted.
2022-10-28 17:40:29.097 +01:00 [DBG] Connection id "0HMLP0CFNLUM0" started.
2022-10-28 17:40:29.097 +01:00 [DBG] Connection id "0HMLP0CFNLUM1" started.
2022-10-28 17:40:29.127 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:40:29.126 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:40:29.438 +01:00 [DBG] Connection id "0HMLP0CFNLUM0" stopped.
2022-10-28 17:40:29.438 +01:00 [DBG] Connection id "0HMLP0CFNLUM1" stopped.
2022-10-28 17:40:29.447 +01:00 [DBG] Connection id "0HMLP0CFNLUM1" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:40:29.447 +01:00 [DBG] Connection id "0HMLP0CFNLUM0" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:40:29.653 +01:00 [DBG] Connection id "0HMLP0CFNLUM2" accepted.
2022-10-28 17:40:29.664 +01:00 [DBG] Connection id "0HMLP0CFNLUM2" started.
2022-10-28 17:40:29.716 +01:00 [DBG] Connection id "0HMLP0CFNLUM2" received FIN.
2022-10-28 17:40:29.731 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:40:29.741 +01:00 [DBG] Connection id "0HMLP0CFNLUM2" stopped.
2022-10-28 17:40:29.753 +01:00 [DBG] Connection id "0HMLP0CFNLUM2" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:40:39.683 +01:00 [DBG] Connection id "0HMLP0CFNLUM3" accepted.
2022-10-28 17:40:39.685 +01:00 [DBG] Connection id "0HMLP0CFNLUM3" started.
2022-10-28 17:40:39.706 +01:00 [DBG] Connection 0HMLP0CFNLUM3 established using the following protocol: "Tls13"
2022-10-28 17:40:39.743 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 17:40:39.762 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 17:40:39.807 +01:00 [DBG] POST requests are not supported
2022-10-28 17:40:39.836 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 17:40:39.842 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 17:40:39.849 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:40:39.933 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:40:39.938 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:40:39.940 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:40:39.967 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 17:40:39.970 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 17:40:39.972 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 17:40:39.973 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:40:39.975 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 17:40:39.977 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:40:39.979 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:40:40.183 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 17:40:40.212 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:40:40.225 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:40:40.228 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 17:40:40.231 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 17:40:40.245 +01:00 [DBG] Connection id "0HMLP0CFNLUM3", Request id "0HMLP0CFNLUM3:00000002": started reading request body.
2022-10-28 17:40:40.251 +01:00 [DBG] Connection id "0HMLP0CFNLUM3", Request id "0HMLP0CFNLUM3:00000002": done reading request body.
2022-10-28 17:40:40.256 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 17:40:40.258 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:40:40.259 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:40:40.261 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:40:40.269 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:40:41.276 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 17:40:41.330 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 17:40:41.683 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 17:40:41.730 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:40:41.812 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (78ms).
2022-10-28 17:40:41.821 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:40:42.011 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:40:42.029 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:40:42.122 +01:00 [INF] Executed DbCommand (97ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:40:42.172 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:40:42.226 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:40:42.232 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:40:42.241 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:40:42.251 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 17:40:42.260 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 17:40:42.283 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:40:42.285 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 17:40:42.294 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:40:42.297 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:40:42.300 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:40:42.320 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:40:42.331 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:40:42.350 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:40:42.359 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:40:42.363 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:40:42.373 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 17:40:42.380 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 17:40:42.381 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 17:40:42.383 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 17:40:42.384 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 17:40:42.386 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 17:40:42.403 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2420.7662ms
2022-10-28 17:40:42.408 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:40:42.416 +01:00 [DBG] Connection id "0HMLP0CFNLUM3" completed keep alive response.
2022-10-28 17:40:42.421 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 17:40:42.426 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 2687.0965ms
2022-10-28 17:40:58.660 +01:00 [DBG] Connection id "0HMLP0CFNLUM3" received FIN.
2022-10-28 17:40:58.665 +01:00 [DBG] Connection id "0HMLP0CFNLUM3" sending FIN because: "The client closed the connection."
2022-10-28 17:40:58.667 +01:00 [DBG] Connection id "0HMLP0CFNLUM3" disconnecting.
2022-10-28 17:40:58.670 +01:00 [DBG] Connection id "0HMLP0CFNLUM3" stopped.
2022-10-28 17:42:31.193 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 17:42:31.258 +01:00 [DBG] Hosting starting
2022-10-28 17:42:31.300 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 17:42:31.304 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 17:42:31.310 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 17:42:31.311 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 17:42:31.316 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 17:42:31.322 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 17:42:31.324 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 17:42:31.333 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 17:42:31.337 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:42:31.343 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 17:42:31.346 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:42:31.353 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 17:42:31.358 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 17:42:31.362 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 17:42:31.364 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 17:42:31.494 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 17:42:31.552 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 17:42:31.554 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 17:42:31.555 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 17:42:31.558 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 17:42:31.560 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 17:42:31.563 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 17:42:31.565 +01:00 [INF] Hosting environment: Development
2022-10-28 17:42:31.568 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 17:42:31.569 +01:00 [DBG] Hosting started
2022-10-28 17:42:31.683 +01:00 [DBG] Connection id "0HMLP0DK94IJR" accepted.
2022-10-28 17:42:31.686 +01:00 [DBG] Connection id "0HMLP0DK94IJR" started.
2022-10-28 17:42:31.688 +01:00 [DBG] Connection id "0HMLP0DK94IJS" accepted.
2022-10-28 17:42:31.690 +01:00 [DBG] Connection id "0HMLP0DK94IJS" started.
2022-10-28 17:42:31.723 +01:00 [DBG] Connection id "0HMLP0DK94IJR" received FIN.
2022-10-28 17:42:31.723 +01:00 [DBG] Connection id "0HMLP0DK94IJS" received FIN.
2022-10-28 17:42:31.738 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:42:31.738 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:42:31.841 +01:00 [DBG] Connection id "0HMLP0DK94IJS" stopped.
2022-10-28 17:42:31.841 +01:00 [DBG] Connection id "0HMLP0DK94IJR" stopped.
2022-10-28 17:42:31.845 +01:00 [DBG] Connection id "0HMLP0DK94IJS" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:42:31.845 +01:00 [DBG] Connection id "0HMLP0DK94IJR" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:42:32.161 +01:00 [DBG] Connection id "0HMLP0DK94IJT" accepted.
2022-10-28 17:42:32.173 +01:00 [DBG] Connection id "0HMLP0DK94IJT" started.
2022-10-28 17:42:32.208 +01:00 [DBG] Connection id "0HMLP0DK94IJT" received FIN.
2022-10-28 17:42:32.212 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:42:32.221 +01:00 [DBG] Connection id "0HMLP0DK94IJT" stopped.
2022-10-28 17:42:32.222 +01:00 [DBG] Connection id "0HMLP0DK94IJT" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:42:41.671 +01:00 [DBG] Connection id "0HMLP0DK94IJU" accepted.
2022-10-28 17:42:41.672 +01:00 [DBG] Connection id "0HMLP0DK94IJU" started.
2022-10-28 17:42:41.692 +01:00 [DBG] Connection 0HMLP0DK94IJU established using the following protocol: "Tls13"
2022-10-28 17:42:41.733 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 17:42:41.753 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 17:42:41.801 +01:00 [DBG] POST requests are not supported
2022-10-28 17:42:41.839 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 17:42:41.849 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 17:42:41.858 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:42:41.928 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:42:41.932 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:42:41.935 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:42:41.961 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 17:42:41.964 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 17:42:41.965 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 17:42:41.967 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:42:41.969 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 17:42:41.971 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:42:41.973 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:42:42.139 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 17:42:42.167 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:42:42.180 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:42:42.184 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 17:42:42.186 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 17:42:42.202 +01:00 [DBG] Connection id "0HMLP0DK94IJU", Request id "0HMLP0DK94IJU:00000002": started reading request body.
2022-10-28 17:42:42.208 +01:00 [DBG] Connection id "0HMLP0DK94IJU", Request id "0HMLP0DK94IJU:00000002": done reading request body.
2022-10-28 17:42:42.214 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 17:42:42.217 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:42:42.218 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:42:42.220 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:42:42.228 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:43:03.140 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 17:43:03.211 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 17:43:03.553 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 17:43:03.598 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:43:03.666 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (64ms).
2022-10-28 17:43:03.675 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:43:03.851 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:43:03.866 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:43:03.958 +01:00 [INF] Executed DbCommand (97ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:43:04.005 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:43:04.068 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:43:04.074 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:43:04.082 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:43:10.489 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 17:43:10.496 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 17:43:10.519 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:43:10.521 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 17:43:10.529 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:43:10.532 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:43:10.534 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:43:10.555 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:43:10.589 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:43:10.606 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:43:10.615 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:43:10.618 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:43:10.786 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:43:10.795 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 17:43:10.799 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 17:43:10.823 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 17:43:10.845 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:43:10.847 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:43:10.851 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 17:43:10.861 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 17:43:10.908 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:43:10.910 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 17:43:10.913 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 17:43:10.926 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 17:43:10.935 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:43:10.943 +01:00 [DBG] Committing transaction.
2022-10-28 17:43:10.956 +01:00 [DBG] Committed transaction.
2022-10-28 17:43:10.962 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:43:10.964 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:43:10.969 +01:00 [DBG] Disposing transaction.
2022-10-28 17:43:10.974 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:43:10.980 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 17:43:55.048 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 17:43:55.053 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 17:43:55.054 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 17:43:55.055 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 17:43:55.057 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 17:43:55.059 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 17:44:00.227 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 78250.3951ms
2022-10-28 17:44:00.231 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:44:00.237 +01:00 [DBG] Connection id "0HMLP0DK94IJU" completed keep alive response.
2022-10-28 17:46:55.725 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 17:46:55.793 +01:00 [DBG] Hosting starting
2022-10-28 17:46:55.835 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 17:46:55.841 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 17:46:55.847 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 17:46:55.849 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 17:46:55.855 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 17:46:55.860 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 17:46:55.861 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 17:46:55.870 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 17:46:55.872 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:46:55.876 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 17:46:55.877 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:46:55.882 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 17:46:55.885 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 17:46:55.888 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 17:46:55.890 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 17:46:56.021 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 17:46:56.074 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 17:46:56.076 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 17:46:56.078 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 17:46:56.080 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 17:46:56.081 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 17:46:56.082 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 17:46:56.083 +01:00 [INF] Hosting environment: Development
2022-10-28 17:46:56.084 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 17:46:56.085 +01:00 [DBG] Hosting started
2022-10-28 17:46:56.090 +01:00 [DBG] Connection id "0HMLP0G32N23B" accepted.
2022-10-28 17:46:56.090 +01:00 [DBG] Connection id "0HMLP0G32N23C" accepted.
2022-10-28 17:46:56.092 +01:00 [DBG] Connection id "0HMLP0G32N23B" started.
2022-10-28 17:46:56.092 +01:00 [DBG] Connection id "0HMLP0G32N23C" started.
2022-10-28 17:46:56.107 +01:00 [DBG] Connection id "0HMLP0G32N23C" received FIN.
2022-10-28 17:46:56.107 +01:00 [DBG] Connection id "0HMLP0G32N23B" received FIN.
2022-10-28 17:46:56.121 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:46:56.121 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:46:56.183 +01:00 [DBG] Connection id "0HMLP0G32N23C" stopped.
2022-10-28 17:46:56.183 +01:00 [DBG] Connection id "0HMLP0G32N23B" stopped.
2022-10-28 17:46:56.201 +01:00 [DBG] Connection id "0HMLP0G32N23C" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:46:56.213 +01:00 [DBG] Connection id "0HMLP0G32N23B" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:46:56.548 +01:00 [DBG] Connection id "0HMLP0G32N23D" accepted.
2022-10-28 17:46:56.550 +01:00 [DBG] Connection id "0HMLP0G32N23D" started.
2022-10-28 17:46:56.600 +01:00 [DBG] Connection id "0HMLP0G32N23D" received FIN.
2022-10-28 17:46:56.604 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:46:56.615 +01:00 [DBG] Connection id "0HMLP0G32N23D" stopped.
2022-10-28 17:46:56.617 +01:00 [DBG] Connection id "0HMLP0G32N23D" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:47:03.393 +01:00 [DBG] Connection id "0HMLP0G32N23E" accepted.
2022-10-28 17:47:03.395 +01:00 [DBG] Connection id "0HMLP0G32N23E" started.
2022-10-28 17:47:03.431 +01:00 [DBG] Connection 0HMLP0G32N23E established using the following protocol: "Tls13"
2022-10-28 17:47:03.467 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 17:47:03.485 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 17:47:03.526 +01:00 [DBG] POST requests are not supported
2022-10-28 17:47:03.561 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 17:47:03.570 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 17:47:03.577 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:47:03.648 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:47:03.653 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:47:03.655 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:47:03.681 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 17:47:03.685 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 17:47:03.686 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 17:47:03.688 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:47:03.690 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 17:47:03.692 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:47:03.694 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:47:03.860 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 17:47:03.886 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:47:03.900 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:47:03.904 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 17:47:03.907 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 17:47:03.922 +01:00 [DBG] Connection id "0HMLP0G32N23E", Request id "0HMLP0G32N23E:00000002": started reading request body.
2022-10-28 17:47:03.929 +01:00 [DBG] Connection id "0HMLP0G32N23E", Request id "0HMLP0G32N23E:00000002": done reading request body.
2022-10-28 17:47:03.935 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 17:47:03.937 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:47:03.939 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:47:03.940 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:47:03.948 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:47:09.449 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 17:47:09.519 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 17:47:09.862 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 17:47:09.908 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:47:09.983 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (72ms).
2022-10-28 17:47:09.993 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:47:10.171 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:47:10.187 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:47:10.277 +01:00 [INF] Executed DbCommand (95ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:47:10.324 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:47:10.381 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:47:10.387 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:47:10.396 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:47:10.405 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 17:47:10.412 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 17:47:10.434 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:47:10.436 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 17:47:10.444 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:47:10.447 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:47:10.449 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:47:10.468 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:47:10.478 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:47:10.496 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:47:10.505 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:47:10.509 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:47:10.520 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 17:47:10.525 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 17:47:10.526 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 17:47:10.527 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 17:47:10.528 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 17:47:10.531 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 17:47:10.546 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 6847.7776ms
2022-10-28 17:47:10.551 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:47:10.559 +01:00 [DBG] Connection id "0HMLP0G32N23E" completed keep alive response.
2022-10-28 17:47:10.566 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 17:47:10.571 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 7106.9260ms
2022-10-28 17:48:18.377 +01:00 [DBG] Connection id "0HMLP0G32N23E" received FIN.
2022-10-28 17:48:18.393 +01:00 [DBG] Connection id "0HMLP0G32N23E" sending FIN because: "The client closed the connection."
2022-10-28 17:48:18.395 +01:00 [DBG] Connection id "0HMLP0G32N23E" disconnecting.
2022-10-28 17:48:18.398 +01:00 [DBG] Connection id "0HMLP0G32N23E" stopped.
2022-10-28 17:49:08.326 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 17:49:08.397 +01:00 [DBG] Hosting starting
2022-10-28 17:49:08.444 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 17:49:08.448 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 17:49:08.455 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 17:49:08.457 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 17:49:08.463 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 17:49:08.470 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 17:49:08.471 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 17:49:08.481 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 17:49:08.485 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:49:08.489 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 17:49:08.493 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:49:08.500 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 17:49:08.503 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 17:49:08.506 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 17:49:08.508 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 17:49:08.653 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 17:49:08.742 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 17:49:08.743 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 17:49:08.744 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 17:49:08.745 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 17:49:08.746 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 17:49:08.747 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 17:49:08.748 +01:00 [INF] Hosting environment: Development
2022-10-28 17:49:08.749 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 17:49:08.750 +01:00 [DBG] Hosting started
2022-10-28 17:49:08.947 +01:00 [DBG] Connection id "0HMLP0HALOKUH" received FIN.
2022-10-28 17:49:08.973 +01:00 [DBG] Connection id "0HMLP0HALOKUH" accepted.
2022-10-28 17:49:08.980 +01:00 [DBG] Connection id "0HMLP0HALOKUH" started.
2022-10-28 17:49:09.000 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:49:09.229 +01:00 [DBG] Connection id "0HMLP0HALOKUH" stopped.
2022-10-28 17:49:09.238 +01:00 [DBG] Connection id "0HMLP0HALOKUH" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:49:09.319 +01:00 [DBG] Connection id "0HMLP0HALOKUI" accepted.
2022-10-28 17:49:09.321 +01:00 [DBG] Connection id "0HMLP0HALOKUI" started.
2022-10-28 17:49:09.377 +01:00 [DBG] Connection id "0HMLP0HALOKUI" received FIN.
2022-10-28 17:49:09.391 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:49:09.407 +01:00 [DBG] Connection id "0HMLP0HALOKUI" stopped.
2022-10-28 17:49:09.413 +01:00 [DBG] Connection id "0HMLP0HALOKUI" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:49:18.625 +01:00 [DBG] Connection id "0HMLP0HALOKUJ" accepted.
2022-10-28 17:49:18.627 +01:00 [DBG] Connection id "0HMLP0HALOKUJ" started.
2022-10-28 17:49:18.644 +01:00 [DBG] Connection 0HMLP0HALOKUJ established using the following protocol: "Tls13"
2022-10-28 17:49:18.681 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 17:49:18.699 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 17:49:18.751 +01:00 [DBG] POST requests are not supported
2022-10-28 17:49:18.780 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 17:49:18.787 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 17:49:18.794 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:49:18.874 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:49:18.879 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:49:18.881 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:49:18.907 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 17:49:18.911 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 17:49:18.912 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 17:49:18.914 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:49:18.916 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 17:49:18.918 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:49:18.921 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:49:19.126 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 17:49:19.154 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:49:19.170 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:49:19.175 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 17:49:19.179 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 17:49:19.197 +01:00 [DBG] Connection id "0HMLP0HALOKUJ", Request id "0HMLP0HALOKUJ:00000002": started reading request body.
2022-10-28 17:49:19.206 +01:00 [DBG] Connection id "0HMLP0HALOKUJ", Request id "0HMLP0HALOKUJ:00000002": done reading request body.
2022-10-28 17:49:19.213 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 17:49:19.215 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:49:19.217 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:49:19.218 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:49:19.231 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:49:20.284 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 17:49:20.342 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 17:49:20.693 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 17:49:20.741 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:49:20.820 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (75ms).
2022-10-28 17:49:20.831 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:49:21.059 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:49:21.075 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:49:21.170 +01:00 [INF] Executed DbCommand (100ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:49:21.220 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:49:21.273 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:49:21.278 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:49:21.287 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:49:21.296 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 17:49:21.306 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 17:49:21.334 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:49:21.335 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 17:49:21.345 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:49:21.349 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:49:21.352 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:49:21.371 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:49:21.382 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:49:21.399 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:49:21.408 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:49:21.411 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:49:21.421 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 17:49:21.426 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 17:49:21.426 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 17:49:21.427 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 17:49:21.429 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 17:49:21.431 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 17:49:21.447 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2522.0379ms
2022-10-28 17:49:21.452 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:49:21.461 +01:00 [DBG] Connection id "0HMLP0HALOKUJ" completed keep alive response.
2022-10-28 17:49:21.465 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 17:49:21.472 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 2795.2010ms
2022-10-28 17:50:26.394 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 17:50:26.560 +01:00 [DBG] Hosting starting
2022-10-28 17:50:26.597 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 17:50:26.600 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 17:50:26.605 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 17:50:26.606 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 17:50:26.612 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 17:50:26.617 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 17:50:26.619 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 17:50:26.627 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 17:50:26.630 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:50:26.634 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 17:50:26.636 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:50:26.641 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 17:50:26.644 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 17:50:26.648 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 17:50:26.650 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 17:50:26.774 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 17:50:26.820 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 17:50:26.821 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 17:50:26.822 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 17:50:26.823 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 17:50:26.825 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 17:50:26.825 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 17:50:26.826 +01:00 [INF] Hosting environment: Development
2022-10-28 17:50:26.827 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 17:50:26.828 +01:00 [DBG] Hosting started
2022-10-28 17:50:27.094 +01:00 [DBG] Connection id "0HMLP0I1V0FBB" accepted.
2022-10-28 17:50:27.096 +01:00 [DBG] Connection id "0HMLP0I1V0FBB" started.
2022-10-28 17:50:27.099 +01:00 [DBG] Connection id "0HMLP0I1V0FBC" received FIN.
2022-10-28 17:50:27.102 +01:00 [DBG] Connection id "0HMLP0I1V0FBC" accepted.
2022-10-28 17:50:27.103 +01:00 [DBG] Connection id "0HMLP0I1V0FBC" started.
2022-10-28 17:50:27.104 +01:00 [DBG] Connection id "0HMLP0I1V0FBB" received FIN.
2022-10-28 17:50:27.117 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:50:27.117 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:50:27.216 +01:00 [DBG] Connection id "0HMLP0I1V0FBC" stopped.
2022-10-28 17:50:27.216 +01:00 [DBG] Connection id "0HMLP0I1V0FBB" stopped.
2022-10-28 17:50:27.220 +01:00 [DBG] Connection id "0HMLP0I1V0FBC" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:50:27.220 +01:00 [DBG] Connection id "0HMLP0I1V0FBB" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:50:27.499 +01:00 [DBG] Connection id "0HMLP0I1V0FBD" accepted.
2022-10-28 17:50:27.507 +01:00 [DBG] Connection id "0HMLP0I1V0FBD" started.
2022-10-28 17:50:27.546 +01:00 [DBG] Connection id "0HMLP0I1V0FBD" received FIN.
2022-10-28 17:50:27.560 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:50:27.569 +01:00 [DBG] Connection id "0HMLP0I1V0FBD" stopped.
2022-10-28 17:50:27.571 +01:00 [DBG] Connection id "0HMLP0I1V0FBD" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:50:38.772 +01:00 [DBG] Connection id "0HMLP0I1V0FBE" accepted.
2022-10-28 17:50:38.773 +01:00 [DBG] Connection id "0HMLP0I1V0FBE" started.
2022-10-28 17:50:38.812 +01:00 [DBG] Connection 0HMLP0I1V0FBE established using the following protocol: "Tls13"
2022-10-28 17:50:38.850 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 17:50:38.870 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 17:50:38.918 +01:00 [DBG] POST requests are not supported
2022-10-28 17:50:38.947 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 17:50:38.955 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 17:50:38.962 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:50:39.044 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:50:39.049 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:50:39.051 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:50:39.078 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 17:50:39.081 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 17:50:39.083 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 17:50:39.085 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:50:39.087 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 17:50:39.089 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:50:39.091 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:50:39.321 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 17:50:39.354 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:50:39.368 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:50:39.371 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 17:50:39.374 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 17:50:39.389 +01:00 [DBG] Connection id "0HMLP0I1V0FBE", Request id "0HMLP0I1V0FBE:00000002": started reading request body.
2022-10-28 17:50:39.394 +01:00 [DBG] Connection id "0HMLP0I1V0FBE", Request id "0HMLP0I1V0FBE:00000002": done reading request body.
2022-10-28 17:50:39.399 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 17:50:39.400 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:50:39.402 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:50:39.403 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:50:39.412 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:50:40.459 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 17:50:40.515 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 17:50:40.884 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 17:50:40.930 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:50:41.008 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (75ms).
2022-10-28 17:50:41.018 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:50:41.201 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:50:41.217 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:50:41.311 +01:00 [INF] Executed DbCommand (98ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:50:41.358 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:50:41.410 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:50:41.415 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:50:41.424 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:50:41.432 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 17:50:41.440 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 17:50:41.462 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:50:41.463 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 17:50:41.471 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:50:41.474 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:50:41.476 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:50:41.495 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:50:41.505 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:50:41.521 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:50:41.530 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:50:41.533 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:50:41.542 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 17:50:41.547 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 17:50:41.547 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 17:50:41.549 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 17:50:41.551 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 17:50:41.552 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 17:50:41.567 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2471.6034ms
2022-10-28 17:50:41.570 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:50:41.578 +01:00 [DBG] Connection id "0HMLP0I1V0FBE" completed keep alive response.
2022-10-28 17:50:41.583 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 17:50:41.587 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 2740.9160ms
2022-10-28 17:52:58.465 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 17:52:58.546 +01:00 [DBG] Hosting starting
2022-10-28 17:52:58.593 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 17:52:58.599 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 17:52:58.607 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 17:52:58.608 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 17:52:58.617 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 17:52:58.623 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 17:52:58.625 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 17:52:58.633 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 17:52:58.637 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:52:58.640 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 17:52:58.642 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:52:58.647 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 17:52:58.650 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 17:52:58.655 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 17:52:58.657 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 17:52:58.848 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 17:52:58.901 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 17:52:58.902 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 17:52:58.903 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 17:52:58.904 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 17:52:58.906 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 17:52:58.907 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 17:52:58.907 +01:00 [INF] Hosting environment: Development
2022-10-28 17:52:58.908 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 17:52:58.909 +01:00 [DBG] Hosting started
2022-10-28 17:52:59.052 +01:00 [DBG] Connection id "0HMLP0JF879HE" received FIN.
2022-10-28 17:52:59.069 +01:00 [DBG] Connection id "0HMLP0JF879HE" accepted.
2022-10-28 17:52:59.075 +01:00 [DBG] Connection id "0HMLP0JF879HE" started.
2022-10-28 17:52:59.102 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:52:59.186 +01:00 [DBG] Connection id "0HMLP0JF879HE" stopped.
2022-10-28 17:52:59.191 +01:00 [DBG] Connection id "0HMLP0JF879HE" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:52:59.358 +01:00 [DBG] Connection id "0HMLP0JF879HF" accepted.
2022-10-28 17:52:59.365 +01:00 [DBG] Connection id "0HMLP0JF879HF" started.
2022-10-28 17:52:59.392 +01:00 [DBG] Connection id "0HMLP0JF879HF" received FIN.
2022-10-28 17:52:59.401 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:52:59.407 +01:00 [DBG] Connection id "0HMLP0JF879HF" stopped.
2022-10-28 17:52:59.409 +01:00 [DBG] Connection id "0HMLP0JF879HF" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:53:14.351 +01:00 [DBG] Connection id "0HMLP0JF879HG" accepted.
2022-10-28 17:53:14.352 +01:00 [DBG] Connection id "0HMLP0JF879HG" started.
2022-10-28 17:53:14.389 +01:00 [DBG] Connection 0HMLP0JF879HG established using the following protocol: "Tls13"
2022-10-28 17:53:14.423 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 17:53:14.440 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 17:53:14.480 +01:00 [DBG] POST requests are not supported
2022-10-28 17:53:14.511 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 17:53:14.519 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 17:53:14.527 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:53:14.595 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:53:14.599 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:53:14.601 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:53:14.626 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 17:53:14.630 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 17:53:14.631 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 17:53:14.633 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:53:14.635 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 17:53:14.636 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:53:14.639 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:53:14.802 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 17:53:14.828 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:53:14.843 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:53:14.847 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 17:53:14.850 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 17:53:14.865 +01:00 [DBG] Connection id "0HMLP0JF879HG", Request id "0HMLP0JF879HG:00000002": started reading request body.
2022-10-28 17:53:14.871 +01:00 [DBG] Connection id "0HMLP0JF879HG", Request id "0HMLP0JF879HG:00000002": done reading request body.
2022-10-28 17:53:14.877 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 17:53:14.880 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:53:14.881 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:53:14.883 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:53:14.891 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:53:22.042 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 17:53:22.113 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 17:53:22.437 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 17:53:22.482 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:53:22.553 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (67ms).
2022-10-28 17:53:22.563 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:53:22.746 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:53:22.761 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:53:22.851 +01:00 [INF] Executed DbCommand (96ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:53:22.897 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:53:22.948 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:53:22.954 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:53:22.963 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:53:23.692 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 17:53:23.699 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 17:53:23.722 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:53:23.724 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 17:53:23.733 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:53:23.736 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:53:23.739 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:53:23.758 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:53:23.792 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:53:23.810 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:53:23.818 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:53:23.821 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:53:23.984 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:53:23.993 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 17:53:23.997 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 17:53:24.021 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 17:53:24.044 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:53:24.046 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:53:24.050 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 17:53:24.060 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 17:53:24.104 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:53:24.106 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 17:53:24.109 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 17:53:24.124 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 17:53:24.132 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:53:24.141 +01:00 [DBG] Committing transaction.
2022-10-28 17:53:24.156 +01:00 [DBG] Committed transaction.
2022-10-28 17:53:24.162 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:53:24.164 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:53:24.170 +01:00 [DBG] Disposing transaction.
2022-10-28 17:53:24.175 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:53:24.180 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 17:53:50.956 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 17:53:50.961 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 17:53:50.962 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 17:53:50.963 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 17:53:50.964 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 17:53:50.965 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 17:54:02.747 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 48103.9695ms
2022-10-28 17:54:02.750 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:54:02.757 +01:00 [DBG] Connection id "0HMLP0JF879HG" completed keep alive response.
2022-10-28 17:54:04.513 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 17:59:38.697 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 17:59:38.808 +01:00 [DBG] Hosting starting
2022-10-28 17:59:38.881 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 17:59:38.889 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 17:59:38.898 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 17:59:38.900 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 17:59:38.908 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 17:59:38.915 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 17:59:38.917 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 17:59:38.927 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 17:59:38.931 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:59:38.935 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 17:59:38.938 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 17:59:38.944 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 17:59:38.947 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 17:59:38.952 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 17:59:38.955 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 17:59:39.172 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 17:59:39.238 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 17:59:39.239 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 17:59:39.241 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 17:59:39.242 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 17:59:39.243 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 17:59:39.244 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 17:59:39.245 +01:00 [INF] Hosting environment: Development
2022-10-28 17:59:39.246 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 17:59:39.247 +01:00 [DBG] Hosting started
2022-10-28 17:59:39.683 +01:00 [DBG] Connection id "0HMLP0N6KT9KJ" accepted.
2022-10-28 17:59:39.685 +01:00 [DBG] Connection id "0HMLP0N6KT9KJ" started.
2022-10-28 17:59:39.702 +01:00 [DBG] Connection id "0HMLP0N6KT9KK" accepted.
2022-10-28 17:59:39.704 +01:00 [DBG] Connection id "0HMLP0N6KT9KK" started.
2022-10-28 17:59:39.721 +01:00 [DBG] Connection id "0HMLP0N6KT9KK" received FIN.
2022-10-28 17:59:39.721 +01:00 [DBG] Connection id "0HMLP0N6KT9KJ" received FIN.
2022-10-28 17:59:39.754 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:59:39.785 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:59:40.471 +01:00 [DBG] Connection id "0HMLP0N6KT9KK" stopped.
2022-10-28 17:59:40.471 +01:00 [DBG] Connection id "0HMLP0N6KT9KJ" stopped.
2022-10-28 17:59:40.485 +01:00 [DBG] Connection id "0HMLP0N6KT9KJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:59:40.485 +01:00 [DBG] Connection id "0HMLP0N6KT9KK" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:59:40.731 +01:00 [DBG] Connection id "0HMLP0N6KT9KL" accepted.
2022-10-28 17:59:40.732 +01:00 [DBG] Connection id "0HMLP0N6KT9KL" started.
2022-10-28 17:59:40.760 +01:00 [DBG] Connection id "0HMLP0N6KT9KL" received FIN.
2022-10-28 17:59:40.763 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 17:59:40.771 +01:00 [DBG] Connection id "0HMLP0N6KT9KL" stopped.
2022-10-28 17:59:40.774 +01:00 [DBG] Connection id "0HMLP0N6KT9KL" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 17:59:44.744 +01:00 [DBG] Connection id "0HMLP0N6KT9KM" accepted.
2022-10-28 17:59:44.746 +01:00 [DBG] Connection id "0HMLP0N6KT9KM" started.
2022-10-28 17:59:44.763 +01:00 [DBG] Connection 0HMLP0N6KT9KM established using the following protocol: "Tls13"
2022-10-28 17:59:44.798 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 17:59:44.817 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 17:59:44.879 +01:00 [DBG] POST requests are not supported
2022-10-28 17:59:44.907 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 17:59:44.915 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 17:59:44.922 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:59:45.004 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:59:45.008 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:59:45.010 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:59:45.036 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 17:59:45.040 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 17:59:45.041 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 17:59:45.043 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:59:45.046 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 17:59:45.048 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:59:45.051 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:59:45.448 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 17:59:45.478 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:59:45.494 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:59:45.498 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 17:59:45.500 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 17:59:45.516 +01:00 [DBG] Connection id "0HMLP0N6KT9KM", Request id "0HMLP0N6KT9KM:00000002": started reading request body.
2022-10-28 17:59:45.524 +01:00 [DBG] Connection id "0HMLP0N6KT9KM", Request id "0HMLP0N6KT9KM:00000002": done reading request body.
2022-10-28 17:59:45.531 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 17:59:45.533 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:59:45.535 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:59:45.536 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:59:45.546 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:59:46.561 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 17:59:46.619 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 17:59:46.963 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 17:59:47.017 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:59:47.096 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (75ms).
2022-10-28 17:59:47.105 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:59:47.286 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:59:47.302 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:59:47.391 +01:00 [INF] Executed DbCommand (94ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:59:47.442 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:59:47.492 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:59:47.497 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:59:47.506 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:59:47.514 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 17:59:47.521 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 17:59:47.542 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:59:47.544 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 17:59:47.552 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:59:47.555 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:59:47.557 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:59:47.576 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:59:47.587 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:59:47.608 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:59:47.616 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:59:47.619 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:59:47.630 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 17:59:47.634 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 17:59:47.635 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 17:59:47.636 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 17:59:47.638 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 17:59:47.639 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 17:59:47.654 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2599.5272ms
2022-10-28 17:59:47.658 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:59:47.664 +01:00 [DBG] Connection id "0HMLP0N6KT9KM" completed keep alive response.
2022-10-28 17:59:47.669 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 17:59:47.674 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 2878.4904ms
2022-10-28 17:59:55.707 +01:00 [DBG] Connection id "0HMLP0N6KT9KM" received FIN.
2022-10-28 17:59:55.711 +01:00 [DBG] Connection id "0HMLP0N6KT9KM" sending FIN because: "The client closed the connection."
2022-10-28 17:59:55.712 +01:00 [DBG] Connection id "0HMLP0N6KT9KM" disconnecting.
2022-10-28 17:59:55.714 +01:00 [DBG] Connection id "0HMLP0N6KT9KM" stopped.
2022-10-28 17:59:59.636 +01:00 [DBG] Connection id "0HMLP0N6KT9KN" accepted.
2022-10-28 17:59:59.637 +01:00 [DBG] Connection id "0HMLP0N6KT9KN" started.
2022-10-28 17:59:59.640 +01:00 [DBG] Connection 0HMLP0N6KT9KN established using the following protocol: "Tls13"
2022-10-28 17:59:59.643 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 17:59:59.644 +01:00 [DBG] POST requests are not supported
2022-10-28 17:59:59.646 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 17:59:59.647 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 17:59:59.649 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:59:59.652 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:59:59.653 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 17:59:59.654 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:59:59.655 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 17:59:59.657 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 17:59:59.659 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 17:59:59.661 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:59:59.663 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 17:59:59.665 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 17:59:59.666 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:59:59.668 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 17:59:59.675 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:59:59.677 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 17:59:59.678 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 17:59:59.680 +01:00 [DBG] Connection id "0HMLP0N6KT9KN", Request id "0HMLP0N6KT9KN:00000002": started reading request body.
2022-10-28 17:59:59.681 +01:00 [DBG] Connection id "0HMLP0N6KT9KN", Request id "0HMLP0N6KT9KN:00000002": done reading request body.
2022-10-28 17:59:59.682 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 17:59:59.683 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:59:59.685 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:59:59.686 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 17:59:59.688 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 17:59:59.724 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 17:59:59.731 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:59:59.732 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 17:59:59.734 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:59:59.735 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:59:59.737 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:59:59.740 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 17:59:59.742 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:59:59.744 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:59:59.745 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:59:59.746 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:59:59.748 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 17:59:59.748 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 17:59:59.750 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 17:59:59.751 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:59:59.752 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:59:59.757 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 17:59:59.760 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 17:59:59.761 +01:00 [DBG] A data reader was disposed.
2022-10-28 17:59:59.762 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 17:59:59.763 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 17:59:59.764 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 17:59:59.767 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 17:59:59.767 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 17:59:59.768 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 17:59:59.769 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 17:59:59.771 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 17:59:59.772 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 105.9235ms
2022-10-28 17:59:59.774 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 17:59:59.775 +01:00 [DBG] Connection id "0HMLP0N6KT9KN" completed keep alive response.
2022-10-28 17:59:59.776 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 17:59:59.778 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 135.0209ms
2022-10-28 18:00:03.539 +01:00 [DBG] Connection id "0HMLP0N6KT9KN" received FIN.
2022-10-28 18:00:03.542 +01:00 [DBG] Connection id "0HMLP0N6KT9KN" sending FIN because: "The client closed the connection."
2022-10-28 18:00:03.543 +01:00 [DBG] Connection id "0HMLP0N6KT9KN" disconnecting.
2022-10-28 18:00:03.545 +01:00 [DBG] Connection id "0HMLP0N6KT9KN" stopped.
2022-10-28 18:01:31.236 +01:00 [DBG] Connection id "0HMLP0N6KT9KO" accepted.
2022-10-28 18:01:31.242 +01:00 [DBG] Connection id "0HMLP0N6KT9KO" started.
2022-10-28 18:01:31.257 +01:00 [DBG] Connection 0HMLP0N6KT9KO established using the following protocol: "Tls13"
2022-10-28 18:01:31.261 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 18:01:31.262 +01:00 [DBG] POST requests are not supported
2022-10-28 18:01:31.263 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 18:01:31.264 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 18:01:31.265 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:01:31.267 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:01:31.269 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:01:31.270 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:01:31.271 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 18:01:31.273 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 18:01:31.274 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 18:01:31.275 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:01:31.278 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 18:01:31.279 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:01:31.281 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:01:31.287 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:01:31.289 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:01:31.290 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 18:01:31.292 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 18:01:31.293 +01:00 [DBG] Connection id "0HMLP0N6KT9KO", Request id "0HMLP0N6KT9KO:00000002": started reading request body.
2022-10-28 18:01:31.294 +01:00 [DBG] Connection id "0HMLP0N6KT9KO", Request id "0HMLP0N6KT9KO:00000002": done reading request body.
2022-10-28 18:01:31.296 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 18:01:31.297 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:01:31.298 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:01:31.300 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:01:31.301 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:01:31.310 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 18:01:31.314 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:01:31.315 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 18:01:31.316 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:01:31.318 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:01:31.319 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:01:31.323 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:01:31.325 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:01:31.326 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:01:31.327 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:01:31.328 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:01:31.330 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:01:31.331 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 18:01:31.332 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:01:31.333 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:01:31.335 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:01:31.342 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:01:31.344 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:01:31.346 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:01:31.346 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:01:31.348 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:01:31.349 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 18:01:31.352 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 18:01:31.353 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 18:01:31.353 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 18:01:31.354 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 18:01:31.356 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 18:01:31.357 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 76.168ms
2022-10-28 18:01:31.358 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:01:31.359 +01:00 [DBG] Connection id "0HMLP0N6KT9KO" completed keep alive response.
2022-10-28 18:01:31.360 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 18:01:31.362 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 101.1528ms
2022-10-28 18:01:42.119 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 18:01:42.190 +01:00 [DBG] Hosting starting
2022-10-28 18:01:42.243 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 18:01:42.248 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 18:01:42.254 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 18:01:42.256 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 18:01:42.262 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 18:01:42.270 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 18:01:42.272 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 18:01:42.283 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 18:01:42.285 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:01:42.289 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 18:01:42.291 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:01:42.296 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 18:01:42.299 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 18:01:42.304 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 18:01:42.313 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 18:01:42.453 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 18:01:42.497 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 18:01:42.498 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 18:01:42.499 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 18:01:42.501 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 18:01:42.502 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 18:01:42.503 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 18:01:42.504 +01:00 [INF] Hosting environment: Development
2022-10-28 18:01:42.504 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 18:01:42.505 +01:00 [DBG] Hosting started
2022-10-28 18:01:42.671 +01:00 [DBG] Connection id "0HMLP0OB9R4AI" received FIN.
2022-10-28 18:01:42.682 +01:00 [DBG] Connection id "0HMLP0OB9R4AI" accepted.
2022-10-28 18:01:42.696 +01:00 [DBG] Connection id "0HMLP0OB9R4AI" started.
2022-10-28 18:01:42.714 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:01:42.804 +01:00 [DBG] Connection id "0HMLP0OB9R4AI" stopped.
2022-10-28 18:01:42.814 +01:00 [DBG] Connection id "0HMLP0OB9R4AI" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:01:43.166 +01:00 [DBG] Connection id "0HMLP0OB9R4AJ" accepted.
2022-10-28 18:01:43.174 +01:00 [DBG] Connection id "0HMLP0OB9R4AJ" started.
2022-10-28 18:01:43.216 +01:00 [DBG] Connection id "0HMLP0OB9R4AJ" received FIN.
2022-10-28 18:01:43.225 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:01:43.233 +01:00 [DBG] Connection id "0HMLP0OB9R4AJ" stopped.
2022-10-28 18:01:43.235 +01:00 [DBG] Connection id "0HMLP0OB9R4AJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:01:46.548 +01:00 [DBG] Connection id "0HMLP0OB9R4AK" accepted.
2022-10-28 18:01:46.550 +01:00 [DBG] Connection id "0HMLP0OB9R4AK" started.
2022-10-28 18:01:46.564 +01:00 [DBG] Connection 0HMLP0OB9R4AK established using the following protocol: "Tls13"
2022-10-28 18:01:46.599 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 18:01:46.617 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 18:01:46.664 +01:00 [DBG] POST requests are not supported
2022-10-28 18:01:46.695 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 18:01:46.702 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 18:01:46.709 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:01:46.781 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:01:46.786 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:01:46.788 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:01:46.814 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 18:01:46.817 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 18:01:46.819 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 18:01:46.820 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:01:46.822 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 18:01:46.824 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:01:46.826 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:01:46.988 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 18:01:47.015 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:01:47.028 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:01:47.032 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 18:01:47.034 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 18:01:47.048 +01:00 [DBG] Connection id "0HMLP0OB9R4AK", Request id "0HMLP0OB9R4AK:00000002": started reading request body.
2022-10-28 18:01:47.054 +01:00 [DBG] Connection id "0HMLP0OB9R4AK", Request id "0HMLP0OB9R4AK:00000002": done reading request body.
2022-10-28 18:01:47.060 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 18:01:47.062 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:01:47.063 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:01:47.064 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:01:47.072 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:01:48.034 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 18:01:48.094 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 18:01:48.448 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 18:01:48.494 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:01:48.563 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (66ms).
2022-10-28 18:01:48.573 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:01:48.755 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:01:48.771 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:01:48.865 +01:00 [INF] Executed DbCommand (100ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:01:48.913 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:01:48.965 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:01:48.971 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:01:48.979 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:01:48.987 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 18:01:48.994 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 18:01:49.019 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:01:49.020 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 18:01:49.029 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:01:49.033 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:01:49.035 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:01:49.053 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:01:49.064 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:01:49.081 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:01:49.090 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:01:49.093 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:01:49.102 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 18:01:49.106 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 18:01:49.106 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 18:01:49.107 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 18:01:49.109 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 18:01:49.110 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 18:01:49.124 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2294.6166ms
2022-10-28 18:01:49.128 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:01:49.134 +01:00 [DBG] Connection id "0HMLP0OB9R4AK" completed keep alive response.
2022-10-28 18:01:49.141 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 18:01:49.149 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 2552.0764ms
2022-10-28 18:01:53.674 +01:00 [DBG] Connection id "0HMLP0OB9R4AK" received FIN.
2022-10-28 18:01:53.677 +01:00 [DBG] Connection id "0HMLP0OB9R4AK" sending FIN because: "The client closed the connection."
2022-10-28 18:01:53.679 +01:00 [DBG] Connection id "0HMLP0OB9R4AK" disconnecting.
2022-10-28 18:01:53.682 +01:00 [DBG] Connection id "0HMLP0OB9R4AK" stopped.
2022-10-28 18:02:00.806 +01:00 [DBG] Connection id "0HMLP0OB9R4AL" accepted.
2022-10-28 18:02:00.807 +01:00 [DBG] Connection id "0HMLP0OB9R4AL" started.
2022-10-28 18:02:00.815 +01:00 [DBG] Connection 0HMLP0OB9R4AL established using the following protocol: "Tls13"
2022-10-28 18:02:00.816 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 18:02:00.817 +01:00 [DBG] POST requests are not supported
2022-10-28 18:02:00.820 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 18:02:00.822 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 18:02:00.823 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:02:00.825 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:02:00.827 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:02:00.828 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:02:00.829 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 18:02:00.832 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 18:02:00.833 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 18:02:00.835 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:02:00.837 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 18:02:00.839 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:02:00.841 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:02:00.843 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:02:00.849 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:02:00.851 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 18:02:00.852 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 18:02:00.854 +01:00 [DBG] Connection id "0HMLP0OB9R4AL", Request id "0HMLP0OB9R4AL:00000002": started reading request body.
2022-10-28 18:02:00.855 +01:00 [DBG] Connection id "0HMLP0OB9R4AL", Request id "0HMLP0OB9R4AL:00000002": done reading request body.
2022-10-28 18:02:00.857 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 18:02:00.858 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:02:00.859 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:02:00.861 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:02:00.864 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:02:00.866 +01:00 [DBG] The request has model state errors, returning an error response.
2022-10-28 18:02:00.868 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2022-10-28 18:02:00.870 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 18:02:00.872 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 18:02:00.873 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-10-28 18:02:00.875 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-10-28 18:02:00.877 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-10-28 18:02:00.888 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 47.5364ms
2022-10-28 18:02:00.891 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:02:00.892 +01:00 [DBG] Connection id "0HMLP0OB9R4AL" completed keep alive response.
2022-10-28 18:02:00.894 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - application/problem+json;+charset=utf-8 77.3679ms
2022-10-28 18:02:02.083 +01:00 [DBG] Connection id "0HMLP0OB9R4AL" received FIN.
2022-10-28 18:02:02.086 +01:00 [DBG] Connection id "0HMLP0OB9R4AL" sending FIN because: "The client closed the connection."
2022-10-28 18:02:02.087 +01:00 [DBG] Connection id "0HMLP0OB9R4AL" disconnecting.
2022-10-28 18:02:02.098 +01:00 [DBG] Connection id "0HMLP0OB9R4AL" stopped.
2022-10-28 18:02:22.340 +01:00 [DBG] Connection id "0HMLP0OB9R4AM" accepted.
2022-10-28 18:02:22.345 +01:00 [DBG] Connection id "0HMLP0OB9R4AM" started.
2022-10-28 18:02:22.355 +01:00 [DBG] Connection 0HMLP0OB9R4AM established using the following protocol: "Tls13"
2022-10-28 18:02:22.360 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 18:02:22.361 +01:00 [DBG] POST requests are not supported
2022-10-28 18:02:22.363 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 18:02:22.364 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 18:02:22.366 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:02:22.368 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:02:22.369 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:02:22.370 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:02:22.372 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 18:02:22.374 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 18:02:22.375 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 18:02:22.377 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:02:22.379 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 18:02:22.381 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:02:22.383 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:02:22.389 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:02:22.391 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:02:22.393 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 18:02:22.394 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 18:02:22.395 +01:00 [DBG] Connection id "0HMLP0OB9R4AM", Request id "0HMLP0OB9R4AM:00000002": started reading request body.
2022-10-28 18:02:22.397 +01:00 [DBG] Connection id "0HMLP0OB9R4AM", Request id "0HMLP0OB9R4AM:00000002": done reading request body.
2022-10-28 18:02:22.399 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 18:02:22.400 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:02:22.402 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:02:22.403 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:02:22.405 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:02:22.443 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 18:02:22.449 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:02:22.451 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 18:02:22.453 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:02:22.455 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:02:22.456 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:02:22.460 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:02:22.462 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:02:22.463 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:02:22.464 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:02:22.465 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:02:22.467 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:02:22.468 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 18:02:22.470 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:02:22.471 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:02:22.472 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:02:22.476 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:02:22.479 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:02:22.481 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:02:22.481 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:02:22.483 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:02:22.485 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 18:02:22.487 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 18:02:22.488 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 18:02:22.488 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 18:02:22.489 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 18:02:22.491 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 18:02:22.493 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 109.7679ms
2022-10-28 18:02:22.494 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:02:22.495 +01:00 [DBG] Connection id "0HMLP0OB9R4AM" completed keep alive response.
2022-10-28 18:02:22.496 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 18:02:22.498 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 137.5944ms
2022-10-28 18:02:47.460 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 18:02:47.568 +01:00 [DBG] Hosting starting
2022-10-28 18:02:47.616 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 18:02:47.623 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 18:02:47.634 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 18:02:47.636 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 18:02:47.646 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 18:02:47.653 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 18:02:47.654 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 18:02:47.663 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 18:02:47.679 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:02:47.683 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 18:02:47.685 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:02:47.689 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 18:02:47.693 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 18:02:47.697 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 18:02:47.699 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 18:02:47.837 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 18:02:47.894 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 18:02:47.895 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 18:02:47.896 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 18:02:47.897 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 18:02:47.898 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 18:02:47.899 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 18:02:47.900 +01:00 [INF] Hosting environment: Development
2022-10-28 18:02:47.901 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 18:02:47.902 +01:00 [DBG] Hosting started
2022-10-28 18:02:48.356 +01:00 [DBG] Connection id "0HMLP0OUS7ME6" accepted.
2022-10-28 18:02:48.357 +01:00 [DBG] Connection id "0HMLP0OUS7ME7" accepted.
2022-10-28 18:02:48.359 +01:00 [DBG] Connection id "0HMLP0OUS7ME6" started.
2022-10-28 18:02:48.359 +01:00 [DBG] Connection id "0HMLP0OUS7ME7" started.
2022-10-28 18:02:48.368 +01:00 [DBG] Connection id "0HMLP0OUS7ME7" received FIN.
2022-10-28 18:02:48.368 +01:00 [DBG] Connection id "0HMLP0OUS7ME6" received FIN.
2022-10-28 18:02:48.379 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:02:48.379 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:02:48.430 +01:00 [DBG] Connection id "0HMLP0OUS7ME6" stopped.
2022-10-28 18:02:48.430 +01:00 [DBG] Connection id "0HMLP0OUS7ME7" stopped.
2022-10-28 18:02:48.434 +01:00 [DBG] Connection id "0HMLP0OUS7ME6" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:02:48.434 +01:00 [DBG] Connection id "0HMLP0OUS7ME7" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:02:48.635 +01:00 [DBG] Connection id "0HMLP0OUS7ME8" accepted.
2022-10-28 18:02:48.637 +01:00 [DBG] Connection id "0HMLP0OUS7ME8" started.
2022-10-28 18:02:48.672 +01:00 [DBG] Connection id "0HMLP0OUS7ME8" received FIN.
2022-10-28 18:02:48.685 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:02:48.692 +01:00 [DBG] Connection id "0HMLP0OUS7ME8" stopped.
2022-10-28 18:02:48.701 +01:00 [DBG] Connection id "0HMLP0OUS7ME8" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:03:02.671 +01:00 [DBG] Connection id "0HMLP0OUS7ME9" accepted.
2022-10-28 18:03:02.673 +01:00 [DBG] Connection id "0HMLP0OUS7ME9" started.
2022-10-28 18:03:02.715 +01:00 [DBG] Connection 0HMLP0OUS7ME9 established using the following protocol: "Tls13"
2022-10-28 18:03:02.752 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 18:03:02.770 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 18:03:02.815 +01:00 [DBG] POST requests are not supported
2022-10-28 18:03:02.843 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 18:03:02.850 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 18:03:02.857 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:03:02.929 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:03:02.933 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:03:02.936 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:03:02.961 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 18:03:02.964 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 18:03:02.965 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 18:03:02.967 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:03:02.970 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 18:03:02.971 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:03:02.974 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:03:03.153 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 18:03:03.180 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:03:03.195 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:03:03.199 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 18:03:03.202 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 18:03:03.218 +01:00 [DBG] Connection id "0HMLP0OUS7ME9", Request id "0HMLP0OUS7ME9:00000002": started reading request body.
2022-10-28 18:03:03.224 +01:00 [DBG] Connection id "0HMLP0OUS7ME9", Request id "0HMLP0OUS7ME9:00000002": done reading request body.
2022-10-28 18:03:03.230 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 18:03:03.232 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:03:03.233 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:03:03.234 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:03:03.242 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:03:04.215 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 18:03:04.279 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 18:03:04.609 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 18:03:04.655 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:03:04.728 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (70ms).
2022-10-28 18:03:04.737 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:03:04.916 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:03:04.932 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:03:05.021 +01:00 [INF] Executed DbCommand (95ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:03:05.067 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:03:05.124 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:03:05.128 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:03:05.137 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:03:05.145 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 18:03:05.151 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 18:03:05.173 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:03:05.175 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 18:03:05.182 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:03:05.185 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:03:05.187 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:03:05.206 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:03:05.216 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:03:05.233 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:03:05.241 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:03:05.244 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:03:05.254 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 18:03:05.258 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 18:03:05.258 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 18:03:05.260 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 18:03:05.262 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 18:03:05.263 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 18:03:05.277 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2299.7882ms
2022-10-28 18:03:05.281 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:03:05.289 +01:00 [DBG] Connection id "0HMLP0OUS7ME9" completed keep alive response.
2022-10-28 18:03:05.294 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 18:03:05.301 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 2552.0504ms
2022-10-28 18:03:27.773 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 18:03:27.968 +01:00 [DBG] Hosting starting
2022-10-28 18:03:28.014 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 18:03:28.019 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 18:03:28.024 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 18:03:28.025 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 18:03:28.031 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 18:03:28.038 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 18:03:28.039 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 18:03:28.047 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 18:03:28.050 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:03:28.055 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 18:03:28.057 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:03:28.062 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 18:03:28.065 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 18:03:28.069 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 18:03:28.070 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 18:03:28.200 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 18:03:28.255 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 18:03:28.256 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 18:03:28.257 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 18:03:28.258 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 18:03:28.259 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 18:03:28.260 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 18:03:28.261 +01:00 [INF] Hosting environment: Development
2022-10-28 18:03:28.261 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 18:03:28.262 +01:00 [DBG] Hosting started
2022-10-28 18:03:28.410 +01:00 [DBG] Connection id "0HMLP0PAQ6SPG" accepted.
2022-10-28 18:03:28.410 +01:00 [DBG] Connection id "0HMLP0PAQ6SPF" accepted.
2022-10-28 18:03:28.414 +01:00 [DBG] Connection id "0HMLP0PAQ6SPG" started.
2022-10-28 18:03:28.415 +01:00 [DBG] Connection id "0HMLP0PAQ6SPF" started.
2022-10-28 18:03:28.448 +01:00 [DBG] Connection id "0HMLP0PAQ6SPG" received FIN.
2022-10-28 18:03:28.449 +01:00 [DBG] Connection id "0HMLP0PAQ6SPF" received FIN.
2022-10-28 18:03:28.477 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:03:28.477 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:03:28.575 +01:00 [DBG] Connection id "0HMLP0PAQ6SPG" stopped.
2022-10-28 18:03:28.575 +01:00 [DBG] Connection id "0HMLP0PAQ6SPF" stopped.
2022-10-28 18:03:28.578 +01:00 [DBG] Connection id "0HMLP0PAQ6SPF" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:03:28.579 +01:00 [DBG] Connection id "0HMLP0PAQ6SPG" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:03:28.847 +01:00 [DBG] Connection id "0HMLP0PAQ6SPH" accepted.
2022-10-28 18:03:28.855 +01:00 [DBG] Connection id "0HMLP0PAQ6SPH" started.
2022-10-28 18:03:28.892 +01:00 [DBG] Connection id "0HMLP0PAQ6SPH" received FIN.
2022-10-28 18:03:28.894 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:03:28.902 +01:00 [DBG] Connection id "0HMLP0PAQ6SPH" stopped.
2022-10-28 18:03:28.904 +01:00 [DBG] Connection id "0HMLP0PAQ6SPH" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:03:37.223 +01:00 [DBG] Connection id "0HMLP0PAQ6SPI" accepted.
2022-10-28 18:03:37.226 +01:00 [DBG] Connection id "0HMLP0PAQ6SPI" started.
2022-10-28 18:03:37.264 +01:00 [DBG] Connection 0HMLP0PAQ6SPI established using the following protocol: "Tls13"
2022-10-28 18:03:37.300 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 18:03:37.318 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 18:03:37.359 +01:00 [DBG] POST requests are not supported
2022-10-28 18:03:37.387 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 18:03:37.396 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 18:03:37.405 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:03:37.479 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:03:37.483 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:03:37.486 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:03:37.510 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 18:03:37.514 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 18:03:37.515 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 18:03:37.516 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:03:37.518 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 18:03:37.520 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:03:37.522 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:03:37.687 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 18:03:37.714 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:03:37.728 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:03:37.732 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 18:03:37.735 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 18:03:37.749 +01:00 [DBG] Connection id "0HMLP0PAQ6SPI", Request id "0HMLP0PAQ6SPI:00000002": started reading request body.
2022-10-28 18:03:37.755 +01:00 [DBG] Connection id "0HMLP0PAQ6SPI", Request id "0HMLP0PAQ6SPI:00000002": done reading request body.
2022-10-28 18:03:37.760 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 18:03:37.762 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:03:37.763 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:03:37.765 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:03:37.772 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:03:40.807 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 18:03:40.890 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 18:03:41.222 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 18:03:41.267 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:03:41.337 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (67ms).
2022-10-28 18:03:41.346 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:03:41.518 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:03:41.535 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:03:41.623 +01:00 [INF] Executed DbCommand (94ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:03:41.668 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:03:41.720 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:03:41.725 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:03:41.735 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:03:43.306 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 18:03:43.313 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 18:03:43.335 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:03:43.337 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 18:03:43.345 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:03:43.348 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:03:43.351 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:03:43.371 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:03:43.405 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:03:43.424 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:03:43.433 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:03:43.435 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:03:43.603 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:03:43.612 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 18:03:43.616 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 18:03:43.640 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 18:03:43.663 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:03:43.665 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:03:43.669 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 18:03:43.679 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 18:03:43.723 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:03:43.725 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 18:03:43.728 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 18:03:43.741 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 18:03:43.748 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:03:43.756 +01:00 [DBG] Committing transaction.
2022-10-28 18:03:43.770 +01:00 [DBG] Committed transaction.
2022-10-28 18:03:43.776 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:03:43.778 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:03:43.783 +01:00 [DBG] Disposing transaction.
2022-10-28 18:03:43.788 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:03:43.794 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 18:03:48.057 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 18:03:48.062 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 18:03:48.063 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 18:03:48.065 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 18:03:48.066 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 18:03:48.068 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 18:03:50.996 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 13469.993ms
2022-10-28 18:03:50.999 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:03:51.007 +01:00 [DBG] Connection id "0HMLP0PAQ6SPI" completed keep alive response.
2022-10-28 18:03:52.296 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 18:04:19.732 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 18:04:19.854 +01:00 [DBG] Hosting starting
2022-10-28 18:04:19.897 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 18:04:19.902 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 18:04:19.908 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 18:04:19.909 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 18:04:19.915 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 18:04:19.920 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 18:04:19.921 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 18:04:19.933 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 18:04:19.953 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:04:19.962 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 18:04:19.965 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:04:19.971 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 18:04:19.974 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 18:04:19.978 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 18:04:19.980 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 18:04:20.214 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 18:04:20.348 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 18:04:20.349 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 18:04:20.351 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 18:04:20.352 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 18:04:20.353 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 18:04:20.355 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 18:04:20.355 +01:00 [INF] Hosting environment: Development
2022-10-28 18:04:20.356 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 18:04:20.358 +01:00 [DBG] Hosting started
2022-10-28 18:04:20.490 +01:00 [DBG] Connection id "0HMLP0PQATM0O" received FIN.
2022-10-28 18:04:20.513 +01:00 [DBG] Connection id "0HMLP0PQATM0O" accepted.
2022-10-28 18:04:20.524 +01:00 [DBG] Connection id "0HMLP0PQATM0O" started.
2022-10-28 18:04:20.543 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:04:20.597 +01:00 [DBG] Connection id "0HMLP0PQATM0O" stopped.
2022-10-28 18:04:20.603 +01:00 [DBG] Connection id "0HMLP0PQATM0O" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:04:20.800 +01:00 [DBG] Connection id "0HMLP0PQATM0P" accepted.
2022-10-28 18:04:20.801 +01:00 [DBG] Connection id "0HMLP0PQATM0P" started.
2022-10-28 18:04:20.831 +01:00 [DBG] Connection id "0HMLP0PQATM0P" received FIN.
2022-10-28 18:04:20.847 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:04:20.862 +01:00 [DBG] Connection id "0HMLP0PQATM0P" stopped.
2022-10-28 18:04:20.865 +01:00 [DBG] Connection id "0HMLP0PQATM0P" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:04:28.197 +01:00 [DBG] Connection id "0HMLP0PQATM0Q" accepted.
2022-10-28 18:04:28.199 +01:00 [DBG] Connection id "0HMLP0PQATM0Q" started.
2022-10-28 18:04:28.242 +01:00 [DBG] Connection 0HMLP0PQATM0Q established using the following protocol: "Tls13"
2022-10-28 18:04:28.280 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 18:04:28.298 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 18:04:28.338 +01:00 [DBG] POST requests are not supported
2022-10-28 18:04:28.378 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 18:04:28.386 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 18:04:28.395 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:04:28.469 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:04:28.473 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:04:28.475 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:04:28.504 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 18:04:28.506 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 18:04:28.508 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 18:04:28.510 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:04:28.513 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 18:04:28.514 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:04:28.517 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:04:28.688 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 18:04:28.716 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:04:28.731 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:04:28.736 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 18:04:28.738 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 18:04:28.757 +01:00 [DBG] Connection id "0HMLP0PQATM0Q", Request id "0HMLP0PQATM0Q:00000002": started reading request body.
2022-10-28 18:04:28.770 +01:00 [DBG] Connection id "0HMLP0PQATM0Q", Request id "0HMLP0PQATM0Q:00000002": done reading request body.
2022-10-28 18:04:28.778 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 18:04:28.781 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:04:28.783 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:04:28.784 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:04:28.791 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:04:32.738 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 18:04:32.813 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 18:04:33.168 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 18:04:33.216 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:04:33.288 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (69ms).
2022-10-28 18:04:33.298 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:04:33.472 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:04:33.489 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:04:33.578 +01:00 [INF] Executed DbCommand (95ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:04:33.624 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:04:33.675 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:04:33.681 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:04:33.690 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:04:34.607 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 18:04:34.614 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 18:04:34.636 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:04:34.639 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 18:04:34.646 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:04:34.649 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:04:34.652 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:04:34.672 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:04:34.706 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:04:34.724 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:04:34.733 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:04:34.736 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:07:32.610 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 18:07:32.675 +01:00 [DBG] Hosting starting
2022-10-28 18:07:32.715 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 18:07:32.719 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 18:07:32.725 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 18:07:32.727 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 18:07:32.732 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 18:07:32.738 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 18:07:32.739 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 18:07:32.748 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 18:07:32.751 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:07:32.756 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 18:07:32.758 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:07:32.763 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 18:07:32.767 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 18:07:32.770 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 18:07:32.772 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 18:07:33.030 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 18:07:33.193 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 18:07:33.269 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 18:07:33.270 +01:00 [DBG] Connection id "(null)" reset.
2022-10-28 18:07:33.270 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 18:07:33.272 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 18:07:33.273 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 18:07:33.274 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 18:07:33.275 +01:00 [INF] Hosting environment: Development
2022-10-28 18:07:33.276 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 18:07:33.276 +01:00 [DBG] Hosting started
2022-10-28 18:07:33.543 +01:00 [DBG] Connection id "0HMLP0RJRVIG3" accepted.
2022-10-28 18:07:33.545 +01:00 [DBG] Connection id "0HMLP0RJRVIG3" started.
2022-10-28 18:07:33.587 +01:00 [DBG] Connection id "0HMLP0RJRVIG3" received FIN.
2022-10-28 18:07:33.601 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:07:33.721 +01:00 [DBG] Connection id "0HMLP0RJRVIG3" stopped.
2022-10-28 18:07:33.736 +01:00 [DBG] Connection id "0HMLP0RJRVIG3" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:07:40.482 +01:00 [DBG] Connection id "0HMLP0RJRVIG4" accepted.
2022-10-28 18:07:40.484 +01:00 [DBG] Connection id "0HMLP0RJRVIG4" started.
2022-10-28 18:07:40.502 +01:00 [DBG] Connection 0HMLP0RJRVIG4 established using the following protocol: "Tls13"
2022-10-28 18:07:40.554 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger - -
2022-10-28 18:07:40.588 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 18:07:40.656 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger - - - 301 0 - 105.2328ms
2022-10-28 18:07:40.669 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-28 18:07:40.739 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-28 18:07:40.850 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-28 18:07:40.853 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 183.6223ms
2022-10-28 18:07:40.883 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/swagger-ui.css - -
2022-10-28 18:07:40.884 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/swagger-ui-bundle.js - -
2022-10-28 18:07:40.894 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-28 18:07:40.885 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/swagger-ui-standalone-preset.js - -
2022-10-28 18:07:40.895 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-28 18:07:40.931 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 36.4422ms
2022-10-28 18:07:40.940 +01:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-10-28 18:07:40.942 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 47.6699ms
2022-10-28 18:07:40.940 +01:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-10-28 18:07:40.944 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/swagger-ui.css - - - 200 143632 text/css 60.9508ms
2022-10-28 18:07:40.951 +01:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-10-28 18:07:40.948 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 63.2422ms
2022-10-28 18:07:40.953 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 68.4584ms
2022-10-28 18:07:41.100 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/favicon-16x16.png - -
2022-10-28 18:07:41.102 +01:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2022-10-28 18:07:41.107 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/favicon-16x16.png - - - 200 665 image/png 6.2087ms
2022-10-28 18:07:41.197 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-28 18:07:41.407 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 210.5151ms
2022-10-28 18:07:48.286 +01:00 [DBG] Connection id "0HMLP0RJRVIG5" accepted.
2022-10-28 18:07:48.288 +01:00 [DBG] Connection id "0HMLP0RJRVIG5" started.
2022-10-28 18:07:48.320 +01:00 [DBG] Connection 0HMLP0RJRVIG5 established using the following protocol: "Tls13"
2022-10-28 18:07:48.347 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 18:07:48.349 +01:00 [DBG] POST requests are not supported
2022-10-28 18:07:48.375 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 18:07:48.382 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 18:07:48.390 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:07:48.478 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:07:48.483 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:07:48.486 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:07:48.514 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 18:07:48.518 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 18:07:48.519 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 18:07:48.521 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:07:48.523 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 18:07:48.525 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:07:48.527 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:07:48.745 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 18:07:48.774 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:07:48.788 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:07:48.792 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 18:07:48.795 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 18:07:48.800 +01:00 [DBG] Connection id "0HMLP0RJRVIG5", Request id "0HMLP0RJRVIG5:00000002": started reading request body.
2022-10-28 18:07:48.805 +01:00 [DBG] Connection id "0HMLP0RJRVIG5", Request id "0HMLP0RJRVIG5:00000002": done reading request body.
2022-10-28 18:07:48.810 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 18:07:48.813 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:07:48.815 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:07:48.817 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:07:48.828 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:07:49.889 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 18:07:49.958 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 18:07:50.319 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 18:07:50.375 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:07:50.467 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (88ms).
2022-10-28 18:07:50.476 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:07:50.657 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:07:50.673 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:07:50.764 +01:00 [INF] Executed DbCommand (96ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:07:50.813 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:07:50.869 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:07:50.874 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:07:50.883 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:07:50.892 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 18:07:50.899 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 18:07:50.922 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:07:50.924 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 18:07:50.932 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:07:50.937 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:07:50.939 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:07:50.959 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:07:50.972 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:07:50.986 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:07:50.988 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:07:51.158 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:07:51.180 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:07:51.189 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 18:07:51.193 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 18:07:51.214 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 18:07:51.239 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:07:51.241 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:07:51.245 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 18:07:51.256 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 18:07:51.303 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:07:51.305 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 18:07:51.307 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 18:07:51.354 +01:00 [INF] Executed DbCommand (47ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 18:07:51.377 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 18:07:51.385 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:07:51.393 +01:00 [DBG] Committing transaction.
2022-10-28 18:07:51.406 +01:00 [DBG] Committed transaction.
2022-10-28 18:07:51.412 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:07:51.414 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:07:51.419 +01:00 [DBG] Disposing transaction.
2022-10-28 18:07:51.435 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:07:51.443 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 18:07:51.456 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 18:07:51.461 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 18:07:51.462 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 18:07:51.464 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 18:07:51.466 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 18:07:51.468 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 18:07:51.483 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2951.9825ms
2022-10-28 18:07:51.487 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:07:51.490 +01:00 [DBG] Connection id "0HMLP0RJRVIG5" completed keep alive response.
2022-10-28 18:07:51.494 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 18:07:51.499 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3151.7997ms
2022-10-28 18:14:48.558 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 18:14:48.653 +01:00 [DBG] Hosting starting
2022-10-28 18:14:48.723 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 18:14:48.735 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 18:14:48.751 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 18:14:48.752 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 18:14:48.762 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 18:14:48.772 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 18:14:48.773 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 18:14:48.782 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 18:14:48.785 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:14:48.789 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 18:14:48.792 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:14:48.798 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 18:14:48.802 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 18:14:48.806 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 18:14:48.808 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 18:14:49.029 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 18:14:49.089 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 18:14:49.090 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 18:14:49.092 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 18:14:49.093 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 18:14:49.094 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 18:14:49.095 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 18:14:49.096 +01:00 [INF] Hosting environment: Development
2022-10-28 18:14:49.097 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 18:14:49.098 +01:00 [DBG] Hosting started
2022-10-28 18:14:49.106 +01:00 [DBG] Connection id "0HMLP0VLLR9A0" accepted.
2022-10-28 18:14:49.108 +01:00 [DBG] Connection id "0HMLP0VLLR9A0" started.
2022-10-28 18:14:49.130 +01:00 [DBG] Connection id "0HMLP0VLLR9A0" received FIN.
2022-10-28 18:14:49.145 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:14:49.284 +01:00 [DBG] Connection id "0HMLP0VLLR9A0" stopped.
2022-10-28 18:14:49.292 +01:00 [DBG] Connection id "0HMLP0VLLR9A0" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:14:49.568 +01:00 [DBG] Connection id "0HMLP0VLLR9A1" accepted.
2022-10-28 18:14:49.569 +01:00 [DBG] Connection id "0HMLP0VLLR9A1" started.
2022-10-28 18:14:49.651 +01:00 [DBG] Connection 0HMLP0VLLR9A1 established using the following protocol: "Tls13"
2022-10-28 18:14:49.804 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-28 18:14:49.898 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 18:14:50.201 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-28 18:14:50.424 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-28 18:14:50.460 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 661.5007ms
2022-10-28 18:14:50.574 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-28 18:14:50.574 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-28 18:14:50.582 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 8.5263ms
2022-10-28 18:14:50.620 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 45.8589ms
2022-10-28 18:14:51.032 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-28 18:14:51.253 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 220.9765ms
2022-10-28 18:15:01.868 +01:00 [DBG] Connection id "0HMLP0VLLR9A2" accepted.
2022-10-28 18:15:01.871 +01:00 [DBG] Connection id "0HMLP0VLLR9A2" started.
2022-10-28 18:15:01.900 +01:00 [DBG] Connection 0HMLP0VLLR9A2 established using the following protocol: "Tls13"
2022-10-28 18:15:01.927 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 18:15:01.930 +01:00 [DBG] POST requests are not supported
2022-10-28 18:15:01.957 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 18:15:01.966 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 18:15:01.972 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:15:02.050 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:15:02.055 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:15:02.057 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:15:02.085 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 18:15:02.088 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 18:15:02.090 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 18:15:02.091 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:15:02.093 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 18:15:02.095 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:15:02.097 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:15:02.309 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 18:15:02.337 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:15:02.351 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:15:02.354 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 18:15:02.356 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 18:15:02.362 +01:00 [DBG] Connection id "0HMLP0VLLR9A2", Request id "0HMLP0VLLR9A2:00000002": started reading request body.
2022-10-28 18:15:02.367 +01:00 [DBG] Connection id "0HMLP0VLLR9A2", Request id "0HMLP0VLLR9A2:00000002": done reading request body.
2022-10-28 18:15:02.372 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 18:15:02.373 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:15:02.375 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:15:02.377 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:15:02.387 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:15:03.450 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 18:15:03.504 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 18:15:03.845 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 18:15:03.898 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:15:03.972 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (71ms).
2022-10-28 18:15:03.982 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:15:04.188 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:15:04.206 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:15:04.310 +01:00 [INF] Executed DbCommand (111ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:15:04.361 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:15:04.412 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:15:04.418 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:15:04.426 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:15:04.437 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 18:15:04.445 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 18:15:04.468 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:15:04.470 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 18:15:04.480 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:15:04.482 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:15:04.485 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:15:04.505 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:15:04.518 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:15:04.536 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:15:04.544 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:15:04.547 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:15:04.556 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 18:15:04.560 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 18:15:04.561 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 18:15:04.562 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 18:15:04.563 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 18:15:04.565 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 18:15:04.574 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2473.5548ms
2022-10-28 18:15:04.577 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:15:04.581 +01:00 [DBG] Connection id "0HMLP0VLLR9A2" completed keep alive response.
2022-10-28 18:15:04.584 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 18:15:04.590 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 2662.8683ms
2022-10-28 18:15:22.442 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 18:15:22.512 +01:00 [DBG] Hosting starting
2022-10-28 18:15:22.552 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 18:15:22.556 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 18:15:22.562 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 18:15:22.564 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 18:15:22.570 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 18:15:22.575 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 18:15:22.576 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 18:15:22.584 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 18:15:22.587 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:15:22.591 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 18:15:22.593 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 18:15:22.597 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 18:15:22.600 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 18:15:22.603 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 18:15:22.605 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 18:15:22.733 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 18:15:22.795 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 18:15:22.796 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 18:15:22.797 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 18:15:22.798 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 18:15:22.798 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 18:15:22.800 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 18:15:22.801 +01:00 [INF] Hosting environment: Development
2022-10-28 18:15:22.802 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 18:15:22.803 +01:00 [DBG] Hosting started
2022-10-28 18:15:23.266 +01:00 [DBG] Connection id "0HMLP0VVRKU0G" received FIN.
2022-10-28 18:15:23.266 +01:00 [DBG] Connection id "0HMLP0VVRKU0H" received FIN.
2022-10-28 18:15:23.290 +01:00 [DBG] Connection id "0HMLP0VVRKU0G" accepted.
2022-10-28 18:15:23.290 +01:00 [DBG] Connection id "0HMLP0VVRKU0H" accepted.
2022-10-28 18:15:23.293 +01:00 [DBG] Connection id "0HMLP0VVRKU0G" started.
2022-10-28 18:15:23.293 +01:00 [DBG] Connection id "0HMLP0VVRKU0H" started.
2022-10-28 18:15:23.313 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:15:23.313 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 18:15:23.410 +01:00 [DBG] Connection id "0HMLP0VVRKU0H" stopped.
2022-10-28 18:15:23.410 +01:00 [DBG] Connection id "0HMLP0VVRKU0G" stopped.
2022-10-28 18:15:23.417 +01:00 [DBG] Connection id "0HMLP0VVRKU0H" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:15:23.417 +01:00 [DBG] Connection id "0HMLP0VVRKU0G" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 18:15:23.571 +01:00 [DBG] Connection id "0HMLP0VVRKU0I" accepted.
2022-10-28 18:15:23.573 +01:00 [DBG] Connection id "0HMLP0VVRKU0I" started.
2022-10-28 18:15:23.618 +01:00 [DBG] Connection 0HMLP0VVRKU0I established using the following protocol: "Tls13"
2022-10-28 18:15:23.665 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-28 18:15:23.702 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 18:15:23.921 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-28 18:15:24.049 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-28 18:15:24.058 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 394.6500ms
2022-10-28 18:15:24.144 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-28 18:15:24.144 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-28 18:15:24.168 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 23.8434ms
2022-10-28 18:15:24.193 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 49.8602ms
2022-10-28 18:15:24.451 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-28 18:15:24.662 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 210.5997ms
2022-10-28 18:15:31.560 +01:00 [DBG] Connection id "0HMLP0VVRKU0J" accepted.
2022-10-28 18:15:31.562 +01:00 [DBG] Connection id "0HMLP0VVRKU0J" started.
2022-10-28 18:15:31.593 +01:00 [DBG] Connection 0HMLP0VVRKU0J established using the following protocol: "Tls13"
2022-10-28 18:15:31.621 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 18:15:31.624 +01:00 [DBG] POST requests are not supported
2022-10-28 18:15:31.649 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 18:15:31.656 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 18:15:31.664 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:15:31.745 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:15:31.750 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 18:15:31.752 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:15:31.780 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 18:15:31.783 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 18:15:31.785 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 18:15:31.786 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:15:31.789 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 18:15:31.791 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 18:15:31.793 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:15:32.000 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 18:15:32.028 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 18:15:32.043 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:15:32.047 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 18:15:32.049 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 18:15:32.055 +01:00 [DBG] Connection id "0HMLP0VVRKU0J", Request id "0HMLP0VVRKU0J:00000002": started reading request body.
2022-10-28 18:15:32.061 +01:00 [DBG] Connection id "0HMLP0VVRKU0J", Request id "0HMLP0VVRKU0J:00000002": done reading request body.
2022-10-28 18:15:32.066 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 18:15:32.068 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:15:32.070 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:15:32.071 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 18:15:32.079 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 18:15:33.091 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 18:15:33.153 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 18:15:33.497 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 18:15:33.546 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:15:33.622 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (73ms).
2022-10-28 18:15:33.631 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:15:33.808 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:15:33.825 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:15:33.915 +01:00 [INF] Executed DbCommand (96ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 18:15:33.961 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:15:34.012 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:15:34.020 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:15:34.030 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:15:34.038 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 18:15:34.046 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 18:15:34.069 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:15:34.071 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 18:15:34.079 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:15:34.082 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:15:34.084 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:15:34.102 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 18:15:34.115 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:15:34.124 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:15:34.128 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:15:34.314 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:15:34.336 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:15:34.345 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 18:15:34.349 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 18:15:34.370 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 18:15:34.392 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 18:15:34.393 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:15:34.397 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 18:15:34.407 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 18:15:34.455 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 18:15:34.456 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 18:15:34.459 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 18:15:34.483 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 18:15:34.505 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 18:15:34.514 +01:00 [DBG] A data reader was disposed.
2022-10-28 18:15:34.522 +01:00 [DBG] Committing transaction.
2022-10-28 18:15:34.536 +01:00 [DBG] Committed transaction.
2022-10-28 18:15:34.542 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 18:15:34.544 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 18:15:34.549 +01:00 [DBG] Disposing transaction.
2022-10-28 18:15:34.564 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 18:15:34.569 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 18:15:34.579 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 18:15:34.583 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 18:15:34.584 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 18:15:34.585 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 18:15:34.586 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 18:15:34.587 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 18:15:34.601 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2805.0378ms
2022-10-28 18:15:34.605 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 18:15:34.608 +01:00 [DBG] Connection id "0HMLP0VVRKU0J" completed keep alive response.
2022-10-28 18:15:34.612 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 18:15:34.617 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 2995.8191ms
2022-10-28 18:16:42.156 +01:00 [DBG] Connection id "0HMLP0VVRKU0J" received FIN.
2022-10-28 18:16:42.159 +01:00 [DBG] Connection id "0HMLP0VVRKU0J" disconnecting.
2022-10-28 18:16:42.161 +01:00 [DBG] Connection id "0HMLP0VVRKU0J" sending FIN because: "The client closed the connection."
2022-10-28 18:16:42.173 +01:00 [DBG] Connection id "0HMLP0VVRKU0J" stopped.
2022-10-28 19:09:10.933 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 19:09:11.016 +01:00 [DBG] Hosting starting
2022-10-28 19:09:11.057 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 19:09:11.061 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 19:09:11.066 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 19:09:11.067 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 19:09:11.073 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 19:09:11.079 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 19:09:11.081 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 19:09:11.090 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 19:09:11.092 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 19:09:11.096 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 19:09:11.097 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 19:09:11.103 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 19:09:11.106 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 19:09:11.110 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 19:09:11.111 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 19:09:11.260 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 19:09:11.325 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 19:09:11.326 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 19:09:11.327 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 19:09:11.328 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 19:09:11.329 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 19:09:11.330 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 19:09:11.330 +01:00 [INF] Hosting environment: Development
2022-10-28 19:09:11.331 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 19:09:11.332 +01:00 [DBG] Hosting started
2022-10-28 19:09:11.462 +01:00 [DBG] Connection id "0HMLP1U1U3SEB" received FIN.
2022-10-28 19:09:11.491 +01:00 [DBG] Connection id "0HMLP1U1U3SEB" accepted.
2022-10-28 19:09:11.499 +01:00 [DBG] Connection id "0HMLP1U1U3SEB" started.
2022-10-28 19:09:11.526 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 19:09:11.701 +01:00 [DBG] Connection id "0HMLP1U1U3SEB" stopped.
2022-10-28 19:09:11.709 +01:00 [DBG] Connection id "0HMLP1U1U3SEB" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 19:09:12.303 +01:00 [DBG] Connection id "0HMLP1U1U3SEC" accepted.
2022-10-28 19:09:12.305 +01:00 [DBG] Connection id "0HMLP1U1U3SEC" started.
2022-10-28 19:09:12.373 +01:00 [DBG] Connection 0HMLP1U1U3SEC established using the following protocol: "Tls13"
2022-10-28 19:09:12.452 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-28 19:09:12.507 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 19:09:12.648 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-28 19:09:12.860 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-28 19:09:12.866 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 418.1082ms
2022-10-28 19:09:12.991 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-28 19:09:12.991 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-28 19:09:13.009 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 18.4168ms
2022-10-28 19:09:13.243 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 251.7136ms
2022-10-28 19:09:13.472 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-28 19:09:13.717 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 244.6041ms
2022-10-28 19:10:27.526 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 19:10:27.598 +01:00 [DBG] Hosting starting
2022-10-28 19:10:27.638 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 19:10:27.642 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 19:10:27.648 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 19:10:27.649 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 19:10:27.655 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 19:10:27.660 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 19:10:27.662 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 19:10:27.670 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 19:10:27.673 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 19:10:27.677 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 19:10:27.678 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 19:10:27.683 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 19:10:27.686 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 19:10:27.689 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 19:10:27.691 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 19:10:27.902 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 19:10:27.949 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 19:10:27.950 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 19:10:27.951 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 19:10:27.953 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 19:10:27.955 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 19:10:27.956 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 19:10:27.958 +01:00 [INF] Hosting environment: Development
2022-10-28 19:10:27.959 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 19:10:27.960 +01:00 [DBG] Hosting started
2022-10-28 19:10:27.964 +01:00 [DBG] Connection id "0HMLP1UONLM1E" accepted.
2022-10-28 19:10:27.966 +01:00 [DBG] Connection id "0HMLP1UONLM1E" started.
2022-10-28 19:10:28.005 +01:00 [DBG] Connection id "0HMLP1UONLM1E" received FIN.
2022-10-28 19:10:28.022 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 19:10:28.124 +01:00 [DBG] Connection id "0HMLP1UONLM1E" stopped.
2022-10-28 19:10:28.128 +01:00 [DBG] Connection id "0HMLP1UONLM1E" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 19:10:28.416 +01:00 [DBG] Connection id "0HMLP1UONLM1F" accepted.
2022-10-28 19:10:28.419 +01:00 [DBG] Connection id "0HMLP1UONLM1F" started.
2022-10-28 19:10:28.465 +01:00 [DBG] Connection 0HMLP1UONLM1F established using the following protocol: "Tls13"
2022-10-28 19:10:28.514 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-28 19:10:28.550 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 19:10:28.664 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-28 19:10:28.793 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-28 19:10:28.799 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 287.2209ms
2022-10-28 19:10:28.865 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-28 19:10:28.866 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-28 19:10:28.880 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 15.1800ms
2022-10-28 19:10:28.923 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.3853ms
2022-10-28 19:10:29.123 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-28 19:10:29.409 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 286.4090ms
2022-10-28 19:11:22.958 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 19:11:23.083 +01:00 [DBG] Hosting starting
2022-10-28 19:11:23.150 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 19:11:23.157 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 19:11:23.165 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 19:11:23.167 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 19:11:23.176 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 19:11:23.185 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 19:11:23.187 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 19:11:23.198 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 19:11:23.201 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 19:11:23.207 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 19:11:23.210 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 19:11:23.215 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 19:11:23.218 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 19:11:23.224 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 19:11:23.225 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 19:11:23.387 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 19:11:23.439 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 19:11:23.440 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 19:11:23.441 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 19:11:23.443 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 19:11:23.444 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 19:11:23.445 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 19:11:23.446 +01:00 [INF] Hosting environment: Development
2022-10-28 19:11:23.446 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 19:11:23.447 +01:00 [DBG] Hosting started
2022-10-28 19:11:23.475 +01:00 [DBG] Connection id "0HMLP1V993BEJ" received FIN.
2022-10-28 19:11:23.487 +01:00 [DBG] Connection id "0HMLP1V993BEJ" accepted.
2022-10-28 19:11:23.492 +01:00 [DBG] Connection id "0HMLP1V993BEJ" started.
2022-10-28 19:11:23.532 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 19:11:23.719 +01:00 [DBG] Connection id "0HMLP1V993BEJ" stopped.
2022-10-28 19:11:23.726 +01:00 [DBG] Connection id "0HMLP1V993BEJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 19:11:23.871 +01:00 [DBG] Connection id "0HMLP1V993BEK" accepted.
2022-10-28 19:11:23.872 +01:00 [DBG] Connection id "0HMLP1V993BEK" started.
2022-10-28 19:11:23.916 +01:00 [DBG] Connection 0HMLP1V993BEK established using the following protocol: "Tls13"
2022-10-28 19:11:23.979 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-28 19:11:24.020 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 19:11:24.137 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-28 19:11:24.269 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-28 19:11:24.277 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 300.8876ms
2022-10-28 19:11:24.345 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-28 19:11:24.381 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-28 19:11:24.402 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 23.2840ms
2022-10-28 19:11:24.446 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 100.6419ms
2022-10-28 19:11:24.622 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-28 19:11:24.840 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 218.0206ms
2022-10-28 19:11:38.653 +01:00 [DBG] Connection id "0HMLP1V993BEL" accepted.
2022-10-28 19:11:38.654 +01:00 [DBG] Connection id "0HMLP1V993BEL" started.
2022-10-28 19:11:38.664 +01:00 [DBG] Connection 0HMLP1V993BEL established using the following protocol: "Tls13"
2022-10-28 19:11:38.692 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 19:11:38.695 +01:00 [DBG] POST requests are not supported
2022-10-28 19:11:38.722 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 19:11:38.731 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 19:11:38.738 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 19:11:38.823 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 19:11:38.828 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 19:11:38.831 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 19:11:38.860 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 19:11:38.864 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 19:11:38.866 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 19:11:38.867 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 19:11:38.871 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 19:11:38.872 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 19:11:38.875 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 19:11:39.089 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 19:11:39.118 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 19:11:39.132 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 19:11:39.136 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 19:11:39.139 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 19:11:39.145 +01:00 [DBG] Connection id "0HMLP1V993BEL", Request id "0HMLP1V993BEL:00000002": started reading request body.
2022-10-28 19:11:39.151 +01:00 [DBG] Connection id "0HMLP1V993BEL", Request id "0HMLP1V993BEL:00000002": done reading request body.
2022-10-28 19:11:39.157 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 19:11:39.159 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 19:11:39.160 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 19:11:39.162 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 19:11:39.173 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 19:11:40.174 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 19:11:40.230 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 19:11:40.572 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 19:11:40.620 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 19:11:40.695 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (72ms).
2022-10-28 19:11:40.705 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 19:11:40.945 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 19:11:40.961 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 19:11:41.052 +01:00 [INF] Executed DbCommand (97ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 19:11:41.101 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 19:11:41.157 +01:00 [DBG] A data reader was disposed.
2022-10-28 19:11:41.163 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 19:11:41.171 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 19:11:41.179 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 19:11:41.186 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 19:11:41.208 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 19:11:41.209 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 19:11:41.217 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 19:11:41.220 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 19:11:41.222 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 19:11:41.241 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 19:11:41.253 +01:00 [DBG] A data reader was disposed.
2022-10-28 19:11:41.263 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 19:11:41.267 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 19:11:41.435 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 19:11:41.458 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 19:11:41.467 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 19:11:41.471 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 19:11:41.492 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 19:11:41.518 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 19:11:41.520 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 19:11:41.523 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 19:11:41.535 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 19:11:41.583 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 19:11:41.585 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 19:11:41.587 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 19:11:41.619 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 19:11:41.641 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 19:11:41.649 +01:00 [DBG] A data reader was disposed.
2022-10-28 19:11:41.657 +01:00 [DBG] Committing transaction.
2022-10-28 19:11:41.672 +01:00 [DBG] Committed transaction.
2022-10-28 19:11:41.678 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 19:11:41.680 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 19:11:41.685 +01:00 [DBG] Disposing transaction.
2022-10-28 19:11:41.699 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 19:11:41.705 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 19:11:41.715 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 19:11:41.719 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 19:11:41.720 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 19:11:41.721 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 19:11:41.723 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 19:11:41.725 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 19:11:41.742 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2863.7728ms
2022-10-28 19:11:41.745 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 19:11:41.749 +01:00 [DBG] Connection id "0HMLP1V993BEL" completed keep alive response.
2022-10-28 19:11:41.753 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 19:11:41.758 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3066.7736ms
2022-10-28 19:13:00.578 +01:00 [DBG] Connection id "0HMLP1V993BEL" received FIN.
2022-10-28 19:13:00.580 +01:00 [DBG] Connection id "0HMLP1V993BEL" disconnecting.
2022-10-28 19:13:00.594 +01:00 [DBG] Connection id "0HMLP1V993BEL" sending FIN because: "The client closed the connection."
2022-10-28 19:13:00.598 +01:00 [DBG] Connection id "0HMLP1V993BEL" stopped.
2022-10-28 20:22:29.339 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 20:22:29.423 +01:00 [DBG] Hosting starting
2022-10-28 20:22:29.478 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 20:22:29.483 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 20:22:29.498 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 20:22:29.500 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 20:22:29.508 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 20:22:29.517 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 20:22:29.518 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 20:22:29.526 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 20:22:29.530 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 20:22:29.534 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 20:22:29.537 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 20:22:29.543 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 20:22:29.546 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 20:22:29.552 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 20:22:29.554 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 20:22:29.735 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 20:22:29.809 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 20:22:29.811 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 20:22:29.814 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 20:22:29.816 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 20:22:29.818 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 20:22:29.819 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 20:22:29.820 +01:00 [INF] Hosting environment: Development
2022-10-28 20:22:29.821 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 20:22:29.841 +01:00 [DBG] Hosting started
2022-10-28 20:22:29.827 +01:00 [DBG] Connection id "0HMLP370O6E5K" received FIN.
2022-10-28 20:22:29.859 +01:00 [DBG] Connection id "0HMLP370O6E5K" accepted.
2022-10-28 20:22:29.862 +01:00 [DBG] Connection id "0HMLP370O6E5K" started.
2022-10-28 20:22:29.884 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 20:22:30.033 +01:00 [DBG] Connection id "0HMLP370O6E5K" stopped.
2022-10-28 20:22:30.039 +01:00 [DBG] Connection id "0HMLP370O6E5K" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 20:22:30.461 +01:00 [DBG] Connection id "0HMLP370O6E5L" accepted.
2022-10-28 20:22:30.471 +01:00 [DBG] Connection id "0HMLP370O6E5L" started.
2022-10-28 20:22:30.634 +01:00 [DBG] Connection 0HMLP370O6E5L established using the following protocol: "Tls13"
2022-10-28 20:22:30.835 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/index.html - -
2022-10-28 20:22:30.935 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 20:22:31.097 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-10-28 20:22:31.290 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-10-28 20:22:31.298 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/index.html - - - 200 - text/html;charset=utf-8 468.7990ms
2022-10-28 20:22:31.392 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - -
2022-10-28 20:22:31.392 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/_vs/browserLink - -
2022-10-28 20:22:31.427 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_framework/aspnetcore-browser-refresh.js - - - 200 12020 application/javascript;+charset=utf-8 33.6494ms
2022-10-28 20:22:31.492 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 99.4202ms
2022-10-28 20:22:31.985 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - -
2022-10-28 20:22:32.186 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7074/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 201.1018ms
2022-10-28 20:22:47.031 +01:00 [DBG] Connection id "0HMLP370O6E5M" accepted.
2022-10-28 20:22:47.034 +01:00 [DBG] Connection id "0HMLP370O6E5M" started.
2022-10-28 20:22:47.052 +01:00 [DBG] Connection 0HMLP370O6E5M established using the following protocol: "Tls13"
2022-10-28 20:22:47.077 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 20:22:47.082 +01:00 [DBG] POST requests are not supported
2022-10-28 20:22:47.113 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 20:22:47.122 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 20:22:47.130 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 20:22:47.210 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 20:22:47.216 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 20:22:47.218 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 20:22:47.248 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 20:22:47.251 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 20:22:47.253 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 20:22:47.255 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 20:22:47.257 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 20:22:47.259 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 20:22:47.261 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 20:22:47.479 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 20:22:47.511 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 20:22:47.526 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 20:22:47.530 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 20:22:47.532 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 20:22:47.540 +01:00 [DBG] Connection id "0HMLP370O6E5M", Request id "0HMLP370O6E5M:00000002": started reading request body.
2022-10-28 20:22:47.545 +01:00 [DBG] Connection id "0HMLP370O6E5M", Request id "0HMLP370O6E5M:00000002": done reading request body.
2022-10-28 20:22:47.551 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 20:22:47.553 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 20:22:47.556 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 20:22:47.558 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 20:22:47.568 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 20:22:48.604 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 20:22:48.660 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 20:22:48.996 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 20:22:49.043 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 20:22:49.113 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (68ms).
2022-10-28 20:22:49.123 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 20:22:49.393 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 20:22:49.412 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 20:22:49.506 +01:00 [INF] Executed DbCommand (102ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 20:22:49.554 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 20:22:49.610 +01:00 [DBG] A data reader was disposed.
2022-10-28 20:22:49.616 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 20:22:49.625 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 20:22:49.633 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 20:22:49.643 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 20:22:49.666 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 20:22:49.668 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 20:22:49.676 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 20:22:49.679 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 20:22:49.681 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 20:22:49.700 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 20:22:49.714 +01:00 [DBG] A data reader was disposed.
2022-10-28 20:22:49.723 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 20:22:49.726 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 20:22:49.903 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 20:22:49.926 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 20:22:49.936 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 20:22:49.941 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 20:22:49.963 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 20:22:49.985 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 20:22:49.987 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 20:22:49.991 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 20:22:50.001 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 20:22:50.059 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 20:22:50.061 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 20:22:50.064 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 20:22:50.093 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 20:22:50.121 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 20:22:50.131 +01:00 [DBG] A data reader was disposed.
2022-10-28 20:22:50.140 +01:00 [DBG] Committing transaction.
2022-10-28 20:22:50.155 +01:00 [DBG] Committed transaction.
2022-10-28 20:22:50.161 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 20:22:50.163 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 20:22:50.168 +01:00 [DBG] Disposing transaction.
2022-10-28 20:22:50.183 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 20:22:50.189 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 20:22:50.200 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 20:22:50.206 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 20:22:50.208 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 20:22:50.211 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 20:22:50.213 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 20:22:50.215 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 20:22:50.235 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2969.6608ms
2022-10-28 20:22:50.240 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 20:22:50.244 +01:00 [DBG] Connection id "0HMLP370O6E5M" completed keep alive response.
2022-10-28 20:22:50.247 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 20:22:50.251 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3174.1643ms
2022-10-28 22:32:32.488 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 22:32:32.556 +01:00 [DBG] Hosting starting
2022-10-28 22:32:32.598 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 22:32:32.603 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 22:32:32.609 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 22:32:32.611 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 22:32:32.617 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 22:32:32.623 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 22:32:32.625 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 22:32:32.634 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 22:32:32.637 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:32:32.642 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 22:32:32.660 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:32:32.665 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 22:32:32.669 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 22:32:32.676 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 22:32:32.678 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 22:32:32.866 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 22:32:32.922 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 22:32:32.925 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 22:32:32.927 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 22:32:32.928 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 22:32:32.930 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 22:32:32.932 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 22:32:32.933 +01:00 [INF] Hosting environment: Development
2022-10-28 22:32:32.934 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 22:32:32.936 +01:00 [DBG] Hosting started
2022-10-28 22:32:32.989 +01:00 [DBG] Connection id "0HMLP5FM8TJKC" accepted.
2022-10-28 22:32:32.992 +01:00 [DBG] Connection id "0HMLP5FM8TJKC" started.
2022-10-28 22:32:33.050 +01:00 [DBG] Connection id "0HMLP5FM8TJKD" accepted.
2022-10-28 22:32:33.057 +01:00 [DBG] Connection id "0HMLP5FM8TJKD" started.
2022-10-28 22:37:00.126 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 22:37:00.201 +01:00 [DBG] Hosting starting
2022-10-28 22:37:00.251 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 22:37:00.255 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 22:37:00.262 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 22:37:00.263 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 22:37:00.269 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 22:37:00.275 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 22:37:00.276 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 22:37:00.285 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 22:37:00.289 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:37:00.293 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 22:37:00.294 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:37:00.299 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 22:37:00.302 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 22:37:00.310 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 22:37:00.314 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 22:37:00.516 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 22:37:00.602 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 22:37:00.611 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 22:37:00.612 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 22:37:00.613 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 22:37:00.615 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 22:37:00.616 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 22:37:00.617 +01:00 [INF] Hosting environment: Development
2022-10-28 22:37:00.618 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 22:37:00.618 +01:00 [DBG] Hosting started
2022-10-28 22:37:00.658 +01:00 [DBG] Connection id "0HMLP5I61KHE2" reset.
2022-10-28 22:37:00.688 +01:00 [DBG] Connection id "0HMLP5I61KHE2" accepted.
2022-10-28 22:37:00.752 +01:00 [DBG] Connection id "0HMLP5I61KHE2" started.
2022-10-28 22:37:00.808 +01:00 [DBG] Failed to authenticate HTTPS connection.
Microsoft.AspNetCore.Connections.ConnectionResetException: An existing connection was forcibly closed by the remote host.
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.ReadAsync(CancellationToken token)
   at System.IO.Pipelines.Pipe.DefaultPipeReader.ReadAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.DuplexPipeStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:37:00.994 +01:00 [DBG] Connection id "0HMLP5I61KHE2" stopped.
2022-10-28 22:37:01.003 +01:00 [DBG] Connection id "0HMLP5I61KHE2" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:37:06.143 +01:00 [DBG] Connection id "0HMLP5I61KHE3" accepted.
2022-10-28 22:37:06.148 +01:00 [DBG] Connection id "0HMLP5I61KHE3" started.
2022-10-28 22:37:06.179 +01:00 [DBG] Connection id "0HMLP5I61KHE3" received FIN.
2022-10-28 22:37:06.188 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:37:06.191 +01:00 [DBG] Connection id "0HMLP5I61KHE3" stopped.
2022-10-28 22:37:06.192 +01:00 [DBG] Connection id "0HMLP5I61KHE3" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:37:12.855 +01:00 [DBG] Connection id "0HMLP5I61KHE4" accepted.
2022-10-28 22:37:12.858 +01:00 [DBG] Connection id "0HMLP5I61KHE4" started.
2022-10-28 22:37:12.877 +01:00 [DBG] Connection 0HMLP5I61KHE4 established using the following protocol: "Tls13"
2022-10-28 22:37:12.917 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 22:37:12.937 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 22:37:12.996 +01:00 [DBG] POST requests are not supported
2022-10-28 22:37:13.031 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 22:37:13.040 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 22:37:13.047 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:37:13.138 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:37:13.143 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:37:13.145 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:37:13.175 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 22:37:13.179 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 22:37:13.181 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 22:37:13.183 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:37:13.186 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 22:37:13.188 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:37:13.191 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:37:13.625 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 22:37:13.658 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:37:13.678 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:37:13.683 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 22:37:13.687 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 22:37:13.704 +01:00 [DBG] Connection id "0HMLP5I61KHE4", Request id "0HMLP5I61KHE4:00000002": started reading request body.
2022-10-28 22:37:13.709 +01:00 [DBG] Connection id "0HMLP5I61KHE4", Request id "0HMLP5I61KHE4:00000002": done reading request body.
2022-10-28 22:37:13.715 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 22:37:13.717 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:37:13.719 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:37:13.721 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:37:13.731 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:37:13.734 +01:00 [DBG] The request has model state errors, returning an error response.
2022-10-28 22:37:13.737 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2022-10-28 22:37:13.740 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 22:37:13.745 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 22:37:13.746 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-10-28 22:37:13.749 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-10-28 22:37:13.750 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-10-28 22:37:13.765 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 571.3066ms
2022-10-28 22:37:13.769 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:37:13.771 +01:00 [DBG] Connection id "0HMLP5I61KHE4" completed keep alive response.
2022-10-28 22:37:13.777 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - application/problem+json;+charset=utf-8 863.8335ms
2022-10-28 22:37:16.260 +01:00 [DBG] Connection id "0HMLP5I61KHE4" received FIN.
2022-10-28 22:37:16.267 +01:00 [DBG] Connection id "0HMLP5I61KHE4" sending FIN because: "The client closed the connection."
2022-10-28 22:37:16.274 +01:00 [DBG] Connection id "0HMLP5I61KHE4" disconnecting.
2022-10-28 22:37:16.278 +01:00 [DBG] Connection id "0HMLP5I61KHE4" stopped.
2022-10-28 22:37:20.973 +01:00 [DBG] Connection id "0HMLP5I61KHE5" accepted.
2022-10-28 22:37:20.975 +01:00 [DBG] Connection id "0HMLP5I61KHE5" started.
2022-10-28 22:37:20.980 +01:00 [DBG] Connection 0HMLP5I61KHE5 established using the following protocol: "Tls13"
2022-10-28 22:37:20.981 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 22:37:20.982 +01:00 [DBG] POST requests are not supported
2022-10-28 22:37:20.984 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 22:37:20.985 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 22:37:20.987 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:37:20.989 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:37:20.990 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:37:20.992 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:37:20.993 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 22:37:20.995 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 22:37:20.996 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 22:37:20.998 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:37:21.000 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 22:37:21.002 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:37:21.004 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:37:21.012 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:37:21.020 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:37:21.021 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 22:37:21.022 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 22:37:21.024 +01:00 [DBG] Connection id "0HMLP5I61KHE5", Request id "0HMLP5I61KHE5:00000002": started reading request body.
2022-10-28 22:37:21.025 +01:00 [DBG] Connection id "0HMLP5I61KHE5", Request id "0HMLP5I61KHE5:00000002": done reading request body.
2022-10-28 22:37:21.026 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 22:37:21.027 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:37:21.029 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:37:21.030 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:37:21.032 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:37:22.124 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 22:37:22.182 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 22:37:22.550 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 22:37:22.604 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:37:22.683 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (76ms).
2022-10-28 22:37:22.692 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:37:22.885 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:37:22.902 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:37:22.998 +01:00 [INF] Executed DbCommand (101ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:37:23.047 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:37:23.106 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:37:23.112 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:37:23.121 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:37:23.131 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 22:37:23.138 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 22:37:23.161 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:37:23.163 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 22:37:23.171 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:37:23.174 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:37:23.177 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:37:23.197 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:37:23.207 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:37:23.224 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:37:23.233 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:37:23.235 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:37:23.407 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:37:23.419 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:37:23.422 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:37:23.448 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 22:37:23.472 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:37:23.474 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:37:23.477 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 22:37:23.488 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 22:37:23.541 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:37:23.543 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 22:37:23.546 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 22:37:23.556 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 22:37:23.565 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:37:23.574 +01:00 [DBG] Committing transaction.
2022-10-28 22:37:23.588 +01:00 [DBG] Committed transaction.
2022-10-28 22:37:23.594 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:37:23.597 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:37:23.602 +01:00 [DBG] Disposing transaction.
2022-10-28 22:37:23.608 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:37:23.614 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 22:37:23.623 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 22:37:23.626 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 22:37:23.627 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 22:37:23.629 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 22:37:23.630 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 22:37:23.631 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 22:37:23.645 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2640.9486ms
2022-10-28 22:37:23.649 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:37:23.654 +01:00 [DBG] Connection id "0HMLP5I61KHE5" completed keep alive response.
2022-10-28 22:37:23.657 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 22:37:23.659 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 2677.8768ms
2022-10-28 22:37:34.525 +01:00 [DBG] Connection id "0HMLP5I61KHE6" accepted.
2022-10-28 22:37:34.527 +01:00 [DBG] Connection id "0HMLP5I61KHE6" started.
2022-10-28 22:37:34.533 +01:00 [DBG] Connection 0HMLP5I61KHE6 established using the following protocol: "Tls13"
2022-10-28 22:37:34.534 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 22:37:34.536 +01:00 [DBG] POST requests are not supported
2022-10-28 22:37:34.536 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 22:37:34.538 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 22:37:34.541 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:37:34.543 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:37:34.544 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:37:34.545 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:37:34.546 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 22:37:34.548 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 22:37:34.550 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 22:37:34.551 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:37:34.553 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 22:37:34.556 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:37:34.558 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:37:34.563 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:37:34.566 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:37:34.567 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 22:37:34.569 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 22:37:34.571 +01:00 [DBG] Connection id "0HMLP5I61KHE6", Request id "0HMLP5I61KHE6:00000002": started reading request body.
2022-10-28 22:37:34.573 +01:00 [DBG] Connection id "0HMLP5I61KHE6", Request id "0HMLP5I61KHE6:00000002": done reading request body.
2022-10-28 22:37:34.574 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 22:37:34.575 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:37:34.577 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:37:34.578 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:37:34.579 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:37:34.616 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 22:37:34.622 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:37:34.624 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 22:37:34.625 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:37:34.627 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:37:34.628 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:37:34.632 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:37:34.635 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:37:34.636 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:37:34.637 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:37:34.638 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:37:34.641 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:37:34.642 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 22:37:34.643 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:37:34.645 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:37:34.646 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:37:34.650 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:37:34.654 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:37:34.658 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:37:34.659 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:37:34.661 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:37:34.662 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 22:37:34.666 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 22:37:34.667 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 22:37:34.668 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 22:37:34.669 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 22:37:34.670 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-28 22:37:34.674 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 116.2936ms
2022-10-28 22:37:34.676 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:37:34.677 +01:00 [DBG] Connection id "0HMLP5I61KHE6" completed keep alive response.
2022-10-28 22:37:34.678 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 22:37:34.680 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - text/plain;+charset=utf-8 145.1598ms
2022-10-28 22:38:24.714 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 22:38:24.783 +01:00 [DBG] Hosting starting
2022-10-28 22:38:24.817 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 22:38:24.823 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 22:38:24.828 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 22:38:24.830 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 22:38:24.836 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 22:38:24.841 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 22:38:24.843 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 22:38:24.851 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 22:38:24.854 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:38:24.858 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 22:38:24.859 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:38:24.865 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 22:38:24.869 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 22:38:24.872 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 22:38:24.874 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 22:38:25.061 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 22:38:25.121 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 22:38:25.125 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 22:38:25.127 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 22:38:25.129 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 22:38:25.131 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 22:38:25.133 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 22:38:25.134 +01:00 [INF] Hosting environment: Development
2022-10-28 22:38:25.136 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 22:38:25.138 +01:00 [DBG] Hosting started
2022-10-28 22:38:25.362 +01:00 [DBG] Connection id "0HMLP5IV9EAUP" received FIN.
2022-10-28 22:38:25.386 +01:00 [DBG] Connection id "0HMLP5IV9EAUP" accepted.
2022-10-28 22:38:25.394 +01:00 [DBG] Connection id "0HMLP5IV9EAUP" started.
2022-10-28 22:38:25.411 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:38:25.458 +01:00 [DBG] Connection id "0HMLP5IV9EAUP" stopped.
2022-10-28 22:38:25.462 +01:00 [DBG] Connection id "0HMLP5IV9EAUP" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:38:25.759 +01:00 [DBG] Connection id "0HMLP5IV9EAUQ" accepted.
2022-10-28 22:38:25.793 +01:00 [DBG] Connection id "0HMLP5IV9EAUQ" started.
2022-10-28 22:38:25.871 +01:00 [DBG] Connection id "0HMLP5IV9EAUQ" received FIN.
2022-10-28 22:38:25.904 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:38:25.914 +01:00 [DBG] Connection id "0HMLP5IV9EAUQ" stopped.
2022-10-28 22:38:25.915 +01:00 [DBG] Connection id "0HMLP5IV9EAUQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:38:37.247 +01:00 [DBG] Connection id "0HMLP5IV9EAUR" accepted.
2022-10-28 22:38:37.250 +01:00 [DBG] Connection id "0HMLP5IV9EAUR" started.
2022-10-28 22:38:37.266 +01:00 [DBG] Connection 0HMLP5IV9EAUR established using the following protocol: "Tls13"
2022-10-28 22:38:37.310 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 22:38:37.330 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 22:38:37.373 +01:00 [DBG] POST requests are not supported
2022-10-28 22:38:37.401 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 22:38:37.408 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 22:38:37.415 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:38:37.488 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:38:37.494 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:38:37.497 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:38:37.527 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 22:38:37.532 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 22:38:37.534 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 22:38:37.536 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:38:37.539 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 22:38:37.541 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:38:37.544 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:38:37.717 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 22:38:37.746 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:38:37.760 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:38:37.764 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 22:38:37.766 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 22:38:37.783 +01:00 [DBG] Connection id "0HMLP5IV9EAUR", Request id "0HMLP5IV9EAUR:00000002": started reading request body.
2022-10-28 22:38:37.789 +01:00 [DBG] Connection id "0HMLP5IV9EAUR", Request id "0HMLP5IV9EAUR:00000002": done reading request body.
2022-10-28 22:38:37.794 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 22:38:37.796 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:38:37.797 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:38:37.799 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:38:37.807 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:38:38.760 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 22:38:38.816 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 22:38:39.144 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 22:38:39.192 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:38:39.262 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (67ms).
2022-10-28 22:38:39.271 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:38:39.452 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:38:39.467 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:38:39.556 +01:00 [INF] Executed DbCommand (93ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:38:39.612 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:38:39.661 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:38:39.667 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:38:39.675 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:38:39.683 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 22:38:39.691 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 22:38:39.713 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:38:39.715 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 22:38:39.723 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:38:39.726 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:38:39.729 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:38:39.752 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:38:39.765 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:38:39.775 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:38:39.778 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:38:39.936 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:38:39.959 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:38:39.969 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:38:39.974 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:38:39.996 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 22:38:40.022 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:38:40.025 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:38:40.028 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 22:38:40.040 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 22:38:40.091 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:38:40.092 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 22:38:40.095 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 22:38:40.120 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 22:38:40.142 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 22:38:40.151 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:38:40.160 +01:00 [DBG] Committing transaction.
2022-10-28 22:38:40.174 +01:00 [DBG] Committed transaction.
2022-10-28 22:38:40.180 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:38:40.183 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:38:40.188 +01:00 [DBG] Disposing transaction.
2022-10-28 22:38:40.202 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:38:40.209 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 22:38:40.219 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 22:38:40.224 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 22:38:40.225 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 22:38:40.227 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 22:38:40.229 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 22:38:40.231 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 22:38:40.256 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2706.7889ms
2022-10-28 22:38:40.260 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:38:40.266 +01:00 [DBG] Connection id "0HMLP5IV9EAUR" completed keep alive response.
2022-10-28 22:38:40.271 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 22:38:40.277 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 2971.2361ms
2022-10-28 22:39:17.416 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 22:39:17.487 +01:00 [DBG] Hosting starting
2022-10-28 22:39:17.522 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 22:39:17.526 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 22:39:17.531 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 22:39:17.533 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 22:39:17.539 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 22:39:17.545 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 22:39:17.546 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 22:39:17.554 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 22:39:17.557 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:39:17.561 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 22:39:17.563 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:39:17.568 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 22:39:17.572 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 22:39:17.575 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 22:39:17.577 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 22:39:17.714 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 22:39:17.769 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 22:39:17.771 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 22:39:17.773 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 22:39:17.774 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 22:39:17.776 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 22:39:17.777 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 22:39:17.778 +01:00 [INF] Hosting environment: Development
2022-10-28 22:39:17.779 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 22:39:17.780 +01:00 [DBG] Hosting started
2022-10-28 22:39:17.805 +01:00 [DBG] Connection id "0HMLP5JETIJUK" received FIN.
2022-10-28 22:39:17.805 +01:00 [DBG] Connection id "0HMLP5JETIJUJ" received FIN.
2022-10-28 22:39:17.817 +01:00 [DBG] Connection id "0HMLP5JETIJUK" accepted.
2022-10-28 22:39:17.817 +01:00 [DBG] Connection id "0HMLP5JETIJUJ" accepted.
2022-10-28 22:39:17.820 +01:00 [DBG] Connection id "0HMLP5JETIJUK" started.
2022-10-28 22:39:17.820 +01:00 [DBG] Connection id "0HMLP5JETIJUJ" started.
2022-10-28 22:39:17.835 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:39:17.835 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:39:17.965 +01:00 [DBG] Connection id "0HMLP5JETIJUK" stopped.
2022-10-28 22:39:17.952 +01:00 [DBG] Connection id "0HMLP5JETIJUJ" stopped.
2022-10-28 22:39:17.981 +01:00 [DBG] Connection id "0HMLP5JETIJUJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:39:17.981 +01:00 [DBG] Connection id "0HMLP5JETIJUK" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:39:23.203 +01:00 [DBG] Connection id "0HMLP5JETIJUL" accepted.
2022-10-28 22:39:23.205 +01:00 [DBG] Connection id "0HMLP5JETIJUL" started.
2022-10-28 22:39:23.241 +01:00 [DBG] Connection id "0HMLP5JETIJUL" received FIN.
2022-10-28 22:39:23.252 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:39:23.258 +01:00 [DBG] Connection id "0HMLP5JETIJUL" stopped.
2022-10-28 22:39:23.259 +01:00 [DBG] Connection id "0HMLP5JETIJUL" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:40:11.242 +01:00 [DBG] Connection id "0HMLP5JETIJUM" accepted.
2022-10-28 22:40:11.253 +01:00 [DBG] Connection id "0HMLP5JETIJUM" started.
2022-10-28 22:40:11.285 +01:00 [DBG] Connection 0HMLP5JETIJUM established using the following protocol: "Tls13"
2022-10-28 22:40:11.328 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 22:40:11.349 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 22:40:11.398 +01:00 [DBG] POST requests are not supported
2022-10-28 22:40:11.438 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 22:40:11.446 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 22:40:11.454 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:40:11.526 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:40:11.531 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:40:11.533 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:40:11.561 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 22:40:11.564 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 22:40:11.565 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 22:40:11.567 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:40:11.570 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 22:40:11.572 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:40:11.574 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:40:11.756 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 22:40:11.783 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:40:11.797 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:40:11.800 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 22:40:11.803 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 22:40:11.817 +01:00 [DBG] Connection id "0HMLP5JETIJUM", Request id "0HMLP5JETIJUM:00000002": started reading request body.
2022-10-28 22:40:11.824 +01:00 [DBG] Connection id "0HMLP5JETIJUM", Request id "0HMLP5JETIJUM:00000002": done reading request body.
2022-10-28 22:40:11.831 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 22:40:11.833 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:40:11.835 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:40:11.837 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:40:11.846 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:40:11.852 +01:00 [DBG] The request has model state errors, returning an error response.
2022-10-28 22:40:11.854 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2022-10-28 22:40:11.857 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 22:40:11.860 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 22:40:11.861 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-10-28 22:40:11.865 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-10-28 22:40:11.867 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-10-28 22:40:11.881 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 303.4591ms
2022-10-28 22:40:11.884 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:40:11.885 +01:00 [DBG] Connection id "0HMLP5JETIJUM" completed keep alive response.
2022-10-28 22:40:11.891 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 400 - application/problem+json;+charset=utf-8 566.8305ms
2022-10-28 22:40:14.035 +01:00 [DBG] Connection id "0HMLP5JETIJUM" received FIN.
2022-10-28 22:40:14.048 +01:00 [DBG] Connection id "0HMLP5JETIJUM" sending FIN because: "The client closed the connection."
2022-10-28 22:40:14.050 +01:00 [DBG] Connection id "0HMLP5JETIJUM" disconnecting.
2022-10-28 22:40:14.055 +01:00 [DBG] Connection id "0HMLP5JETIJUM" stopped.
2022-10-28 22:40:17.025 +01:00 [DBG] Connection id "0HMLP5JETIJUN" accepted.
2022-10-28 22:40:17.027 +01:00 [DBG] Connection id "0HMLP5JETIJUN" started.
2022-10-28 22:40:17.030 +01:00 [DBG] Connection 0HMLP5JETIJUN established using the following protocol: "Tls13"
2022-10-28 22:40:17.031 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 22:40:17.032 +01:00 [DBG] POST requests are not supported
2022-10-28 22:40:17.034 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 22:40:17.036 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 22:40:17.038 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:40:17.040 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:40:17.043 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:40:17.044 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:40:17.045 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 22:40:17.047 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 22:40:17.049 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 22:40:17.051 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:40:17.053 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 22:40:17.055 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:40:17.057 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:40:17.065 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:40:17.068 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:40:17.070 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 22:40:17.072 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 22:40:17.073 +01:00 [DBG] Connection id "0HMLP5JETIJUN", Request id "0HMLP5JETIJUN:00000002": started reading request body.
2022-10-28 22:40:17.075 +01:00 [DBG] Connection id "0HMLP5JETIJUN", Request id "0HMLP5JETIJUN:00000002": done reading request body.
2022-10-28 22:40:17.076 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 22:40:17.077 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:40:17.079 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:40:17.080 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:40:17.082 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:40:18.074 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 22:40:18.133 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 22:40:18.539 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 22:40:18.590 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:40:18.678 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (84ms).
2022-10-28 22:40:18.687 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:40:18.883 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:40:18.900 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:40:18.994 +01:00 [INF] Executed DbCommand (99ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:40:19.045 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:40:19.112 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:40:19.118 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:40:19.129 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:40:19.140 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 22:40:19.149 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 22:40:19.177 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:40:19.179 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 22:40:19.188 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:40:19.191 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:40:19.194 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:40:19.216 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:40:19.230 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:40:19.240 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:40:19.244 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:40:19.419 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:40:19.442 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:40:19.452 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:40:19.457 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:40:19.480 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 22:40:19.516 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:40:19.519 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:40:19.525 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 22:40:19.536 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 22:40:19.586 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:40:19.589 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 22:40:19.591 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 22:40:19.601 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 22:40:19.625 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 22:40:19.633 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:40:19.642 +01:00 [DBG] Committing transaction.
2022-10-28 22:40:19.655 +01:00 [DBG] Committed transaction.
2022-10-28 22:40:19.661 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:40:19.663 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:40:19.669 +01:00 [DBG] Disposing transaction.
2022-10-28 22:40:19.683 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:40:19.690 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 22:40:19.699 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 22:40:19.705 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 22:40:19.706 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 22:40:19.708 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 22:40:19.710 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 22:40:19.711 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 22:40:19.726 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2668.9579ms
2022-10-28 22:40:19.729 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:40:19.735 +01:00 [DBG] Connection id "0HMLP5JETIJUN" completed keep alive response.
2022-10-28 22:40:19.738 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 22:40:19.741 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 2709.4673ms
2022-10-28 22:41:20.481 +01:00 [DBG] Connection id "0HMLP5JETIJUN" received FIN.
2022-10-28 22:41:20.493 +01:00 [DBG] Connection id "0HMLP5JETIJUN" sending FIN because: "The client closed the connection."
2022-10-28 22:41:20.508 +01:00 [DBG] Connection id "0HMLP5JETIJUN" disconnecting.
2022-10-28 22:41:20.509 +01:00 [DBG] Connection id "0HMLP5JETIJUN" stopped.
2022-10-28 22:42:09.740 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 22:42:09.809 +01:00 [DBG] Hosting starting
2022-10-28 22:42:09.846 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 22:42:09.851 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 22:42:09.857 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 22:42:09.859 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 22:42:09.865 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 22:42:09.870 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 22:42:09.872 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 22:42:09.881 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 22:42:09.884 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:42:09.888 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 22:42:09.890 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:42:09.895 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 22:42:09.899 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 22:42:09.903 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 22:42:09.905 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 22:42:10.058 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 22:42:10.109 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 22:42:10.111 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 22:42:10.113 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 22:42:10.114 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 22:42:10.115 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 22:42:10.116 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 22:42:10.117 +01:00 [INF] Hosting environment: Development
2022-10-28 22:42:10.118 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 22:42:10.119 +01:00 [DBG] Hosting started
2022-10-28 22:42:10.211 +01:00 [DBG] Connection id "0HMLP5L29OQV3" received FIN.
2022-10-28 22:42:10.222 +01:00 [DBG] Connection id "0HMLP5L29OQV3" accepted.
2022-10-28 22:42:10.225 +01:00 [DBG] Connection id "0HMLP5L29OQV3" started.
2022-10-28 22:42:10.239 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:42:10.295 +01:00 [DBG] Connection id "0HMLP5L29OQV3" stopped.
2022-10-28 22:42:10.303 +01:00 [DBG] Connection id "0HMLP5L29OQV3" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:42:10.935 +01:00 [DBG] Connection id "0HMLP5L29OQV4" accepted.
2022-10-28 22:42:10.936 +01:00 [DBG] Connection id "0HMLP5L29OQV4" started.
2022-10-28 22:42:10.980 +01:00 [DBG] Connection id "0HMLP5L29OQV4" received FIN.
2022-10-28 22:42:10.989 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:42:10.996 +01:00 [DBG] Connection id "0HMLP5L29OQV4" stopped.
2022-10-28 22:42:10.997 +01:00 [DBG] Connection id "0HMLP5L29OQV4" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:42:25.480 +01:00 [DBG] Connection id "0HMLP5L29OQV5" accepted.
2022-10-28 22:42:25.483 +01:00 [DBG] Connection id "0HMLP5L29OQV5" started.
2022-10-28 22:42:25.500 +01:00 [DBG] Connection 0HMLP5L29OQV5 established using the following protocol: "Tls13"
2022-10-28 22:42:25.537 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 22:42:25.555 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 22:42:25.597 +01:00 [DBG] POST requests are not supported
2022-10-28 22:42:25.627 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 22:42:25.636 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 22:42:25.645 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:42:25.717 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:42:25.722 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:42:25.724 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:42:25.749 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 22:42:25.753 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 22:42:25.754 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 22:42:25.756 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:42:25.758 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 22:42:25.759 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:42:25.762 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:42:25.926 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 22:42:25.952 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:42:25.965 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:42:25.968 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 22:42:25.971 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 22:42:25.987 +01:00 [DBG] Connection id "0HMLP5L29OQV5", Request id "0HMLP5L29OQV5:00000002": started reading request body.
2022-10-28 22:42:25.993 +01:00 [DBG] Connection id "0HMLP5L29OQV5", Request id "0HMLP5L29OQV5:00000002": done reading request body.
2022-10-28 22:42:25.998 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 22:42:26.000 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:42:26.001 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:42:26.003 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:42:26.011 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:42:26.989 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 22:42:27.042 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 22:42:27.383 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 22:42:27.430 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:42:27.501 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (67ms).
2022-10-28 22:42:27.512 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:42:27.700 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:42:27.716 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:42:27.813 +01:00 [INF] Executed DbCommand (102ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:42:27.860 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:42:27.910 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:42:27.915 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:42:27.924 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:42:27.931 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 22:42:27.938 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 22:42:27.961 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:42:27.963 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 22:42:27.971 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:42:27.975 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:42:27.978 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:42:27.996 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:42:28.005 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:42:28.013 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:42:28.016 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:42:28.173 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:42:28.199 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:42:28.210 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:42:28.214 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:42:28.239 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 22:42:28.264 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:42:28.267 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:42:28.271 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 22:42:28.282 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 22:42:28.331 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:42:28.333 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 22:42:28.336 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 22:42:28.352 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 22:42:28.377 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 22:42:28.388 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:42:28.397 +01:00 [DBG] Committing transaction.
2022-10-28 22:42:28.413 +01:00 [DBG] Committed transaction.
2022-10-28 22:42:28.420 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:42:28.422 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:42:28.428 +01:00 [DBG] Disposing transaction.
2022-10-28 22:42:28.443 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:42:28.450 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 22:42:28.460 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 22:42:28.467 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 22:42:28.468 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 22:42:28.469 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 22:42:28.470 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 22:42:28.472 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 22:42:28.494 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2728.7943ms
2022-10-28 22:42:28.498 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:42:28.506 +01:00 [DBG] Connection id "0HMLP5L29OQV5" completed keep alive response.
2022-10-28 22:42:28.510 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 22:42:28.516 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 2981.6956ms
2022-10-28 22:43:37.591 +01:00 [DBG] Connection id "0HMLP5L29OQV5" received FIN.
2022-10-28 22:43:37.608 +01:00 [DBG] Connection id "0HMLP5L29OQV5" sending FIN because: "The client closed the connection."
2022-10-28 22:43:37.609 +01:00 [DBG] Connection id "0HMLP5L29OQV5" disconnecting.
2022-10-28 22:43:37.612 +01:00 [DBG] Connection id "0HMLP5L29OQV5" stopped.
2022-10-28 22:49:36.990 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 22:49:37.063 +01:00 [DBG] Hosting starting
2022-10-28 22:49:37.105 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 22:49:37.109 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 22:49:37.114 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 22:49:37.115 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 22:49:37.120 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 22:49:37.125 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 22:49:37.126 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 22:49:37.134 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 22:49:37.137 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:49:37.140 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 22:49:37.142 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:49:37.147 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 22:49:37.149 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 22:49:37.153 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 22:49:37.154 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 22:49:37.285 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 22:49:37.334 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 22:49:37.335 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 22:49:37.336 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 22:49:37.337 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 22:49:37.338 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 22:49:37.339 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 22:49:37.340 +01:00 [INF] Hosting environment: Development
2022-10-28 22:49:37.341 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 22:49:37.342 +01:00 [DBG] Hosting started
2022-10-28 22:49:37.675 +01:00 [DBG] Connection id "0HMLP5P7L32A7" accepted.
2022-10-28 22:49:37.675 +01:00 [DBG] Connection id "0HMLP5P7L32A6" accepted.
2022-10-28 22:49:37.678 +01:00 [DBG] Connection id "0HMLP5P7L32A7" started.
2022-10-28 22:49:37.679 +01:00 [DBG] Connection id "0HMLP5P7L32A6" started.
2022-10-28 22:49:37.717 +01:00 [DBG] Connection id "0HMLP5P7L32A6" received FIN.
2022-10-28 22:49:37.718 +01:00 [DBG] Connection id "0HMLP5P7L32A7" received FIN.
2022-10-28 22:49:37.743 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:49:37.743 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:49:37.839 +01:00 [DBG] Connection id "0HMLP5P7L32A7" stopped.
2022-10-28 22:49:37.840 +01:00 [DBG] Connection id "0HMLP5P7L32A6" stopped.
2022-10-28 22:49:37.844 +01:00 [DBG] Connection id "0HMLP5P7L32A6" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:49:37.844 +01:00 [DBG] Connection id "0HMLP5P7L32A7" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:49:38.590 +01:00 [DBG] Connection id "0HMLP5P7L32A8" accepted.
2022-10-28 22:49:38.604 +01:00 [DBG] Connection id "0HMLP5P7L32A8" started.
2022-10-28 22:49:38.699 +01:00 [DBG] Connection id "0HMLP5P7L32A8" received FIN.
2022-10-28 22:49:38.774 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:49:38.920 +01:00 [DBG] Connection id "0HMLP5P7L32A8" stopped.
2022-10-28 22:49:38.934 +01:00 [DBG] Connection id "0HMLP5P7L32A8" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:49:55.670 +01:00 [DBG] Connection id "0HMLP5P7L32A9" accepted.
2022-10-28 22:49:55.673 +01:00 [DBG] Connection id "0HMLP5P7L32A9" started.
2022-10-28 22:49:55.699 +01:00 [DBG] Connection 0HMLP5P7L32A9 established using the following protocol: "Tls13"
2022-10-28 22:49:55.743 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 22:49:55.764 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 22:49:55.816 +01:00 [DBG] POST requests are not supported
2022-10-28 22:49:55.844 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 22:49:55.852 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 22:49:55.859 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:49:55.954 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:49:55.960 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:49:55.962 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:49:55.993 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 22:49:55.997 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 22:49:55.999 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 22:49:56.000 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:49:56.003 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 22:49:56.004 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:49:56.007 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:49:56.236 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 22:49:56.266 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:49:56.281 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:49:56.286 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 22:49:56.288 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 22:49:56.304 +01:00 [DBG] Connection id "0HMLP5P7L32A9", Request id "0HMLP5P7L32A9:00000002": started reading request body.
2022-10-28 22:49:56.310 +01:00 [DBG] Connection id "0HMLP5P7L32A9", Request id "0HMLP5P7L32A9:00000002": done reading request body.
2022-10-28 22:49:56.316 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 22:49:56.319 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:49:56.321 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:49:56.322 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:49:56.333 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:49:57.378 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 22:49:57.432 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 22:49:57.793 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 22:49:57.839 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:49:57.913 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (68ms).
2022-10-28 22:49:57.923 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:49:58.116 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:49:58.132 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:49:58.226 +01:00 [INF] Executed DbCommand (99ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:49:58.274 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:49:58.329 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:49:58.337 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:49:58.347 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:49:58.357 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 22:49:58.365 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 22:49:58.388 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:49:58.390 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 22:49:58.398 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:49:58.401 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:49:58.404 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:49:58.422 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:49:58.435 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:49:58.444 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:49:58.447 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:49:58.615 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:49:58.637 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:49:58.646 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:49:58.650 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:49:58.671 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 22:49:58.693 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:49:58.695 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:49:58.699 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 22:49:58.709 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 22:49:58.759 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:49:58.761 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 22:49:58.764 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 22:49:58.775 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 22:49:58.799 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 22:49:58.808 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:49:58.816 +01:00 [DBG] Committing transaction.
2022-10-28 22:49:58.829 +01:00 [DBG] Committed transaction.
2022-10-28 22:49:58.835 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:49:58.838 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:49:58.843 +01:00 [DBG] Disposing transaction.
2022-10-28 22:49:58.857 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:49:58.863 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 22:49:58.874 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 22:49:58.878 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 22:49:58.879 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 22:49:58.880 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 22:49:58.881 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 22:49:58.883 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 22:49:58.905 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2894.5605ms
2022-10-28 22:49:58.908 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:49:58.915 +01:00 [DBG] Connection id "0HMLP5P7L32A9" completed keep alive response.
2022-10-28 22:49:58.920 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 22:49:58.925 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3187.2162ms
2022-10-28 22:51:26.875 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 22:51:27.002 +01:00 [DBG] Hosting starting
2022-10-28 22:51:27.051 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 22:51:27.057 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 22:51:27.065 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 22:51:27.066 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 22:51:27.075 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 22:51:27.082 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 22:51:27.083 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 22:51:27.098 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 22:51:27.102 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:51:27.108 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 22:51:27.111 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:51:27.117 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 22:51:27.121 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 22:51:27.125 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 22:51:27.129 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 22:51:27.286 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 22:51:27.337 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 22:51:27.338 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 22:51:27.340 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 22:51:27.341 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 22:51:27.342 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 22:51:27.344 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 22:51:27.345 +01:00 [INF] Hosting environment: Development
2022-10-28 22:51:27.345 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 22:51:27.346 +01:00 [DBG] Hosting started
2022-10-28 22:51:27.364 +01:00 [DBG] Connection id "0HMLP5Q8B5F64" accepted.
2022-10-28 22:51:27.366 +01:00 [DBG] Connection id "0HMLP5Q8B5F65" accepted.
2022-10-28 22:51:27.367 +01:00 [DBG] Connection id "0HMLP5Q8B5F64" started.
2022-10-28 22:51:27.368 +01:00 [DBG] Connection id "0HMLP5Q8B5F65" started.
2022-10-28 22:51:27.404 +01:00 [DBG] Connection id "0HMLP5Q8B5F65" received FIN.
2022-10-28 22:51:27.404 +01:00 [DBG] Connection id "0HMLP5Q8B5F64" received FIN.
2022-10-28 22:51:27.413 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:51:27.413 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:51:27.499 +01:00 [DBG] Connection id "0HMLP5Q8B5F64" stopped.
2022-10-28 22:51:27.508 +01:00 [DBG] Connection id "0HMLP5Q8B5F65" stopped.
2022-10-28 22:51:27.511 +01:00 [DBG] Connection id "0HMLP5Q8B5F64" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:51:27.512 +01:00 [DBG] Connection id "0HMLP5Q8B5F65" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:51:28.159 +01:00 [DBG] Connection id "0HMLP5Q8B5F66" accepted.
2022-10-28 22:51:28.161 +01:00 [DBG] Connection id "0HMLP5Q8B5F66" started.
2022-10-28 22:51:28.210 +01:00 [DBG] Connection id "0HMLP5Q8B5F66" received FIN.
2022-10-28 22:51:28.218 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:51:28.237 +01:00 [DBG] Connection id "0HMLP5Q8B5F66" stopped.
2022-10-28 22:51:28.239 +01:00 [DBG] Connection id "0HMLP5Q8B5F66" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:51:38.443 +01:00 [DBG] Connection id "0HMLP5Q8B5F67" accepted.
2022-10-28 22:51:38.444 +01:00 [DBG] Connection id "0HMLP5Q8B5F67" started.
2022-10-28 22:51:38.462 +01:00 [DBG] Connection 0HMLP5Q8B5F67 established using the following protocol: "Tls13"
2022-10-28 22:51:38.503 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 22:51:38.522 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 22:51:38.568 +01:00 [DBG] POST requests are not supported
2022-10-28 22:51:38.597 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 22:51:38.606 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 22:51:38.614 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:51:38.742 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:51:38.747 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:51:38.751 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:51:38.780 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 22:51:38.784 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 22:51:38.785 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 22:51:38.787 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:51:38.789 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 22:51:38.790 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:51:38.793 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:51:39.001 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 22:51:39.030 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:51:39.046 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:51:39.052 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 22:51:39.054 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 22:51:39.070 +01:00 [DBG] Connection id "0HMLP5Q8B5F67", Request id "0HMLP5Q8B5F67:00000002": started reading request body.
2022-10-28 22:51:39.076 +01:00 [DBG] Connection id "0HMLP5Q8B5F67", Request id "0HMLP5Q8B5F67:00000002": done reading request body.
2022-10-28 22:51:39.082 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 22:51:39.083 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:51:39.085 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:51:39.086 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:51:39.095 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:51:40.125 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 22:51:40.180 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 22:51:40.536 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 22:51:40.582 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:51:40.663 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (77ms).
2022-10-28 22:51:40.672 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:51:40.865 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:51:40.882 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:51:40.977 +01:00 [INF] Executed DbCommand (100ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:51:41.028 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:51:41.082 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:51:41.089 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:51:41.098 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:51:41.108 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 22:51:41.116 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 22:51:41.139 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:51:41.141 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 22:51:41.149 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:51:41.153 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:51:41.155 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:51:41.174 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:51:41.187 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:51:41.196 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:51:41.200 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:51:41.377 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:51:41.403 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:51:41.413 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:51:41.417 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:51:41.442 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 22:51:41.466 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:51:41.468 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:51:41.473 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 22:51:41.484 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 22:51:41.537 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:51:41.539 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 22:51:41.542 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 22:51:41.553 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 22:51:41.575 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 22:51:41.584 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:51:41.592 +01:00 [DBG] Committing transaction.
2022-10-28 22:51:41.606 +01:00 [DBG] Committed transaction.
2022-10-28 22:51:41.613 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:51:41.615 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:51:41.620 +01:00 [DBG] Disposing transaction.
2022-10-28 22:51:41.635 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:51:41.641 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 22:51:41.651 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 22:51:41.655 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 22:51:41.656 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 22:51:41.657 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 22:51:41.659 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 22:51:41.660 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 22:51:41.680 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2884.2489ms
2022-10-28 22:51:41.684 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:51:41.692 +01:00 [DBG] Connection id "0HMLP5Q8B5F67" completed keep alive response.
2022-10-28 22:51:41.699 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 22:51:41.705 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3206.1726ms
2022-10-28 22:54:35.036 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 22:54:35.105 +01:00 [DBG] Hosting starting
2022-10-28 22:54:35.150 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 22:54:35.155 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 22:54:35.160 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 22:54:35.162 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 22:54:35.167 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 22:54:35.173 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 22:54:35.174 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 22:54:35.183 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 22:54:35.186 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:54:35.190 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 22:54:35.192 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 22:54:35.197 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 22:54:35.200 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 22:54:35.204 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 22:54:35.206 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 22:54:35.336 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 22:54:35.396 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 22:54:35.398 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 22:54:35.399 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 22:54:35.402 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 22:54:35.403 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 22:54:35.406 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 22:54:35.407 +01:00 [INF] Hosting environment: Development
2022-10-28 22:54:35.414 +01:00 [DBG] Connection id "0HMLP5S0CH3FC" received FIN.
2022-10-28 22:54:35.415 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 22:54:35.418 +01:00 [DBG] Hosting started
2022-10-28 22:54:35.427 +01:00 [DBG] Connection id "0HMLP5S0CH3FC" accepted.
2022-10-28 22:54:35.430 +01:00 [DBG] Connection id "0HMLP5S0CH3FC" started.
2022-10-28 22:54:35.453 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:54:35.540 +01:00 [DBG] Connection id "0HMLP5S0CH3FC" stopped.
2022-10-28 22:54:35.551 +01:00 [DBG] Connection id "0HMLP5S0CH3FC" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:54:40.793 +01:00 [DBG] Connection id "0HMLP5S0CH3FD" accepted.
2022-10-28 22:54:40.795 +01:00 [DBG] Connection id "0HMLP5S0CH3FD" started.
2022-10-28 22:54:40.831 +01:00 [DBG] Connection id "0HMLP5S0CH3FD" received FIN.
2022-10-28 22:54:40.840 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 22:54:40.848 +01:00 [DBG] Connection id "0HMLP5S0CH3FD" stopped.
2022-10-28 22:54:40.850 +01:00 [DBG] Connection id "0HMLP5S0CH3FD" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 22:54:47.313 +01:00 [DBG] Connection id "0HMLP5S0CH3FE" accepted.
2022-10-28 22:54:47.314 +01:00 [DBG] Connection id "0HMLP5S0CH3FE" started.
2022-10-28 22:54:47.339 +01:00 [DBG] Connection 0HMLP5S0CH3FE established using the following protocol: "Tls13"
2022-10-28 22:54:47.377 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 22:54:47.397 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 22:54:47.439 +01:00 [DBG] POST requests are not supported
2022-10-28 22:54:47.468 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 22:54:47.475 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 22:54:47.482 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:54:47.555 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:54:47.561 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 22:54:47.564 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:54:47.601 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 22:54:47.607 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 22:54:47.609 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 22:54:47.610 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:54:47.614 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 22:54:47.616 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 22:54:47.619 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:54:47.799 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 22:54:47.848 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 22:54:47.863 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:54:47.867 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 22:54:47.870 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 22:54:47.889 +01:00 [DBG] Connection id "0HMLP5S0CH3FE", Request id "0HMLP5S0CH3FE:00000002": started reading request body.
2022-10-28 22:54:47.896 +01:00 [DBG] Connection id "0HMLP5S0CH3FE", Request id "0HMLP5S0CH3FE:00000002": done reading request body.
2022-10-28 22:54:47.902 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 22:54:47.905 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:54:47.907 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:54:47.909 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 22:54:47.917 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 22:54:49.048 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 22:54:49.107 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 22:54:49.439 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 22:54:49.483 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:54:49.559 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (72ms).
2022-10-28 22:54:49.568 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:54:49.747 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:54:49.763 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:54:49.854 +01:00 [INF] Executed DbCommand (96ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 22:54:49.900 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:54:49.954 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:54:49.961 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:54:49.970 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:54:49.979 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 22:54:49.986 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 22:54:50.010 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:54:50.012 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-10-28 22:54:50.020 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:54:50.023 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:54:50.026 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:54:50.044 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 22:54:50.059 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:54:50.069 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:54:50.072 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:54:50.237 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:54:50.260 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:54:50.270 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:54:50.274 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 22:54:50.296 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 22:54:50.320 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 22:54:50.322 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:54:50.327 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 22:54:50.337 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 22:54:50.394 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 22:54:50.396 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 22:54:50.398 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 22:54:50.409 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 22:54:50.432 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 22:54:50.441 +01:00 [DBG] A data reader was disposed.
2022-10-28 22:54:50.449 +01:00 [DBG] Committing transaction.
2022-10-28 22:54:50.463 +01:00 [DBG] Committed transaction.
2022-10-28 22:54:50.469 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 22:54:50.472 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 22:54:50.478 +01:00 [DBG] Disposing transaction.
2022-10-28 22:54:50.493 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 22:54:50.499 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 22:54:50.510 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 22:54:50.515 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 22:54:50.517 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 22:54:50.518 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 22:54:50.519 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 22:54:50.521 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 22:54:50.543 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2921.0061ms
2022-10-28 22:54:50.547 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 22:54:50.554 +01:00 [DBG] Connection id "0HMLP5S0CH3FE" completed keep alive response.
2022-10-28 22:54:50.559 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 22:54:50.564 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3191.5931ms
2022-10-28 23:22:14.185 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-10-28 23:22:14.276 +01:00 [DBG] Hosting starting
2022-10-28 23:22:14.318 +01:00 [INF] User profile is available. Using 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-28 23:22:14.322 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-3152f07b-30a7-4e78-998a-7fbe0c511d49.xml'.
2022-10-28 23:22:14.327 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-39e65c09-2014-4c2e-81b8-f002f10ef3e8.xml'.
2022-10-28 23:22:14.328 +01:00 [DBG] Reading data from file 'C:\Users\ivo_m\AppData\Local\ASP.NET\DataProtection-Keys\key-6f35828d-18a5-42d0-ae68-7003daa6031c.xml'.
2022-10-28 23:22:14.334 +01:00 [DBG] Found key {3152f07b-30a7-4e78-998a-7fbe0c511d49}.
2022-10-28 23:22:14.340 +01:00 [DBG] Found key {39e65c09-2014-4c2e-81b8-f002f10ef3e8}.
2022-10-28 23:22:14.341 +01:00 [DBG] Found key {6f35828d-18a5-42d0-ae68-7003daa6031c}.
2022-10-28 23:22:14.349 +01:00 [DBG] Considering key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} with expiration date 2023-01-02 15:04:49Z as default key.
2022-10-28 23:22:14.352 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 23:22:14.355 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-10-28 23:22:14.357 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-10-28 23:22:14.362 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-10-28 23:22:14.365 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-10-28 23:22:14.369 +01:00 [DBG] Using key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} as the default key.
2022-10-28 23:22:14.370 +01:00 [DBG] Key ring with default key {39e65c09-2014-4c2e-81b8-f002f10ef3e8} was loaded during application startup.
2022-10-28 23:22:14.606 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 3907BD28E3DCA40F44EB5F54AD4AF0BF61FE96F5)
2022-10-28 23:22:14.656 +01:00 [INF] Now listening on: https://localhost:7074
2022-10-28 23:22:14.657 +01:00 [INF] Now listening on: http://localhost:5074
2022-10-28 23:22:14.658 +01:00 [DBG] Loaded hosting startup assembly SimpleBank.AcctManage.API
2022-10-28 23:22:14.661 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-10-28 23:22:14.663 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-10-28 23:22:14.664 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-28 23:22:14.666 +01:00 [INF] Hosting environment: Development
2022-10-28 23:22:14.668 +01:00 [INF] Content root path: C:\_github\SimpleBankAPI\APP\SimpleBank.AcctManage\SimpleBank.AcctManage.API\
2022-10-28 23:22:14.670 +01:00 [DBG] Hosting started
2022-10-28 23:22:14.872 +01:00 [DBG] Connection id "0HMLP6BEUCCBD" accepted.
2022-10-28 23:22:14.874 +01:00 [DBG] Connection id "0HMLP6BEUCCBE" accepted.
2022-10-28 23:22:14.876 +01:00 [DBG] Connection id "0HMLP6BEUCCBE" started.
2022-10-28 23:22:14.876 +01:00 [DBG] Connection id "0HMLP6BEUCCBD" started.
2022-10-28 23:22:14.932 +01:00 [DBG] Connection id "0HMLP6BEUCCBD" received FIN.
2022-10-28 23:22:14.932 +01:00 [DBG] Connection id "0HMLP6BEUCCBE" received FIN.
2022-10-28 23:22:14.954 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 23:22:14.961 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 23:22:15.036 +01:00 [DBG] Connection id "0HMLP6BEUCCBD" stopped.
2022-10-28 23:22:15.036 +01:00 [DBG] Connection id "0HMLP6BEUCCBE" stopped.
2022-10-28 23:22:15.039 +01:00 [DBG] Connection id "0HMLP6BEUCCBD" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 23:22:15.039 +01:00 [DBG] Connection id "0HMLP6BEUCCBE" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 23:22:15.431 +01:00 [DBG] Connection id "0HMLP6BEUCCBF" accepted.
2022-10-28 23:22:15.433 +01:00 [DBG] Connection id "0HMLP6BEUCCBF" started.
2022-10-28 23:22:15.466 +01:00 [DBG] Connection id "0HMLP6BEUCCBF" received FIN.
2022-10-28 23:22:15.471 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.
 ---> System.ComponentModel.Win32Exception (0x80090327): An unknown error occurred while processing the certificate.
   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-10-28 23:22:15.478 +01:00 [DBG] Connection id "0HMLP6BEUCCBF" stopped.
2022-10-28 23:22:15.480 +01:00 [DBG] Connection id "0HMLP6BEUCCBF" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-10-28 23:22:23.286 +01:00 [DBG] Connection id "0HMLP6BEUCCBG" accepted.
2022-10-28 23:22:23.288 +01:00 [DBG] Connection id "0HMLP6BEUCCBG" started.
2022-10-28 23:22:23.309 +01:00 [DBG] Connection 0HMLP6BEUCCBG established using the following protocol: "Tls13"
2022-10-28 23:22:23.346 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 -
2022-10-28 23:22:23.366 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-10-28 23:22:23.420 +01:00 [DBG] POST requests are not supported
2022-10-28 23:22:23.451 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/login'
2022-10-28 23:22:23.459 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Login' is valid for the request path '/api/v1/auth/login'
2022-10-28 23:22:23.466 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 23:22:23.553 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 23:22:23.557 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-10-28 23:22:23.561 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 23:22:23.593 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse]] Login(SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 23:22:23.597 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 23:22:23.598 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 23:22:23.600 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 23:22:23.603 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 23:22:23.604 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 23:22:23.607 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 23:22:23.834 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-10-28 23:22:23.872 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 23:22:23.888 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 23:22:23.894 +01:00 [DBG] Attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' using the name '' in request data ...
2022-10-28 23:22:23.896 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 23:22:23.913 +01:00 [DBG] Connection id "0HMLP6BEUCCBG", Request id "0HMLP6BEUCCBG:00000002": started reading request body.
2022-10-28 23:22:23.919 +01:00 [DBG] Connection id "0HMLP6BEUCCBG", Request id "0HMLP6BEUCCBG:00000002": done reading request body.
2022-10-28 23:22:23.924 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'
2022-10-28 23:22:23.927 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 23:22:23.928 +01:00 [DBG] Done attempting to bind parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 23:22:23.930 +01:00 [DBG] Attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest' ...
2022-10-28 23:22:23.938 +01:00 [DBG] Done attempting to validate the bound parameter 'loginUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LoginUserRequest'.
2022-10-28 23:22:24.980 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 23:22:25.035 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Username == __username_0)'
2022-10-28 23:22:25.377 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required Index MaxLength(320), 2], [Property: User.Fullname (string) Required, 3], [Property: User.Password (byte[]) Required, 4], [Property: User.PasswordChangedAt (DateTime?) ValueGenerated.OnAdd, 5], [Property: User.Salt (byte[]) Required, 6], [Property: User.Username (string) Required Index, 7] }
        SELECT TOP(1) u.user_id, u.created_at, u.email, u.fullname, u.Password, u.password_changed_at, u.salt, u.username
        FROM SB-operational.Users AS u
        WHERE u.username == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2022-10-28 23:22:25.424 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 23:22:25.495 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (68ms).
2022-10-28 23:22:25.504 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 23:22:25.702 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 23:22:25.718 +01:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 23:22:25.813 +01:00 [INF] Executed DbCommand (100ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_id, u.created_at, u.email, u.fullname, u."Password", u.password_changed_at, u.salt, u.username
FROM "SB-operational"."Users" AS u
WHERE u.username = @__username_0
LIMIT 1
2022-10-28 23:22:25.864 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 23:22:25.914 +01:00 [DBG] A data reader was disposed.
2022-10-28 23:22:25.919 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 23:22:25.927 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 23:22:25.935 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(u => u.UserId == __userId_0)'
2022-10-28 23:22:25.941 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_id == @__userId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 23:22:25.963 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 23:22:25.964 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 23:22:25.972 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 23:22:25.976 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 23:22:25.981 +01:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 23:22:26.004 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_id = @__userId_0
LIMIT 1
2022-10-28 23:22:26.018 +01:00 [DBG] A data reader was disposed.
2022-10-28 23:22:26.028 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 23:22:26.032 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 23:22:26.210 +01:00 [DBG] 'SimpleBankDbContext' generated a temporary value for the property 'Id.UserToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 23:22:26.235 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 23:22:26.244 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 23:22:26.248 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 23:22:26.271 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 23:22:26.295 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 23:22:26.297 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 23:22:26.301 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 23:22:26.311 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 23:22:26.370 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 23:22:26.372 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 23:22:26.378 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 23:22:26.391 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "SB-auth"."UserTokens" (access_token, access_token_expires_at, created_at, refresh_token, refresh_token_expires_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING user_token_id;
2022-10-28 23:22:26.420 +01:00 [DBG] The foreign key property 'UserToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-10-28 23:22:26.429 +01:00 [DBG] A data reader was disposed.
2022-10-28 23:22:26.437 +01:00 [DBG] Committing transaction.
2022-10-28 23:22:26.453 +01:00 [DBG] Committed transaction.
2022-10-28 23:22:26.460 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 23:22:26.462 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 23:22:26.469 +01:00 [DBG] Disposing transaction.
2022-10-28 23:22:26.485 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 23:22:26.492 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 23:22:26.502 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 23:22:26.506 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 23:22:26.507 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 23:22:26.508 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 23:22:26.509 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-10-28 23:22:26.511 +01:00 [INF] Executing OkObjectResult, writing value of type 'SimpleBank.AcctManage.API.DTModels.v1.Responses.LoginUserResponse'.
2022-10-28 23:22:26.534 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API) in 2923.7547ms
2022-10-28 23:22:26.538 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Login (SimpleBank.AcctManage.API)'
2022-10-28 23:22:26.545 +01:00 [DBG] Connection id "0HMLP6BEUCCBG" completed keep alive response.
2022-10-28 23:22:26.550 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 23:22:26.555 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/login application/json;+charset=utf-8 - - 200 - application/json;+charset=utf-8 3212.5382ms
2022-10-28 23:24:08.666 +01:00 [DBG] Connection id "0HMLP6BEUCCBG" received FIN.
2022-10-28 23:24:09.356 +01:00 [DBG] Connection id "0HMLP6BEUCCBG" sending FIN because: "The client closed the connection."
2022-10-28 23:24:09.359 +01:00 [DBG] Connection id "0HMLP6BEUCCBG" disconnecting.
2022-10-28 23:24:09.362 +01:00 [DBG] Connection id "0HMLP6BEUCCBG" stopped.
2022-10-28 23:24:18.131 +01:00 [DBG] Connection id "0HMLP6BEUCCBH" accepted.
2022-10-28 23:24:18.132 +01:00 [DBG] Connection id "0HMLP6BEUCCBH" started.
2022-10-28 23:24:18.164 +01:00 [DBG] Connection 0HMLP6BEUCCBH established using the following protocol: "Tls13"
2022-10-28 23:24:18.166 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7074/api/v1/auth/logout application/json;+charset=utf-8 -
2022-10-28 23:24:18.167 +01:00 [DBG] POST requests are not supported
2022-10-28 23:24:18.169 +01:00 [DBG] 1 candidate(s) found for the request path '/api/v1/auth/logout'
2022-10-28 23:24:18.170 +01:00 [DBG] Endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Logout (SimpleBank.AcctManage.API)' with route pattern 'api/v{version:apiVersion}/Auth/Logout' is valid for the request path '/api/v1/auth/logout'
2022-10-28 23:24:18.172 +01:00 [DBG] Request matched endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Logout (SimpleBank.AcctManage.API)'
2022-10-28 23:24:18.251 +01:00 [DBG] Successfully validated the token.
2022-10-28 23:24:18.254 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 23:24:18.255 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-10-28 23:24:18.260 +01:00 [DBG] Authorization was successful.
2022-10-28 23:24:18.262 +01:00 [INF] Executing endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Logout (SimpleBank.AcctManage.API)'
2022-10-28 23:24:18.266 +01:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Logout(SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest) on controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API).
2022-10-28 23:24:18.268 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-10-28 23:24:18.270 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-10-28 23:24:18.271 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 23:24:18.273 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-10-28 23:24:18.275 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2022-10-28 23:24:18.277 +01:00 [DBG] Executing controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 23:24:18.278 +01:00 [DBG] Executed controller factory for controller SimpleBank.AcctManage.API.Controllers.v1.AuthController (SimpleBank.AcctManage.API)
2022-10-28 23:24:18.285 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest' ...
2022-10-28 23:24:18.286 +01:00 [DBG] Attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest' using the name '' in request data ...
2022-10-28 23:24:18.287 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-10-28 23:24:18.289 +01:00 [DBG] Connection id "0HMLP6BEUCCBH", Request id "0HMLP6BEUCCBH:00000002": started reading request body.
2022-10-28 23:24:18.291 +01:00 [DBG] Connection id "0HMLP6BEUCCBH", Request id "0HMLP6BEUCCBH:00000002": done reading request body.
2022-10-28 23:24:18.293 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest'
2022-10-28 23:24:18.294 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest'.
2022-10-28 23:24:18.296 +01:00 [DBG] Done attempting to bind parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest'.
2022-10-28 23:24:18.297 +01:00 [DBG] Attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest' ...
2022-10-28 23:24:18.300 +01:00 [DBG] Done attempting to validate the bound parameter 'logoutUserRequest' of type 'SimpleBank.AcctManage.API.DTModels.v1.Requests.LogoutUserRequest'.
2022-10-28 23:24:18.341 +01:00 [INF] Entity Framework Core 6.0.7 initialized 'SimpleBankDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.7+5b98e4b74de93b590b44aef8dd7967c03acc433c' with options: None
2022-10-28 23:24:18.344 +01:00 [DBG] Compiling query expression: 
'DbSet<UserToken>()
    .FirstOrDefault(x => x.Id == __userTokenId_0)'
2022-10-28 23:24:18.348 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserToken>(
    asyncEnumerable: new SingleQueryingEnumerable<UserToken>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserToken.AccessToken (string) Required, 1], [Property: UserToken.AccessTokenExpiresAt (DateTime) Required, 2], [Property: UserToken.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: UserToken.RefreshToken (string) Required, 4], [Property: UserToken.RefreshTokenExpiresAt (DateTime) Required, 5], [Property: UserToken.UserId (Guid) Required, 6] }
            SELECT TOP(1) u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
            FROM SB-auth.UserTokens AS u
            WHERE u.user_token_id == @__userTokenId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserToken>, 
        SimpleBank.AcctManage.Infrastructure.Persistence.SimpleBankDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-10-28 23:24:18.351 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 23:24:18.352 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-10-28 23:24:18.353 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 23:24:18.354 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 23:24:18.355 +01:00 [DBG] Executing DbCommand [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-28 23:24:18.360 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userTokenId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT u.user_token_id, u.access_token, u.access_token_expires_at, u.created_at, u.refresh_token, u.refresh_token_expires_at, u.user_id
FROM "SB-auth"."UserTokens" AS u
WHERE u.user_token_id = @__userTokenId_0
LIMIT 1
2022-10-28 23:24:18.363 +01:00 [DBG] Context 'SimpleBankDbContext' started tracking 'UserToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 23:24:18.365 +01:00 [DBG] A data reader was disposed.
2022-10-28 23:24:18.365 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 23:24:18.367 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 23:24:18.371 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 23:24:18.374 +01:00 [DBG] SaveChanges starting for 'SimpleBankDbContext'.
2022-10-28 23:24:18.375 +01:00 [DBG] DetectChanges starting for 'SimpleBankDbContext'.
2022-10-28 23:24:18.376 +01:00 [DBG] DetectChanges completed for 'SimpleBankDbContext'.
2022-10-28 23:24:18.377 +01:00 [DBG] Opening connection to database 'SimpleBank' on server ''.
2022-10-28 23:24:18.379 +01:00 [DBG] Opened connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 23:24:18.380 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-10-28 23:24:18.381 +01:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-10-28 23:24:18.386 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-10-28 23:24:18.388 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-10-28 23:24:18.389 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 23:24:18.398 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "SB-auth"."UserTokens" SET access_token = @p0, access_token_expires_at = @p1, created_at = @p2, refresh_token = @p3, refresh_token_expires_at = @p4, user_id = @p5
WHERE user_token_id = @p6;
2022-10-28 23:24:18.400 +01:00 [DBG] A data reader was disposed.
2022-10-28 23:24:18.401 +01:00 [DBG] Committing transaction.
2022-10-28 23:24:18.404 +01:00 [DBG] Committed transaction.
2022-10-28 23:24:18.405 +01:00 [DBG] Closing connection to database 'SimpleBank' on server 'tcp://localhost:5432'.
2022-10-28 23:24:18.406 +01:00 [DBG] Closed connection to database 'SimpleBank' on server ''.
2022-10-28 23:24:18.408 +01:00 [DBG] Disposing transaction.
2022-10-28 23:24:18.409 +01:00 [DBG] An entity of type 'UserToken' tracked by 'SimpleBankDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-10-28 23:24:18.411 +01:00 [DBG] SaveChanges completed for 'SimpleBankDbContext' with 1 entities written to the database.
2022-10-28 23:24:18.415 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-10-28 23:24:18.418 +01:00 [DBG] No information found on request to perform content negotiation.
2022-10-28 23:24:18.418 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-10-28 23:24:18.419 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-10-28 23:24:18.420 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2022-10-28 23:24:18.422 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2022-10-28 23:24:18.424 +01:00 [INF] Executed action SimpleBank.AcctManage.API.Controllers.v1.AuthController.Logout (SimpleBank.AcctManage.API) in 147.2044ms
2022-10-28 23:24:18.426 +01:00 [INF] Executed endpoint 'SimpleBank.AcctManage.API.Controllers.v1.AuthController.Logout (SimpleBank.AcctManage.API)'
2022-10-28 23:24:18.428 +01:00 [DBG] Connection id "0HMLP6BEUCCBH" completed keep alive response.
2022-10-28 23:24:18.430 +01:00 [DBG] 'SimpleBankDbContext' disposed.
2022-10-28 23:24:18.431 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7074/api/v1/auth/logout application/json;+charset=utf-8 - - 200 - text/plain;+charset=utf-8 264.9446ms
